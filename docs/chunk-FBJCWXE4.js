import{a as ga,b as va,e as Cr,k as _a,m as lu,n as Ca,o as ba}from"./chunk-TE4P23CZ.js";import{A as ra,Ba as aa,Bb as pa,Da as al,Ea as Ho,F as sa,Hb as fa,I as $n,Ic as _r,R as ll,Sb as ma,V as zn,X as la,Xa as da,Ya as ri,ab as ua,c as Hn,ca as oi,da as on,f as mr,fa as Bn,ha as Rt,hc as Wn,j as ia,lc as dl,n as Li,na as nn,oa as rn,ob as ca,p as lo,pb as ha,r as oa,s as nl,vb as sn,w as rl,wb as ln,x as sl,xb as vr,y as na,za as gr}from"./chunk-WSRERBCD.js";import{a as P,b as Me,c as ta,e as su,f as fr,g as tn,h as Oi,j as Ot}from"./chunk-ZC6IZ3YH.js";var Sa=fr(()=>{"use strict"});var du,hl=su(()=>{du=ta({"./locale/locale.js":()=>Sa()})});var bo=fr((pl,an)=>{"use strict";hl();(function(r,e){typeof pl=="object"&&typeof an<"u"?an.exports=e():typeof define=="function"&&define.amd?define(e):r.moment=e()})(pl,function(){"use strict";var r;function e(){return r.apply(null,arguments)}function t(c){return c instanceof Array||Object.prototype.toString.call(c)==="[object Array]"}function i(c){return c!=null&&Object.prototype.toString.call(c)==="[object Object]"}function o(c,g){return Object.prototype.hasOwnProperty.call(c,g)}function s(c){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(c).length===0;for(var g in c)if(o(c,g))return;return 1}function l(c){return c===void 0}function a(c){return typeof c=="number"||Object.prototype.toString.call(c)==="[object Number]"}function d(c){return c instanceof Date||Object.prototype.toString.call(c)==="[object Date]"}function u(c,g){for(var v=[],w=c.length,y=0;y<w;++y)v.push(g(c[y],y));return v}function p(c,g){for(var v in g)o(g,v)&&(c[v]=g[v]);return o(g,"toString")&&(c.toString=g.toString),o(g,"valueOf")&&(c.valueOf=g.valueOf),c}function f(c,g,v,w){return fe(c,g,v,w,!0).utc()}function m(c){return c._pf==null&&(c._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),c._pf}function _(c){if(c._isValid==null){var g=m(c),v=b.call(g.parsedDateParts,function(w){return w!=null}),v=!isNaN(c._d.getTime())&&g.overflow<0&&!g.empty&&!g.invalidEra&&!g.invalidMonth&&!g.invalidWeekday&&!g.weekdayMismatch&&!g.nullInput&&!g.invalidFormat&&!g.userInvalidated&&(!g.meridiem||g.meridiem&&v);if(c._strict&&(v=v&&g.charsLeftOver===0&&g.unusedTokens.length===0&&g.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(c))return v;c._isValid=v}return c._isValid}function C(c){var g=f(NaN);return c!=null?p(m(g),c):m(g).userInvalidated=!0,g}var b=Array.prototype.some||function(c){for(var g=Object(this),v=g.length>>>0,w=0;w<v;w++)if(w in g&&c.call(this,g[w],w,g))return!0;return!1},E=e.momentProperties=[],x=!1;function R(c,g){var v,w,y,M=E.length;if(l(g._isAMomentObject)||(c._isAMomentObject=g._isAMomentObject),l(g._i)||(c._i=g._i),l(g._f)||(c._f=g._f),l(g._l)||(c._l=g._l),l(g._strict)||(c._strict=g._strict),l(g._tzm)||(c._tzm=g._tzm),l(g._isUTC)||(c._isUTC=g._isUTC),l(g._offset)||(c._offset=g._offset),l(g._pf)||(c._pf=m(g)),l(g._locale)||(c._locale=g._locale),0<M)for(v=0;v<M;v++)l(y=g[w=E[v]])||(c[w]=y);return c}function L(c){R(this,c),this._d=new Date(c._d!=null?c._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),x===!1&&(x=!0,e.updateOffset(this),x=!1)}function z(c){return c instanceof L||c!=null&&c._isAMomentObject!=null}function B(c){e.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+c)}function G(c,g){var v=!0;return p(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,c),v){for(var w,y,M=[],U=arguments.length,q=0;q<U;q++){if(w="",typeof arguments[q]=="object"){for(y in w+=`
[`+q+"] ",arguments[0])o(arguments[0],y)&&(w+=y+": "+arguments[0][y]+", ");w=w.slice(0,-2)}else w=arguments[q];M.push(w)}B(c+`
Arguments: `+Array.prototype.slice.call(M).join("")+`
`+new Error().stack),v=!1}return g.apply(this,arguments)},g)}var V={};function H(c,g){e.deprecationHandler!=null&&e.deprecationHandler(c,g),V[c]||(B(g),V[c]=!0)}function K(c){return typeof Function<"u"&&c instanceof Function||Object.prototype.toString.call(c)==="[object Function]"}function oe(c,g){var v,w=p({},c);for(v in g)o(g,v)&&(i(c[v])&&i(g[v])?(w[v]={},p(w[v],c[v]),p(w[v],g[v])):g[v]!=null?w[v]=g[v]:delete w[v]);for(v in c)o(c,v)&&!o(g,v)&&i(c[v])&&(w[v]=p({},w[v]));return w}function ne(c){c!=null&&this.set(c)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Pe=Object.keys||function(c){var g,v=[];for(g in c)o(c,g)&&v.push(g);return v};function He(c,g,v){var w=""+Math.abs(c);return(0<=c?v?"+":"":"-")+Math.pow(10,Math.max(0,g-w.length)).toString().substr(1)+w}var xe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Xe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ge={},lt={};function Y(c,g,v,w){var y=typeof w=="string"?function(){return this[w]()}:w;c&&(lt[c]=y),g&&(lt[g[0]]=function(){return He(y.apply(this,arguments),g[1],g[2])}),v&&(lt[v]=function(){return this.localeData().ordinal(y.apply(this,arguments),c)})}function De(c,g){return c.isValid()?(g=$e(g,c.localeData()),ge[g]=ge[g]||function(v){for(var w,y=v.match(xe),M=0,U=y.length;M<U;M++)lt[y[M]]?y[M]=lt[y[M]]:y[M]=(w=y[M]).match(/\[[\s\S]/)?w.replace(/^\[|\]$/g,""):w.replace(/\\/g,"");return function(q){for(var de="",te=0;te<U;te++)de+=K(y[te])?y[te].call(q,v):y[te];return de}}(g),ge[g](c)):c.localeData().invalidDate()}function $e(c,g){var v=5;function w(y){return g.longDateFormat(y)||y}for(Xe.lastIndex=0;0<=v&&Xe.test(c);)c=c.replace(Xe,w),Xe.lastIndex=0,--v;return c}var ze={};function Ee(c,g){var v=c.toLowerCase();ze[v]=ze[v+"s"]=ze[g]=c}function Te(c){return typeof c=="string"?ze[c]||ze[c.toLowerCase()]:void 0}function yt(c){var g,v,w={};for(v in c)o(c,v)&&(g=Te(v))&&(w[g]=c[v]);return w}var _t={};function Je(c,g){_t[c]=g}function Ge(c){return c%4==0&&c%100!=0||c%400==0}function Be(c){return c<0?Math.ceil(c)||0:Math.floor(c)}function ve(g){var g=+g,v=0;return v=g!=0&&isFinite(g)?Be(g):v}function Pt(c,g){return function(v){return v!=null?(Bt(this,c,v),e.updateOffset(this,g),this):Ct(this,c)}}function Ct(c,g){return c.isValid()?c._d["get"+(c._isUTC?"UTC":"")+g]():NaN}function Bt(c,g,v){c.isValid()&&!isNaN(v)&&(g==="FullYear"&&Ge(c.year())&&c.month()===1&&c.date()===29?(v=ve(v),c._d["set"+(c._isUTC?"UTC":"")+g](v,c.month(),$t(v,c.month()))):c._d["set"+(c._isUTC?"UTC":"")+g](v))}var j=/\d/,ke=/\d\d/,Ii=/\d{3}/,ro=/\d{4}/,_o=/[+-]?\d{6}/,Ue=/\d\d?/,Gt=/\d\d\d\d?/,Vt=/\d\d\d\d\d\d?/,Dt=/\d{1,3}/,Co=/\d{1,4}/,me=/[+-]?\d{1,6}/,Qt=/\d+/,zi=/[+-]?\d+/,Po=/Z|[+-]\d\d:?\d\d/gi,Pi=/Z|[+-]\d\d(?::?\d\d)?/gi,Ut=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function re(c,g,v){ae[c]=K(g)?g:function(w,y){return w&&v?v:g}}function Di(c,g){return o(ae,c)?ae[c](g._strict,g._locale):new RegExp(J(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(v,w,y,M,U){return w||y||M||U})))}function J(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ae={},Se={};function he(c,g){var v,w,y=g;for(typeof c=="string"&&(c=[c]),a(g)&&(y=function(M,U){U[g]=ve(M)}),w=c.length,v=0;v<w;v++)Se[c[v]]=y}function ot(c,g){he(c,function(v,w,y,M){y._w=y._w||{},g(v,y._w,y,M)})}var Ye,qe=0,dt=1,xt=2,Oe=3,Ht=4,Yt=5,jt=6,ci=7,wi=8;function $t(c,g){if(isNaN(c)||isNaN(g))return NaN;var v=(g%(v=12)+v)%v;return c+=(g-v)/12,v==1?Ge(c)?29:28:31-v%7%2}Ye=Array.prototype.indexOf||function(c){for(var g=0;g<this.length;++g)if(this[g]===c)return g;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(c){return this.localeData().monthsShort(this,c)}),Y("MMMM",0,0,function(c){return this.localeData().months(this,c)}),Ee("month","M"),Je("month",8),re("M",Ue),re("MM",Ue,ke),re("MMM",function(c,g){return g.monthsShortRegex(c)}),re("MMMM",function(c,g){return g.monthsRegex(c)}),he(["M","MM"],function(c,g){g[dt]=ve(c)-1}),he(["MMM","MMMM"],function(c,g,v,w){w=v._locale.monthsParse(c,w,v._strict),w!=null?g[dt]=w:m(v).invalidMonth=c});var Ai="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),co="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),S=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,T=Ut,k=Ut;function W(c,g){var v;if(c.isValid()){if(typeof g=="string"){if(/^\d+$/.test(g))g=ve(g);else if(!a(g=c.localeData().monthsParse(g)))return}v=Math.min(c.date(),$t(c.year(),g)),c._d["set"+(c._isUTC?"UTC":"")+"Month"](g,v)}}function Q(c){return c!=null?(W(this,c),e.updateOffset(this,!0),this):Ct(this,"Month")}function se(){function c(U,q){return q.length-U.length}for(var g,v=[],w=[],y=[],M=0;M<12;M++)g=f([2e3,M]),v.push(this.monthsShort(g,"")),w.push(this.months(g,"")),y.push(this.months(g,"")),y.push(this.monthsShort(g,""));for(v.sort(c),w.sort(c),y.sort(c),M=0;M<12;M++)v[M]=J(v[M]),w[M]=J(w[M]);for(M=0;M<24;M++)y[M]=J(y[M]);this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+w.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+v.join("|")+")","i")}function Re(c){return Ge(c)?366:365}Y("Y",0,0,function(){var c=this.year();return c<=9999?He(c,4):"+"+c}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),Ee("year","y"),Je("year",1),re("Y",zi),re("YY",Ue,ke),re("YYYY",Co,ro),re("YYYYY",me,_o),re("YYYYYY",me,_o),he(["YYYYY","YYYYYY"],qe),he("YYYY",function(c,g){g[qe]=c.length===2?e.parseTwoDigitYear(c):ve(c)}),he("YY",function(c,g){g[qe]=e.parseTwoDigitYear(c)}),he("Y",function(c,g){g[qe]=parseInt(c,10)}),e.parseTwoDigitYear=function(c){return ve(c)+(68<ve(c)?1900:2e3)};var hr=Pt("FullYear",!0);function pe(c,g,v,w,y,M,U){var q;return c<100&&0<=c?(q=new Date(c+400,g,v,w,y,M,U),isFinite(q.getFullYear())&&q.setFullYear(c)):q=new Date(c,g,v,w,y,M,U),q}function Ae(c){var g;return c<100&&0<=c?((g=Array.prototype.slice.call(arguments))[0]=c+400,g=new Date(Date.UTC.apply(null,g)),isFinite(g.getUTCFullYear())&&g.setUTCFullYear(c)):g=new Date(Date.UTC.apply(null,arguments)),g}function ce(c,g,v){return v=7+g-v,v-(7+Ae(c,0,v).getUTCDay()-g)%7-1}function Ce(c,U,q,w,y){var M,U=1+7*(U-1)+(7+q-w)%7+ce(c,w,y),q=U<=0?Re(M=c-1)+U:U>Re(c)?(M=c+1,U-Re(c)):(M=c,U);return{year:M,dayOfYear:q}}function Ne(c,g,v){var w,y,M=ce(c.year(),g,v),M=Math.floor((c.dayOfYear()-M-1)/7)+1;return M<1?w=M+ct(y=c.year()-1,g,v):M>ct(c.year(),g,v)?(w=M-ct(c.year(),g,v),y=c.year()+1):(y=c.year(),w=M),{week:w,year:y}}function ct(c,y,v){var w=ce(c,y,v),y=ce(c+1,y,v);return(Re(c)-w+y)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),Ee("week","w"),Ee("isoWeek","W"),Je("week",5),Je("isoWeek",5),re("w",Ue),re("ww",Ue,ke),re("W",Ue),re("WW",Ue,ke),ot(["w","ww","W","WW"],function(c,g,v,w){g[w.substr(0,1)]=ve(c)});function bt(c,g){return c.slice(g,7).concat(c.slice(0,g))}Y("d",0,"do","day"),Y("dd",0,0,function(c){return this.localeData().weekdaysMin(this,c)}),Y("ddd",0,0,function(c){return this.localeData().weekdaysShort(this,c)}),Y("dddd",0,0,function(c){return this.localeData().weekdays(this,c)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),Ee("day","d"),Ee("weekday","e"),Ee("isoWeekday","E"),Je("day",11),Je("weekday",11),Je("isoWeekday",11),re("d",Ue),re("e",Ue),re("E",Ue),re("dd",function(c,g){return g.weekdaysMinRegex(c)}),re("ddd",function(c,g){return g.weekdaysShortRegex(c)}),re("dddd",function(c,g){return g.weekdaysRegex(c)}),ot(["dd","ddd","dddd"],function(c,g,v,w){w=v._locale.weekdaysParse(c,w,v._strict),w!=null?g.d=w:m(v).invalidWeekday=c}),ot(["d","e","E"],function(c,g,v,w){g[w]=ve(c)});var Xt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),hi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Bi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Wi=Ut,ho=Ut,Do=Ut;function Si(){function c(te,Fe){return Fe.length-te.length}for(var g,v,w,y=[],M=[],U=[],q=[],de=0;de<7;de++)w=f([2e3,1]).day(de),g=J(this.weekdaysMin(w,"")),v=J(this.weekdaysShort(w,"")),w=J(this.weekdays(w,"")),y.push(g),M.push(v),U.push(w),q.push(g),q.push(v),q.push(w);y.sort(c),M.sort(c),U.sort(c),q.sort(c),this._weekdaysRegex=new RegExp("^("+q.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+U.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+M.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+y.join("|")+")","i")}function ht(){return this.hours()%12||12}function eo(c,g){Y(c,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),g)})}function ft(c,g){return g._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,ht),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+ht.apply(this)+He(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+ht.apply(this)+He(this.minutes(),2)+He(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+He(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+He(this.minutes(),2)+He(this.seconds(),2)}),eo("a",!0),eo("A",!1),Ee("hour","h"),Je("hour",13),re("a",ft),re("A",ft),re("H",Ue),re("h",Ue),re("k",Ue),re("HH",Ue,ke),re("hh",Ue,ke),re("kk",Ue,ke),re("hmm",Gt),re("hmmss",Vt),re("Hmm",Gt),re("Hmmss",Vt),he(["H","HH"],Oe),he(["k","kk"],function(c,g,v){c=ve(c),g[Oe]=c===24?0:c}),he(["a","A"],function(c,g,v){v._isPm=v._locale.isPM(c),v._meridiem=c}),he(["h","hh"],function(c,g,v){g[Oe]=ve(c),m(v).bigHour=!0}),he("hmm",function(c,g,v){var w=c.length-2;g[Oe]=ve(c.substr(0,w)),g[Ht]=ve(c.substr(w)),m(v).bigHour=!0}),he("hmmss",function(c,g,v){var w=c.length-4,y=c.length-2;g[Oe]=ve(c.substr(0,w)),g[Ht]=ve(c.substr(w,2)),g[Yt]=ve(c.substr(y)),m(v).bigHour=!0}),he("Hmm",function(c,g,v){var w=c.length-2;g[Oe]=ve(c.substr(0,w)),g[Ht]=ve(c.substr(w))}),he("Hmmss",function(c,g,v){var w=c.length-4,y=c.length-2;g[Oe]=ve(c.substr(0,w)),g[Ht]=ve(c.substr(w,2)),g[Yt]=ve(c.substr(y))}),Ut=Pt("Hours",!0);var pi,it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ai,monthsShort:co,week:{dow:0,doy:6},weekdays:Xt,weekdaysMin:Bi,weekdaysShort:hi,meridiemParse:/[ap]\.?m?\.?/i},et={},Ei={};function po(c){return c&&c.toLowerCase().replace("_","-")}function to(c){for(var g,v,w,y,M=0;M<c.length;){for(g=(y=po(c[M]).split("-")).length,v=(v=po(c[M+1]))?v.split("-"):null;0<g;){if(w=io(y.slice(0,g).join("-")))return w;if(v&&v.length>=g&&function(U,q){for(var de=Math.min(U.length,q.length),te=0;te<de;te+=1)if(U[te]!==q[te])return te;return de}(y,v)>=g-1)break;g--}M++}return pi}function io(c){var g;if(et[c]===void 0&&typeof an<"u"&&an&&an.exports&&c.match("^[^/\\\\]*$")!=null)try{g=pi._abbr,du("./locale/"+c),fi(g)}catch{et[c]=null}return et[c]}function fi(c,g){return c&&((g=l(g)?qt(c):yi(c,g))?pi=g:typeof console<"u"&&console.warn&&console.warn("Locale "+c+" not found. Did you forget to load it?")),pi._abbr}function yi(c,g){if(g===null)return delete et[c],null;var v,w=it;if(g.abbr=c,et[c]!=null)H("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),w=et[c]._config;else if(g.parentLocale!=null)if(et[g.parentLocale]!=null)w=et[g.parentLocale]._config;else{if((v=io(g.parentLocale))==null)return Ei[g.parentLocale]||(Ei[g.parentLocale]=[]),Ei[g.parentLocale].push({name:c,config:g}),null;w=v._config}return et[c]=new ne(oe(w,g)),Ei[c]&&Ei[c].forEach(function(y){yi(y.name,y.config)}),fi(c),et[c]}function qt(c){var g;if(!(c=c&&c._locale&&c._locale._abbr?c._locale._abbr:c))return pi;if(!t(c)){if(g=io(c))return g;c=[c]}return to(c)}function mi(c){var g=c._a;return g&&m(c).overflow===-2&&(g=g[dt]<0||11<g[dt]?dt:g[xt]<1||g[xt]>$t(g[qe],g[dt])?xt:g[Oe]<0||24<g[Oe]||g[Oe]===24&&(g[Ht]!==0||g[Yt]!==0||g[jt]!==0)?Oe:g[Ht]<0||59<g[Ht]?Ht:g[Yt]<0||59<g[Yt]?Yt:g[jt]<0||999<g[jt]?jt:-1,m(c)._overflowDayOfYear&&(g<qe||xt<g)&&(g=xt),m(c)._overflowWeeks&&g===-1&&(g=ci),m(c)._overflowWeekday&&g===-1&&(g=wi),m(c).overflow=g),c}var Ao=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ko=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gi=/Z|[+-]\d\d(?::?\d\d)?/,xi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ut=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qo=/^\/?Date\((-?\d+)/i,Fo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Pn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fo(c){var g,v,w,y,M,U,de=c._i,q=Ao.exec(de)||ko.exec(de),de=xi.length,te=ut.length;if(q){for(m(c).iso=!0,g=0,v=de;g<v;g++)if(xi[g][1].exec(q[1])){y=xi[g][0],w=xi[g][2]!==!1;break}if(y==null)c._isValid=!1;else{if(q[3]){for(g=0,v=te;g<v;g++)if(ut[g][1].exec(q[3])){M=(q[2]||" ")+ut[g][0];break}if(M==null)return void(c._isValid=!1)}if(w||M==null){if(q[4]){if(!Gi.exec(q[4]))return void(c._isValid=!1);U="Z"}c._f=y+(M||"")+(U||""),ee(c)}else c._isValid=!1}}else c._isValid=!1}function I(c,g,v,w,y,M){return c=[function(U){U=parseInt(U,10);{if(U<=49)return 2e3+U;if(U<=999)return 1900+U}return U}(c),co.indexOf(g),parseInt(v,10),parseInt(w,10),parseInt(y,10)],M&&c.push(parseInt(M,10)),c}function D(c){var g,v,w,y,M=Fo.exec(c._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));M?(g=I(M[4],M[3],M[2],M[5],M[6],M[7]),v=M[1],w=g,y=c,v&&hi.indexOf(v)!==new Date(w[0],w[1],w[2]).getDay()?(m(y).weekdayMismatch=!0,y._isValid=!1):(c._a=g,c._tzm=(v=M[8],w=M[9],y=M[10],v?Pn[v]:w?0:60*(((v=parseInt(y,10))-(w=v%100))/100)+w),c._d=Ae.apply(null,c._a),c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),m(c).rfc2822=!0)):c._isValid=!1}function F(c,g,v){return c??g??v}function X(c){var g,v,w,y,M,U,q,de,te,Fe,ye,St=[];if(!c._d){for(w=c,y=new Date(e.now()),v=w._useUTC?[y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()]:[y.getFullYear(),y.getMonth(),y.getDate()],c._w&&c._a[xt]==null&&c._a[dt]==null&&((y=(w=c)._w).GG!=null||y.W!=null||y.E!=null?(de=1,te=4,M=F(y.GG,w._a[qe],Ne(be(),1,4).year),U=F(y.W,1),((q=F(y.E,1))<1||7<q)&&(Fe=!0)):(de=w._locale._week.dow,te=w._locale._week.doy,ye=Ne(be(),de,te),M=F(y.gg,w._a[qe],ye.year),U=F(y.w,ye.week),y.d!=null?((q=y.d)<0||6<q)&&(Fe=!0):y.e!=null?(q=y.e+de,(y.e<0||6<y.e)&&(Fe=!0)):q=de),U<1||U>ct(M,de,te)?m(w)._overflowWeeks=!0:Fe!=null?m(w)._overflowWeekday=!0:(ye=Ce(M,U,q,de,te),w._a[qe]=ye.year,w._dayOfYear=ye.dayOfYear)),c._dayOfYear!=null&&(y=F(c._a[qe],v[qe]),(c._dayOfYear>Re(y)||c._dayOfYear===0)&&(m(c)._overflowDayOfYear=!0),Fe=Ae(y,0,c._dayOfYear),c._a[dt]=Fe.getUTCMonth(),c._a[xt]=Fe.getUTCDate()),g=0;g<3&&c._a[g]==null;++g)c._a[g]=St[g]=v[g];for(;g<7;g++)c._a[g]=St[g]=c._a[g]==null?g===2?1:0:c._a[g];c._a[Oe]===24&&c._a[Ht]===0&&c._a[Yt]===0&&c._a[jt]===0&&(c._nextDay=!0,c._a[Oe]=0),c._d=(c._useUTC?Ae:pe).apply(null,St),M=c._useUTC?c._d.getUTCDay():c._d.getDay(),c._tzm!=null&&c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),c._nextDay&&(c._a[Oe]=24),c._w&&c._w.d!==void 0&&c._w.d!==M&&(m(c).weekdayMismatch=!0)}}function ee(c){if(c._f===e.ISO_8601)fo(c);else if(c._f===e.RFC_2822)D(c);else{c._a=[],m(c).empty=!0;for(var g,v,w,y,M,U=""+c._i,q=U.length,de=0,te=$e(c._f,c._locale).match(xe)||[],Fe=te.length,ye=0;ye<Fe;ye++)v=te[ye],(g=(U.match(Di(v,c))||[])[0])&&(0<(w=U.substr(0,U.indexOf(g))).length&&m(c).unusedInput.push(w),U=U.slice(U.indexOf(g)+g.length),de+=g.length),lt[v]?(g?m(c).empty=!1:m(c).unusedTokens.push(v),w=v,M=c,(y=g)!=null&&o(Se,w)&&Se[w](y,M._a,M,w)):c._strict&&!g&&m(c).unusedTokens.push(v);m(c).charsLeftOver=q-de,0<U.length&&m(c).unusedInput.push(U),c._a[Oe]<=12&&m(c).bigHour===!0&&0<c._a[Oe]&&(m(c).bigHour=void 0),m(c).parsedDateParts=c._a.slice(0),m(c).meridiem=c._meridiem,c._a[Oe]=function(St,Mt,Ni){return Ni==null?Mt:St.meridiemHour!=null?St.meridiemHour(Mt,Ni):St.isPM!=null?((St=St.isPM(Ni))&&Mt<12&&(Mt+=12),Mt=St||Mt!==12?Mt:0):Mt}(c._locale,c._a[Oe],c._meridiem),(q=m(c).era)!==null&&(c._a[qe]=c._locale.erasConvertYear(q,c._a[qe])),X(c),mi(c)}}function _e(c){var g,v,w,y=c._i,M=c._f;return c._locale=c._locale||qt(c._l),y===null||M===void 0&&y===""?C({nullInput:!0}):(typeof y=="string"&&(c._i=y=c._locale.preparse(y)),z(y)?new L(mi(y)):(d(y)?c._d=y:t(M)?function(U){var q,de,te,Fe,ye,St,Mt=!1,Ni=U._f.length;if(Ni===0)return m(U).invalidFormat=!0,U._d=new Date(NaN);for(Fe=0;Fe<Ni;Fe++)ye=0,St=!1,q=R({},U),U._useUTC!=null&&(q._useUTC=U._useUTC),q._f=U._f[Fe],ee(q),_(q)&&(St=!0),ye=(ye+=m(q).charsLeftOver)+10*m(q).unusedTokens.length,m(q).score=ye,Mt?ye<te&&(te=ye,de=q):(te==null||ye<te||St)&&(te=ye,de=q,St&&(Mt=!0));p(U,de||q)}(c):M?ee(c):l(M=(y=c)._i)?y._d=new Date(e.now()):d(M)?y._d=new Date(M.valueOf()):typeof M=="string"?(v=y,(g=qo.exec(v._i))!==null?v._d=new Date(+g[1]):(fo(v),v._isValid===!1&&(delete v._isValid,D(v),v._isValid===!1&&(delete v._isValid,v._strict?v._isValid=!1:e.createFromInputFallback(v))))):t(M)?(y._a=u(M.slice(0),function(U){return parseInt(U,10)}),X(y)):i(M)?(g=y)._d||(w=(v=yt(g._i)).day===void 0?v.date:v.day,g._a=u([v.year,v.month,w,v.hour,v.minute,v.second,v.millisecond],function(U){return U&&parseInt(U,10)}),X(g)):a(M)?y._d=new Date(M):e.createFromInputFallback(y),_(c)||(c._d=null),c))}function fe(c,g,v,w,y){var M={};return g!==!0&&g!==!1||(w=g,g=void 0),v!==!0&&v!==!1||(w=v,v=void 0),(i(c)&&s(c)||t(c)&&c.length===0)&&(c=void 0),M._isAMomentObject=!0,M._useUTC=M._isUTC=y,M._l=v,M._i=c,M._f=g,M._strict=w,(y=new L(mi(_e(y=M))))._nextDay&&(y.add(1,"d"),y._nextDay=void 0),y}function be(c,g,v,w){return fe(c,g,v,w,!1)}e.createFromInputFallback=G("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(c){c._d=new Date(c._i+(c._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){},Gt=G("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=be.apply(null,arguments);return this.isValid()&&c.isValid()?c<this?this:c:C()}),Vt=G("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=be.apply(null,arguments);return this.isValid()&&c.isValid()?this<c?this:c:C()});function Ke(c,g){var v,w;if(!(g=g.length===1&&t(g[0])?g[0]:g).length)return be();for(v=g[0],w=1;w<g.length;++w)g[w].isValid()&&!g[w][c](v)||(v=g[w]);return v}var nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function wt(g){var g=yt(g),v=g.year||0,w=g.quarter||0,y=g.month||0,M=g.week||g.isoWeek||0,U=g.day||0,q=g.hour||0,de=g.minute||0,te=g.second||0,Fe=g.millisecond||0;this._isValid=function(ye){var St,Mt,Ni=!1,ol=nt.length;for(St in ye)if(o(ye,St)&&(Ye.call(nt,St)===-1||ye[St]!=null&&isNaN(ye[St])))return!1;for(Mt=0;Mt<ol;++Mt)if(ye[nt[Mt]]){if(Ni)return!1;parseFloat(ye[nt[Mt]])!==ve(ye[nt[Mt]])&&(Ni=!0)}return!0}(g),this._milliseconds=+Fe+1e3*te+6e4*de+1e3*q*60*60,this._days=+U+7*M,this._months=+y+3*w+12*v,this._data={},this._locale=qt(),this._bubble()}function gi(c){return c instanceof wt}function oo(c){return c<0?-1*Math.round(-1*c):Math.round(c)}function Ko(c,g){Y(c,0,0,function(){var v=this.utcOffset(),w="+";return v<0&&(v=-v,w="-"),w+He(~~(v/60),2)+g+He(~~v%60,2)})}Ko("Z",":"),Ko("ZZ",""),re("Z",Pi),re("ZZ",Pi),he(["Z","ZZ"],function(c,g,v){v._useUTC=!0,v._tzm=ki(Pi,c)});var el=/([\+\-]|\d\d)/gi;function ki(c,v){var v=(v||"").match(c);return v===null?null:(v=60*(c=((v[v.length-1]||[])+"").match(el)||["-",0,0])[1]+ve(c[2]))===0?0:c[0]==="+"?v:-v}function Dn(c,g){var v;return g._isUTC?(g=g.clone(),v=(z(c)||d(c)?c:be(c)).valueOf()-g.valueOf(),g._d.setTime(g._d.valueOf()+v),e.updateOffset(g,!1),g):be(c).local()}function An(c){return-Math.round(c._d.getTimezoneOffset())}function At(){return!!this.isValid()&&this._isUTC&&this._offset===0}e.updateOffset=function(){};var mo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tl=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ni(c,g){var v,w=c,y=null;return gi(c)?w={ms:c._milliseconds,d:c._days,M:c._months}:a(c)||!isNaN(+c)?(w={},g?w[g]=+c:w.milliseconds=+c):(y=mo.exec(c))?(v=y[1]==="-"?-1:1,w={y:0,d:ve(y[xt])*v,h:ve(y[Oe])*v,m:ve(y[Ht])*v,s:ve(y[Yt])*v,ms:ve(oo(1e3*y[jt]))*v}):(y=tl.exec(c))?(v=y[1]==="-"?-1:1,w={y:Fi(y[2],v),M:Fi(y[3],v),w:Fi(y[4],v),d:Fi(y[5],v),h:Fi(y[6],v),m:Fi(y[7],v),s:Fi(y[8],v)}):w==null?w={}:typeof w=="object"&&("from"in w||"to"in w)&&(g=function(M,U){var q;return!M.isValid()||!U.isValid()?{milliseconds:0,months:0}:(U=Dn(U,M),M.isBefore(U)?q=kn(M,U):((q=kn(U,M)).milliseconds=-q.milliseconds,q.months=-q.months),q)}(be(w.from),be(w.to)),(w={}).ms=g.milliseconds,w.M=g.months),y=new wt(w),gi(c)&&o(c,"_locale")&&(y._locale=c._locale),gi(c)&&o(c,"_isValid")&&(y._isValid=c._isValid),y}function Fi(c,g){return c=c&&parseFloat(c.replace(",",".")),(isNaN(c)?0:c)*g}function kn(c,g){var v={};return v.months=g.month()-c.month()+12*(g.year()-c.year()),c.clone().add(v.months,"M").isAfter(g)&&--v.months,v.milliseconds=+g-+c.clone().add(v.months,"M"),v}function Fn(c,g){return function(v,w){var y;return w===null||isNaN(+w)||(H(g,"moment()."+g+"(period, number) is deprecated. Please use moment()."+g+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),y=v,v=w,w=y),cr(this,ni(v,w),c),this}}function cr(c,U,v,w){var y=U._milliseconds,M=oo(U._days),U=oo(U._months);c.isValid()&&(w=w==null||w,U&&W(c,Ct(c,"Month")+U*v),M&&Bt(c,"Date",Ct(c,"Date")+M*v),y&&c._d.setTime(c._d.valueOf()+y*v),w&&e.updateOffset(c,M||U))}ni.fn=wt.prototype,ni.invalid=function(){return ni(NaN)},Ai=Fn(1,"add"),Xt=Fn(-1,"subtract");function Mo(c){return typeof c=="string"||c instanceof String}function Mn(c){return z(c)||d(c)||Mo(c)||a(c)||function(g){var v=t(g),w=!1;return v&&(w=g.filter(function(y){return!a(y)&&Mo(g)}).length===0),v&&w}(c)||function(g){var v,w,y=i(g)&&!s(g),M=!1,U=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],q=U.length;for(v=0;v<q;v+=1)w=U[v],M=M||o(g,w);return y&&M}(c)||c==null}function Qo(c,y){if(c.date()<y.date())return-Qo(y,c);var v=12*(y.year()-c.year())+(y.month()-c.month()),w=c.clone().add(v,"months"),y=y-w<0?(y-w)/(w-c.clone().add(v-1,"months")):(y-w)/(c.clone().add(1+v,"months")-w);return-(v+y)||0}function ii(c){return c===void 0?this._locale._abbr:((c=qt(c))!=null&&(this._locale=c),this)}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Bi=G("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(c){return c===void 0?this.localeData():this.locale(c)});function No(){return this._locale}var Nn=126227808e5;function no(c,g){return(c%g+g)%g}function Ln(c,g,v){return c<100&&0<=c?new Date(c+400,g,v)-Nn:new Date(c,g,v).valueOf()}function go(c,g,v){return c<100&&0<=c?Date.UTC(c+400,g,v)-Nn:Date.UTC(c,g,v)}function vi(c,g){return g.erasAbbrRegex(c)}function Zo(){for(var c=[],g=[],v=[],w=[],y=this.eras(),M=0,U=y.length;M<U;++M)g.push(J(y[M].name)),c.push(J(y[M].abbr)),v.push(J(y[M].narrow)),w.push(J(y[M].name)),w.push(J(y[M].abbr)),w.push(J(y[M].narrow));this._erasRegex=new RegExp("^("+w.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+g.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+v.join("|")+")","i")}function Lo(c,g){Y(0,[c,c.length],0,g)}function Vn(c,g,v,w,y){var M;return c==null?Ne(this,w,y).year:(M=ct(c,w,y),(function(U,q,de,te,Fe){return U=Ce(U,q,de,te,Fe),q=Ae(U.year,0,U.dayOfYear),this.year(q.getUTCFullYear()),this.month(q.getUTCMonth()),this.date(q.getUTCDate()),this}).call(this,c,g=M<g?M:g,v,w,y))}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),re("N",vi),re("NN",vi),re("NNN",vi),re("NNNN",function(c,g){return g.erasNameRegex(c)}),re("NNNNN",function(c,g){return g.erasNarrowRegex(c)}),he(["N","NN","NNN","NNNN","NNNNN"],function(c,g,v,w){w=v._locale.erasParse(c,w,v._strict),w?m(v).era=w:m(v).invalidEra=c}),re("y",Qt),re("yy",Qt),re("yyy",Qt),re("yyyy",Qt),re("yo",function(c,g){return g._eraYearOrdinalRegex||Qt}),he(["y","yy","yyy","yyyy"],qe),he(["yo"],function(c,g,v,w){var y;v._locale._eraYearOrdinalRegex&&(y=c.match(v._locale._eraYearOrdinalRegex)),v._locale.eraYearOrdinalParse?g[qe]=v._locale.eraYearOrdinalParse(c,y):g[qe]=parseInt(c,10)}),Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Lo("gggg","weekYear"),Lo("ggggg","weekYear"),Lo("GGGG","isoWeekYear"),Lo("GGGGG","isoWeekYear"),Ee("weekYear","gg"),Ee("isoWeekYear","GG"),Je("weekYear",1),Je("isoWeekYear",1),re("G",zi),re("g",zi),re("GG",Ue,ke),re("gg",Ue,ke),re("GGGG",Co,ro),re("gggg",Co,ro),re("GGGGG",me,_o),re("ggggg",me,_o),ot(["gggg","ggggg","GGGG","GGGGG"],function(c,g,v,w){g[w.substr(0,2)]=ve(c)}),ot(["gg","GG"],function(c,g,v,w){g[w]=e.parseTwoDigitYear(c)}),Y("Q",0,"Qo","quarter"),Ee("quarter","Q"),Je("quarter",7),re("Q",j),he("Q",function(c,g){g[dt]=3*(ve(c)-1)}),Y("D",["DD",2],"Do","date"),Ee("date","D"),Je("date",9),re("D",Ue),re("DD",Ue,ke),re("Do",function(c,g){return c?g._dayOfMonthOrdinalParse||g._ordinalParse:g._dayOfMonthOrdinalParseLenient}),he(["D","DD"],xt),he("Do",function(c,g){g[xt]=ve(c.match(Ue)[0])}),Co=Pt("Date",!0),Y("DDD",["DDDD",3],"DDDo","dayOfYear"),Ee("dayOfYear","DDD"),Je("dayOfYear",4),re("DDD",Dt),re("DDDD",Ii),he(["DDD","DDDD"],function(c,g,v){v._dayOfYear=ve(c)}),Y("m",["mm",2],0,"minute"),Ee("minute","m"),Je("minute",14),re("m",Ue),re("mm",Ue,ke),he(["m","mm"],Ht);var Mi,ro=Pt("Minutes",!1),me=(Y("s",["ss",2],0,"second"),Ee("second","s"),Je("second",15),re("s",Ue),re("ss",Ue,ke),he(["s","ss"],Yt),Pt("Seconds",!1));for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Ee("millisecond","ms"),Je("millisecond",16),re("S",Dt,j),re("SS",Dt,ke),re("SSS",Dt,Ii),Mi="SSSS";Mi.length<=9;Mi+="S")re(Mi,Qt);function A(c,g){g[jt]=ve(1e3*("0."+c))}for(Mi="S";Mi.length<=9;Mi+="S")he(Mi,A);_o=Pt("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName"),j=L.prototype;function Z(c){return c}j.add=Ai,j.calendar=function(v,y){arguments.length===1&&(arguments[0]?Mn(arguments[0])?(v=arguments[0],y=void 0):function(M){for(var U=i(M)&&!s(M),q=!1,de=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],te=0;te<de.length;te+=1)q=q||o(M,de[te]);return U&&q}(arguments[0])&&(y=arguments[0],v=void 0):y=v=void 0);var v=v||be(),w=Dn(v,this).startOf("day"),w=e.calendarFormat(this,w)||"sameElse",y=y&&(K(y[w])?y[w].call(this,v):y[w]);return this.format(y||this.localeData().calendar(w,this,be(v)))},j.clone=function(){return new L(this)},j.diff=function(c,g,v){var w,y,M;if(!this.isValid())return NaN;if(!(w=Dn(c,this)).isValid())return NaN;switch(y=6e4*(w.utcOffset()-this.utcOffset()),g=Te(g)){case"year":M=Qo(this,w)/12;break;case"month":M=Qo(this,w);break;case"quarter":M=Qo(this,w)/3;break;case"second":M=(this-w)/1e3;break;case"minute":M=(this-w)/6e4;break;case"hour":M=(this-w)/36e5;break;case"day":M=(this-w-y)/864e5;break;case"week":M=(this-w-y)/6048e5;break;default:M=this-w}return v?M:Be(M)},j.endOf=function(c){var g,v;if((c=Te(c))===void 0||c==="millisecond"||!this.isValid())return this;switch(v=this._isUTC?go:Ln,c){case"year":g=v(this.year()+1,0,1)-1;break;case"quarter":g=v(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":g=v(this.year(),this.month()+1,1)-1;break;case"week":g=v(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":g=v(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":g=v(this.year(),this.month(),this.date()+1)-1;break;case"hour":g=this._d.valueOf(),g+=36e5-no(g+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":g=this._d.valueOf(),g+=6e4-no(g,6e4)-1;break;case"second":g=this._d.valueOf(),g+=1e3-no(g,1e3)-1;break}return this._d.setTime(g),e.updateOffset(this,!0),this},j.format=function(c){return c=c||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat),c=De(this,c),this.localeData().postformat(c)},j.from=function(c,g){return this.isValid()&&(z(c)&&c.isValid()||be(c).isValid())?ni({to:this,from:c}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()},j.fromNow=function(c){return this.from(be(),c)},j.to=function(c,g){return this.isValid()&&(z(c)&&c.isValid()||be(c).isValid())?ni({from:this,to:c}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()},j.toNow=function(c){return this.to(be(),c)},j.get=function(c){return K(this[c=Te(c)])?this[c]():this},j.invalidAt=function(){return m(this).overflow},j.isAfter=function(c,g){return c=z(c)?c:be(c),!(!this.isValid()||!c.isValid())&&((g=Te(g)||"millisecond")==="millisecond"?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(g).valueOf())},j.isBefore=function(c,g){return c=z(c)?c:be(c),!(!this.isValid()||!c.isValid())&&((g=Te(g)||"millisecond")==="millisecond"?this.valueOf()<c.valueOf():this.clone().endOf(g).valueOf()<c.valueOf())},j.isBetween=function(c,g,v,w){return c=z(c)?c:be(c),g=z(g)?g:be(g),!!(this.isValid()&&c.isValid()&&g.isValid())&&((w=w||"()")[0]==="("?this.isAfter(c,v):!this.isBefore(c,v))&&(w[1]===")"?this.isBefore(g,v):!this.isAfter(g,v))},j.isSame=function(v,g){var v=z(v)?v:be(v);return!(!this.isValid()||!v.isValid())&&((g=Te(g)||"millisecond")==="millisecond"?this.valueOf()===v.valueOf():(v=v.valueOf(),this.clone().startOf(g).valueOf()<=v&&v<=this.clone().endOf(g).valueOf()))},j.isSameOrAfter=function(c,g){return this.isSame(c,g)||this.isAfter(c,g)},j.isSameOrBefore=function(c,g){return this.isSame(c,g)||this.isBefore(c,g)},j.isValid=function(){return _(this)},j.lang=Bi,j.locale=ii,j.localeData=No,j.max=Vt,j.min=Gt,j.parsingFlags=function(){return p({},m(this))},j.set=function(c,g){if(typeof c=="object")for(var v=function(M){var U,q=[];for(U in M)o(M,U)&&q.push({unit:U,priority:_t[U]});return q.sort(function(de,te){return de.priority-te.priority}),q}(c=yt(c)),w=v.length,y=0;y<w;y++)this[v[y].unit](c[v[y].unit]);else if(K(this[c=Te(c)]))return this[c](g);return this},j.startOf=function(c){var g,v;if((c=Te(c))===void 0||c==="millisecond"||!this.isValid())return this;switch(v=this._isUTC?go:Ln,c){case"year":g=v(this.year(),0,1);break;case"quarter":g=v(this.year(),this.month()-this.month()%3,1);break;case"month":g=v(this.year(),this.month(),1);break;case"week":g=v(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":g=v(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":g=v(this.year(),this.month(),this.date());break;case"hour":g=this._d.valueOf(),g-=no(g+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":g=this._d.valueOf(),g-=no(g,6e4);break;case"second":g=this._d.valueOf(),g-=no(g,1e3);break}return this._d.setTime(g),e.updateOffset(this,!0),this},j.subtract=Xt,j.toArray=function(){var c=this;return[c.year(),c.month(),c.date(),c.hour(),c.minute(),c.second(),c.millisecond()]},j.toObject=function(){var c=this;return{years:c.year(),months:c.month(),date:c.date(),hours:c.hours(),minutes:c.minutes(),seconds:c.seconds(),milliseconds:c.milliseconds()}},j.toDate=function(){return new Date(this.valueOf())},j.toISOString=function(c){if(!this.isValid())return null;var g=(c=c!==!0)?this.clone().utc():this;return g.year()<0||9999<g.year()?De(g,c?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?c?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",De(g,"Z")):De(g,c?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},j.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var c,g="moment",v="";return this.isLocal()||(g=this.utcOffset()===0?"moment.utc":"moment.parseZone",v="Z"),g="["+g+'("]',c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(g+c+"-MM-DD[T]HH:mm:ss.SSS"+(v+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(j[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},j.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},j.eraName=function(){for(var c,g=this.localeData().eras(),v=0,w=g.length;v<w;++v)if(c=this.clone().startOf("day").valueOf(),g[v].since<=c&&c<=g[v].until||g[v].until<=c&&c<=g[v].since)return g[v].name;return""},j.eraNarrow=function(){for(var c,g=this.localeData().eras(),v=0,w=g.length;v<w;++v)if(c=this.clone().startOf("day").valueOf(),g[v].since<=c&&c<=g[v].until||g[v].until<=c&&c<=g[v].since)return g[v].narrow;return""},j.eraAbbr=function(){for(var c,g=this.localeData().eras(),v=0,w=g.length;v<w;++v)if(c=this.clone().startOf("day").valueOf(),g[v].since<=c&&c<=g[v].until||g[v].until<=c&&c<=g[v].since)return g[v].abbr;return""},j.eraYear=function(){for(var c,g,v=this.localeData().eras(),w=0,y=v.length;w<y;++w)if(c=v[w].since<=v[w].until?1:-1,g=this.clone().startOf("day").valueOf(),v[w].since<=g&&g<=v[w].until||v[w].until<=g&&g<=v[w].since)return(this.year()-e(v[w].since).year())*c+v[w].offset;return this.year()},j.year=hr,j.isLeapYear=function(){return Ge(this.year())},j.weekYear=function(c){return Vn.call(this,c,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},j.isoWeekYear=function(c){return Vn.call(this,c,this.isoWeek(),this.isoWeekday(),1,4)},j.quarter=j.quarters=function(c){return c==null?Math.ceil((this.month()+1)/3):this.month(3*(c-1)+this.month()%3)},j.month=Q,j.daysInMonth=function(){return $t(this.year(),this.month())},j.week=j.weeks=function(c){var g=this.localeData().week(this);return c==null?g:this.add(7*(c-g),"d")},j.isoWeek=j.isoWeeks=function(c){var g=Ne(this,1,4).week;return c==null?g:this.add(7*(c-g),"d")},j.weeksInYear=function(){var c=this.localeData()._week;return ct(this.year(),c.dow,c.doy)},j.weeksInWeekYear=function(){var c=this.localeData()._week;return ct(this.weekYear(),c.dow,c.doy)},j.isoWeeksInYear=function(){return ct(this.year(),1,4)},j.isoWeeksInISOWeekYear=function(){return ct(this.isoWeekYear(),1,4)},j.date=Co,j.day=j.days=function(c){if(!this.isValid())return c!=null?this:NaN;var g,v,w=this._isUTC?this._d.getUTCDay():this._d.getDay();return c!=null?(g=c,v=this.localeData(),c=typeof g!="string"?g:isNaN(g)?typeof(g=v.weekdaysParse(g))=="number"?g:null:parseInt(g,10),this.add(c-w,"d")):w},j.weekday=function(c){if(!this.isValid())return c!=null?this:NaN;var g=(this.day()+7-this.localeData()._week.dow)%7;return c==null?g:this.add(c-g,"d")},j.isoWeekday=function(c){return this.isValid()?c!=null?(g=c,v=this.localeData(),v=typeof g=="string"?v.weekdaysParse(g)%7||7:isNaN(g)?null:g,this.day(this.day()%7?v:v-7)):this.day()||7:c!=null?this:NaN;var g,v},j.dayOfYear=function(c){var g=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return c==null?g:this.add(c-g,"d")},j.hour=j.hours=Ut,j.minute=j.minutes=ro,j.second=j.seconds=me,j.millisecond=j.milliseconds=_o,j.utcOffset=function(c,g,v){var w,y=this._offset||0;if(!this.isValid())return c!=null?this:NaN;if(c==null)return this._isUTC?y:An(this);if(typeof c=="string"){if((c=ki(Pi,c))===null)return this}else Math.abs(c)<16&&!v&&(c*=60);return!this._isUTC&&g&&(w=An(this)),this._offset=c,this._isUTC=!0,w!=null&&this.add(w,"m"),y!==c&&(!g||this._changeInProgress?cr(this,ni(c-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},j.utc=function(c){return this.utcOffset(0,c)},j.local=function(c){return this._isUTC&&(this.utcOffset(0,c),this._isUTC=!1,c&&this.subtract(An(this),"m")),this},j.parseZone=function(){var c;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((c=ki(Po,this._i))!=null?this.utcOffset(c):this.utcOffset(0,!0)),this},j.hasAlignedHourOffset=function(c){return!!this.isValid()&&(c=c?be(c).utcOffset():0,(this.utcOffset()-c)%60==0)},j.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},j.isLocal=function(){return!!this.isValid()&&!this._isUTC},j.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},j.isUtc=At,j.isUTC=At,j.zoneAbbr=function(){return this._isUTC?"UTC":""},j.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},j.dates=G("dates accessor is deprecated. Use date instead.",Co),j.months=G("months accessor is deprecated. Use month instead",Q),j.years=G("years accessor is deprecated. Use year instead",hr),j.zone=G("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(c,g){return c!=null?(this.utcOffset(c=typeof c!="string"?-c:c,g),this):-this.utcOffset()}),j.isDSTShifted=G("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var c,g={};return R(g,this),(g=_e(g))._a?(c=(g._isUTC?f:be)(g._a),this._isDSTShifted=this.isValid()&&0<function(v,w,y){for(var M=Math.min(v.length,w.length),U=Math.abs(v.length-w.length),q=0,de=0;de<M;de++)(y&&v[de]!==w[de]||!y&&ve(v[de])!==ve(w[de]))&&q++;return q+U}(g._a,c.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),ke=ne.prototype;function le(c,g,v,M){var y=qt(),M=f().set(M,g);return y[v](M,c)}function Qe(c,g,v){if(a(c)&&(g=c,c=void 0),c=c||"",g!=null)return le(c,g,v,"month");for(var w=[],y=0;y<12;y++)w[y]=le(c,y,v,"month");return w}function Wt(c,g,v,w){g=(typeof c=="boolean"?a(g)&&(v=g,g=void 0):(g=c,c=!1,a(v=g)&&(v=g,g=void 0)),g||"");var y,M=qt(),U=c?M._week.dow:0,q=[];if(v!=null)return le(g,(v+U)%7,w,"day");for(y=0;y<7;y++)q[y]=le(g,(y+U)%7,w,"day");return q}ke.calendar=function(c,g,v){return K(c=this._calendar[c]||this._calendar.sameElse)?c.call(g,v):c},ke.longDateFormat=function(c){var g=this._longDateFormat[c],v=this._longDateFormat[c.toUpperCase()];return g||!v?g:(this._longDateFormat[c]=v.match(xe).map(function(w){return w==="MMMM"||w==="MM"||w==="DD"||w==="dddd"?w.slice(1):w}).join(""),this._longDateFormat[c])},ke.invalidDate=function(){return this._invalidDate},ke.ordinal=function(c){return this._ordinal.replace("%d",c)},ke.preparse=Z,ke.postformat=Z,ke.relativeTime=function(c,g,v,w){var y=this._relativeTime[v];return K(y)?y(c,g,v,w):y.replace(/%d/i,c)},ke.pastFuture=function(c,g){return K(c=this._relativeTime[0<c?"future":"past"])?c(g):c.replace(/%s/i,g)},ke.set=function(c){var g,v;for(v in c)o(c,v)&&(K(g=c[v])?this[v]=g:this["_"+v]=g);this._config=c,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ke.eras=function(c,g){for(var v,w=this._eras||qt("en")._eras,y=0,M=w.length;y<M;++y){switch(typeof w[y].since){case"string":v=e(w[y].since).startOf("day"),w[y].since=v.valueOf();break}switch(typeof w[y].until){case"undefined":w[y].until=1/0;break;case"string":v=e(w[y].until).startOf("day").valueOf(),w[y].until=v.valueOf();break}}return w},ke.erasParse=function(c,g,v){var w,y,M,U,q,de=this.eras();for(c=c.toUpperCase(),w=0,y=de.length;w<y;++w)if(M=de[w].name.toUpperCase(),U=de[w].abbr.toUpperCase(),q=de[w].narrow.toUpperCase(),v)switch(g){case"N":case"NN":case"NNN":if(U===c)return de[w];break;case"NNNN":if(M===c)return de[w];break;case"NNNNN":if(q===c)return de[w];break}else if(0<=[M,U,q].indexOf(c))return de[w]},ke.erasConvertYear=function(c,g){var v=c.since<=c.until?1:-1;return g===void 0?e(c.since).year():e(c.since).year()+(g-c.offset)*v},ke.erasAbbrRegex=function(c){return o(this,"_erasAbbrRegex")||Zo.call(this),c?this._erasAbbrRegex:this._erasRegex},ke.erasNameRegex=function(c){return o(this,"_erasNameRegex")||Zo.call(this),c?this._erasNameRegex:this._erasRegex},ke.erasNarrowRegex=function(c){return o(this,"_erasNarrowRegex")||Zo.call(this),c?this._erasNarrowRegex:this._erasRegex},ke.months=function(c,g){return c?(t(this._months)?this._months:this._months[(this._months.isFormat||S).test(g)?"format":"standalone"])[c.month()]:t(this._months)?this._months:this._months.standalone},ke.monthsShort=function(c,g){return c?(t(this._monthsShort)?this._monthsShort:this._monthsShort[S.test(g)?"format":"standalone"])[c.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ke.monthsParse=function(c,g,v){var w,y;if(this._monthsParseExact)return(function(ye,U,q){var de,te,Fe,ye=ye.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],de=0;de<12;++de)Fe=f([2e3,de]),this._shortMonthsParse[de]=this.monthsShort(Fe,"").toLocaleLowerCase(),this._longMonthsParse[de]=this.months(Fe,"").toLocaleLowerCase();return q?U==="MMM"?(te=Ye.call(this._shortMonthsParse,ye))!==-1?te:null:(te=Ye.call(this._longMonthsParse,ye))!==-1?te:null:U==="MMM"?(te=Ye.call(this._shortMonthsParse,ye))!==-1||(te=Ye.call(this._longMonthsParse,ye))!==-1?te:null:(te=Ye.call(this._longMonthsParse,ye))!==-1||(te=Ye.call(this._shortMonthsParse,ye))!==-1?te:null}).call(this,c,g,v);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),w=0;w<12;w++)if(y=f([2e3,w]),v&&!this._longMonthsParse[w]&&(this._longMonthsParse[w]=new RegExp("^"+this.months(y,"").replace(".","")+"$","i"),this._shortMonthsParse[w]=new RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),v||this._monthsParse[w]||(y="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[w]=new RegExp(y.replace(".",""),"i")),v&&g==="MMMM"&&this._longMonthsParse[w].test(c)||v&&g==="MMM"&&this._shortMonthsParse[w].test(c)||!v&&this._monthsParse[w].test(c))return w},ke.monthsRegex=function(c){return this._monthsParseExact?(o(this,"_monthsRegex")||se.call(this),c?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=k),this._monthsStrictRegex&&c?this._monthsStrictRegex:this._monthsRegex)},ke.monthsShortRegex=function(c){return this._monthsParseExact?(o(this,"_monthsRegex")||se.call(this),c?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=T),this._monthsShortStrictRegex&&c?this._monthsShortStrictRegex:this._monthsShortRegex)},ke.week=function(c){return Ne(c,this._week.dow,this._week.doy).week},ke.firstDayOfYear=function(){return this._week.doy},ke.firstDayOfWeek=function(){return this._week.dow},ke.weekdays=function(c,g){return g=t(this._weekdays)?this._weekdays:this._weekdays[c&&c!==!0&&this._weekdays.isFormat.test(g)?"format":"standalone"],c===!0?bt(g,this._week.dow):c?g[c.day()]:g},ke.weekdaysMin=function(c){return c===!0?bt(this._weekdaysMin,this._week.dow):c?this._weekdaysMin[c.day()]:this._weekdaysMin},ke.weekdaysShort=function(c){return c===!0?bt(this._weekdaysShort,this._week.dow):c?this._weekdaysShort[c.day()]:this._weekdaysShort},ke.weekdaysParse=function(c,g,v){var w,y;if(this._weekdaysParseExact)return(function(ye,U,q){var de,te,Fe,ye=ye.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],de=0;de<7;++de)Fe=f([2e3,1]).day(de),this._minWeekdaysParse[de]=this.weekdaysMin(Fe,"").toLocaleLowerCase(),this._shortWeekdaysParse[de]=this.weekdaysShort(Fe,"").toLocaleLowerCase(),this._weekdaysParse[de]=this.weekdays(Fe,"").toLocaleLowerCase();return q?U==="dddd"?(te=Ye.call(this._weekdaysParse,ye))!==-1?te:null:U==="ddd"?(te=Ye.call(this._shortWeekdaysParse,ye))!==-1?te:null:(te=Ye.call(this._minWeekdaysParse,ye))!==-1?te:null:U==="dddd"?(te=Ye.call(this._weekdaysParse,ye))!==-1||(te=Ye.call(this._shortWeekdaysParse,ye))!==-1||(te=Ye.call(this._minWeekdaysParse,ye))!==-1?te:null:U==="ddd"?(te=Ye.call(this._shortWeekdaysParse,ye))!==-1||(te=Ye.call(this._weekdaysParse,ye))!==-1||(te=Ye.call(this._minWeekdaysParse,ye))!==-1?te:null:(te=Ye.call(this._minWeekdaysParse,ye))!==-1||(te=Ye.call(this._weekdaysParse,ye))!==-1||(te=Ye.call(this._shortWeekdaysParse,ye))!==-1?te:null}).call(this,c,g,v);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),w=0;w<7;w++)if(y=f([2e3,1]).day(w),v&&!this._fullWeekdaysParse[w]&&(this._fullWeekdaysParse[w]=new RegExp("^"+this.weekdays(y,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[w]=new RegExp("^"+this.weekdaysShort(y,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[w]=new RegExp("^"+this.weekdaysMin(y,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[w]||(y="^"+this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[w]=new RegExp(y.replace(".",""),"i")),v&&g==="dddd"&&this._fullWeekdaysParse[w].test(c)||v&&g==="ddd"&&this._shortWeekdaysParse[w].test(c)||v&&g==="dd"&&this._minWeekdaysParse[w].test(c)||!v&&this._weekdaysParse[w].test(c))return w},ke.weekdaysRegex=function(c){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Si.call(this),c?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Wi),this._weekdaysStrictRegex&&c?this._weekdaysStrictRegex:this._weekdaysRegex)},ke.weekdaysShortRegex=function(c){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Si.call(this),c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ho),this._weekdaysShortStrictRegex&&c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ke.weekdaysMinRegex=function(c){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Si.call(this),c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Do),this._weekdaysMinStrictRegex&&c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ke.isPM=function(c){return(c+"").toLowerCase().charAt(0)==="p"},ke.meridiem=function(c,g,v){return 11<c?v?"pm":"PM":v?"am":"AM"},fi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(c){var g=c%10;return c+(ve(c%100/10)===1?"th":g==1?"st":g==2?"nd":g==3?"rd":"th")}}),e.lang=G("moment.lang is deprecated. Use moment.locale instead.",fi),e.langData=G("moment.langData is deprecated. Use moment.localeData instead.",qt);var pt=Math.abs;function Ft(c,g,v,w){return g=ni(g,v),c._milliseconds+=w*g._milliseconds,c._days+=w*g._days,c._months+=w*g._months,c._bubble()}function Ui(c){return c<0?Math.floor(c):Math.ceil(c)}function Tt(c){return 4800*c/146097}function Vo(c){return 146097*c/4800}function Ti(c){return function(){return this.as(c)}}Dt=Ti("ms"),Ii=Ti("s"),Ai=Ti("m"),Vt=Ti("h"),Gt=Ti("d"),Xt=Ti("w"),Ut=Ti("M"),ro=Ti("Q"),me=Ti("y");function vo(c){return function(){return this.isValid()?this._data[c]:NaN}}var _o=vo("milliseconds"),Co=vo("seconds"),hr=vo("minutes"),ke=vo("hours"),iu=vo("days"),ou=vo("months"),nu=vo("years"),so=Math.round,Jo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ru(c,g,v,w){var te=ni(c).abs(),Fe=so(te.as("s")),y=so(te.as("m")),M=so(te.as("h")),U=so(te.as("d")),q=so(te.as("M")),de=so(te.as("w")),te=so(te.as("y")),Fe=(Fe<=v.ss?["s",Fe]:Fe<v.s&&["ss",Fe])||y<=1&&["m"]||y<v.m&&["mm",y]||M<=1&&["h"]||M<v.h&&["hh",M]||U<=1&&["d"]||U<v.d&&["dd",U];return(Fe=(Fe=v.w!=null?Fe||de<=1&&["w"]||de<v.w&&["ww",de]:Fe)||q<=1&&["M"]||q<v.M&&["MM",q]||te<=1&&["y"]||["yy",te])[2]=g,Fe[3]=0<+c,Fe[4]=w,(function(ye,St,Mt,Ni,ol){return ol.relativeTime(St||1,!!Mt,ye,Ni)}).apply(null,Fe)}var il=Math.abs;function en(c){return(0<c)-(c<0)||+c}function pr(){if(!this.isValid())return this.localeData().invalidDate();var c,g,v,w,y,M,U,q=il(this._milliseconds)/1e3,de=il(this._days),te=il(this._months),Fe=this.asSeconds();return Fe?(c=Be(q/60),g=Be(c/60),q%=60,c%=60,v=Be(te/12),te%=12,w=q?q.toFixed(3).replace(/\.?0+$/,""):"",y=en(this._months)!==en(Fe)?"-":"",M=en(this._days)!==en(Fe)?"-":"",U=en(this._milliseconds)!==en(Fe)?"-":"",(Fe<0?"-":"")+"P"+(v?y+v+"Y":"")+(te?y+te+"M":"")+(de?M+de+"D":"")+(g||c||q?"T":"")+(g?U+g+"H":"")+(c?U+c+"M":"")+(q?U+w+"S":"")):"P0D"}var Ze=wt.prototype;return Ze.isValid=function(){return this._isValid},Ze.abs=function(){var c=this._data;return this._milliseconds=pt(this._milliseconds),this._days=pt(this._days),this._months=pt(this._months),c.milliseconds=pt(c.milliseconds),c.seconds=pt(c.seconds),c.minutes=pt(c.minutes),c.hours=pt(c.hours),c.months=pt(c.months),c.years=pt(c.years),this},Ze.add=function(c,g){return Ft(this,c,g,1)},Ze.subtract=function(c,g){return Ft(this,c,g,-1)},Ze.as=function(c){if(!this.isValid())return NaN;var g,v,w=this._milliseconds;if((c=Te(c))==="month"||c==="quarter"||c==="year")switch(g=this._days+w/864e5,v=this._months+Tt(g),c){case"month":return v;case"quarter":return v/3;case"year":return v/12}else switch(g=this._days+Math.round(Vo(this._months)),c){case"week":return g/7+w/6048e5;case"day":return g+w/864e5;case"hour":return 24*g+w/36e5;case"minute":return 1440*g+w/6e4;case"second":return 86400*g+w/1e3;case"millisecond":return Math.floor(864e5*g)+w;default:throw new Error("Unknown unit "+c)}},Ze.asMilliseconds=Dt,Ze.asSeconds=Ii,Ze.asMinutes=Ai,Ze.asHours=Vt,Ze.asDays=Gt,Ze.asWeeks=Xt,Ze.asMonths=Ut,Ze.asQuarters=ro,Ze.asYears=me,Ze.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ve(this._months/12):NaN},Ze._bubble=function(){var c=this._milliseconds,g=this._days,v=this._months,w=this._data;return 0<=c&&0<=g&&0<=v||c<=0&&g<=0&&v<=0||(c+=864e5*Ui(Vo(v)+g),v=g=0),w.milliseconds=c%1e3,c=Be(c/1e3),w.seconds=c%60,c=Be(c/60),w.minutes=c%60,c=Be(c/60),w.hours=c%24,g+=Be(c/24),v+=c=Be(Tt(g)),g-=Ui(Vo(c)),c=Be(v/12),v%=12,w.days=g,w.months=v,w.years=c,this},Ze.clone=function(){return ni(this)},Ze.get=function(c){return c=Te(c),this.isValid()?this[c+"s"]():NaN},Ze.milliseconds=_o,Ze.seconds=Co,Ze.minutes=hr,Ze.hours=ke,Ze.days=iu,Ze.weeks=function(){return Be(this.days()/7)},Ze.months=ou,Ze.years=nu,Ze.humanize=function(c,g){if(!this.isValid())return this.localeData().invalidDate();var v=!1,w=Jo;return typeof c=="object"&&(g=c,c=!1),typeof c=="boolean"&&(v=c),typeof g=="object"&&(w=Object.assign({},Jo,g),g.s!=null&&g.ss==null&&(w.ss=g.s-1)),c=this.localeData(),g=ru(this,!v,w,c),v&&(g=c.pastFuture(+this,g)),c.postformat(g)},Ze.toISOString=pr,Ze.toString=pr,Ze.toJSON=pr,Ze.locale=ii,Ze.localeData=No,Ze.toIsoString=G("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pr),Ze.lang=Bi,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),re("x",zi),re("X",/[+-]?\d+(\.\d{1,3})?/),he("X",function(c,g,v){v._d=new Date(1e3*parseFloat(c))}),he("x",function(c,g,v){v._d=new Date(ve(c))}),e.version="2.29.4",r=be,e.fn=j,e.min=function(){return Ke("isBefore",[].slice.call(arguments,0))},e.max=function(){return Ke("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=f,e.unix=function(c){return be(1e3*c)},e.months=function(c,g){return Qe(c,g,"months")},e.isDate=d,e.locale=fi,e.invalid=C,e.duration=ni,e.isMoment=z,e.weekdays=function(c,g,v){return Wt(c,g,v,"weekdays")},e.parseZone=function(){return be.apply(null,arguments).parseZone()},e.localeData=qt,e.isDuration=gi,e.monthsShort=function(c,g){return Qe(c,g,"monthsShort")},e.weekdaysMin=function(c,g,v){return Wt(c,g,v,"weekdaysMin")},e.defineLocale=yi,e.updateLocale=function(c,g){var v,w;return g!=null?(w=it,et[c]!=null&&et[c].parentLocale!=null?et[c].set(oe(et[c]._config,g)):(g=oe(w=(v=io(c))!=null?v._config:w,g),v==null&&(g.abbr=c),(w=new ne(g)).parentLocale=et[c],et[c]=w),fi(c)):et[c]!=null&&(et[c].parentLocale!=null?(et[c]=et[c].parentLocale,c===fi()&&fi(c)):et[c]!=null&&delete et[c]),et[c]},e.locales=function(){return Pe(et)},e.weekdaysShort=function(c,g,v){return Wt(c,g,v,"weekdaysShort")},e.normalizeUnits=Te,e.relativeTimeRounding=function(c){return c===void 0?so:typeof c=="function"&&(so=c,!0)},e.relativeTimeThreshold=function(c,g){return Jo[c]!==void 0&&(g===void 0?Jo[c]:(Jo[c]=g,c==="s"&&(Jo.ss=g-1),!0))},e.calendarFormat=function(c,g){return(c=c.diff(g,"days",!0))<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"},e.prototype=j,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var Rr=fr((Tl,Ol)=>{"use strict";(function(r,e){typeof Tl=="object"&&typeof Ol<"u"?Ol.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r.DOMPurify=e())})(Tl,function(){"use strict";function r(J){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},r(J)}function e(J,ae){return e=Object.setPrototypeOf||function(he,ot){return he.__proto__=ot,he},e(J,ae)}function t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function i(J,ae,Se){return t()?i=Reflect.construct:i=function(ot,Ye,qe){var dt=[null];dt.push.apply(dt,Ye);var xt=Function.bind.apply(ot,dt),Oe=new xt;return qe&&e(Oe,qe.prototype),Oe},i.apply(null,arguments)}function o(J){return s(J)||l(J)||a(J)||u()}function s(J){if(Array.isArray(J))return d(J)}function l(J){if(typeof Symbol<"u"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)}function a(J,ae){if(J){if(typeof J=="string")return d(J,ae);var Se=Object.prototype.toString.call(J).slice(8,-1);if(Se==="Object"&&J.constructor&&(Se=J.constructor.name),Se==="Map"||Se==="Set")return Array.from(J);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return d(J,ae)}}function d(J,ae){(ae==null||ae>J.length)&&(ae=J.length);for(var Se=0,he=new Array(ae);Se<ae;Se++)he[Se]=J[Se];return he}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=Object.hasOwnProperty,f=Object.setPrototypeOf,m=Object.isFrozen,_=Object.getPrototypeOf,C=Object.getOwnPropertyDescriptor,b=Object.freeze,E=Object.seal,x=Object.create,R=typeof Reflect<"u"&&Reflect,L=R.apply,z=R.construct;L||(L=function(ae,Se,he){return ae.apply(Se,he)}),b||(b=function(ae){return ae}),E||(E=function(ae){return ae}),z||(z=function(ae,Se){return i(ae,o(Se))});var B=ge(Array.prototype.forEach),G=ge(Array.prototype.pop),V=ge(Array.prototype.push),H=ge(String.prototype.toLowerCase),K=ge(String.prototype.toString),oe=ge(String.prototype.match),ne=ge(String.prototype.replace),Pe=ge(String.prototype.indexOf),He=ge(String.prototype.trim),xe=ge(RegExp.prototype.test),Xe=lt(TypeError);function ge(J){return function(ae){for(var Se=arguments.length,he=new Array(Se>1?Se-1:0),ot=1;ot<Se;ot++)he[ot-1]=arguments[ot];return L(J,ae,he)}}function lt(J){return function(){for(var ae=arguments.length,Se=new Array(ae),he=0;he<ae;he++)Se[he]=arguments[he];return z(J,Se)}}function Y(J,ae,Se){var he;Se=(he=Se)!==null&&he!==void 0?he:H,f&&f(J,null);for(var ot=ae.length;ot--;){var Ye=ae[ot];if(typeof Ye=="string"){var qe=Se(Ye);qe!==Ye&&(m(ae)||(ae[ot]=qe),Ye=qe)}J[Ye]=!0}return J}function De(J){var ae=x(null),Se;for(Se in J)L(p,J,[Se])===!0&&(ae[Se]=J[Se]);return ae}function $e(J,ae){for(;J!==null;){var Se=C(J,ae);if(Se){if(Se.get)return ge(Se.get);if(typeof Se.value=="function")return ge(Se.value)}J=_(J)}function he(ot){return console.warn("fallback value for",ot),null}return he}var ze=b(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ee=b(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Te=b(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yt=b(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_t=b(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Je=b(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ge=b(["#text"]),Be=b(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ve=b(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pt=b(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ct=b(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Bt=E(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=E(/<%[\w\W]*|[\w\W]*%>/gm),Ii=E(/\${[\w\W]*}/gm),Ue=E(/^data-[\-\w.\u00B7-\uFFFF]/),Gt=E(/^aria-[\-\w]+$/),Vt=E(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dt=E(/^(?:\w+script|data):/i),Qt=E(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zi=E(/^html$/i),Po=E(/^[a-z][.\w]*(-[.\w]+)+$/i),Pi=function(){return typeof window>"u"?null:window},Ut=function(ae,Se){if(r(ae)!=="object"||typeof ae.createPolicy!="function")return null;var he=null,ot="data-tt-policy-suffix";Se.currentScript&&Se.currentScript.hasAttribute(ot)&&(he=Se.currentScript.getAttribute(ot));var Ye="dompurify"+(he?"#"+he:"");try{return ae.createPolicy(Ye,{createHTML:function(dt){return dt},createScriptURL:function(dt){return dt}})}catch{return console.warn("TrustedTypes policy "+Ye+" could not be created."),null}};function re(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pi(),ae=function(A){return re(A)};if(ae.version="2.5.7",ae.removed=[],!J||!J.document||J.document.nodeType!==9)return ae.isSupported=!1,ae;var Se=J.document,he=J.document,ot=J.DocumentFragment,Ye=J.HTMLTemplateElement,qe=J.Node,dt=J.Element,xt=J.NodeFilter,Oe=J.NamedNodeMap,Ht=Oe===void 0?J.NamedNodeMap||J.MozNamedAttrMap:Oe,Yt=J.HTMLFormElement,jt=J.DOMParser,ci=J.trustedTypes,wi=dt.prototype,$t=$e(wi,"cloneNode"),Ai=$e(wi,"nextSibling"),co=$e(wi,"childNodes"),S=$e(wi,"parentNode");if(typeof Ye=="function"){var T=he.createElement("template");T.content&&T.content.ownerDocument&&(he=T.content.ownerDocument)}var k=Ut(ci,Se),W=k?k.createHTML(""):"",Q=he,se=Q.implementation,Re=Q.createNodeIterator,pe=Q.createDocumentFragment,Ae=Q.getElementsByTagName,ce=Se.importNode,Ce={};try{Ce=De(he).documentMode?he.documentMode:{}}catch{}var Ne={};ae.isSupported=typeof S=="function"&&se&&se.createHTMLDocument!==void 0&&Ce!==9;var ct=Bt,bt=j,Xt=Ii,hi=Ue,Bi=Gt,Wi=Dt,ho=Qt,Do=Po,Si=Vt,ht=null,eo=Y({},[].concat(o(ze),o(Ee),o(Te),o(_t),o(Ge))),ft=null,pi=Y({},[].concat(o(Be),o(ve),o(Pt),o(Ct))),it=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),et=null,Ei=null,po=!0,to=!0,io=!1,fi=!0,yi=!1,qt=!0,mi=!1,Ao=!1,ko=!1,Gi=!1,xi=!1,ut=!1,qo=!0,Fo=!1,Pn="user-content-",fo=!0,I=!1,D={},F=null,X=Y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ee=null,_e=Y({},["audio","video","img","source","image","track"]),fe=null,be=Y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",wt="http://www.w3.org/1999/xhtml",gi=wt,oo=!1,Ko=null,el=Y({},[Ke,nt,wt],K),ki,Dn=["application/xhtml+xml","text/html"],An="text/html",At,mo=null,tl=he.createElement("form"),ni=function(A){return A instanceof RegExp||A instanceof Function},Fi=function(A){mo&&mo===A||((!A||r(A)!=="object")&&(A={}),A=De(A),ki=Dn.indexOf(A.PARSER_MEDIA_TYPE)===-1?ki=An:ki=A.PARSER_MEDIA_TYPE,At=ki==="application/xhtml+xml"?K:H,ht="ALLOWED_TAGS"in A?Y({},A.ALLOWED_TAGS,At):eo,ft="ALLOWED_ATTR"in A?Y({},A.ALLOWED_ATTR,At):pi,Ko="ALLOWED_NAMESPACES"in A?Y({},A.ALLOWED_NAMESPACES,K):el,fe="ADD_URI_SAFE_ATTR"in A?Y(De(be),A.ADD_URI_SAFE_ATTR,At):be,ee="ADD_DATA_URI_TAGS"in A?Y(De(_e),A.ADD_DATA_URI_TAGS,At):_e,F="FORBID_CONTENTS"in A?Y({},A.FORBID_CONTENTS,At):X,et="FORBID_TAGS"in A?Y({},A.FORBID_TAGS,At):{},Ei="FORBID_ATTR"in A?Y({},A.FORBID_ATTR,At):{},D="USE_PROFILES"in A?A.USE_PROFILES:!1,po=A.ALLOW_ARIA_ATTR!==!1,to=A.ALLOW_DATA_ATTR!==!1,io=A.ALLOW_UNKNOWN_PROTOCOLS||!1,fi=A.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yi=A.SAFE_FOR_TEMPLATES||!1,qt=A.SAFE_FOR_XML!==!1,mi=A.WHOLE_DOCUMENT||!1,Gi=A.RETURN_DOM||!1,xi=A.RETURN_DOM_FRAGMENT||!1,ut=A.RETURN_TRUSTED_TYPE||!1,ko=A.FORCE_BODY||!1,qo=A.SANITIZE_DOM!==!1,Fo=A.SANITIZE_NAMED_PROPS||!1,fo=A.KEEP_CONTENT!==!1,I=A.IN_PLACE||!1,Si=A.ALLOWED_URI_REGEXP||Si,gi=A.NAMESPACE||wt,it=A.CUSTOM_ELEMENT_HANDLING||{},A.CUSTOM_ELEMENT_HANDLING&&ni(A.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(it.tagNameCheck=A.CUSTOM_ELEMENT_HANDLING.tagNameCheck),A.CUSTOM_ELEMENT_HANDLING&&ni(A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(it.attributeNameCheck=A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),A.CUSTOM_ELEMENT_HANDLING&&typeof A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(it.allowCustomizedBuiltInElements=A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yi&&(to=!1),xi&&(Gi=!0),D&&(ht=Y({},o(Ge)),ft=[],D.html===!0&&(Y(ht,ze),Y(ft,Be)),D.svg===!0&&(Y(ht,Ee),Y(ft,ve),Y(ft,Ct)),D.svgFilters===!0&&(Y(ht,Te),Y(ft,ve),Y(ft,Ct)),D.mathMl===!0&&(Y(ht,_t),Y(ft,Pt),Y(ft,Ct))),A.ADD_TAGS&&(ht===eo&&(ht=De(ht)),Y(ht,A.ADD_TAGS,At)),A.ADD_ATTR&&(ft===pi&&(ft=De(ft)),Y(ft,A.ADD_ATTR,At)),A.ADD_URI_SAFE_ATTR&&Y(fe,A.ADD_URI_SAFE_ATTR,At),A.FORBID_CONTENTS&&(F===X&&(F=De(F)),Y(F,A.FORBID_CONTENTS,At)),fo&&(ht["#text"]=!0),mi&&Y(ht,["html","head","body"]),ht.table&&(Y(ht,["tbody"]),delete et.tbody),b&&b(A),mo=A)},kn=Y({},["mi","mo","mn","ms","mtext"]),Fn=Y({},["annotation-xml"]),cr=Y({},["title","style","font","a","script"]),Mo=Y({},Ee);Y(Mo,Te),Y(Mo,yt);var Mn=Y({},_t);Y(Mn,Je);var Qo=function(A){var Z=S(A);(!Z||!Z.tagName)&&(Z={namespaceURI:gi,tagName:"template"});var le=H(A.tagName),Qe=H(Z.tagName);return Ko[A.namespaceURI]?A.namespaceURI===nt?Z.namespaceURI===wt?le==="svg":Z.namespaceURI===Ke?le==="svg"&&(Qe==="annotation-xml"||kn[Qe]):!!Mo[le]:A.namespaceURI===Ke?Z.namespaceURI===wt?le==="math":Z.namespaceURI===nt?le==="math"&&Fn[Qe]:!!Mn[le]:A.namespaceURI===wt?Z.namespaceURI===nt&&!Fn[Qe]||Z.namespaceURI===Ke&&!kn[Qe]?!1:!Mn[le]&&(cr[le]||!Mo[le]):!!(ki==="application/xhtml+xml"&&Ko[A.namespaceURI]):!1},ii=function(A){V(ae.removed,{element:A});try{A.parentNode.removeChild(A)}catch{try{A.outerHTML=W}catch{A.remove()}}},No=function(A,Z){try{V(ae.removed,{attribute:Z.getAttributeNode(A),from:Z})}catch{V(ae.removed,{attribute:null,from:Z})}if(Z.removeAttribute(A),A==="is"&&!ft[A])if(Gi||xi)try{ii(Z)}catch{}else try{Z.setAttribute(A,"")}catch{}},Nn=function(A){var Z,le;if(ko)A="<remove></remove>"+A;else{var Qe=oe(A,/^[\r\n\t ]+/);le=Qe&&Qe[0]}ki==="application/xhtml+xml"&&gi===wt&&(A='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+A+"</body></html>");var Wt=k?k.createHTML(A):A;if(gi===wt)try{Z=new jt().parseFromString(Wt,ki)}catch{}if(!Z||!Z.documentElement){Z=se.createDocument(gi,"template",null);try{Z.documentElement.innerHTML=oo?W:Wt}catch{}}var pt=Z.body||Z.documentElement;return A&&le&&pt.insertBefore(he.createTextNode(le),pt.childNodes[0]||null),gi===wt?Ae.call(Z,mi?"html":"body")[0]:mi?Z.documentElement:pt},no=function(A){return Re.call(A.ownerDocument||A,A,xt.SHOW_ELEMENT|xt.SHOW_COMMENT|xt.SHOW_TEXT|xt.SHOW_PROCESSING_INSTRUCTION|xt.SHOW_CDATA_SECTION,null,!1)},Ln=function(A){return A instanceof Yt&&(typeof A.nodeName!="string"||typeof A.textContent!="string"||typeof A.removeChild!="function"||!(A.attributes instanceof Ht)||typeof A.removeAttribute!="function"||typeof A.setAttribute!="function"||typeof A.namespaceURI!="string"||typeof A.insertBefore!="function"||typeof A.hasChildNodes!="function")},go=function(A){return r(qe)==="object"?A instanceof qe:A&&r(A)==="object"&&typeof A.nodeType=="number"&&typeof A.nodeName=="string"},vi=function(A,Z,le){Ne[A]&&B(Ne[A],function(Qe){Qe.call(ae,Z,le,mo)})},Zo=function(A){var Z;if(vi("beforeSanitizeElements",A,null),Ln(A)||xe(/[\u0080-\uFFFF]/,A.nodeName))return ii(A),!0;var le=At(A.nodeName);if(vi("uponSanitizeElement",A,{tagName:le,allowedTags:ht}),A.hasChildNodes()&&!go(A.firstElementChild)&&(!go(A.content)||!go(A.content.firstElementChild))&&xe(/<[/\w]/g,A.innerHTML)&&xe(/<[/\w]/g,A.textContent)||le==="select"&&xe(/<template/i,A.innerHTML)||A.nodeType===7||qt&&A.nodeType===8&&xe(/<[/\w]/g,A.data))return ii(A),!0;if(!ht[le]||et[le]){if(!et[le]&&Vn(le)&&(it.tagNameCheck instanceof RegExp&&xe(it.tagNameCheck,le)||it.tagNameCheck instanceof Function&&it.tagNameCheck(le)))return!1;if(fo&&!F[le]){var Qe=S(A)||A.parentNode,Wt=co(A)||A.childNodes;if(Wt&&Qe)for(var pt=Wt.length,Ft=pt-1;Ft>=0;--Ft){var Ui=$t(Wt[Ft],!0);Ui.__removalCount=(A.__removalCount||0)+1,Qe.insertBefore(Ui,Ai(A))}}return ii(A),!0}return A instanceof dt&&!Qo(A)||(le==="noscript"||le==="noembed"||le==="noframes")&&xe(/<\/no(script|embed|frames)/i,A.innerHTML)?(ii(A),!0):(yi&&A.nodeType===3&&(Z=A.textContent,Z=ne(Z,ct," "),Z=ne(Z,bt," "),Z=ne(Z,Xt," "),A.textContent!==Z&&(V(ae.removed,{element:A.cloneNode()}),A.textContent=Z)),vi("afterSanitizeElements",A,null),!1)},Lo=function(A,Z,le){if(qo&&(Z==="id"||Z==="name")&&(le in he||le in tl))return!1;if(!(to&&!Ei[Z]&&xe(hi,Z))){if(!(po&&xe(Bi,Z))){if(!ft[Z]||Ei[Z]){if(!(Vn(A)&&(it.tagNameCheck instanceof RegExp&&xe(it.tagNameCheck,A)||it.tagNameCheck instanceof Function&&it.tagNameCheck(A))&&(it.attributeNameCheck instanceof RegExp&&xe(it.attributeNameCheck,Z)||it.attributeNameCheck instanceof Function&&it.attributeNameCheck(Z))||Z==="is"&&it.allowCustomizedBuiltInElements&&(it.tagNameCheck instanceof RegExp&&xe(it.tagNameCheck,le)||it.tagNameCheck instanceof Function&&it.tagNameCheck(le))))return!1}else if(!fe[Z]){if(!xe(Si,ne(le,ho,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&A!=="script"&&Pe(le,"data:")===0&&ee[A])){if(!(io&&!xe(Wi,ne(le,ho,"")))){if(le)return!1}}}}}}return!0},Vn=function(A){return A!=="annotation-xml"&&oe(A,Do)},Mi=function(A){var Z,le,Qe,Wt;vi("beforeSanitizeAttributes",A,null);var pt=A.attributes;if(pt){var Ft={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ft};for(Wt=pt.length;Wt--;){Z=pt[Wt];var Ui=Z,Tt=Ui.name,Vo=Ui.namespaceURI;if(le=Tt==="value"?Z.value:He(Z.value),Qe=At(Tt),Ft.attrName=Qe,Ft.attrValue=le,Ft.keepAttr=!0,Ft.forceKeepAttr=void 0,vi("uponSanitizeAttribute",A,Ft),le=Ft.attrValue,!Ft.forceKeepAttr&&(No(Tt,A),!!Ft.keepAttr)){if(!fi&&xe(/\/>/i,le)){No(Tt,A);continue}yi&&(le=ne(le,ct," "),le=ne(le,bt," "),le=ne(le,Xt," "));var Ti=At(A.nodeName);if(Lo(Ti,Qe,le)){if(Fo&&(Qe==="id"||Qe==="name")&&(No(Tt,A),le=Pn+le),qt&&xe(/((--!?|])>)|<\/(style|title)/i,le)){No(Tt,A);continue}if(k&&r(ci)==="object"&&typeof ci.getAttributeType=="function"&&!Vo)switch(ci.getAttributeType(Ti,Qe)){case"TrustedHTML":{le=k.createHTML(le);break}case"TrustedScriptURL":{le=k.createScriptURL(le);break}}try{Vo?A.setAttributeNS(Vo,Tt,le):A.setAttribute(Tt,le),Ln(A)?ii(A):G(ae.removed)}catch{}}}}vi("afterSanitizeAttributes",A,null)}},ro=function me(A){var Z,le=no(A);for(vi("beforeSanitizeShadowDOM",A,null);Z=le.nextNode();)vi("uponSanitizeShadowNode",Z,null),!Zo(Z)&&(Z.content instanceof ot&&me(Z.content),Mi(Z));vi("afterSanitizeShadowDOM",A,null)};return ae.sanitize=function(me){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z,le,Qe,Wt,pt;if(oo=!me,oo&&(me="<!-->"),typeof me!="string"&&!go(me))if(typeof me.toString=="function"){if(me=me.toString(),typeof me!="string")throw Xe("dirty is not a string, aborting")}else throw Xe("toString is not a function");if(!ae.isSupported){if(r(J.toStaticHTML)==="object"||typeof J.toStaticHTML=="function"){if(typeof me=="string")return J.toStaticHTML(me);if(go(me))return J.toStaticHTML(me.outerHTML)}return me}if(Ao||Fi(A),ae.removed=[],typeof me=="string"&&(I=!1),I){if(me.nodeName){var Ft=At(me.nodeName);if(!ht[Ft]||et[Ft])throw Xe("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof qe)Z=Nn("<!---->"),le=Z.ownerDocument.importNode(me,!0),le.nodeType===1&&le.nodeName==="BODY"||le.nodeName==="HTML"?Z=le:Z.appendChild(le);else{if(!Gi&&!yi&&!mi&&me.indexOf("<")===-1)return k&&ut?k.createHTML(me):me;if(Z=Nn(me),!Z)return Gi?null:ut?W:""}Z&&ko&&ii(Z.firstChild);for(var Ui=no(I?me:Z);Qe=Ui.nextNode();)Qe.nodeType===3&&Qe===Wt||Zo(Qe)||(Qe.content instanceof ot&&ro(Qe.content),Mi(Qe),Wt=Qe);if(Wt=null,I)return me;if(Gi){if(xi)for(pt=pe.call(Z.ownerDocument);Z.firstChild;)pt.appendChild(Z.firstChild);else pt=Z;return(ft.shadowroot||ft.shadowrootmod)&&(pt=ce.call(Se,pt,!0)),pt}var Tt=mi?Z.outerHTML:Z.innerHTML;return mi&&ht["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&xe(zi,Z.ownerDocument.doctype.name)&&(Tt="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+Tt),yi&&(Tt=ne(Tt,ct," "),Tt=ne(Tt,bt," "),Tt=ne(Tt,Xt," ")),k&&ut?k.createHTML(Tt):Tt},ae.setConfig=function(me){Fi(me),Ao=!0},ae.clearConfig=function(){mo=null,Ao=!1},ae.isValidAttribute=function(me,A,Z){mo||Fi({});var le=At(me),Qe=At(A);return Lo(le,Qe,Z)},ae.addHook=function(me,A){typeof A=="function"&&(Ne[me]=Ne[me]||[],V(Ne[me],A))},ae.removeHook=function(me){if(Ne[me])return G(Ne[me])},ae.removeHooks=function(me){Ne[me]&&(Ne[me]=[])},ae.removeAllHooks=function(){Ne={}},ae}var Di=re();return Di})});var Ud=fr((exports,module)=>{"use strict";if(typeof jQuery>"u")throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");if(typeof Slick>"u")throw new Error("slick.core.js not loaded");(function($){"use strict";var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,autosizeColsMode:Slick.GridAutosizeColsMode.LegacyOff,autosizeColPaddingPx:4,autosizeTextAvgToMWidthRatio:.75,viewportSwitchToScrollModeWidthPercent:void 0,viewportMinWidthPx:void 0,viewportMaxWidthPx:void 0,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,logSanitizedHtml:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},columnAutosizeDefaults={ignoreHeaderText:!1,colValueArray:void 0,allowAddlPercent:void 0,formatterOverride:void 0,autosizeMode:Slick.ColAutosizeMode.ContentIntelligent,rowSelectionModeOnInit:void 0,rowSelectionMode:Slick.RowSelectionMode.FirstNRows,rowSelectionCount:100,valueFilterMode:Slick.ValueFilterMode.None,widthEvalMode:Slick.WidthEvalMode.CanvasTextSize,sizeToRemaining:void 0,widthPx:void 0,colDataTypeOf:void 0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$groupHeaders=$(),$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacerL,$headerRowSpacerR,$footerRow,$footerRowScroller,$footerRowSpacerL,$footerRowSpacerR,$preHeaderPanel,$preHeaderPanelScroller,$preHeaderPanelSpacer,$preHeaderPanelR,$preHeaderPanelScrollerR,$preHeaderPanelSpacerR,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,treeColumns,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,canvasWidthL,canvasWidthR,headersWidth,headersWidthL,headersWidthR,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=!1,absoluteColumnMinWidth,hasFrozenRows=!1,frozenRowsHeight=0,actualFrozenRow=-1,paneTopH=0,paneBottomH=0,viewportTopH=0,viewportBottomH=0,topPanelH=0,headerRowH=0,footerRowH=0,tabbingDirection=1,$activeCanvasNode,$activeViewportNode,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows=0,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],pagingActive=!1,pagingIsLastPage=!1,scrollThrottle=ActionThrottle(render,50),h_editorLoader=null,h_render=null,h_postrender=null,h_postrenderCleanup=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,postProcessedCleanupQueue=[],postProcessgroupId=0,counter_rows_rendered=0,counter_rows_removed=0,$paneHeaderL,$paneHeaderR,$paneTopL,$paneTopR,$paneBottomL,$paneBottomR,$headerScrollerL,$headerScrollerR,$headerL,$headerR,$groupHeadersL,$groupHeadersR,$headerRowScrollerL,$headerRowScrollerR,$footerRowScrollerL,$footerRowScrollerR,$headerRowL,$headerRowR,$footerRowL,$footerRowR,$topPanelScrollerL,$topPanelScrollerR,$topPanelL,$topPanelR,$viewportTopL,$viewportTopR,$viewportBottomL,$viewportBottomR,$canvasTopL,$canvasTopR,$canvasBottomL,$canvasBottomR,$viewportScrollContainerX,$viewportScrollContainerY,$headerScrollContainer,$headerRowScrollContainer,$footerRowScrollContainer,cssShow={position:"absolute",visibility:"hidden",display:"block"},$hiddenParents,oldProps=[],columnResizeDragging=!1;function init(){if(container instanceof jQuery?$container=container:$container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");if(maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,options.suppressCssChangesOnHiddenInit||cacheCssForHiddenInit(),treeColumns=new Slick.TreeColumns(columns),columns=treeColumns.extractColumns(),updateColumnProps(),options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");if(editController={commitCurrentEdit,cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$paneHeaderL=$("<div class='slick-pane slick-pane-header slick-pane-left' tabIndex='0' />").appendTo($container),$paneHeaderR=$("<div class='slick-pane slick-pane-header slick-pane-right' tabIndex='0' />").appendTo($container),$paneTopL=$("<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' />").appendTo($container),$paneTopR=$("<div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' />").appendTo($container),$paneBottomL=$("<div class='slick-pane slick-pane-bottom slick-pane-left' tabIndex='0' />").appendTo($container),$paneBottomR=$("<div class='slick-pane slick-pane-bottom slick-pane-right' tabIndex='0' />").appendTo($container),options.createPreHeaderPanel&&($preHeaderPanelScroller=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderL),$preHeaderPanel=$("<div />").appendTo($preHeaderPanelScroller),$preHeaderPanelSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScroller),$preHeaderPanelScrollerR=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderR),$preHeaderPanelR=$("<div />").appendTo($preHeaderPanelScrollerR),$preHeaderPanelSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScrollerR),options.showPreHeaderPanel||($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide())),$headerScrollerL=$("<div class='slick-header ui-state-default slick-header-left' />").appendTo($paneHeaderL),$headerScrollerR=$("<div class='slick-header ui-state-default slick-header-right' />").appendTo($paneHeaderR),$headerScroller=$().add($headerScrollerL).add($headerScrollerR),treeColumns.hasDepth()){$groupHeadersL=[],$groupHeadersR=[];for(var r=0;r<treeColumns.getDepth()-1;r++)$groupHeadersL[r]=$("<div class='slick-group-header-columns slick-group-header-columns-left' style='left:-1000px' />").appendTo($headerScrollerL),$groupHeadersR[r]=$("<div class='slick-group-header-columns slick-group-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR);$groupHeaders=$().add($groupHeadersL).add($groupHeadersR)}$headerL=$("<div class='slick-header-columns slick-header-columns-left' style='left:-1000px' />").appendTo($headerScrollerL),$headerR=$("<div class='slick-header-columns slick-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR),$headers=$().add($headerL).add($headerR),$headerRowScrollerL=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopL),$headerRowScrollerR=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopR),$headerRowScroller=$().add($headerRowScrollerL).add($headerRowScrollerR),$headerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerL),$headerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerR),$headerRowL=$("<div class='slick-headerrow-columns slick-headerrow-columns-left' />").appendTo($headerRowScrollerL),$headerRowR=$("<div class='slick-headerrow-columns slick-headerrow-columns-right' />").appendTo($headerRowScrollerR),$headerRow=$().add($headerRowL).add($headerRowR),$topPanelScrollerL=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopL),$topPanelScrollerR=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopR),$topPanelScroller=$().add($topPanelScrollerL).add($topPanelScrollerR),$topPanelL=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerL),$topPanelR=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerR),$topPanel=$().add($topPanelL).add($topPanelR),options.showColumnHeader||$headerScroller.hide(),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewportTopL=$("<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneTopL),$viewportTopR=$("<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneTopR),$viewportBottomL=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneBottomL),$viewportBottomR=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneBottomR),$viewport=$().add($viewportTopL).add($viewportTopR).add($viewportBottomL).add($viewportBottomR),$activeViewportNode=$viewportTopL,$canvasTopL=$("<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportTopL),$canvasTopR=$("<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportTopR),$canvasBottomL=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportBottomL),$canvasBottomR=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportBottomR),options.viewportClass&&$viewport.toggleClass(options.viewportClass,!0),$canvas=$().add($canvasTopL).add($canvasTopR).add($canvasBottomL).add($canvasBottomR),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),$activeCanvasNode=$canvasTopL,$preHeaderPanelSpacer&&$preHeaderPanelSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headers.width(getHeadersWidth()),$headerRowSpacerL.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headerRowSpacerR.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),options.createFooterRow&&($footerRowScrollerR=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopR),$footerRowScrollerL=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopL),$footerRowScroller=$().add($footerRowScrollerL).add($footerRowScrollerR),$footerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerL),$footerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerR),$footerRowL=$("<div class='slick-footerrow-columns slick-footerrow-columns-left' />").appendTo($footerRowScrollerL),$footerRowR=$("<div class='slick-footerrow-columns slick-footerrow-columns-right' />").appendTo($footerRowScrollerR),$footerRow=$().add($footerRowL).add($footerRowR),options.showFooterRow||$footerRowScroller.hide()),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,getViewportWidth(),getViewportHeight(),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.on("selectstart.ui",function(r){return $(r.target).is("input,textarea")}),setFrozenOptions(),setPaneVisibility(),setScroller(),setOverflow(),updateColumnCaches(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.on("resize.slickgrid",resizeCanvas),$viewport.on("scroll",handleScroll),jQuery.fn.mousewheel&&options.enableMouseWheelScrollHandler&&$viewport.on("mousewheel",handleMouseWheel),$headerScroller.on("contextmenu",handleHeaderContextMenu).on("click",handleHeaderClick).on("mouseenter",".slick-header-column",handleHeaderMouseEnter).on("mouseleave",".slick-header-column",handleHeaderMouseLeave),$headerRowScroller.on("scroll",handleHeaderRowScroll),options.showHeaderRow&&$headerRow.on("mouseenter",".slick-headerrow-column",handleHeaderRowMouseEnter).on("mouseleave",".slick-headerrow-column",handleHeaderRowMouseLeave),options.createFooterRow&&($footerRow.on("contextmenu",handleFooterContextMenu).on("click",handleFooterClick),$footerRowScroller.on("scroll",handleFooterRowScroll)),options.createPreHeaderPanel&&$preHeaderPanelScroller.on("scroll",handlePreHeaderPanelScroll),$focusSink.add($focusSink2).on("keydown",handleKeyDown),$canvas.on("keydown",handleKeyDown).on("click",handleClick).on("dblclick",handleDblClick).on("contextmenu",handleContextMenu).on("draginit",handleDragInit).on("dragstart",{distance:3},handleDragStart).on("drag",handleDrag).on("dragend",handleDragEnd).on("mouseenter",".slick-cell",handleMouseEnter).on("mouseleave",".slick-cell",handleMouseLeave),options.suppressCssChangesOnHiddenInit||restoreCssFromHiddenInit())}function cacheCssForHiddenInit(){$hiddenParents=$container.parents().addBack().not(":visible"),$hiddenParents.each(function(){var r={};for(var e in cssShow)r[e]=this.style[e],this.style[e]=cssShow[e];oldProps.push(r)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(r){var e=oldProps[r];for(var t in cssShow)this.style[t]=e[t]})}function hasFrozenColumns(){return options.frozenColumn>-1}function registerPlugin(r){plugins.unshift(r),r.init(self)}function unregisterPlugin(r){for(var e=plugins.length;e>=0;e--)if(plugins[e]===r){plugins[e].destroy&&plugins[e].destroy(),plugins.splice(e,1);break}}function getPluginByName(r){for(var e=plugins.length-1;e>=0;e--)if(plugins[e].pluginName===r)return plugins[e]}function setSelectionModel(r){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=r,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(r,e){return _getContainerElement(getCanvases(),r,e)}function getActiveCanvasNode(r){return setActiveCanvasNode(r),$activeCanvasNode[0]}function getCanvases(){return $canvas}function setActiveCanvasNode(r){r&&($activeCanvasNode=$(r.target).closest(".grid-canvas"))}function getViewportNode(r,e){return _getContainerElement(getViewports(),r,e)}function getViewports(){return $viewport}function getActiveViewportNode(r){return setActiveViewportNode(r),$activeViewportNode[0]}function setActiveViewportNode(r){r&&($activeViewportNode=$(r.target).closest(".slick-viewport"))}function _getContainerElement(r,e,t){if(r){e||(e=0),t||(t=0);var i=typeof e=="number"?e:getColumnIndex(e),o=hasFrozenRows&&t>=actualFrozenRow+(options.frozenBottom?0:1),s=hasFrozenColumns()&&i>options.frozenColumn;return r[(o?2:0)+(s?1:0)]}}function measureScrollbar(){var r=$('<div class="'+$viewport.className+'" style="position:absolute; top:-10000px; left:-10000px; overflow:auto; width:100px; height:100px;"></div>').appendTo("body"),e=$('<div style="width:200px; height:200px; overflow:auto;"></div>').appendTo(r),t={width:r[0].offsetWidth-r[0].clientWidth,height:r[0].offsetHeight-r[0].clientHeight};return e.remove(),r.remove(),t}function getHeadersWidth(){headersWidth=headersWidthL=headersWidthR=0;for(var r=!options.autoHeight,e=0,t=columns.length;e<t;e++){var i=columns[e].width;options.frozenColumn>-1&&e>options.frozenColumn?headersWidthR+=i:headersWidthL+=i}return r&&(options.frozenColumn>-1&&e>options.frozenColumn?headersWidthR+=scrollbarDimensions.width:headersWidthL+=scrollbarDimensions.width),hasFrozenColumns()?(headersWidthL=headersWidthL+1e3,headersWidthR=Math.max(headersWidthR,viewportW)+headersWidthL,headersWidthR+=scrollbarDimensions.width):(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidth=headersWidthL+headersWidthR,Math.max(headersWidth,viewportW)+1e3}function getHeadersWidthL(){return headersWidthL=0,columns.forEach(function(r,e){options.frozenColumn>-1&&e>options.frozenColumn||(headersWidthL+=r.width)}),hasFrozenColumns()?headersWidthL+=1e3:(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidthL}function getHeadersWidthR(){return headersWidthR=0,columns.forEach(function(r,e){options.frozenColumn>-1&&e>options.frozenColumn&&(headersWidthR+=r.width)}),hasFrozenColumns()&&(headersWidthR=Math.max(headersWidthR,viewportW)+getHeadersWidthL(),headersWidthR+=scrollbarDimensions.width),headersWidthR}function getCanvasWidth(){var r=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,e=columns.length;for(canvasWidthL=canvasWidthR=0;e--;)hasFrozenColumns()&&e>options.frozenColumn?canvasWidthR+=columns[e].width:canvasWidthL+=columns[e].width;var t=canvasWidthL+canvasWidthR;return options.fullWidthRows?Math.max(t,r):t}function updateCanvasWidth(r){var e=canvasWidth,t=canvasWidthL,i=canvasWidthR,o;canvasWidth=getCanvasWidth(),o=canvasWidth!==e||canvasWidthL!==t||canvasWidthR!==i,(o||hasFrozenColumns()||hasFrozenRows)&&($canvasTopL.width(canvasWidthL),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),hasFrozenColumns()?($canvasTopR.width(canvasWidthR),$paneHeaderL.width(canvasWidthL),$paneHeaderR.css("left",canvasWidthL),$paneHeaderR.css("width",viewportW-canvasWidthL),$paneTopL.width(canvasWidthL),$paneTopR.css("left",canvasWidthL),$paneTopR.css("width",viewportW-canvasWidthL),$headerRowScrollerL.width(canvasWidthL),$headerRowScrollerR.width(viewportW-canvasWidthL),$headerRowL.width(canvasWidthL),$headerRowR.width(canvasWidthR),options.createFooterRow&&($footerRowScrollerL.width(canvasWidthL),$footerRowScrollerR.width(viewportW-canvasWidthL),$footerRowL.width(canvasWidthL),$footerRowR.width(canvasWidthR)),options.createPreHeaderPanel&&$preHeaderPanel.width(canvasWidth),$viewportTopL.width(canvasWidthL),$viewportTopR.width(viewportW-canvasWidthL),hasFrozenRows&&($paneBottomL.width(canvasWidthL),$paneBottomR.css("left",canvasWidthL),$viewportBottomL.width(canvasWidthL),$viewportBottomR.width(viewportW-canvasWidthL),$canvasBottomL.width(canvasWidthL),$canvasBottomR.width(canvasWidthR))):($paneHeaderL.width("100%"),$paneTopL.width("100%"),$headerRowScrollerL.width("100%"),$headerRowL.width(canvasWidth),options.createFooterRow&&($footerRowScrollerL.width("100%"),$footerRowL.width(canvasWidth)),options.createPreHeaderPanel&&($preHeaderPanel.width("100%"),$preHeaderPanel.width(canvasWidth)),$viewportTopL.width("100%"),hasFrozenRows&&($viewportBottomL.width("100%"),$canvasBottomL.width(canvasWidthL))),viewportHasHScroll=canvasWidth>=viewportW-scrollbarDimensions.width),$headerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$headerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),options.createFooterRow&&($footerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$footerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0))),(o||r)&&applyColumnWidths()}function disableSelection(r){r&&r.jquery&&r.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var r=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?options.ffMaxSupportedCssHeight:options.maxSupportedCssHeight,t=$("<div style='display:none' />").appendTo(document.body);;){var i=r*2;if(t.css("height",i),i>e||t.height()!==i)break;r=i}return t.remove(),r}function getUID(){return uid}function getHeaderColumnWidthDiff(){return headerColumnWidthDiff}function getScrollbarDimensions(){return scrollbarDimensions}function getDisplayedScrollbarDimensions(){return{width:viewportHasVScroll?scrollbarDimensions.width:0,height:viewportHasHScroll?scrollbarDimensions.height:0}}function getAbsoluteColumnMinWidth(){return absoluteColumnMinWidth}function bindAncestorScrollEvents(){for(var r=hasFrozenRows&&!options.frozenBottom?$canvasBottomL[0]:$canvasTopL[0];(r=r.parentNode)!=document.body&&r!=null;)if(r==$viewportTopL[0]||r.scrollWidth!=r.clientWidth||r.scrollHeight!=r.clientHeight){var e=$(r);$boundAncestors?$boundAncestors=$boundAncestors.add(e):$boundAncestors=e,e.on("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.off("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(r,e,t){if(initialized){var i=getColumnIndex(r);if(i!=null){var o=columns[i],s=$headers.children().eq(i);s&&(e!==void 0&&(columns[i].name=e),t!==void 0&&(columns[i].toolTip=t),trigger(self.onBeforeHeaderCellDestroy,{node:s[0],column:o,grid:self}),s.attr("title",t||"").children().eq(0).html(e),trigger(self.onHeaderCellRendered,{node:s[0],column:o,grid:self}))}}}function getHeader(r){if(!r)return hasFrozenColumns()?$headers:$headerL;var e=getColumnIndex(r.id);return hasFrozenColumns()?e<=options.frozenColumn?$headerL:$headerR:$headerL}function getHeaderColumn(r){var e=typeof r=="number"?r:getColumnIndex(r),t=hasFrozenColumns()?e<=options.frozenColumn?$headerL:$headerR:$headerL,i=hasFrozenColumns()?e<=options.frozenColumn?e:e-options.frozenColumn-1:e,o=t.children().eq(i);return o&&o[0]}function getHeaderRow(){return hasFrozenColumns()?$headerRow:$headerRow[0]}function getFooterRow(){return hasFrozenColumns()?$footerRow:$footerRow[0]}function getPreHeaderPanel(){return $preHeaderPanel[0]}function getPreHeaderPanelRight(){return $preHeaderPanelR[0]}function getHeaderRowColumn(r){var e=typeof r=="number"?r:getColumnIndex(r),t;hasFrozenColumns()?e<=options.frozenColumn?t=$headerRowL:(t=$headerRowR,e-=options.frozenColumn+1):t=$headerRowL;var i=t.children().eq(e);return i&&i[0]}function getFooterRowColumn(r){var e=typeof r=="number"?r:getColumnIndex(r),t;hasFrozenColumns()?e<=options.frozenColumn?t=$footerRowL:(t=$footerRowR,e-=options.frozenColumn+1):t=$footerRowL;var i=t&&t.children().eq(e);return i&&i[0]}function createColumnFooter(){if(options.createFooterRow){$footerRow.find(".slick-footerrow-column").each(function(){var i=$(this).data("column");i&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:i,grid:self})}),$footerRowL.empty(),$footerRowR.empty();for(var r=0;r<columns.length;r++){var e=columns[r],t=$("<div class='ui-state-default slick-footerrow-column l"+r+" r"+r+"'></div>").data("column",e).addClass(hasFrozenColumns()&&r<=options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&r>options.frozenColumn?$footerRowR:$footerRowL);trigger(self.onFooterRowCellRendered,{node:t[0],column:e,grid:self})}}}function createColumnGroupHeaders(){var r=0,e=!1;if(treeColumns.hasDepth()){for(var t=0;t<$groupHeadersL.length;t++){$groupHeadersL[t].empty(),$groupHeadersR[t].empty();var i=treeColumns.getColumnsInDepth(t);for(var o in i){var s=i[o];r+=s.extractColumns().length,hasFrozenColumns()&&t===0&&r-1===options.frozenColumn&&(e=!0),$("<div class='ui-state-default slick-group-header-column' />").html("<span class='slick-column-name'>"+s.name+"</span>").attr("id",""+uid+s.id).attr("title",s.toolTip||"").data("column",s).addClass(s.headerCssClass||"").addClass(hasFrozenColumns()&&r-1>options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&r-1>options.frozenColumn?$groupHeadersR[t]:$groupHeadersL[t])}if(hasFrozenColumns()&&t===0&&!e){$groupHeadersL[t].empty(),$groupHeadersR[t].empty(),alert("All columns of group should to be grouped!");break}}applyColumnGroupHeaderWidths()}}function createColumnHeaders(){function r(){$(this).addClass("ui-state-hover")}function e(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var p=$(this).data("column");p&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:p,grid:self})}),$headerL.empty(),$headerR.empty(),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),$headerRow.find(".slick-headerrow-column").each(function(){var p=$(this).data("column");p&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:p,grid:self})}),$headerRowL.empty(),$headerRowR.empty(),options.createFooterRow&&($footerRowL.find(".slick-footerrow-column").each(function(){var p=$(this).data("column");p&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:p,grid:self})}),$footerRowL.empty(),hasFrozenColumns()&&($footerRowR.find(".slick-footerrow-column").each(function(){var p=$(this).data("column");p&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:p,grid:self})}),$footerRowR.empty()));for(var t=0;t<columns.length;t++){var i=columns[t],o=hasFrozenColumns()?t<=options.frozenColumn?$headerL:$headerR:$headerL,s=hasFrozenColumns()?t<=options.frozenColumn?$headerRowL:$headerRowR:$headerRowL,l=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+i.name+"</span>").width(i.width-headerColumnWidthDiff).attr("id",""+uid+i.id).attr("title",i.toolTip||"").data("column",i).addClass(i.headerCssClass||"").addClass(hasFrozenColumns()&&t<=options.frozenColumn?"frozen":"").appendTo(o);if((options.enableColumnReorder||i.sortable)&&l.on("mouseenter",r).on("mouseleave",e),i.hasOwnProperty("headerCellAttrs")&&i.headerCellAttrs instanceof Object)for(var a in i.headerCellAttrs)i.headerCellAttrs.hasOwnProperty(a)&&l.attr(a,i.headerCellAttrs[a]);if(i.sortable&&(l.addClass("slick-header-sortable"),l.append("<span class='slick-sort-indicator"+(options.numberedMultiColumnSort&&!options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")+"' />"),options.numberedMultiColumnSort&&options.sortColNumberInSeparateSpan&&l.append("<span class='slick-sort-indicator-numbered' />")),trigger(self.onHeaderCellRendered,{node:l[0],column:i,grid:self}),options.showHeaderRow){var d=$("<div class='ui-state-default slick-headerrow-column l"+t+" r"+t+"'></div>").data("column",i).addClass(hasFrozenColumns()&&t<=options.frozenColumn?"frozen":"").appendTo(s);trigger(self.onHeaderRowCellRendered,{node:d[0],column:i,grid:self})}if(options.createFooterRow&&options.showFooterRow){var u=$("<div class='ui-state-default slick-footerrow-column l"+t+" r"+t+"'></div>").data("column",i).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:u[0],column:i,grid:self})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&(typeof options.enableColumnReorder=="function"?options.enableColumnReorder(self,$headers,headerColumnWidthDiff,setColumns,setupColumnResize,columns,getColumnIndex,uid,trigger):setupColumnReorder())}function setupColumnSort(){$headers.click(function(r){if(!columnResizeDragging&&(r.metaKey=r.metaKey||r.ctrlKey,!$(r.target).hasClass("slick-resizable-handle"))){var e=$(r.target).closest(".slick-header-column");if(e.length){var t=e.data("column");if(t.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var i=$.extend(!0,[],sortColumns),o=null,s=0;s<sortColumns.length;s++)if(sortColumns[s].columnId==t.id){o=sortColumns[s],o.sortAsc=!o.sortAsc;break}var l=!!o;options.tristateMultiColumnSort?(o||(o={columnId:t.id,sortAsc:t.defaultSortAsc}),l&&o.sortAsc&&(sortColumns.splice(s,1),o=null),options.multiColumnSort||(sortColumns=[]),o&&(!l||!options.multiColumnSort)&&sortColumns.push(o)):r.metaKey&&options.multiColumnSort?o&&sortColumns.splice(s,1):((!r.shiftKey&&!r.metaKey||!options.multiColumnSort)&&(sortColumns=[]),o?sortColumns.length===0&&sortColumns.push(o):(o={columnId:t.id,sortAsc:t.defaultSortAsc},sortColumns.push(o)));var a;options.multiColumnSort?a={multiColumnSort:!0,previousSortColumns:i,sortCols:$.map(sortColumns,function(d){return{columnId:columns[getColumnIndex(d.columnId)].id,sortCol:columns[getColumnIndex(d.columnId)],sortAsc:d.sortAsc}})}:a={multiColumnSort:!1,previousSortColumns:i,columnId:sortColumns.length>0?t.id:null,sortCol:sortColumns.length>0?t:null,sortAsc:sortColumns.length>0?sortColumns[0].sortAsc:!0},trigger(self.onBeforeSort,a,r)!==!1&&(setSortColumns(sortColumns),trigger(self.onSort,a,r))}}}})}function currentPositionInHeader(r){var e=0;return $headers.find(".slick-header-column").each(function(t){if(this.id==r)return e=t,!1}),e}function limitPositionInGroup(r){var e,t=0,i=0;return treeColumns.getColumnsInDepth($groupHeadersL.length-1).some(function(o){return t=i,i+=o.columns.length,o.columns.some(function(s){return s.id===r&&(e=o),e}),e}),i--,{start:t,end:i,group:e}}function remove(r,e){var t=r.lastIndexOf(e);t>-1&&(r.splice(t,1),remove(r,e))}function columnPositionValidInGroup(r){var e=currentPositionInHeader(r[0].id),t=limitPositionInGroup(r.data("column").id),i=t.start<=e&&e<=t.end;return{limit:t,valid:i,message:i?"":'Column "'.concat(r.text(),'" can be reordered only within the "',t.group.name,'" group!')}}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");var r=null;function e(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft+10}function t(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft-10}var i;$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(o,s){s.placeholder.width(s.helper.outerWidth()-headerColumnWidthDiff),i=!hasFrozenColumns()||s.placeholder.offset().left+s.placeholder.width()>$viewportScrollContainerX.offset().left,$(s.helper).addClass("slick-header-column-active")},beforeStop:function(o,s){$(s.helper).removeClass("slick-header-column-active")},sort:function(o,s){i&&o.originalEvent.pageX>$container[0].clientWidth?r||(r=setInterval(e,100)):i&&o.originalEvent.pageX<$viewportScrollContainerX.offset().left?r||(r=setInterval(t,100)):(clearInterval(r),r=null)},stop:function(o,s){var l=!1;clearInterval(r),r=null;var a=null;if(treeColumns.hasDepth()){var d=columnPositionValidInGroup(s.item);a=d.limit,l=!d.valid,l&&alert(d.message)}if(l||!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var u=$headerL.sortable("toArray");u=u.concat($headerR.sortable("toArray"));for(var p=[],f=0;f<u.length;f++)p.push(columns[getColumnIndex(u[f].replace(uid,""))]);setColumns(p),trigger(self.onColumnsReordered,{impactedColumns:getImpactedColumns(a)}),o.stopPropagation(),setupColumnResize()}})}function getImpactedColumns(r){var e=[];if(r)for(var t=r.start;t<=r.end;t++)e.push(columns[t]);else e=columns;return e}function setupColumnResize(){var r,e,t,i,o,s,l,a,d,u,p=0;s=$headers.children(),s.find(".slick-resizable-handle").remove(),s.each(function(f,m){f>=columns.length||columns[f].resizable&&(d===void 0&&(d=f),u=f)}),d!==void 0&&s.each(function(f,m){f>=columns.length||f<d||options.forceFitColumns&&f>=u||(r=$(m),$("<div class='slick-resizable-handle' />").appendTo(m).on("dragstart",function(_,C){if(!getEditorLock().commitCurrentEdit())return!1;o=_.pageX,p=0,$(this).parent().addClass("slick-header-column-active");var b=null,E=null;if(s.each(function(L,z){L>=columns.length||(columns[L].previousWidth=$(z).outerWidth())}),options.forceFitColumns)for(b=0,E=0,e=f+1;e<columns.length;e++)i=columns[e],i.resizable&&(E!==null&&(i.maxWidth?E+=i.maxWidth-i.previousWidth:E=null),b+=i.previousWidth-Math.max(i.minWidth||0,absoluteColumnMinWidth));var x=0,R=0;for(e=0;e<=f;e++)i=columns[e],i.resizable&&(R!==null&&(i.maxWidth?R+=i.maxWidth-i.previousWidth:R=null),x+=i.previousWidth-Math.max(i.minWidth||0,absoluteColumnMinWidth));b===null&&(b=1e5),x===null&&(x=1e5),E===null&&(E=1e5),R===null&&(R=1e5),a=o+Math.min(b,R),l=o-Math.min(x,E)}).on("drag",function(_,C){columnResizeDragging=!0;var b,E=Math.min(a,Math.max(l,_.pageX))-o,x,R=0,L=0,z=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;if(E<0){for(x=E,e=f;e>=0;e--)i=columns[e],i.resizable&&(b=Math.max(i.minWidth||0,absoluteColumnMinWidth),x&&i.previousWidth+x<b?(x+=i.previousWidth-b,i.width=b):(i.width=i.previousWidth+x,x=0));for(t=0;t<=f;t++)i=columns[t],hasFrozenColumns()&&t>options.frozenColumn?L+=i.width:R+=i.width;if(options.forceFitColumns)for(x=-E,e=f+1;e<columns.length;e++)i=columns[e],i.resizable&&(x&&i.maxWidth&&i.maxWidth-i.previousWidth<x?(x-=i.maxWidth-i.previousWidth,i.width=i.maxWidth):(i.width=i.previousWidth+x,x=0),hasFrozenColumns()&&e>options.frozenColumn?L+=i.width:R+=i.width);else for(e=f+1;e<columns.length;e++)i=columns[e],hasFrozenColumns()&&e>options.frozenColumn?L+=i.width:R+=i.width;if(options.forceFitColumns)for(x=-E,e=f+1;e<columns.length;e++)i=columns[e],i.resizable&&(x&&i.maxWidth&&i.maxWidth-i.previousWidth<x?(x-=i.maxWidth-i.previousWidth,i.width=i.maxWidth):(i.width=i.previousWidth+x,x=0))}else{for(x=E,R=0,L=0,e=f;e>=0;e--)if(i=columns[e],i.resizable)if(x&&i.maxWidth&&i.maxWidth-i.previousWidth<x)x-=i.maxWidth-i.previousWidth,i.width=i.maxWidth;else{var B=i.previousWidth+x,G=canvasWidthL+x;hasFrozenColumns()&&e<=options.frozenColumn?(B>p&&G<z-options.frozenRightViewportMinWidth&&(p=B),i.width=G+options.frozenRightViewportMinWidth>z?p:B):i.width=B,x=0}for(t=0;t<=f;t++)i=columns[t],hasFrozenColumns()&&t>options.frozenColumn?L+=i.width:R+=i.width;if(options.forceFitColumns)for(x=-E,e=f+1;e<columns.length;e++)i=columns[e],i.resizable&&(b=Math.max(i.minWidth||0,absoluteColumnMinWidth),x&&i.previousWidth+x<b?(x+=i.previousWidth-b,i.width=b):(i.width=i.previousWidth+x,x=0),hasFrozenColumns()&&e>options.frozenColumn?L+=i.width:R+=i.width);else for(e=f+1;e<columns.length;e++)i=columns[e],hasFrozenColumns()&&e>options.frozenColumn?L+=i.width:R+=i.width}hasFrozenColumns()&&R!=canvasWidthL&&($headerL.width(R+1e3),$paneHeaderR.css("left",R)),applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths(),trigger(self.onColumnsDrag,{triggeredByColumn:$(this).parent().attr("id").replace(uid,""),resizeHandle:$(this)})}).on("dragend",function(_,C){$(this).parent().removeClass("slick-header-column-active");var b=$(this).parent().attr("id").replace(uid,"");trigger(self.onBeforeColumnsResize,{triggeredByColumn:b})===!0&&(applyColumnHeaderWidths(),applyColumnGroupHeaderWidths());var E;for(e=0;e<columns.length;e++)i=columns[e],E=$(s[e]).outerWidth(),i.previousWidth!==E&&i.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{triggeredByColumn:b}),setTimeout(function(){columnResizeDragging=!1},300)}).on("dblclick",function(){var _=$(this).parent().attr("id").replace(uid,"");trigger(self.onColumnsResizeDblClick,{triggeredByColumn:_})}))})}function getVBoxDelta(r){var e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],t=0;return r&&typeof r.css=="function"&&$.each(e,function(i,o){t+=parseFloat(r.css(o))||0}),t}function setFrozenOptions(){if(options.frozenColumn=options.frozenColumn>=0&&options.frozenColumn<columns.length?parseInt(options.frozenColumn):-1,options.frozenRow>-1){hasFrozenRows=!0,frozenRowsHeight=options.frozenRow*options.rowHeight;var r=getDataLength();actualFrozenRow=options.frozenBottom?r-options.frozenRow:options.frozenRow}else hasFrozenRows=!1}function setPaneVisibility(){hasFrozenColumns()?($paneHeaderR.show(),$paneTopR.show(),hasFrozenRows?($paneBottomL.show(),$paneBottomR.show()):($paneBottomR.hide(),$paneBottomL.hide())):($paneHeaderR.hide(),$paneTopR.hide(),$paneBottomR.hide(),hasFrozenRows?$paneBottomL.show():($paneBottomR.hide(),$paneBottomL.hide()))}function setOverflow(){$viewportTopL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportTopR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),hasFrozenRows?"scroll":"auto")}),$viewportBottomL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportBottomR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),"auto")}),options.viewportClass&&($viewportTopL.toggleClass(options.viewportClass,!0),$viewportTopR.toggleClass(options.viewportClass,!0),$viewportBottomL.toggleClass(options.viewportClass,!0),$viewportBottomR.toggleClass(options.viewportClass,!0))}function setScroller(){hasFrozenColumns()?($headerScrollContainer=$headerScrollerR,$headerRowScrollContainer=$headerRowScrollerR,$footerRowScrollContainer=$footerRowScrollerR,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomR,$viewportScrollContainerY=$viewportTopR):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomR:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopR):($headerScrollContainer=$headerScrollerL,$headerRowScrollContainer=$headerRowScrollerL,$footerRowScrollContainer=$footerRowScrollerL,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomL,$viewportScrollContainerY=$viewportTopL):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomL:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopL)}function measureCellPaddingAndBorder(){var r,e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=$.fn.jquery.split(".");jQueryNewWidthBehaviour=i[0]==1&&i[1]>=8||i[0]>=2,r=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,r.css("box-sizing")!="border-box"&&r.css("-moz-box-sizing")!="border-box"&&r.css("-webkit-box-sizing")!="border-box"&&($.each(e,function(s,l){headerColumnWidthDiff+=parseFloat(r.css(l))||0}),$.each(t,function(s,l){headerColumnHeightDiff+=parseFloat(r.css(l))||0})),r.remove();var o=$("<div class='slick-row' />").appendTo($canvas);r=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(o),cellWidthDiff=cellHeightDiff=0,r.css("box-sizing")!="border-box"&&r.css("-moz-box-sizing")!="border-box"&&r.css("-webkit-box-sizing")!="border-box"&&($.each(e,function(s,l){cellWidthDiff+=parseFloat(r.css(l))||0}),$.each(t,function(s,l){cellHeightDiff+=parseFloat(r.css(l))||0})),o.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var r=options.rowHeight-cellHeightDiff,e=["."+uid+" .slick-group-header-column { left: 1000px; }","."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-preheader-panel { height:"+options.preHeaderPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+r+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],t=0;t<columns.length;t++)e.push("."+uid+" .l"+t+" { }"),e.push("."+uid+" .r"+t+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=e.join(" "):$style[0].appendChild(document.createTextNode(e.join(" ")))}function getColumnCssRules(r){var e;if(!stylesheet){var t=document.styleSheets;for(e=0;e<t.length;e++)if((t[e].ownerNode||t[e].owningElement)==$style[0]){stylesheet=t[e];break}if(!stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var i=stylesheet.cssRules||stylesheet.rules,o,s;for(e=0;e<i.length;e++){var l=i[e].selectorText;(o=/\.l\d+/.exec(l))?(s=parseInt(o[0].substr(2,o[0].length-2),10),columnCssRulesL[s]=i[e]):(o=/\.r\d+/.exec(l))&&(s=parseInt(o[0].substr(2,o[0].length-2),10),columnCssRulesR[s]=i[e])}}return{left:columnCssRulesL[r],right:columnCssRulesR[r]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(r){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var e=plugins.length;e--;)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.off(".slickgrid"),removeCssRules(),$canvas.off(),$viewport.off(),$headerScroller.off(),$headerRowScroller.off(),$footerRow&&$footerRow.off(),$footerRowScroller&&$footerRowScroller.off(),$preHeaderPanelScroller&&$preHeaderPanelScroller.off(),$focusSink.off(),$(".slick-resizable-handle").off(),$(".slick-header-column").off(),$container.empty().removeClass(uid),r&&destroyAllElements()}function destroyAllElements(){$activeCanvasNode=null,$activeViewportNode=null,$boundAncestors=null,$canvas=null,$canvasTopL=null,$canvasTopR=null,$canvasBottomL=null,$canvasBottomR=null,$container=null,$focusSink=null,$focusSink2=null,$groupHeaders=null,$groupHeadersL=null,$groupHeadersR=null,$headerL=null,$headerR=null,$headers=null,$headerRow=null,$headerRowL=null,$headerRowR=null,$headerRowSpacerL=null,$headerRowSpacerR=null,$headerRowScrollContainer=null,$headerRowScroller=null,$headerRowScrollerL=null,$headerRowScrollerR=null,$headerScrollContainer=null,$headerScroller=null,$headerScrollerL=null,$headerScrollerR=null,$hiddenParents=null,$footerRow=null,$footerRowL=null,$footerRowR=null,$footerRowSpacerL=null,$footerRowSpacerR=null,$footerRowScroller=null,$footerRowScrollerL=null,$footerRowScrollerR=null,$footerRowScrollContainer=null,$preHeaderPanel=null,$preHeaderPanelR=null,$preHeaderPanelScroller=null,$preHeaderPanelScrollerR=null,$preHeaderPanelSpacer=null,$preHeaderPanelSpacerR=null,$topPanel=null,$topPanelScroller=null,$style=null,$topPanelScrollerL=null,$topPanelScrollerR=null,$topPanelL=null,$topPanelR=null,$paneHeaderL=null,$paneHeaderR=null,$paneTopL=null,$paneTopR=null,$paneBottomL=null,$paneBottomR=null,$viewport=null,$viewportTopL=null,$viewportTopR=null,$viewportBottomL=null,$viewportBottomR=null,$viewportScrollContainerX=null,$viewportScrollContainerY=null}var canvas=null,canvas_context=null;function autosizeColumn(r,e){var t=r;if(typeof r=="number")t=columns[r];else if(typeof r=="string")for(var i=0;i<columns.length;i++)columns[i].Id===r&&(t=columns[i]);var o=$(getCanvasNode(0,0));getColAutosizeWidth(t,o,e)}function autosizeColumns(r,e){if(r=r||options.autosizeColsMode,r===Slick.GridAutosizeColsMode.LegacyForceFit||r===Slick.GridAutosizeColsMode.LegacyOff){legacyAutosizeColumns();return}if(r!==Slick.GridAutosizeColsMode.None){canvas=document.createElement("canvas"),canvas&&canvas.getContext&&(canvas_context=canvas.getContext("2d"));var t=$(getCanvasNode(0,0)),i=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,o,s,l,a,d=0,u=0,p=0,f=0,m=0;for(o=0;o<columns.length;o++)s=columns[o],getColAutosizeWidth(s,t,e),m+=s.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?s.width:0,f+=s.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?s.width:s.minWidth,d+=s.autoSize.widthPx,u+=s.autoSize.sizeToRemaining?0:s.autoSize.widthPx,p+=s.autoSize.sizeToRemaining&&s.minWidth||0;var _=d-u;if(r===Slick.GridAutosizeColsMode.FitViewportToCols){var C=d+scrollbarDimensions.width;r=Slick.GridAutosizeColsMode.IgnoreViewport,options.viewportMaxWidthPx&&C>options.viewportMaxWidthPx?(C=options.viewportMaxWidthPx,r=Slick.GridAutosizeColsMode.FitColsToViewport):options.viewportMinWidthPx&&C<options.viewportMinWidthPx&&(C=options.viewportMinWidthPx,r=Slick.GridAutosizeColsMode.FitColsToViewport),$container.width(C)}if(r===Slick.GridAutosizeColsMode.FitColsToViewport)if(_>0&&u<i-p)for(o=0;o<columns.length;o++){s=columns[o];var b=i-u;s.autoSize.sizeToRemaining?l=b*s.autoSize.widthPx/_:l=s.autoSize.widthPx,s.rerenderOnResize&&s.width!=l&&(a=!0),s.width=l}else if(options.viewportSwitchToScrollModeWidthPercent&&u+p>i*options.viewportSwitchToScrollModeWidthPercent/100||f>i)r=Slick.GridAutosizeColsMode.IgnoreViewport;else{var E=u-m,x=i-m-p;for(o=0;o<columns.length;o++)s=columns[o],l=s.width,s.autoSize.autosizeMode!==Slick.ColAutosizeMode.Locked&&(s.autoSize.sizeToRemaining?l=s.minWidth:(l=x/E*s.autoSize.widthPx,l<s.minWidth&&(l=s.minWidth),E-=s.autoSize.widthPx,x-=l)),s.rerenderOnResize&&s.width!=l&&(a=!0),s.width=l}if(r===Slick.GridAutosizeColsMode.IgnoreViewport)for(o=0;o<columns.length;o++)l=columns[o].autoSize.widthPx,columns[o].rerenderOnResize&&columns[o].width!=l&&(a=!0),columns[o].width=l;reRenderColumns(a)}}function LogColWidths(){for(var r="Col Widths:",e=0;e<columns.length;e++)r+=" "+columns[e].width;console.log(r)}function getColAutosizeWidth(r,e,t){var i=r.autoSize;if(i.widthPx=r.width,!(i.autosizeMode===Slick.ColAutosizeMode.Locked||i.autosizeMode===Slick.ColAutosizeMode.Guide)){var o=getDataLength();if(i.autosizeMode===Slick.ColAutosizeMode.ContentIntelligent){var s=i.colDataTypeOf,l;if(o>0){var a=getDataItem(0);a&&(l=a[r.field],s=typeof l,s==="object"&&(l instanceof Date&&(s="date"),typeof moment<"u"&&l instanceof moment&&(s="moment")))}s==="boolean"&&(i.colValueArray=[!0,!1]),s==="number"&&(i.valueFilterMode=Slick.ValueFilterMode.GetGreatestAndSub,i.rowSelectionMode=Slick.RowSelectionMode.AllRows),s==="string"&&(i.valueFilterMode=Slick.ValueFilterMode.GetLongestText,i.rowSelectionMode=Slick.RowSelectionMode.AllRows,i.allowAddlPercent=5),s==="date"&&(i.colValueArray=[new Date(2009,8,30,12,20,20)]),s==="moment"&&typeof moment<"u"&&(i.colValueArray=[moment([2009,8,30,12,20,20])])}var d=getColContentSize(r,e,t),u=i.allowAddlPercent?1+i.allowAddlPercent/100:1;d=d*u+options.autosizeColPaddingPx,r.minWidth&&d<r.minWidth&&(d=r.minWidth),r.maxWidth&&d>r.maxWidth&&(d=r.maxWidth),i.widthPx=d}}function getColContentSize(r,e,t){var i=r.autoSize,o=1,s,l,a=0,d=0;if(i.ignoreHeaderText||(d=getColHeaderWidth(r)),d===0&&(d=r.width?r.width:r.maxWidth?r.maxWidth:r.minWidth?r.minWidth:20),i.colValueArray)return a=getColWidth(r,e,i.colValueArray),Math.max(d,a);var u=getData();if(u.getItems&&(u=u.getItems()),u.length===0)return d;var p=(t?i.rowSelectionModeOnInit:void 0)||i.rowSelectionMode;if(p===Slick.RowSelectionMode.FirstRow&&(u=u.slice(0,1)),p===Slick.RowSelectionMode.LastRow&&(u=u.slice(u.length-1,u.length)),p===Slick.RowSelectionMode.FirstNRows&&(u=u.slice(0,i.rowSelectionCount)),i.valueFilterMode===Slick.ValueFilterMode.DeDuplicate){var f={};for(s=0,l=u.length;s<l;s++)f[u[s][r.field]]=!0;if(Object.keys)u=Object.keys(f);else{u=[];for(var s in f)u.push(s)}}if(i.valueFilterMode===Slick.ValueFilterMode.GetGreatestAndSub){var m,_=0,C=0;for(s=0,l=u.length;s<l;s++)m=u[s][r.field],Math.abs(m)>C&&(_=m,C=Math.abs(m));_=""+_,_=Array(_.length+1).join("9"),_=+_,u=[_]}if(i.valueFilterMode===Slick.ValueFilterMode.GetLongestTextAndSub){var m,b=0;for(s=0,l=u.length;s<l;s++)m=u[s][r.field],(m||"").length>b&&(b=m.length);m=Array(b+1).join("m"),o=options.autosizeTextAvgToMWidthRatio,u=[m]}if(i.valueFilterMode===Slick.ValueFilterMode.GetLongestText){var m="",b=0,E=0;for(s=0,l=u.length;s<l;s++)m=u[s][r.field],(m||"").length>b&&(b=m.length,E=s);m=u[E][r.field],u=[m]}return a=getColWidth(r,e,u)*o,Math.max(d,a)}function getColWidth(r,e,t){var i=getColumnIndex(r.id),o=$('<div class="slick-row ui-widget-content"></div>'),s=$('<div class="slick-cell"></div>');s.css({position:"absolute",visibility:"hidden","text-overflow":"initial","white-space":"nowrap"}),o.append(s),e.append(o);var l,a=0,d,u,p,f=0,m;return canvas_context&&r.autoSize.widthEvalMode===Slick.WidthEvalMode.CanvasTextSize?(canvas_context.font=s.css("font-size")+" "+s.css("font-family"),$(t).each(function(_,C){m=Array.isArray(C)?C[r.field]:C,d=""+m,l=d?canvas_context.measureText(d).width:0,l>a&&(a=l,u=d)}),s.html(u),l=s.outerWidth(),o.remove(),s=null,l):($(t).each(function(_,C){m=Array.isArray(C)?C[r.field]:C,r.formatterOverride?p=r.formatterOverride(_,i,m,r,C,self):r.formatter?p=r.formatter(_,i,m,r,C,self):p=""+m,applyFormatResultToCellNode(p,s[0]),l=s.outerWidth(),l>a&&(a=l)}),o.remove(),s=null,a)}function getColHeaderWidth(r){var e=0,t=getUID()+r.id,i=document.getElementById(t),o=t+"_";if(i){var s=i.cloneNode(!0);s.id=o,s.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",i.parentNode.insertBefore(s,i),e=s.offsetWidth,s.parentNode.removeChild(s)}else{var l=getHeader(r);i=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+r.name+"</span>").attr("id",o).css({position:"absolute",visibility:"hidden",right:"auto","text-overflow:":"initial","white-space":"nowrap"}).addClass(r.headerCssClass||"").appendTo(l),e=i[0].offsetWidth,l[0].removeChild(i[0])}return e}function legacyAutosizeColumns(){var r,e,t=[],i=0,o=0,s,l=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(r=0;r<columns.length;r++)e=columns[r],t.push(e.width),o+=e.width,e.resizable&&(i+=e.width-Math.max(e.minWidth,absoluteColumnMinWidth));for(s=o;o>l&&i;){var a=(o-l)/i;for(r=0;r<columns.length&&o>l;r++){e=columns[r];var d=t[r];if(!(!e.resizable||d<=e.minWidth||d<=absoluteColumnMinWidth)){var u=Math.max(e.minWidth,absoluteColumnMinWidth),p=Math.floor(a*(d-u))||1;p=Math.min(p,d-u),o-=p,i-=p,t[r]-=p}}if(s<=o)break;s=o}for(s=o;o<l;){var f=l/o;for(r=0;r<columns.length&&o<l;r++){e=columns[r];var m=t[r],_;!e.resizable||e.maxWidth<=m?_=0:_=Math.min(Math.floor(f*m)-m,e.maxWidth-m||1e6)||1,o+=_,t[r]+=o<=l?_:0}if(s>=o)break;s=o}var C=!1;for(r=0;r<columns.length;r++)columns[r].rerenderOnResize&&columns[r].width!=t[r]&&(C=!0),columns[r].width=t[r];reRenderColumns(C)}function reRenderColumns(r){applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),updateCanvasWidth(!0),trigger(self.onAutosizeColumns,{columns}),r&&(invalidateAllRows(),render())}function trigger(r,e,t){return t=t||new Slick.EventData,e=e||{},e.grid=self,r.notify(e,t,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(r){return columnsById[r]}function applyColumnGroupHeaderWidths(){if(treeColumns.hasDepth())for(var r=$groupHeadersL.length-1;r>=0;r--){var e=treeColumns.getColumnsInDepth(r);$().add($groupHeadersL[r]).add($groupHeadersR[r]).each(function(t){var i=$(this),o=0;i.width(t===0?getHeadersWidthL():getHeadersWidthR()),i.children().each(function(){var s=$(this),l=$(this).data("column");l.width=0,l.columns.forEach(function(){var a=i.next().children(":eq("+o+++")");l.width+=a.outerWidth()}),s.width(l.width-headerColumnWidthDiff)})})}}function applyColumnHeaderWidths(){if(initialized){for(var r,e=0,t=$headers.children(),i=columns.length;e<i;e++)r=$(t[e]),jQueryNewWidthBehaviour?r.outerWidth()!==columns[e].width&&r.outerWidth(columns[e].width):r.width()!==columns[e].width-headerColumnWidthDiff&&r.width(columns[e].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var r=0,e,t,i=0;i<columns.length;i++)e=columns[i].width,t=getColumnCssRules(i),t.left.style.left=r+"px",t.right.style.right=(options.frozenColumn!=-1&&i>options.frozenColumn?canvasWidthR:canvasWidthL)-r-e+"px",options.frozenColumn==i?r=0:r+=columns[i].width}function setSortColumn(r,e){setSortColumns([{columnId:r,sortAsc:e}])}function setSortColumns(r){sortColumns=r;var e=options.numberedMultiColumnSort&&sortColumns.length>1,t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),t.find(".slick-sort-indicator-numbered").text(""),$.each(sortColumns,function(i,o){o.sortAsc==null&&(o.sortAsc=!0);var s=getColumnIndex(o.columnId);s!=null&&(t.eq(s).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(o.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),e&&t.eq(s).find(".slick-sort-indicator-numbered").text(i+1))})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(r,e){var t=selectedRows.slice(0);selectedRows=[];for(var i={},o=0;o<e.length;o++)for(var s=e[o].fromRow;s<=e[o].toRow;s++){i[s]||(selectedRows.push(s),i[s]={});for(var l=e[o].fromCell;l<=e[o].toCell;l++)canCellBeSelected(s,l)&&(i[s][columns[l].id]=options.selectedCellCssClass)}if(setCellCssStyles(options.selectedCellCssClass,i),simpleArrayEquals(t,selectedRows)){var a=r&&r.detail&&r.detail.caller||"click",d=getSelectedRows().filter(function(p){return t.indexOf(p)<0}),u=t.filter(function(p){return getSelectedRows().indexOf(p)<0});trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),previousSelectedRows:t,caller:a,changedSelectedRows:d,changedUnselectedRows:u},r)}}function simpleArrayEquals(r,e){return Array.isArray(r)&&Array.isArray(e)&&e.sort().toString()!==r.sort().toString()}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var r=0,e=0,t=columns.length;e<t;e++)columnPosLeft[e]=r,columnPosRight[e]=r+columns[e].width,options.frozenColumn==e?r=0:r+=columns[e].width}function updateColumnProps(){columnsById={};for(var r=0;r<columns.length;r++){columns[r].width&&(columns[r].widthRequest=columns[r].width);var e=columns[r]=$.extend({},columnDefaults,columns[r]);e.autoSize=$.extend({},columnAutosizeDefaults,e.autoSize),columnsById[e.id]=r,e.minWidth&&e.width<e.minWidth&&(e.width=e.minWidth),e.maxWidth&&e.width>e.maxWidth&&(e.width=e.maxWidth),e.resizable}}function setColumns(r){trigger(self.onBeforeSetColumns,{previousColumns:columns,newColumns:r,grid:self});var e=new Slick.TreeColumns(r);e.hasDepth()?(treeColumns=e,columns=treeColumns.extractColumns()):columns=r,updateColumnProps(),updateColumnCaches(),initialized&&(setPaneVisibility(),setOverflow(),invalidateAllRows(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),removeCssRules(),createCssRules(),resizeCanvas(),updateCanvasWidth(),applyColumnHeaderWidths(),applyColumnWidths(),handleScroll(),getSelectionModel()&&getSelectionModel().refreshSelections&&getSelectionModel().refreshSelections())}function getOptions(){return options}function setOptions(r,e,t,i){if(getEditorLock().commitCurrentEdit()){makeActiveCellNormal(),r.showColumnHeader!==void 0&&setColumnHeaderVisibility(r.showColumnHeader),options.enableAddRow!==r.enableAddRow&&invalidateRow(getDataLength());var o=$.extend(!0,{},options);if(options=$.extend(options,r),trigger(self.onSetOptions,{optionsBefore:o,optionsAfter:options}),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),e||render(),setFrozenOptions(),setScroller(),i||setOverflow(),t||setColumns(treeColumns.extractColumns()),options.enableMouseWheelScrollHandler&&$viewport&&jQuery.fn.mousewheel){var s=$._data($viewport[0],"events");(!s||!s.mousewheel)&&$viewport.on("mousewheel",handleMouseWheel)}else options.enableMouseWheelScrollHandler===!1&&$viewport.off("mousewheel")}}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1),options.forceFitColumns&&(options.autosizeColsMode=Slick.GridAutosizeColsMode.LegacyForceFit,console.log("forceFitColumns option is deprecated - use autosizeColsMode"))}function setData(r,e){data=r,invalidateAllRows(),updateRowCount(),e&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data&&data.length||0}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow&&(!pagingActive||pagingIsLastPage)?1:0)}function getDataItem(r){return data.getItem?data.getItem(r):data[r]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(r,e){var t=e!==!1;options.showTopPanel!=r&&(options.showTopPanel=r,r?t?$topPanelScroller.slideDown("fast",resizeCanvas):($topPanelScroller.show(),resizeCanvas()):t?$topPanelScroller.slideUp("fast",resizeCanvas):($topPanelScroller.hide(),resizeCanvas()))}function setHeaderRowVisibility(r,e){var t=e!==!1;options.showHeaderRow!=r&&(options.showHeaderRow=r,r?t?$headerRowScroller.slideDown("fast",resizeCanvas):($headerRowScroller.show(),resizeCanvas()):t?$headerRowScroller.slideUp("fast",resizeCanvas):($headerRowScroller.hide(),resizeCanvas()))}function setColumnHeaderVisibility(r,e){options.showColumnHeader!=r&&(options.showColumnHeader=r,r?e?$headerScroller.slideDown("fast",resizeCanvas):($headerScroller.show(),resizeCanvas()):e?$headerScroller.slideUp("fast",resizeCanvas):($headerScroller.hide(),resizeCanvas()))}function setFooterRowVisibility(r,e){var t=e!==!1;options.showFooterRow!=r&&(options.showFooterRow=r,r?t?$footerRowScroller.slideDown("fast",resizeCanvas):($footerRowScroller.show(),resizeCanvas()):t?$footerRowScroller.slideUp("fast",resizeCanvas):($footerRowScroller.hide(),resizeCanvas()))}function setPreHeaderPanelVisibility(r,e){var t=e!==!1;options.showPreHeaderPanel!=r&&(options.showPreHeaderPanel=r,r?t?($preHeaderPanelScroller.slideDown("fast",resizeCanvas),$preHeaderPanelScrollerR.slideDown("fast",resizeCanvas)):($preHeaderPanelScroller.show(),$preHeaderPanelScrollerR.show(),resizeCanvas()):t?($preHeaderPanelScroller.slideUp("fast",resizeCanvas),$preHeaderPanelScrollerR.slideUp("fast",resizeCanvas)):($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide(),resizeCanvas()))}function getContainerNode(){return $container.get(0)}function getRowTop(r){return options.rowHeight*r-offset}function getRowFromPosition(r){return Math.floor((r+offset)/options.rowHeight)}function scrollTo(r){r=Math.max(r,0),r=Math.min(r,th-$viewportScrollContainerY.height()+(viewportHasHScroll||hasFrozenColumns()?scrollbarDimensions.height:0));var e=offset;page=Math.min(n-1,Math.floor(r/ph)),offset=Math.round(page*cj);var t=r-offset;if(offset!=e){var i=getVisibleRange(t);cleanupRows(i),updateRowPositions()}prevScrollTop!=t&&(vScrollDir=prevScrollTop+e<t+offset?1:-1,lastRenderedScrollTop=scrollTop=prevScrollTop=t,hasFrozenColumns()&&($viewportTopL[0].scrollTop=t),hasFrozenRows&&($viewportBottomL[0].scrollTop=$viewportBottomR[0].scrollTop=t),$viewportScrollContainerY[0].scrollTop=t,trigger(self.onViewportChanged,{}))}function defaultFormatter(r,e,t,i,o,s){return t==null?"":(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(r,e){var t=data.getItemMetadata&&data.getItemMetadata(r),i=t&&t.columns&&(t.columns[e.id]||t.columns[getColumnIndex(e.id)]);return i&&i.formatter||t&&t.formatter||e.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(e)||options.defaultFormatter}function getEditor(r,e){var t=columns[e],i=data.getItemMetadata&&data.getItemMetadata(r),o=i&&i.columns;return o&&o[t.id]&&o[t.id].editor!==void 0?o[t.id].editor:o&&o[e]&&o[e].editor!==void 0?o[e].editor:t.editor||options.editorFactory&&options.editorFactory.getEditor(t)}function getDataItemValueForColumn(r,e){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(r,e):r[e.field]}function appendRowHtml(r,e,t,i,o){var s=getDataItem(t),l=t<o&&!s,a="slick-row"+(hasFrozenRows&&t<=options.frozenRow?" frozen":"")+(l?" loading":"")+(t===activeRow&&options.showCellSelection?" active":"")+(t%2==1?" odd":" even");s||(a+=" "+options.addNewRowCssClass);var d=data.getItemMetadata&&data.getItemMetadata(t);d&&d.cssClasses&&(a+=" "+d.cssClasses);var u=getFrozenRowOffset(t),p="<div class='ui-widget-content "+a+"' style='top:"+(getRowTop(t)-u)+"px'>";r.push(p),hasFrozenColumns()&&e.push(p);for(var f,m,_=0,C=columns.length;_<C;_++){if(m=columns[_],f=1,d&&d.columns){var b=d.columns[m.id]||d.columns[_];f=b&&b.colspan||1,f==="*"&&(f=C-_)}if(columnPosRight[Math.min(C-1,_+f-1)]>i.leftPx){if(!m.alwaysRenderColumn&&columnPosLeft[_]>i.rightPx)break;hasFrozenColumns()&&_>options.frozenColumn?appendCellHtml(e,t,_,f,s):appendCellHtml(r,t,_,f,s)}else(m.alwaysRenderColumn||hasFrozenColumns()&&_<=options.frozenColumn)&&appendCellHtml(r,t,_,f,s);f>1&&(_+=f-1)}r.push("</div>"),hasFrozenColumns()&&e.push("</div>")}function appendCellHtml(r,e,t,i,o){var s=columns[t],l="slick-cell l"+t+" r"+Math.min(columns.length-1,t+i-1)+(s.cssClass?" "+s.cssClass:"");hasFrozenColumns()&&t<=options.frozenColumn&&(l+=" frozen"),e===activeRow&&t===activeCell&&options.showCellSelection&&(l+=" active");for(var a in cellCssClasses)cellCssClasses[a][e]&&cellCssClasses[a][e][s.id]&&(l+=" "+cellCssClasses[a][e][s.id]);var d=null,u="";o&&(d=getDataItemValueForColumn(o,s),u=getFormatter(e,s)(e,t,d,s,o,self),u==null&&(u=""));var p=trigger(self.onBeforeAppendCell,{row:e,cell:t,value:d,dataContext:o})||"";p+=u&&u.addClasses?(p?" ":"")+u.addClasses:"";var f=u&&u.toolTip?"title='"+u.toolTip+"'":"",m="";if(s.hasOwnProperty("cellAttrs")&&s.cellAttrs instanceof Object)for(var a in s.cellAttrs)s.cellAttrs.hasOwnProperty(a)&&(m+=" "+a+'="'+s.cellAttrs[a]+'" ');r.push("<div class='"+l+(p?" "+p:"")+"' "+f+m+">"),o&&r.push(Object.prototype.toString.call(u)!=="[object Object]"?u:u.text),r.push("</div>"),rowsCache[e].cellRenderQueue.push(t),rowsCache[e].cellColSpans[t]=i}function cleanupRows(r){for(var e in rowsCache){var t=!0;hasFrozenRows&&(options.frozenBottom&&e>=actualFrozenRow||!options.frozenBottom&&e<=actualFrozenRow)&&(t=!1),(e=parseInt(e,10))!==activeRow&&(e<r.top||e>r.bottom)&&t&&removeRowFromCache(e)}options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var r in rowsCache)removeRowFromCache(r);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function queuePostProcessedRowForCleanup(r,e,t){postProcessgroupId++;for(var i in e)e.hasOwnProperty(i)&&postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:r.cellNodesByColumnIdx[i|0],columnIdx:i|0,rowIdx:t});postProcessedCleanupQueue.push({actionType:"R",groupId:postProcessgroupId,node:r.rowNode}),r.rowNode.detach()}function queuePostProcessedCellForCleanup(r,e,t){postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:r,columnIdx:e,rowIdx:t}),$(r).detach()}function removeRowFromCache(r){var e=rowsCache[r];e&&(options.enableAsyncPostRenderCleanup&&postProcessedRows[r]?queuePostProcessedRowForCleanup(e,postProcessedRows[r],r):e.rowNode.each(function(){this.parentElement&&this.parentElement.removeChild(this)}),delete rowsCache[r],delete postProcessedRows[r],renderedRows--,counter_rows_removed++)}function invalidateRows(r){var e,t;if(!(!r||!r.length)){for(vScrollDir=0,t=r.length,e=0;e<t;e++)currentEditor&&activeRow===r[e]&&makeActiveCellNormal(),rowsCache[r[e]]&&removeRowFromCache(r[e]);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}}function invalidateRow(r){!r&&r!==0||invalidateRows([r])}function applyFormatResultToCellNode(r,e,t){if(r==null&&(r=""),Object.prototype.toString.call(r)!=="[object Object]"){e.innerHTML=sanitizeHtmlString(r);return}e.innerHTML=sanitizeHtmlString(r.text),r.removeClasses&&!t&&$(e).removeClass(r.removeClasses),r.addClasses&&$(e).addClass(r.addClasses),r.toolTip&&$(e).attr("title",r.toolTip)}function updateCell(r,e){var t=getCellNode(r,e);if(t){var i=columns[e],o=getDataItem(r);if(currentEditor&&activeRow===r&&activeCell===e)currentEditor.loadValue(o);else{var s=o?getFormatter(r,i)(r,e,getDataItemValueForColumn(o,i),i,o,self):"";applyFormatResultToCellNode(s,t),invalidatePostProcessingResults(r)}}}function updateRow(r){var e=rowsCache[r];if(e){ensureCellNodesInRowsCache(r);var t,i=getDataItem(r);for(var o in e.cellNodesByColumnIdx)if(e.cellNodesByColumnIdx.hasOwnProperty(o)){o=o|0;var s=columns[o],l=e.cellNodesByColumnIdx[o][0];r===activeRow&&o===activeCell&&currentEditor?currentEditor.loadValue(i):i?(t=getFormatter(r,s)(r,o,getDataItemValueForColumn(i,s),s,i,self),applyFormatResultToCellNode(t,l)):l.innerHTML=""}invalidatePostProcessingResults(r)}}function getViewportHeight(){if((!options.autoHeight||options.frozenColumn!=-1)&&(topPanelH=options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0,headerRowH=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,footerRowH=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0),options.autoHeight){var r=$paneHeaderL.outerHeight();r+=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,r+=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0,r+=getCanvasWidth()>viewportW?scrollbarDimensions.height:0,viewportH=options.rowHeight*getDataLengthIncludingAddNew()+(options.frozenColumn==-1?r:0)}else{var e=options.showColumnHeader?parseFloat($.css($headerScroller[0],"height"))+getVBoxDelta($headerScroller):0,t=options.createPreHeaderPanel&&options.showPreHeaderPanel?options.preHeaderPanelHeight+getVBoxDelta($preHeaderPanelScroller):0;viewportH=parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-e-topPanelH-headerRowH-footerRowH-t}return numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportH}function getViewportWidth(){viewportW=parseFloat($container.width())}function resizeCanvas(){if(initialized){paneTopH=0,paneBottomH=0,viewportTopH=0,viewportBottomH=0,getViewportWidth(),getViewportHeight(),hasFrozenRows?options.frozenBottom?(paneTopH=viewportH-frozenRowsHeight-scrollbarDimensions.height,paneBottomH=frozenRowsHeight+scrollbarDimensions.height):(paneTopH=frozenRowsHeight,paneBottomH=viewportH-frozenRowsHeight):paneTopH=viewportH,paneTopH+=topPanelH+headerRowH+footerRowH,hasFrozenColumns()&&options.autoHeight&&(paneTopH+=scrollbarDimensions.height),viewportTopH=paneTopH-topPanelH-headerRowH-footerRowH,options.autoHeight&&(hasFrozenColumns()&&$container.height(paneTopH+parseFloat($.css($headerScrollerL[0],"height"))),$paneTopL.css("position","relative")),$paneTopL.css({top:$paneHeaderL.height()||(options.showHeaderRow?options.headerRowHeight:0)+(options.showPreHeaderPanel?options.preHeaderPanelHeight:0),height:paneTopH});var r=$paneTopL.position().top+paneTopH;options.autoHeight||$viewportTopL.height(viewportTopH),hasFrozenColumns()?($paneTopR.css({top:$paneHeaderL.height(),height:paneTopH}),$viewportTopR.height(viewportTopH),hasFrozenRows&&($paneBottomL.css({top:r,height:paneBottomH}),$paneBottomR.css({top:r,height:paneBottomH}),$viewportBottomR.height(paneBottomH))):hasFrozenRows&&($paneBottomL.css({width:"100%",height:paneBottomH}),$paneBottomL.css("top",r)),hasFrozenRows?($viewportBottomL.height(paneBottomH),options.frozenBottom?($canvasBottomL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasBottomR.height(frozenRowsHeight)):($canvasTopL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasTopR.height(frozenRowsHeight))):$viewportTopR.height(viewportTopH),(!scrollbarDimensions||!scrollbarDimensions.width)&&(scrollbarDimensions=measureScrollbar()),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render()}}function updatePagingStatusFromView(r){pagingActive=r.pageSize!==0,pagingIsLastPage=r.pageNum==r.totalPages-1}function updateRowCount(){if(initialized){var r=getDataLength(),e=getDataLengthIncludingAddNew(),t=0,a=hasFrozenRows&&!options.frozenBottom?$canvasBottomL.height():$canvasTopL.height();if(hasFrozenRows)var t=getDataLength()-options.frozenRow;else var t=e+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var i=$viewportScrollContainerY.height(),o=viewportHasVScroll;viewportHasVScroll=options.alwaysShowVerticalScroll||!options.autoHeight&&t*options.rowHeight>i,makeActiveCellNormal();var s=r-1;for(var l in rowsCache)l>s&&removeRowFromCache(l);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup(),activeCellNode&&activeRow>s&&resetActiveCell();var a=h;options.autoHeight?h=options.rowHeight*t:(th=Math.max(options.rowHeight*t,i-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1))),h!==a&&(hasFrozenRows&&!options.frozenBottom?($canvasBottomL.css("height",h),hasFrozenColumns()&&$canvasBottomR.css("height",h)):($canvasTopL.css("height",h),$canvasTopR.css("height",h)),scrollTop=$viewportScrollContainerY[0].scrollTop);var d=scrollTop+offset<=th-i;th==0||scrollTop==0?page=offset=0:scrollTo(d?scrollTop+offset:th-i+scrollbarDimensions.height),h!=a&&options.autoHeight&&resizeCanvas(),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&o!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(r,e){return r==null&&(r=scrollTop),e==null&&(e=scrollLeft),{top:getRowFromPosition(r),bottom:getRowFromPosition(r+viewportH)+1,leftPx:e,rightPx:e+viewportW}}function getRenderedRange(r,e){var t=getVisibleRange(r,e),i=Math.round(viewportH/options.rowHeight),o=options.minRowBuffer;return vScrollDir==-1?(t.top-=i,t.bottom+=o):vScrollDir==1?(t.top-=o,t.bottom+=i):(t.top-=o,t.bottom+=o),t.top=Math.max(0,t.top),t.bottom=Math.min(getDataLengthIncludingAddNew()-1,t.bottom),t.leftPx-=viewportW,t.rightPx+=viewportW,t.leftPx=Math.max(0,t.leftPx),t.rightPx=Math.min(canvasWidth,t.rightPx),t}function ensureCellNodesInRowsCache(r){var e=rowsCache[r];if(e&&e.cellRenderQueue.length)for(var t=e.rowNode.children().last();e.cellRenderQueue.length;){var i=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[i]=t,t=t.prev(),t.length===0&&(t=$(e.rowNode[0]).children().last())}}function cleanUpCells(r,e){if(!(hasFrozenRows&&(options.frozenBottom&&e>actualFrozenRow||e<=actualFrozenRow))){var t=0,i=rowsCache[e],o=[];for(var s in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(s)&&(s=s|0,!(s<=options.frozenColumn)&&!(Array.isArray(columns)&&columns[s]&&columns[s].alwaysRenderColumn))){var l=i.cellColSpans[s];(columnPosLeft[s]>r.rightPx||columnPosRight[Math.min(columns.length-1,s+l-1)]<r.leftPx)&&(e==activeRow&&s==activeCell||o.push(s))}for(var a,d;(a=o.pop())!=null;)d=i.cellNodesByColumnIdx[a][0],options.enableAsyncPostRenderCleanup&&postProcessedRows[e]&&postProcessedRows[e][a]?queuePostProcessedCellForCleanup(d,a,e):d.parentElement.removeChild(d),delete i.cellColSpans[a],delete i.cellNodesByColumnIdx[a],postProcessedRows[e]&&delete postProcessedRows[e][a],t++}}function cleanUpAndRenderCells(r){for(var e,t=[],i=[],o,s=0,l,a=r.top,d=r.bottom;a<=d;a++)if(e=rowsCache[a],!!e){ensureCellNodesInRowsCache(a),cleanUpCells(r,a),o=0;var u=data.getItemMetadata&&data.getItemMetadata(a);u=u&&u.columns;for(var p=getDataItem(a),f=0,m=columns.length;f<m&&!(columnPosLeft[f]>r.rightPx);f++){if((l=e.cellColSpans[f])!=null){f+=l>1?l-1:0;continue}if(l=1,u){var _=u[columns[f].id]||u[f];l=_&&_.colspan||1,l==="*"&&(l=m-f)}columnPosRight[Math.min(m-1,f+l-1)]>r.leftPx&&(appendCellHtml(t,a,f,l,p),o++),f+=l>1?l-1:0}o&&(s+=o,i.push(a))}if(t.length){var C=document.createElement("div");C.innerHTML=sanitizeHtmlString(t.join(""));for(var b,E;(b=i.pop())!=null;){e=rowsCache[b];for(var x;(x=e.cellRenderQueue.pop())!=null;)E=C.lastChild,hasFrozenColumns()&&x>options.frozenColumn?e.rowNode[1].appendChild(E):e.rowNode[0].appendChild(E),e.cellNodesByColumnIdx[x]=$(E)}}}function renderRows(r){for(var e=[],t=[],i=[],o=!1,s=getDataLength(),l=r.top,a=r.bottom;l<=a;l++)rowsCache[l]||hasFrozenRows&&options.frozenBottom&&l==getDataLength()||(renderedRows++,i.push(l),rowsCache[l]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(e,t,l,r,s),activeCellNode&&activeRow===l&&(o=!0),counter_rows_rendered++);if(i.length){var d=document.createElement("div"),u=document.createElement("div");d.innerHTML=sanitizeHtmlString(e.join("")),u.innerHTML=sanitizeHtmlString(t.join(""));for(var l=0,a=i.length;l<a;l++)hasFrozenRows&&i[l]>=actualFrozenRow?hasFrozenColumns()?(rowsCache[i[l]].rowNode=$().add($(d.firstChild)).add($(u.firstChild)),$canvasBottomL[0].appendChild(d.firstChild),$canvasBottomR[0].appendChild(u.firstChild)):(rowsCache[i[l]].rowNode=$().add($(d.firstChild)),$canvasBottomL[0].appendChild(d.firstChild)):hasFrozenColumns()?(rowsCache[i[l]].rowNode=$().add($(d.firstChild)).add($(u.firstChild)),$canvasTopL[0].appendChild(d.firstChild),$canvasTopR[0].appendChild(u.firstChild)):(rowsCache[i[l]].rowNode=$().add($(d.firstChild)),$canvasTopL[0].appendChild(d.firstChild));o&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function startPostProcessingCleanup(){options.enableAsyncPostRenderCleanup&&(clearTimeout(h_postrenderCleanup),h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay))}function invalidatePostProcessingResults(r){for(var e in postProcessedRows[r])postProcessedRows[r].hasOwnProperty(e)&&(postProcessedRows[r][e]="C");postProcessFromRow=Math.min(postProcessFromRow,r),postProcessToRow=Math.max(postProcessToRow,r),startPostProcessing()}function updateRowPositions(){for(var r in rowsCache){var e=r?parseInt(r):0;rowsCache[e].rowNode[0].style.top=getRowTop(e)+"px"}}function render(){if(initialized){scrollThrottle.dequeue();var r=getVisibleRange(),e=getRenderedRange();if(cleanupRows(e),lastRenderedScrollLeft!=scrollLeft){if(hasFrozenRows){var t=jQuery.extend(!0,{},e);options.frozenBottom?(t.top=actualFrozenRow,t.bottom=getDataLength()):(t.top=0,t.bottom=options.frozenRow),cleanUpAndRenderCells(t)}cleanUpAndRenderCells(e)}renderRows(e),hasFrozenRows&&(options.frozenBottom?renderRows({top:actualFrozenRow,bottom:getDataLength()-1,leftPx:e.leftPx,rightPx:e.rightPx}):renderRows({top:0,bottom:options.frozenRow-1,leftPx:e.leftPx,rightPx:e.rightPx})),postProcessFromRow=r.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,r.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null,trigger(self.onRendered,{startRow:r.top,endRow:r.bottom,grid:self})}}function handleHeaderScroll(){handleElementScroll($headerScrollContainer[0])}function handleHeaderRowScroll(){var r=$headerRowScrollContainer[0].scrollLeft;r!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=r)}function handleFooterRowScroll(){var r=$footerRowScrollContainer[0].scrollLeft;r!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=r)}function handlePreHeaderPanelScroll(){handleElementScroll($preHeaderPanelScroller[0])}function handleElementScroll(r){var e=r.scrollLeft;e!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=e)}function handleScroll(){return scrollTop=$viewportScrollContainerY[0].scrollTop,scrollLeft=$viewportScrollContainerX[0].scrollLeft,_handleScroll(!1)}function _handleScroll(r){var e=$viewportScrollContainerY[0].scrollHeight-$viewportScrollContainerY[0].clientHeight,t=$viewportScrollContainerY[0].scrollWidth-$viewportScrollContainerY[0].clientWidth;e=Math.max(0,e),t=Math.max(0,t),scrollTop>e&&(scrollTop=e),scrollLeft>t&&(scrollLeft=t);var i=Math.abs(scrollTop-prevScrollTop),o=Math.abs(scrollLeft-prevScrollLeft);if(o&&(prevScrollLeft=scrollLeft,$viewportScrollContainerX[0].scrollLeft=scrollLeft,$headerScrollContainer[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScrollContainer[0].scrollLeft=scrollLeft,options.createFooterRow&&($footerRowScrollContainer[0].scrollLeft=scrollLeft),options.createPreHeaderPanel&&(hasFrozenColumns()?$preHeaderPanelScrollerR[0].scrollLeft=scrollLeft:$preHeaderPanelScroller[0].scrollLeft=scrollLeft),hasFrozenColumns()?hasFrozenRows&&($viewportTopR[0].scrollLeft=scrollLeft):hasFrozenRows&&($viewportTopL[0].scrollLeft=scrollLeft)),i)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,r&&($viewportScrollContainerY[0].scrollTop=scrollTop),hasFrozenColumns()&&(hasFrozenRows&&!options.frozenBottom?$viewportBottomL[0].scrollTop=scrollTop:$viewportTopL[0].scrollTop=scrollTop),i<viewportH)scrollTo(scrollTop+offset);else{var s=offset;h==viewportH?page=0:page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),s!=offset&&invalidateAllRows()}if(o||i){var l=Math.abs(lastRenderedScrollLeft-scrollLeft),a=Math.abs(lastRenderedScrollTop-scrollTop);(l>20||a>20)&&(options.forceSyncScrolling||a<viewportH&&l<viewportW?render():scrollThrottle.enqueue(),trigger(self.onViewportChanged,{}))}return trigger(self.onScroll,{scrollLeft,scrollTop}),!!(o||i)}function ActionThrottle(r,e){var t=!1,i=!1;function o(){t?i=!0:l()}function s(){i=!1}function l(){t=!0,setTimeout(a,e),r()}function a(){i?(s(),l()):t=!1}return{enqueue:o,dequeue:s}}function asyncPostProcessRows(){for(var r=getDataLength();postProcessFromRow<=postProcessToRow;){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,t=rowsCache[e];if(!(!t||e>=r)){postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e);for(var i in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(i)){i=i|0;var o=columns[i],s=postProcessedRows[e][i];if(o.asyncPostRender&&s!=="R"){var l=t.cellNodesByColumnIdx[i];l&&o.asyncPostRender(l,e,getDataItem(e),o,s==="C"),postProcessedRows[e][i]="R"}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){for(var r=postProcessedCleanupQueue[0].groupId;postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==r;){var e=postProcessedCleanupQueue.shift();if(e.actionType=="R"&&$(e.node).remove(),e.actionType=="C"){var t=columns[e.columnIdx];t.asyncPostRenderCleanup&&e.node&&t.asyncPostRenderCleanup(e.node,e.rowIdx,t)}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(r,e){var t,i,o,s;for(var l in rowsCache){if(s=e&&e[l],o=r&&r[l],s)for(i in s)(!o||s[i]!=o[i])&&(t=getCellNode(l,getColumnIndex(i)),t&&$(t).removeClass(s[i]));if(o)for(i in o)(!s||s[i]!=o[i])&&(t=getCellNode(l,getColumnIndex(i)),t&&$(t).addClass(o[i]))}}function addCellCssStyles(r,e){if(cellCssClasses[r])throw new Error("SlickGrid addCellCssStyles: cell CSS hash with key '"+r+"' already exists.");cellCssClasses[r]=e,updateCellCssStylesOnRenderedRows(e,null),trigger(self.onCellCssStylesChanged,{key:r,hash:e,grid:self})}function removeCellCssStyles(r){cellCssClasses[r]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[r]),delete cellCssClasses[r],trigger(self.onCellCssStylesChanged,{key:r,hash:null,grid:self}))}function setCellCssStyles(r,e){var t=cellCssClasses[r];cellCssClasses[r]=e,updateCellCssStylesOnRenderedRows(e,t),trigger(self.onCellCssStylesChanged,{key:r,hash:e,grid:self})}function getCellCssStyles(r){return cellCssClasses[r]}function flashCell(r,e,t){t=t||100;function i(s,l){l&&setTimeout(function(){s.queue(function(){s.toggleClass(options.cellFlashingCssClass).dequeue(),i(s,l-1)})},t)}if(rowsCache[r]){var o=$(getCellNode(r,e));i(o,4)}}function handleMouseWheel(r,e,t,i){scrollTop=Math.max(0,$viewportScrollContainerY[0].scrollTop-i*options.rowHeight),scrollLeft=$viewportScrollContainerX[0].scrollLeft+t*10;var o=_handleScroll(!0);o&&r.preventDefault()}function handleDragInit(r,e){var t=getCellFromEvent(r);if(!t||!cellExists(t.row,t.cell))return!1;var i=trigger(self.onDragInit,e,r);return r.isImmediatePropagationStopped()?i:!1}function handleDragStart(r,e){var t=getCellFromEvent(r);if(!t||!cellExists(t.row,t.cell))return!1;var i=trigger(self.onDragStart,e,r);return r.isImmediatePropagationStopped()?i:!1}function handleDrag(r,e){return trigger(self.onDrag,e,r)}function handleDragEnd(r,e){trigger(self.onDragEnd,e,r)}function handleKeyDown(r){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},r);var e=r.isImmediatePropagationStopped(),t=Slick.keyCode;if(!e&&!r.shiftKey&&!r.altKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(r.which)>-1)return;r.which==t.HOME?e=r.ctrlKey?navigateTop():navigateRowStart():r.which==t.END&&(e=r.ctrlKey?navigateBottom():navigateRowEnd())}if(!e)if(!r.shiftKey&&!r.altKey&&!r.ctrlKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(r.which)>-1)return;if(r.which==t.ESCAPE){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else r.which==t.PAGE_DOWN?(navigatePageDown(),e=!0):r.which==t.PAGE_UP?(navigatePageUp(),e=!0):r.which==t.LEFT?e=navigateLeft():r.which==t.RIGHT?e=navigateRight():r.which==t.UP?e=navigateUp():r.which==t.DOWN?e=navigateDown():r.which==t.TAB?e=navigateNext():r.which==t.ENTER&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable(void 0,void 0,r)),e=!0)}else r.which==t.TAB&&r.shiftKey&&!r.ctrlKey&&!r.altKey&&(e=navigatePrev());if(e){r.stopPropagation(),r.preventDefault();try{r.originalEvent.keyCode=0}catch{}}}function handleClick(r){if(!currentEditor&&(r.target!=document.activeElement||$(r.target).hasClass("slick-cell"))){var e=getTextSelection();setFocus(),setTextSelection(e)}var t=getCellFromEvent(r);if(!(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell)&&(trigger(self.onClick,{row:t.row,cell:t.cell},r),!r.isImmediatePropagationStopped()&&canCellBeActive(t.row,t.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()))){scrollRowIntoView(t.row,!1);var i=r.target&&r.target.className===Slick.preClickClassName,o=columns[t.cell],s=!!(options.editable&&o&&o.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(getCellNode(t.row,t.cell),null,i,s,r)}}function handleContextMenu(r){var e=$(r.target).closest(".slick-cell",$canvas);e.length!==0&&(activeCellNode===e[0]&&currentEditor!==null||trigger(self.onContextMenu,{},r))}function handleDblClick(r){var e=getCellFromEvent(r);!e||currentEditor!==null&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onDblClick,{row:e.row,cell:e.cell},r),!r.isImmediatePropagationStopped()&&options.editable&&gotoCell(e.row,e.cell,!0,r))}function handleHeaderMouseEnter(r){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},r)}function handleHeaderMouseLeave(r){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},r)}function handleHeaderRowMouseEnter(r){trigger(self.onHeaderRowMouseEnter,{column:$(this).data("column"),grid:self},r)}function handleHeaderRowMouseLeave(r){trigger(self.onHeaderRowMouseLeave,{column:$(this).data("column"),grid:self},r)}function handleHeaderContextMenu(r){var e=$(r.target).closest(".slick-header-column",".slick-header-columns"),t=e&&e.data("column");trigger(self.onHeaderContextMenu,{column:t},r)}function handleHeaderClick(r){if(!columnResizeDragging){var e=$(r.target).closest(".slick-header-column",".slick-header-columns"),t=e&&e.data("column");t&&trigger(self.onHeaderClick,{column:t},r)}}function handleFooterContextMenu(r){var e=$(r.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),t=e&&e.data("column");trigger(self.onFooterContextMenu,{column:t},r)}function handleFooterClick(r){var e=$(r.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),t=e&&e.data("column");trigger(self.onFooterClick,{column:t},r)}function handleMouseEnter(r){trigger(self.onMouseEnter,{},r)}function handleMouseLeave(r){trigger(self.onMouseLeave,{},r)}function cellExists(r,e){return!(r<0||r>=getDataLength()||e<0||e>=columns.length)}function getCellFromPoint(r,e){for(var t=getRowFromPosition(e),i=0,o=0,s=0;s<columns.length&&o<r;s++)o+=columns[s].width,i++;return i<0&&(i=0),{row:t,cell:i-1}}function getCellFromNode(r){var e=/l\d+/.exec(r.className);if(!e)throw new Error("SlickGrid getCellFromNode: cannot get cell - "+r.className);return parseInt(e[0].substr(1,e[0].length-1),10)}function getRowFromNode(r){for(var e in rowsCache)for(var t in rowsCache[e].rowNode)if(rowsCache[e].rowNode[t]===r)return e?parseInt(e):0;return null}function getFrozenRowOffset(r){var e=hasFrozenRows?options.frozenBottom?r>=actualFrozenRow?h<viewportTopH?actualFrozenRow*options.rowHeight:h:0:r>=actualFrozenRow?frozenRowsHeight:0:0;return e}function getCellFromEvent(r){var e,t,i=$(r.target).closest(".slick-cell",$canvas);if(!i.length)return null;if(e=getRowFromNode(i[0].parentNode),hasFrozenRows){var o=i.parents(".grid-canvas").offset(),s=0,l=i.parents(".grid-canvas-bottom").length;l&&(s=options.frozenBottom?$canvasTopL.height():frozenRowsHeight),e=getCellFromPoint(r.clientX-o.left,r.clientY-o.top+s+$(document).scrollTop()).row}return t=getCellFromNode(i[0]),e==null||t==null?null:{row:e,cell:t}}function getCellNodeBox(r,e){if(!cellExists(r,e))return null;for(var t=getFrozenRowOffset(r),i=getRowTop(r)-t,o=i+options.rowHeight-1,s=0,l=0;l<e;l++)s+=columns[l].width,options.frozenColumn==l&&(s=0);var a=s+columns[e].width;return{top:i,left:s,bottom:o,right:a}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){tabbingDirection==-1?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(r,e,t){if(scrollRowIntoView(r,t),!(e<=options.frozenColumn)){var i=getColspan(r,e);internalScrollColumnIntoView(columnPosLeft[e],columnPosRight[e+(i>1?i-1:0)])}}function internalScrollColumnIntoView(r,e){var t=scrollLeft+$viewportScrollContainerX.width()-(viewportHasVScroll?scrollbarDimensions.width:0);r<scrollLeft?($viewportScrollContainerX.scrollLeft(r),handleScroll(),render()):e>t&&($viewportScrollContainerX.scrollLeft(Math.min(r,e-$viewportScrollContainerX[0].clientWidth)),handleScroll(),render())}function scrollColumnIntoView(r){internalScrollColumnIntoView(columnPosLeft[r],columnPosRight[r])}function setActiveCellInternal(r,e,t,i,o){activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&rowsCache[activeRow].rowNode.removeClass("active"));var s=activeCellNode!==r;if(activeCellNode=r,activeCellNode!=null){var l=$(activeCellNode),a=l.offset(),d=Math.floor(l.parents(".grid-canvas").offset().top),u=l.parents(".grid-canvas-bottom").length;hasFrozenRows&&u&&(d-=options.frozenBottom?$canvasTopL.height():frozenRowsHeight);var p=getCellFromPoint(a.left,Math.ceil(a.top)-d);activeRow=p.row,activeCell=activePosX=activeCell=activePosX=getCellFromNode(activeCellNode),e==null&&(e=activeRow==getDataLength()||options.autoEdit),options.showCellSelection&&(l.addClass("active"),rowsCache[activeRow]&&rowsCache[activeRow].rowNode.addClass("active")),options.editable&&e&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable(void 0,t,o)},options.asyncEditorLoadDelay):makeActiveCellEditable(void 0,t,o))}else activeRow=activeCell=null;i||trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}else if(window.getSelection){var r=window.getSelection();r&&r.removeAllRanges&&r.removeAllRanges()}}function isCellPotentiallyEditable(r,e){var t=getDataLength();return!(r<t&&!getDataItem(r)||columns[e].cannotTriggerInsert&&r>=t||!getEditor(r,e))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var r=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),r){var e=columns[activeCell],t=getFormatter(activeRow,e),i=t(activeRow,activeCell,getDataItemValueForColumn(r,e),e,r,self);applyFormatResultToCellNode(i,activeCellNode),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(r,e,t){if(activeCellNode){if(!options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(h_editorLoader),!!isCellPotentiallyEditable(activeRow,activeCell)){var i=columns[activeCell],o=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:o,column:i,target:"grid"})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable");var s=r||getEditor(activeRow,activeCell);!r&&!s.suppressClearOnEdit&&(activeCellNode.innerHTML="");var l=data.getItemMetadata&&data.getItemMetadata(activeRow);l=l&&l.columns;var a=l&&(l[i.id]||l[activeCell]);currentEditor=new s({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:i,columnMetaData:a,item:o||{},event:t,commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),o&&(currentEditor.loadValue(o),e&&currentEditor.preClick&&currentEditor.preClick()),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(r){var e={top:r.offsetTop,left:r.offsetLeft,bottom:0,right:0,width:$(r).outerWidth(),height:$(r).outerHeight(),visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var t=r.offsetParent;(r=r.parentNode)!=document.body&&r!=null;)e.visible&&r.scrollHeight!=r.offsetHeight&&$(r).css("overflowY")!="visible"&&(e.visible=e.bottom>r.scrollTop&&e.top<r.scrollTop+r.clientHeight),e.visible&&r.scrollWidth!=r.offsetWidth&&$(r).css("overflowX")!="visible"&&(e.visible=e.right>r.scrollLeft&&e.left<r.scrollLeft+r.clientWidth),e.left-=r.scrollLeft,e.top-=r.scrollTop,r===t&&(e.left+=r.offsetLeft,e.top+=r.offsetTop,t=r.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var r=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(r.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(r)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function getTextSelection(){var r=null;if(window.getSelection){var e=window.getSelection();e.rangeCount>0&&(r=e.getRangeAt(0))}return r}function setTextSelection(r){if(window.getSelection&&r){var e=window.getSelection();e.removeAllRanges(),e.addRange(r)}}function scrollRowIntoView(r,e){if(!hasFrozenRows||!options.frozenBottom&&r>actualFrozenRow-1||options.frozenBottom&&r<actualFrozenRow-1){var t=$viewportScrollContainerY.height(),i=hasFrozenRows&&!options.frozenBottom?r-options.frozenRow:r,o=i*options.rowHeight,s=(i+1)*options.rowHeight-t+(viewportHasHScroll?scrollbarDimensions.height:0);(i+1)*options.rowHeight>scrollTop+t+offset?(scrollTo(e?o:s),render()):i*options.rowHeight<scrollTop+offset&&(scrollTo(e?s:o),render())}}function scrollRowToTop(r){scrollTo(r*options.rowHeight),render()}function scrollPage(r){var e=r*numVisibleRows,t=scrollTop+options.rowHeight-1;if(scrollTo((getRowFromPosition(t)+e)*options.rowHeight),render(),options.enableCellNavigation&&activeRow!=null){var i=activeRow+e,o=getDataLengthIncludingAddNew();i>=o&&(i=o-1),i<0&&(i=0);for(var s=0,l=null,a=activePosX;s<=activePosX;)canCellBeActive(i,s)&&(l=s),s+=getColspan(i,s);l!==null?(setActiveCellInternal(getCellNode(i,l)),activePosX=a):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function navigateTop(){navigateToRow(0)}function navigateBottom(){navigateToRow(getDataLength()-1)}function navigateToRow(r){var e=getDataLength();if(!e)return!0;if(r<0?r=0:r>=e&&(r=e-1),scrollCellIntoView(r,0,!0),options.enableCellNavigation&&activeRow!=null){for(var t=0,i=null,o=activePosX;t<=activePosX;)canCellBeActive(r,t)&&(i=t),t+=getColspan(r,t);i!==null?(setActiveCellInternal(getCellNode(r,i)),activePosX=o):resetActiveCell()}return!0}function getColspan(r,e){var t=data.getItemMetadata&&data.getItemMetadata(r);if(!t||!t.columns)return 1;var i=t.columns[columns[e].id]||t.columns[e],o=i&&i.colspan;return o==="*"?o=columns.length-e:o=o||1,o}function findFirstFocusableCell(r){for(var e=0;e<columns.length;){if(canCellBeActive(r,e))return e;e+=getColspan(r,e)}return null}function findLastFocusableCell(r){for(var e=0,t=null;e<columns.length;)canCellBeActive(r,e)&&(t=e),e+=getColspan(r,e);return t}function gotoRight(r,e,t){if(e>=columns.length)return null;do e+=getColspan(r,e);while(e<columns.length&&!canCellBeActive(r,e));return e<columns.length?{row:r,cell:e,posX:e}:null}function gotoLeft(r,e,t){if(e<=0)return null;var i=findFirstFocusableCell(r);if(i===null||i>=e)return null;for(var o={row:r,cell:i,posX:i},s;;){if(s=gotoRight(o.row,o.cell,o.posX),!s)return null;if(s.cell>=e)return o;o=s}}function gotoDown(r,e,t){for(var i,o=getDataLengthIncludingAddNew();;){if(++r>=o)return null;for(i=e=0;e<=t;)i=e,e+=getColspan(r,e);if(canCellBeActive(r,i))return{row:r,cell:i,posX:t}}}function gotoUp(r,e,t){for(var i;;){if(--r<0)return null;for(i=e=0;e<=t;)i=e,e+=getColspan(r,e);if(canCellBeActive(r,i))return{row:r,cell:i,posX:t}}}function gotoNext(r,e,t){if(r==null&&e==null&&(r=e=t=0,canCellBeActive(r,e)))return{row:r,cell:e,posX:e};var i=gotoRight(r,e,t);if(i)return i;var o=null,s=getDataLengthIncludingAddNew();for(r===s-1&&r--;++r<s;)if(o=findFirstFocusableCell(r),o!==null)return{row:r,cell:o,posX:o};return null}function gotoPrev(r,e,t){if(r==null&&e==null&&(r=getDataLengthIncludingAddNew()-1,e=t=columns.length-1,canCellBeActive(r,e)))return{row:r,cell:e,posX:e};for(var i,o;!i&&(i=gotoLeft(r,e,t),!i);){if(--r<0)return null;e=0,o=findLastFocusableCell(r),o!==null&&(i={row:r,cell:o,posX:o})}return i}function gotoRowStart(r,e,t){var i=findFirstFocusableCell(r);return i===null?null:{row:r,cell:i,posX:i}}function gotoRowEnd(r,e,t){var i=findLastFocusableCell(r);return i===null?null:{row:r,cell:i,posX:i}}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigateRowStart(){return navigate("home")}function navigateRowEnd(){return navigate("end")}function navigate(r){if(!options.enableCellNavigation||!activeCellNode&&r!="prev"&&r!="next")return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var e={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};tabbingDirection=e[r];var t={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext,home:gotoRowStart,end:gotoRowEnd},i=t[r],o=i(activeRow,activeCell,activePosX);if(o){if(hasFrozenRows&&options.frozenBottom&o.row==getDataLength())return;var s=o.row==getDataLength();return(!options.frozenBottom&&o.row>=actualFrozenRow||options.frozenBottom&&o.row<actualFrozenRow)&&scrollCellIntoView(o.row,o.cell,!s&&options.emulatePagingWhenScrolling),setActiveCellInternal(getCellNode(o.row,o.cell)),activePosX=o.posX,!0}else return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(r,e){if(rowsCache[r]){ensureCellNodesInRowsCache(r);try{return rowsCache[r].cellNodesByColumnIdx.length>e?rowsCache[r].cellNodesByColumnIdx[e][0]:null}catch{return rowsCache[r].cellNodesByColumnIdx[e]}}return null}function setActiveCell(r,e,t,i,o){initialized&&(r>getDataLength()||r<0||e>=columns.length||e<0||options.enableCellNavigation&&(scrollCellIntoView(r,e,!1),setActiveCellInternal(getCellNode(r,e),t,i,o)))}function setActiveRow(r,e,t){initialized&&(r>getDataLength()||r<0||e>=columns.length||e<0||(activeRow=r,t||scrollCellIntoView(r,e||0,!1)))}function canCellBeActive(r,e){if(!options.enableCellNavigation||r>=getDataLengthIncludingAddNew()||r<0||e>=columns.length||e<0)return!1;var t=data.getItemMetadata&&data.getItemMetadata(r);if(t&&typeof t.focusable<"u")return!!t.focusable;var i=t&&t.columns;return i&&i[columns[e].id]&&typeof i[columns[e].id].focusable<"u"?!!i[columns[e].id].focusable:i&&i[e]&&typeof i[e].focusable<"u"?!!i[e].focusable:!!columns[e].focusable}function canCellBeSelected(r,e){if(r>=getDataLength()||r<0||e>=columns.length||e<0)return!1;var t=data.getItemMetadata&&data.getItemMetadata(r);if(t&&typeof t.selectable<"u")return!!t.selectable;var i=t&&t.columns&&(t.columns[columns[e].id]||t.columns[e]);return i&&typeof i.selectable<"u"?!!i.selectable:!!columns[e].selectable}function gotoCell(r,e,t,i){if(initialized&&canCellBeActive(r,e)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(r,e,!1);var o=getCellNode(r,e),s=columns[e],l=!!(options.editable&&s&&s.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(o,t||r===getDataLength()||options.autoEdit,null,l,i),currentEditor||setFocus()}}function commitCurrentEdit(){var r=getDataItem(activeRow),e=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var t=currentEditor.validate();if(t.valid){if(activeRow<getDataLength()){var i={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(r,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{command:"execute",row:this.row,cell:this.cell,item:r,column:e})},undo:function(){this.editor.applyValue(r,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{command:"undo",row:this.row,cell:this.cell,item:r,column:e})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(r,e,i)):(i.execute(),makeActiveCellNormal())}else{var o={};currentEditor.applyValue(o,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:o,column:e})}return!getEditorLock().isActive()}else return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:t,row:activeRow,cell:activeCell,column:e}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(r){for(var e=[],t=columns.length-1,i=0;i<r.length;i++)e.push(new Slick.Range(r[i],0,r[i],t));return e}function getSelectedRows(){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");return selectedRows.slice(0)}function setSelectedRows(r,e){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");self&&self.getEditorLock&&!self.getEditorLock().isActive()&&selectionModel.setSelectedRanges(rowsToRanges(r),e||"SlickGrid.setSelectedRows")}var logMessageCount=0,logMessageMaxCount=30;function sanitizeHtmlString(r,e){if(!options.sanitizer||typeof r!="string")return r;var t=options.sanitizer(r);return!e&&options.logSanitizedHtml&&logMessageCount<=logMessageMaxCount&&t!==r&&(console.log("sanitizer altered html: "+r+" --> "+t),logMessageCount===logMessageMaxCount&&console.log("sanitizer: silencing messages after first "+logMessageMaxCount),logMessageCount++),t}this.debug=function(){var r="";r+=`
counter_rows_rendered:  `+counter_rows_rendered,r+=`
counter_rows_removed:  `+counter_rows_removed,r+=`
renderedRows:  `+renderedRows,r+=`
numVisibleRows:  `+numVisibleRows,r+=`
maxSupportedCssHeight:  `+maxSupportedCssHeight,r+=`
n(umber of pages):  `+n,r+=`
(current) page:  `+page,r+=`
page height (ph):  `+ph,r+=`
vScrollDir:  `+vScrollDir,alert(r)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.4.45",onScroll:new Slick.Event,onBeforeSort:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderRowMouseEnter:new Slick.Event,onHeaderRowMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onFooterContextMenu:new Slick.Event,onFooterClick:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsDrag:new Slick.Event,onColumnsResized:new Slick.Event,onColumnsResizeDblClick:new Slick.Event,onBeforeColumnsResize:new Slick.Event,onCellChange:new Slick.Event,onCompositeEditorChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,onBeforeSetColumns:new Slick.Event,onRendered:new Slick.Event,onSetOptions:new Slick.Event,registerPlugin,unregisterPlugin,getPluginByName,getColumns,setColumns,getColumnIndex,updateColumnHeader,setSortColumn,setSortColumns,getSortColumns,autosizeColumns,autosizeColumn,getOptions,setOptions,getData,getDataLength,getDataItem,setData,getSelectionModel,setSelectionModel,getSelectedRows,setSelectedRows,getContainerNode,updatePagingStatusFromView,applyFormatResultToCellNode,render,reRenderColumns,invalidate,invalidateRow,invalidateRows,invalidateAllRows,updateCell,updateRow,getViewport:getVisibleRange,getRenderedRange,resizeCanvas,updateRowCount,scrollRowIntoView,scrollRowToTop,scrollCellIntoView,scrollColumnIntoView,getCanvasNode,getUID,getHeaderColumnWidthDiff,getScrollbarDimensions,getHeadersWidth,getCanvasWidth,getCanvases,getActiveCanvasNode,setActiveCanvasNode,getViewportNode,getViewports,getActiveViewportNode,setActiveViewportNode,focus:setFocus,scrollTo,cacheCssForHiddenInit,restoreCssFromHiddenInit,getCellFromPoint,getCellFromEvent,getActiveCell,setActiveCell,setActiveRow,getActiveCellNode,getActiveCellPosition,resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor,getCellNode,getCellNodeBox,canCellBeSelected,canCellBeActive,navigatePrev,navigateNext,navigateUp,navigateDown,navigateLeft,navigateRight,navigatePageUp,navigatePageDown,navigateTop,navigateBottom,navigateRowStart,navigateRowEnd,gotoCell,getTopPanel,setTopPanelVisibility,getPreHeaderPanel,getPreHeaderPanelLeft:getPreHeaderPanel,getPreHeaderPanelRight,setPreHeaderPanelVisibility,getHeader,getHeaderColumn,setHeaderRowVisibility,getHeaderRow,getHeaderRowColumn,setFooterRowVisibility,getFooterRow,getFooterRowColumn,getGridPosition,flashCell,addCellCssStyles,setCellCssStyles,removeCellCssStyles,getCellCssStyles,getFrozenRowOffset,setColumnHeaderVisibility,sanitizeHtmlString,getDisplayedScrollbarDimensions,getAbsoluteColumnMinWidth,init:finishInitialization,destroy,getEditorLock,getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}})})(jQuery)});(function(r){"use strict";var e=function(a){var d=arguments,u=!0,p=1;return a=a.replace(/%s/g,function(){var f=d[p++];return typeof f>"u"?(u=!1,""):f}),u?a:""},t=function(a,d,u){var p=Object.keys(a),f=Object.keys(d);if(u&&p.length!==f.length)return!1;for(var m=0;m<p.length;m++){var _=p[m];if(f.indexOf(_)>=0&&a[_]!==d[_])return!1}return!0},i=function(a){for(var d=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],u=0;u<d.length;u++)a=a.replace(d[u].letters,d[u].base);return a},o=function(a){var d=document.createElement("div");d.innerHTML=a;for(var u=d.getElementsByTagName("script"),p=u.length;p--;)u[p].parentNode.removeChild(u[p]);return d.innerHTML};function s(a,d){var u=this,p=a.attr("name")||d.name||"";this.options=d,this.$el=a.hide(),this.$label=this.$el.closest("label"),this.$label.length===0&&this.$el.attr("id")&&(this.$label=r(e('label[for="%s"]',this.$el.attr("id").replace(/:/g,"\\:")))),this.$parent=r(e('<div class="ms-parent %s" %s/>',a.attr("class")||"",e('title="%s"',a.attr("title")))),this.$choice=r(e(['<button type="button" class="ms-choice">','<span class="placeholder">%s</span>',"<div></div>","</button>"].join(""),this.options.placeholder)),this.$drop=r(e('<div name="%s" class="ms-drop %s"%s></div>',a.attr("name")||d.name||"",this.options.position,e(' style="width: %s"',this.options.dropWidth))),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",this.options.width||this.$el.css("width")||this.$el.outerWidth()+20),this.selectAllName='data-name="selectAll'+p+'"',this.selectGroupName='data-name="selectGroup'+p+'"',this.selectItemName='data-name="selectItem'+p+'"',this.options.keepOpen||r("body").on("click",l.bind(u,a)),this.options.onAfterCreate()}function l(a,d){var u=r(d.target),p=u&&u[0],f=this.$choice&&this.$choice[0],m=this.$drop&&this.$drop[0],_=u.parents(".ms-choice"),C=_&&_[0],b=u.parents(".ms-drop"),E=b&&b[0],x=a&&a[0];p===f||C===f||(p===m||E!==m&&d.target!==x)&&this.options&&this.options.isOpen&&this.close()}s.prototype={constructor:s,init:function(){var a=this,d=r("<ul></ul>");this.$drop.html(""),this.options.filter&&this.$drop.append(['<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"].join("")),this.options.selectAll&&!this.options.single&&this.$drop.append(['<div class="ms-select-all" style="width: 100%">','<label style="width: 100%">',e('<input type="checkbox" %s />',this.selectAllName),e("<span>%s%s%s</span>",this.options.selectAllDelimiter[0],this.options.selectAllText,this.options.selectAllDelimiter[1]),"</label>","</div>"].join("")),r.each(this.$el.children(),function(p,f){d.append(a.optionToHtml(p,f))}),d.append(e('<li class="ms-no-results">%s</li>',this.options.noMatchesFound)),this.$drop.append(d),this.options.okButton&&(this.$okButton=r('<button type="button" class="ms-ok-button">'+this.options.okButtonText+"</button>"),this.$drop.append(this.$okButton));var u=isNaN(this.options.width)?this.options.width:this.options.width+"px";this.$drop.css("width",u),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open(),this.options.openOnHover&&r(".ms-parent").hover(function(p){a.open()})},optionToHtml:function(a,d,u,p){var f=this,m=r(d),_=m.attr("class")||"",C=e('label="%s"',m.attr("label")||""),b=e('title="%s"',m.attr("title")),E=this.options.multiple?"multiple":"",x,R=this.options.single?"radio":"checkbox";if(m.is("option")){var L=m.val(),z=this.options.styler(L),B=z?`style="${z}"`:"",G=f.options.textTemplate(m),V=m.prop("selected"),H;return x=p||m.prop("disabled"),H=r([e('<li class="%s %s" %s %s %s>',E,_,b,B,C),e('<label class="%s">',x?"disabled":""),e('<input type="%s" %s%s%s%s>',R,this.selectItemName,V?' checked="checked"':"",x?' disabled="disabled"':"",e(' data-group="%s"',u)),e("<span>%s</span>",G),"</label>","</li>"].join("")),H.find("input").val(L),H}if(m.is("optgroup")){var C=f.options.labelTemplate(m),K=r("<div/>");return u="group_"+a,x=m.prop("disabled"),K.append(['<li class="group">',e('<label class="optgroup %s" data-group="%s">',x?"disabled":"",u),this.options.hideOptgroupCheckboxes||this.options.single?"":e('<input type="checkbox" %s %s>',this.selectGroupName,x?'disabled="disabled"':""),C,"</label>","</li>"].join("")),r.each(m.children(),function(ne,Pe){K.append(f.optionToHtml(ne,Pe,u,x))}),K.html()}},events:function(){var a=this,d=function(u){u.preventDefault(),a[a.options.isOpen?"close":"open"]()};this.$label&&this.$label.off("click").on("click",function(u){u.target.nodeName.toLowerCase()!=="label"||u.target!==this||(d(u),(!a.options.filter||!a.options.isOpen)&&a.focus(),u.stopPropagation())}),this.options.okButton&&this.$okButton.off("click").on("click",function(u){d(u),u.stopPropagation()}),this.$choice.off("click").on("click",d).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(u){switch(u.which){case 27:a.close(),a.$choice.focus();break}}),this.$searchInput.off("keydown").on("keydown",function(u){u.keyCode===9&&u.shiftKey&&a.close()}).off("keyup").on("keyup",function(u){if(a.options.filterAcceptOnEnter&&(u.which===13||u.which===32)&&a.$searchInput.val()){a.$selectAll.click(),a.close(),a.focus();return}a.filter()}),this.$selectAll.off("click").on("click",function(){var u=r(this).prop("checked"),p=a.$selectItems.filter(":visible");p.length===a.$selectItems.length?a[u?"checkAll":"uncheckAll"]():(a.$selectGroups&&a.$selectGroups.prop("checked",u),p&&p.prop("checked",u),a.options[u?"onCheckAll":"onUncheckAll"](),a.update())}),this.$selectGroups.off("click").on("click",function(){var u=r(this).parent().attr("data-group"),p=a.$selectItems.filter(":visible"),f=p.filter(e('[data-group="%s"]',u)),m=f.length!==f.filter(":checked").length;f&&f.prop("checked",m),a.updateSelectAll(),a.update(),a.options.onOptgroupClick({label:r(this).parent().text(),checked:m,children:f.get(),instance:a})}),this.$selectItems.off("click").on("click",function(){if(a.updateSelectAll(),a.update(),a.updateOptGroupSelect(),a.options.onClick({label:r(this).parent().text(),value:r(this).val(),checked:r(this).prop("checked"),instance:a}),a.options.single){var u=r(this).val();a.$selectItems.filter(function(){return r(this).val()!==u}).each(function(){r(this).prop("checked",!1)}),a.update()}a.options.single&&a.options.isOpen&&!a.options.keepOpen&&a.close()})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$parent.addClass("ms-parent-open"),this.$choice.find(">div").addClass("open"),this.$drop[this.animateMethod("show")](),this.$selectAll&&this.$selectAll.parent().show(),this.$noResults&&this.$noResults.hide(),this.$el.children().length||(this.$selectAll&&this.$selectAll.parent().hide(),this.$noResults&&this.$noResults.show()),this.options.offsetLeft){var a=this.$drop.offset(),d=a.left-this.options.offsetLeft;this.$drop.offset({top:a.top,left:d})}if(this.options.container){var a=this.$drop.offset(),d=this.options.offsetLeft?a.left-this.options.offsetLeft:a.left;this.$drop.appendTo(r(this.options.container)),this.$drop.offset({top:a.top,left:d})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.autoAdjustDropWidthByTextSize?this.adjustDropWidthByText():!this.options.width&&this.options.autoDropWidth&&this.$drop.css("width",this.$parent.width());var u=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){var p=this.availableSpaceBottom(),f=this.availableSpaceTop(),m=this.$drop.outerHeight()||0;u=p<m&&f>p?"top":"bottom"}this.adjustDropHeight(u)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(this.options.autoAdjustDropHeight),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$parent.removeClass("ms-parent-open"),this.$choice.find(">div").removeClass("open"),this.$drop[this.animateMethod("hide")](),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},animateMethod:function(a){var d={show:{fade:"fadeIn",slide:"slideDown"},hide:{fade:"fadeOut",slide:"slideUp"}};return d[a][this.options.animate]||a},adjustDropHeight:function(a){var d=a!=="top",u=this.options.filter?this.options.domElmFilterHeight:0,p=this.options.single?0:this.options.domElmOkButtonHeight,f=this.options.single?0:this.options.domElmSelectAllHeight,m=u+p+f+5,_=this.availableSpaceBottom(),C=this.availableSpaceTop(),b=this.options.maxHeight;return d?b=_-m-this.options.adjustHeightPadding:b=C-m-this.options.adjustHeightPadding,!this.options.maxHeight||this.options.maxHeight&&b<this.options.maxHeight?(this.$drop.find("ul").css("max-height",b+"px"),!0):!1},adjustDropPosition:function(a){var d="bottom",u=this.$drop.outerHeight()||0,p=this.$drop.outerWidth()||0,f=this.$parent.offset().top,m=this.$parent.offset().left,_=this.$parent.width(),C=this.availableSpaceBottom(),b=this.availableSpaceTop(),E=r(window).width();if(C>u)d="bottom";else if(u>C&&b>C){if(this.options.container){var x=f-u;x<0&&(x=0),(x>0||a)&&(d="top",this.$drop.offset({top:x<0?0:x}))}else d="top",this.$drop.addClass(d);this.$drop.removeClass("bottom")}if(E-p<m){var R=m-(p-_);this.$drop.offset({left:R})}return d},adjustDropWidthByText:function(){var a=this.$parent.width();(this.options.dropWidth||this.options.width)&&(a=this.options.dropWidth||this.options.width);var d=this.$parent.width(),u=r("span",this.$drop).width()+this.options.domElmSelectSidePadding,p=r("ul",this.$drop).hasScrollBar(),f=p?this.getScrollbarWidth():0,m=0;r("li span",this.$drop).each(function(_,C){var b=r(C).width();b>m&&(m=b)}),m+=this.options.domElmSelectSidePadding+f,m<u&&(m=u),this.options.maxWidth&&m>this.options.maxWidth&&(m=this.options.maxWidth),this.options.minWidth&&m<this.options.minWidth&&(m=this.options.minWidth),m<d&&(m=d),(a>m||this.$drop.width()>m||a==="100%")&&this.$drop.css({width:m,"max-width":m})},availableSpaceBottom:function(){var a=r(window).innerHeight()||this.options.maxHeight,d=r(window).scrollTop()||0,u=this.$drop.offset().top;return a-(u-d)},availableSpaceTop:function(){var a=r(window).scrollTop()||0,d=this.$parent.offset().top;return d-a},update:function(a){var d=this.options.displayValues?this.getSelects():this.getSelects("text"),u=this.$choice.find(">span"),p=d.length;if(p===0)u.addClass("placeholder").html(this.options.placeholder);else if(this.options.allSelected&&p===this.$selectItems.length+this.$disableItems.length)u.removeClass("placeholder").html(this.options.allSelected);else if(this.options.ellipsis&&p>this.options.minimumCountSelected)u.removeClass("placeholder").text(d.slice(0,this.options.minimumCountSelected).join(this.options.delimiter)+"...");else if(this.options.countSelected&&p>this.options.minimumCountSelected)u.removeClass("placeholder").html(this.options.countSelected.replace("#",d.length).replace("%",this.$selectItems.length+this.$disableItems.length));else if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){var f=this.getSelects("label").join(this.options.delimiter);if(this.options.useSelectOptionLabelToHtml){var m=o(f);u.removeClass("placeholder").html(m)}else u.removeClass("placeholder").text(f)}else u.removeClass("placeholder").text(d.join(this.options.delimiter));if(this.options.addTitle){var _=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"label":"text";u&&u.prop("title",this.getSelects(_).join(this.options.delimiter))}this.$el.val(this.getSelects()),this.$drop.find("li").removeClass("selected"),this.$drop.find("input:checked").each(function(){r(this).parents("li").first().addClass("selected")}),a||this.$el.trigger("change")},updateSelectAll:function(a){var d=this.$selectItems;a||(d=d.filter(":visible")),this.$selectAll&&(this.$selectAll.prop("checked",d.length&&d.length===d.filter(":checked").length),!a&&this.$selectAll.prop("checked")&&this.options.onCheckAll())},updateOptGroupSelect:function(){var a=this.$selectItems.filter(":visible");r.each(this.$selectGroups,function(d,u){var p=r(u).parent().attr("data-group"),f=a.filter(e('[data-group="%s"]',p));r(u).prop("checked",f.length&&f.length===f.filter(":checked").length)})},getOptions:function(){let a=r.extend({},this.options);return delete a.data,r.extend(!0,{},a)},refreshOptions:function(a){t(this.options,a,!0)||(this.options=r.extend(this.options,a),this.init())},getSelects:function(a){var d=this,u=[],p=[],f=[];switch(this.$drop.find(e("input[%s]:checked",this.selectItemName)).each(function(){u.push(r(this).parents("li").first().text()),p.push(r(this).parents("li").attr("label")||""),f.push(r(this).val())}),a==="text"&&this.$selectGroups&&this.$selectGroups.length?(u=[],this.$selectGroups.each(function(){var m=[],_=r.trim(r(this).parent().text()),C=r(this).parent().data("group"),b=d.$drop.find(e('[%s][data-group="%s"]',d.selectItemName,C)),E=b.filter(":checked");if(!(!E||!E.length)){if(m.push("["),m.push(_),(b&&b.length)>(E&&E.length)){var x=[];E.each(function(){x.push(r(this).parent().text())}),m.push(": "+x.join(", "))}m.push("]"),u.push(m.join(""))}})):a==="label"&&this.$selectGroups&&this.$selectGroups.length&&(p=[],this.$selectGroups.each(function(){var m=[],_=r.trim(r(this).attr("label")||""),C=r(this).parent().data("group"),b=d.$drop.find(e('[%s][data-group="%s"]',d.selectItemName,C)),E=b.filter(":checked");if(!(!E||!E.length)){if(m.push("["),m.push(_),(b&&b.length)>(E&&E.length)){var x=[];E.each(function(){x.push(r(this).attr("label")||"")}),m.push(": "+x.join(", "))}m.push("]"),p.push(m.join(""))}})),a){case"text":return u;case"label":return p;default:return f}},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var d=a.offsetWidth;a.style.overflow="scroll";var u=document.createElement("div");u.style.width="100%",a.appendChild(u);var p=u.offsetWidth;return a.parentNode.removeChild(a),d-p},setSelects:function(a){var d=this;this.$selectItems&&this.$disableItems&&(this.$selectItems.prop("checked",!1),this.$disableItems.prop("checked",!1),r.each(a,function(u,p){var f=d.$selectItems.filter(e('[value="%s"]',p)),m=d.$disableItems.filter(e('[value="%s"]',p));f&&f.prop("checked",!0),m&&m.prop("checked",!0)}),this.$selectItems&&this.$selectAll&&this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length+this.$disableItems.filter(":checked").length),r.each(d.$selectGroups,function(u,p){var f=r(p).parent().attr("data-group"),m=d.$selectItems.filter('[data-group="'+f+'"]');r(p).prop("checked",m.length&&m.length===m.filter(":checked").length)})),this.update(!1)},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},destroy:function(){r("body").off("click"),this.$el.before(this.$parent).show(),this.$parent.remove(),this.$choice=null,this.$el=null,this.$selectItems=null,this.$selectGroups=null,this.$noResults=null,this.options=null,this.$parent=null},checkAll:function(){this.$selectItems&&this.$selectItems.prop("checked",!0),this.$selectGroups&&this.$selectGroups.prop("checked",!0),this.$selectAll&&this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems&&this.$selectItems.prop("checked",!1),this.$selectGroups&&this.$selectGroups.prop("checked",!1),this.$selectAll&&this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice&&this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice&&this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},filter:function(){var a=this,d=r.trim(this.$searchInput.val()).toLowerCase();d.length===0?(this.$selectAll&&this.$selectAll.parent().show(),this.$selectItems&&this.$selectItems.parent().show(),this.$disableItems&&this.$disableItems.parent().show(),this.$selectGroups&&this.$selectGroups.parent().show(),this.$noResults.hide(),this.$selectItems.each(function(){r(this).closest("li").show()})):(this.$selectItems.each(function(){var u=r(this).parent(),p=u.parent("li"),f=i(u.text().toLowerCase()).indexOf(i(d))<0?"hide":"show";p[f]()}),this.$disableItems&&this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var u=r(this).parent(),p=u.parent("li"),f=u.attr("data-group"),m=a.$selectItems.filter(":visible"),_=m.filter(e('[data-group="%s"]',f)).length?"show":"hide";p[_]()}),this.$selectItems&&this.$selectItems.parent().filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll&&this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll(),this.options.onFilter(d)}},r.fn.hasScrollBar=function(){return this.get(0)&&this.get(0).scrollHeight&&this.get(0).scrollHeight>this.height()},r.fn.multipleSelect=function(){var a=arguments[0],d=arguments,u,p=["getSelects","setSelects","getOptions","refreshOptions","enable","disable","open","close","checkAll","uncheckAll","focus","blur","refresh","destroy"];return this.each(function(){var f=r(this),m=f.data("multipleSelect"),_=r.extend({},r.fn.multipleSelect.defaults,f.data(),typeof a=="object"&&a);if(m||(m=new s(f,_),f.data("multipleSelect",m)),typeof a=="string"){if(r.inArray(a,p)<0)throw"Unknown method: "+a;u=m[a](d[1])}else m.init(),d[1]&&(u=m[d[1]].apply(m,[].slice.call(d,2)))}),typeof u<"u"?u:this},r.fn.multipleSelect.defaults={domElmFilterHeight:32,domElmSelectSidePadding:26,domElmOkButtonHeight:26,domElmSelectAllHeight:39,adjustHeightPadding:10,name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllDelimiter:["[","]"],minimumCountSelected:3,ellipsis:!1,multiple:!1,multipleWidth:80,single:!1,filter:!1,offsetLeft:0,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoDropWidth:!1,autoAdjustDropWidthByTextSize:!1,width:void 0,dropWidth:void 0,maxHeight:250,maxWidth:500,minWidth:void 0,container:null,position:"bottom",keepOpen:!1,animate:"none",displayValues:!1,delimiter:", ",addTitle:!1,filterAcceptOnEnter:!1,hideOptgroupCheckboxes:!1,openOnHover:!1,okButton:!1,okButtonText:"OK",selectAllText:"Select all",allSelected:"All selected",countSelected:"# of % selected",noMatchesFound:"No matches found",styler:function(){return!1},textTemplate:function(a){return a.html()},labelTemplate:function(a){return a.attr("label")},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1},onFilter:function(){return!1},onAfterCreate:function(){return!1}}})(jQuery);var ul={};tn(ul,{BackendUtilityService:()=>Gn});var at=function(r){return r.local="local",r.remote="remote",r}(at||{});var Gn=class{constructor(e){this.rxjs=e}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,t,i,o){let s=new Date;t&&i.service.postProcess&&i.service.postProcess(t),t&&i?.internalPostProcess&&i.internalPostProcess(t),i.postProcess!==void 0&&(t instanceof Object&&(t.metrics={startTime:e,endTime:s,executionTime:s.valueOf()-e.valueOf(),itemCount:o,totalItemCount:o}),i.postProcess(t))}onBackendError(e,t){if(typeof t?.onError=="function")t.onError(e);else throw e}executeBackendCallback(e,t,i,o,s,l){var a;if(e){i&&!i.clearFilterTriggered&&!i.clearSortTriggered&&l?.emitActionChangedCallback&&l.emitActionChangedCallback.call(this,at.remote);let d=e.process(t);if(d instanceof Promise&&d.then)d.then(u=>{var p;this.executeBackendProcessesCallback(o,u,e,s),(p=l?.successCallback)===null||p===void 0||p.call(this,i)}).catch(u=>{var p;(p=l?.errorCallback)===null||p===void 0||p.call(this,i),this.onBackendError(u,e)});else if(!((a=this.rxjs)===null||a===void 0)&&a.isObservable(d)){let u=this.rxjs;u.isObservable(l?.httpCancelRequestSubject)&&l?.httpCancelRequestSubject.next(),d.pipe(u.takeUntil(u.iif(()=>u.isObservable(l?.httpCancelRequestSubject),l?.httpCancelRequestSubject,u.EMPTY))).subscribe(p=>{var f;this.executeBackendProcessesCallback(o,p,e,s),(f=l?.successCallback)===null||f===void 0||f.call(this,i)},p=>{var f;(f=l?.errorCallback)===null||f===void 0||f.call(this,i),this.onBackendError(p,e)})}}}refreshBackendDataset(e){var t,i;let o="",s=e?.backendServiceApi;if(!s||!s.service||!s.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(s.service&&(o=s.service.buildQuery()),o&&o!==""){let l=new Date;s.preProcess&&s.preProcess();let a=(i=(t=e?.pagination)===null||t===void 0?void 0:t.totalItems)!==null&&i!==void 0?i:0;this.executeBackendCallback(s,o,null,l,a)}}};var cl={};tn(cl,{collectionObserver:()=>$o,propertyObserver:()=>Un});function $o(r,e){["pop","push","reverse","shift","unshift","splice","sort"].forEach(i=>{r[i]=(...o)=>{let s=Array.prototype[i].apply(r,o);return e.apply(r,[r,o]),s}})}function Un(r,e,t){let i=r[e];Object.defineProperty(r,e,{configurable:!0,get(){return i},set(o){i=o,t.apply(r,[o,r[e]])}})}var _l={};tn(_l,{CancelledException:()=>br,addTreeLevelByMutation:()=>wr,cancellablePromise:()=>cu,castObservableToPromise:()=>jn,decimalFormatted:()=>dn,findItemInTreeStructure:()=>Xn,findOrDefault:()=>Ci,flattenToParentChildArray:()=>gl,formatNumber:()=>gt,getCellValueFromQueryFieldGetter:()=>So,getDescendantProperty:()=>je,getTranslationPrefix:()=>Et,mapFlatpickrDateFormatWithFieldType:()=>ji,mapMomentDateFormatWithFieldType:()=>zt,mapOperatorByFieldType:()=>Sr,mapOperatorToShorthandDesignation:()=>Xi,mapOperatorType:()=>hu,objectWithoutKey:()=>ya,parseUtcDate:()=>pu,thousandSeparatorFormatted:()=>zo,unflattenParentChildArrayToTree:()=>vl,unsubscribeAll:()=>Eo});var Ku=Array.prototype.map,Qu=Array.prototype.reduce;var au=r=>r;function wa(r,e,t=au,i=()=>{}){let o=r&&r.length?[{pointer:r,offset:0}]:[],s=[],l;for(;o.length;)for(l=o.pop();l.offset<l.pointer.length;){let a=l.pointer[l.offset],d=i(a),u=e(a);s.push(t(a,l.node,d,l.nodeId)),l.offset+=1,u&&(o.push(l),l={pointer:u,offset:0,node:a,nodeId:d})}return s}var ml=Oi(bo());var ie=(()=>{class r{}return r.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},r.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},r.VALIDATION_REQUIRED_FIELD="Field is required",r.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",r.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",r.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",r.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",r.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",r.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",r.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",r.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",r.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)",r})();var Vi=function(r){return r.colon=":",r.comma=",",r.equalSign="=",r.pipe="|",r.semicolon=";",r.space=" ",r.tab="	",r.doubleColon="::",r.doublePipe="||",r.doubleSemicolon=";;",r}(Vi||{});var Le=function(r){return r.autoTooltip="autoTooltip",r.cellExternalCopyManager="cellExternalCopyManager",r.cellMenu="cellMenu",r.checkboxSelector="checkboxSelector",r.columnPicker="columnPicker",r.contextMenu="contextMenu",r.customTooltip="customTooltip",r.draggableGrouping="draggableGrouping",r.groupItemMetaProvider="groupItemMetaProvider",r.gridMenu="gridMenu",r.headerButton="headerButton",r.headerMenu="headerMenu",r.rowDetailView="rowDetailView",r.rowMoveManager="rowMoveManager",r.rowSelection="rowSelection",r}(Le||{});var O={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var _i=function(r){return r.csv="csv",r.txt="txt",r.xls="xls",r.xlsx="xlsx",r}(_i||{});var Yn=function(r){return r.merge="merge",r.chain="chain",r}(Yn||{});var fl=function(r){return r.none="NOA",r.legacyOff="LOF",r.legacyForceFit="LFF",r.ignoreViewport="IGV",r.fitColsToViewport="FCV",r.fitViewportToCols="FVC",r}(fl||{});var Kt=function(r){return r.columns="columns",r.filter="filter",r.pagination="pagination",r.pinning="pinning",r.rowSelection="rowSelection",r.sorter="sorter",r.treeData="treeData",r}(Kt||{});var Ie=function(r){return r[r.C=67]="C",r[r.V=86]="V",r[r.BACKSPACE=8]="BACKSPACE",r[r.DELETE=46]="DELETE",r[r.DOWN=40]="DOWN",r[r.END=35]="END",r[r.ENTER=13]="ENTER",r[r.ESCAPE=27]="ESCAPE",r[r.HOME=36]="HOME",r[r.INSERT=45]="INSERT",r[r.LEFT=37]="LEFT",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.PAGE_UP=33]="PAGE_UP",r[r.RIGHT=39]="RIGHT",r[r.TAB=9]="TAB",r[r.UP=38]="UP",r[r.SPACE=32]="SPACE",r}(Ie||{});var ue=function(r){return r.empty="",r.contains="Contains",r.notContains="Not_Contains",r.lessThan="LT",r.lessThanOrEqual="LE",r.greaterThan="GT",r.greaterThanOrEqual="GE",r.notEqual="NE",r.equal="EQ",r.endsWith="EndsWith",r.rangeInclusive="RangeInclusive",r.rangeExclusive="RangeExclusive",r.startsWith="StartsWith",r.in="IN",r.notIn="NOT_IN",r.inContains="IN_CONTAINS",r.notInContains="NOT_IN_CONTAINS",r.inCollection="IN_COLLECTION",r.notInCollection="NOT_IN_COLLECTION",r}(ue||{});var Yi=function(r){return r.asc="asc",r.ASC="ASC",r.desc="desc",r.DESC="DESC",r}(Yi||{});var mt=function(r){return r[r.asc=1]="asc",r[r.desc=-1]="desc",r[r.neutral=0]="neutral",r}(mt||{});var wo=function(r){return r.toggleCollapse="toggle-collapse",r.fullExpand="full-expand",r.fullCollapse="full-collapse",r.toggleExpand="toggle-expand",r}(wo||{});var uu=ml.default||ml,br=class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}};function cu(r){let e=!1;return r instanceof Promise?{promise:r.then(t=>{if(e)throw new br("Cancelled Promise");return t}),cancel:()=>e=!0}:r}function jn(r,e,t=""){let i=e;if(e instanceof Promise)return e;if(r.isObservable(e)&&(i=r.firstValueFrom(e)),!(i instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${t} is not able to convert the Observable into a Promise.`);return i}function wr(r,e,t=0){var i;let o=(i=e?.childrenPropName)!==null&&i!==void 0?i:ie.treeDataProperties.CHILDREN_PROP;if(Array.isArray(r))for(let s of r)s&&(Array.isArray(s[o])&&s[o].length>0&&(t++,wr(s[o],e,t),t--),s[e.levelPropName]=t)}function gl(r,e){var t,i,o,s,l;let a=(t=e?.identifierPropName)!==null&&t!==void 0?t:"id",d=(i=e?.childrenPropName)!==null&&i!==void 0?i:ie.treeDataProperties.CHILDREN_PROP,u=(o=e?.hasChildrenPropName)!==null&&o!==void 0?o:ie.treeDataProperties.HAS_CHILDREN_PROP,p=(s=e?.parentPropName)!==null&&s!==void 0?s:ie.treeDataProperties.PARENT_PROP,f=(l=e?.levelPropName)!==null&&l!==void 0?l:ie.treeDataProperties.TREE_LEVEL_PROP;return e?.shouldAddTreeLevelNumber&&wr(r,{childrenPropName:d,levelPropName:f}),wa(r,_=>_[d],(_,C)=>P({[a]:_[a],[p]:C!==void 0?C[a]:null,[u]:!!_[d]},ya(_,d)))}function vl(r,e){var t,i,o,s,l;let a=(t=e?.identifierPropName)!==null&&t!==void 0?t:"id",d=(i=e?.childrenPropName)!==null&&i!==void 0?i:ie.treeDataProperties.CHILDREN_PROP,u=(o=e?.parentPropName)!==null&&o!==void 0?o:ie.treeDataProperties.PARENT_PROP,p=(s=e?.levelPropName)!==null&&s!==void 0?s:ie.treeDataProperties.TREE_LEVEL_PROP,f=(l=e?.collapsedPropName)!==null&&l!==void 0?l:ie.treeDataProperties.COLLAPSED_PROP,m=r||[],_=[],C={};return m.forEach(b=>C[b[a]]=b),Object.keys(C).forEach(b=>{var E;let x=C[b];if(!(u in x)||x[u]===null||x[u]===void 0||x[u]==="")_.push(x);else if(x[u]in C){let R=C[x[u]];d in R||(R[d]=[]),R[d].push(x),R[f]===void 0&&(R[f]=(E=e?.initiallyCollapsed)!==null&&E!==void 0?E:!1)}}),wr(_,{childrenPropName:d,levelPropName:p},0),_}function Xn(r,e,t){if(!t)throw new Error('findRecursive requires parameter "childrenPropertyName"');let i=r.find(e),o=r.filter(s=>t in s&&s[t]);if(i)return i;if(o.length){let s=[];return o.forEach(l=>{t in l&&s.push(...l[t])}),Xn(s,e,t)}}function dn(r,e,t,i=".",o=""){if(isNaN(+r))return r;let s=e===void 0?2:e,l=t===void 0?2:t,a=String(Math.round(+r*Math.pow(10,l))/Math.pow(10,l));for(a.indexOf(".")<0&&s>0&&(a+=".");a.length-a.indexOf(".")<=s;)a+="0";let d=a.split("."),u,p;o?u=d.length>=1?zo(d[0],o):void 0:u=d.length>=1?d[0]:a,d.length>1&&(p=d[1]);let f="";return u!==void 0&&p!==void 0?f=`${u}${i}${p}`:u!=null&&(f=u),f}function gt(r,e,t,i,o="",s="",l=".",a=""){if(isNaN(+r))return r;let d=Math.round(parseFloat(r)*1e6)/1e6;if(d<0){let u=Math.abs(d);if(i){if(!isNaN(e)||!isNaN(t))return`(${o}${dn(u,e,t,l,a)}${s})`;let p=zo(`${u}`,a);return`(${o}${p}${s})`}else{if(!isNaN(e)||!isNaN(t))return`-${o}${dn(u,e,t,l,a)}${s}`;let p=zo(`${u}`,a);return`-${o}${p}${s}`}}else{if(!isNaN(e)||!isNaN(t))return`${o}${dn(r,e,t,l,a)}${s}`;let u=zo(`${r}`,a);return`${o}${u}${s}`}}function So(r,e,t){if(typeof r.queryFieldNameGetterFn=="function"){let i=r.queryFieldNameGetterFn(e);i?.indexOf(".")>=0?t=je(e,i):t=e.hasOwnProperty(i)?e[i]:t}return t}function je(r,e){return!r||!e?r:e.split(".").reduce((t,i)=>t&&t[i],r)}function Et(r){return r&&r.translationNamespace?r.translationNamespace+(r.translationNamespaceSeparator||""):""}function zt(r){let e;switch(r){case O.dateTime:case O.dateTimeIso:e="YYYY-MM-DD HH:mm:ss";break;case O.dateTimeIsoAmPm:e="YYYY-MM-DD hh:mm:ss a";break;case O.dateTimeIsoAM_PM:e="YYYY-MM-DD hh:mm:ss A";break;case O.dateTimeShortIso:e="YYYY-MM-DD HH:mm";break;case O.dateEuro:e="DD/MM/YYYY";break;case O.dateEuroShort:e="D/M/YY";break;case O.dateTimeEuro:e="DD/MM/YYYY HH:mm:ss";break;case O.dateTimeShortEuro:e="DD/MM/YYYY HH:mm";break;case O.dateTimeEuroAmPm:e="DD/MM/YYYY hh:mm:ss a";break;case O.dateTimeEuroAM_PM:e="DD/MM/YYYY hh:mm:ss A";break;case O.dateTimeEuroShort:e="D/M/YY H:m:s";break;case O.dateTimeEuroShortAmPm:e="D/M/YY h:m:s a";break;case O.dateUs:e="MM/DD/YYYY";break;case O.dateUsShort:e="M/D/YY";break;case O.dateTimeUs:e="MM/DD/YYYY HH:mm:ss";break;case O.dateTimeUsAmPm:e="MM/DD/YYYY hh:mm:ss a";break;case O.dateTimeUsAM_PM:e="MM/DD/YYYY hh:mm:ss A";break;case O.dateTimeUsShort:e="M/D/YY H:m:s";break;case O.dateTimeUsShortAmPm:e="M/D/YY h:m:s a";break;case O.dateTimeShortUs:e="MM/DD/YYYY HH:mm";break;case O.dateUtc:e="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case O.date:case O.dateIso:default:e="YYYY-MM-DD";break}return e}function ji(r){let e;switch(r){case O.dateTime:case O.dateTimeIso:e="Y-m-d H:i:S";break;case O.dateTimeShortIso:e="Y-m-d H:i";break;case O.dateTimeIsoAmPm:case O.dateTimeIsoAM_PM:e="Y-m-d h:i:S K";break;case O.dateEuro:e="d/m/Y";break;case O.dateEuroShort:e="d/m/y";break;case O.dateTimeEuro:e="d/m/Y H:i:S";break;case O.dateTimeShortEuro:e="d/m/y H:i";break;case O.dateTimeEuroAmPm:e="d/m/Y h:i:S K";break;case O.dateTimeEuroAM_PM:e="d/m/Y h:i:s K";break;case O.dateTimeEuroShort:e="d/m/y H:i:s";break;case O.dateTimeEuroShortAmPm:e="d/m/y h:i:s K";break;case O.dateUs:e="m/d/Y";break;case O.dateUsShort:e="m/d/y";break;case O.dateTimeUs:e="m/d/Y H:i:S";break;case O.dateTimeShortUs:e="m/d/y H:i";break;case O.dateTimeUsAmPm:e="m/d/Y h:i:S K";break;case O.dateTimeUsAM_PM:e="m/d/Y h:i:s K";break;case O.dateTimeUsShort:e="m/d/y H:i:s";break;case O.dateTimeUsShortAmPm:e="m/d/y h:i:s K";break;case O.dateUtc:e="Z";break;case O.date:case O.dateIso:default:e="Y-m-d";break}return e}function hu(r){let e;switch(r){case"<":case"LT":e=ue.lessThan;break;case"<=":case"LE":e=ue.lessThanOrEqual;break;case">":case"GT":e=ue.greaterThan;break;case">=":case"GE":e=ue.greaterThanOrEqual;break;case"<>":case"!=":case"NE":e=ue.notEqual;break;case"*":case"a*":case"StartsWith":e=ue.startsWith;break;case"*z":case"EndsWith":e=ue.endsWith;break;case"=":case"==":case"EQ":e=ue.equal;break;case"IN":e=ue.in;break;case"NIN":case"NOT_IN":e=ue.notIn;break;case"Not_Contains":case"NOT_CONTAINS":e=ue.notContains;break;case"Contains":case"CONTAINS":default:e=ue.contains;break}return e}function Xi(r){let e="";switch(r){case ue.greaterThan:case">":e=">";break;case ue.greaterThanOrEqual:case">=":e=">=";break;case ue.lessThan:case"<":e="<";break;case ue.lessThanOrEqual:case"<=":e="<=";break;case ue.notEqual:case"<>":e="<>";break;case ue.equal:case"=":case"==":case"EQ":e="=";break;case ue.startsWith:case"a*":case"*":e="a*";break;case ue.endsWith:case"*z":e="*z";break;default:e=r;break}return e}function Sr(r){let e;switch(r){case O.unknown:case O.string:case O.text:case O.password:case O.readonly:e=ue.contains;break;case O.float:case O.number:case O.date:case O.dateIso:case O.dateUtc:case O.dateTime:case O.dateTimeIso:case O.dateTimeIsoAmPm:case O.dateTimeIsoAM_PM:case O.dateEuro:case O.dateEuroShort:case O.dateTimeEuro:case O.dateTimeEuroAmPm:case O.dateTimeEuroAM_PM:case O.dateTimeEuroShort:case O.dateTimeEuroShortAmPm:case O.dateTimeEuroShortAM_PM:case O.dateUs:case O.dateUsShort:case O.dateTimeUs:case O.dateTimeUsAmPm:case O.dateTimeUsAM_PM:case O.dateTimeUsShort:case O.dateTimeUsShortAmPm:case O.dateTimeUsShortAM_PM:default:e=ue.equal;break}return e}function ya(r,e){return Object.keys(r).reduce((t,i)=>(i!==e&&(t[i]=r[i]),t),{})}function pu(r,e){let t="";if(typeof r=="string"&&/^[0-9\-\/]*$/.test(r)){let i=decodeURIComponent(r),o=uu(new Date(i));o.isValid()&&o.year().toString().length===4&&(t=e?o.utc().format():o.format())}return t}function zo(r,e=","){if(r!=null){let t=`${r}`,i=t.split(".");return i.length===2?`${i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)}.${i[1]}`:t.replace(/\B(?=(\d{3})+(?!\d))/g,e)}return r}function Ci(r,e,t={}){return Array.isArray(r)?r.find(e)||t:r}function Eo(r){if(Array.isArray(r))for(;r.length>0;){let e=r.pop();e?.unsubscribe&&e.unsubscribe()}return r}var xl={};tn(xl,{sortByFieldType:()=>Bo});var xa=(r,e,t,i,o)=>{var s,l;if(!i||!i.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');let a=r?.hasOwnProperty(i.dataKey)?r[i.dataKey]:r,d=e?.hasOwnProperty(i.dataKey)?e[i.dataKey]:e,u=(l=(s=i?.valueCouldBeUndefined)!==null&&s!==void 0?s:o?.cellValueCouldBeUndefined)!==null&&l!==void 0?l:!1;t==null&&(t=mt.neutral);let p=0;return typeof r!="object"?p=-99e10:typeof e!="object"?p=99e10:a===null||u&&a===void 0?p=-1:d===null||u&&d===void 0?p=1:a===d?p=0:t?p=a<d?-1:1:p=a<d?1:-1,t*p};var El={};tn(El,{addToArrayWhenNotExists:()=>Cl,addWhiteSpaces:()=>Er,arrayRemoveItemByIndex:()=>Kn,deepCopy:()=>un,deepMerge:()=>Hi,emptyObject:()=>fu,hasData:()=>yo,isEmptyObject:()=>yr,isNumber:()=>rt,isObject:()=>qn,isObjectEmpty:()=>bl,parseBoolean:()=>Qn,removeAccentFromText:()=>xo,setDeepValue:()=>It,titleCase:()=>To,toCamelCase:()=>wl,toKebabCase:()=>Oo,toSentenceCase:()=>vt,toSnakeCase:()=>mu,uniqueArray:()=>Sl,uniqueObjectArray:()=>gu});function Cl(r,e,t="id"){let i=-1;typeof e=="object"&&t in e?i=r.findIndex(o=>o[t]===e[t]):i=r.findIndex(o=>o===e),i<0&&r.push(e)}function Er(r,e=" "){let t="";for(let i=0;i<r;i++)t+=e;return t}function Kn(r,e){return r.filter((t,i)=>e!==i)}function un(r){let e=()=>{let o={};for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(o[s]=un(r[s]));return o},t=()=>r.map(o=>un(o)),i=Object.prototype.toString.call(r).slice(8,-1).toLowerCase();return i==="object"?e():i==="array"?t():r}function Hi(r,...e){if(!e.length)return r;let t=e.shift();if(r=!qn(r)&&qn(t)?{}:r,qn(r)&&qn(t))for(let i in t)t.hasOwnProperty(i)&&(i in r?typeof r[i]!="object"||typeof t[i]!="object"?r[i]=t[i]:r[i].concat&&t[i].concat?r[i]=r[i].concat(t[i]):r[i]=Hi(r[i],t[i]):r[i]=t[i]);return Hi(r,...e)}function fu(r){for(let e in r)r.hasOwnProperty(e)&&delete r[e];return r=null,r={},r}function yr(r){return r==null?!0:Object.entries(r).length===0}function qn(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)&&!(r instanceof Date)}function yo(r){return r!=null&&r!==""}function rt(r,e=!1){return e?r==null||typeof r=="string"?!1:!isNaN(r):r==null||r===""?!1:!isNaN(+r)}function bl(r){return!r||r&&typeof r=="object"&&Object.keys(r).length===0}function Qn(r){return/(true|1)/i.test(r+"")}function xo(r,e=!1){let t=typeof r.normalize=="function"?r.normalize("NFD").replace(/[\u0300-\u036f]/g,""):r;return e?t.toLowerCase():t}function It(r,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length>1){let i=e.shift();r&&i!==void 0&&It(r[i]=yo(r[i])&&(Array.isArray(r[i])||Object.prototype.toString.call(r[i])==="[object Object]")?r[i]:{},e,t)}else r&&e[0]&&(r[e[0]]=t)}function To(r,e=!1){return typeof r=="string"?e?r.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()):r.charAt(0).toUpperCase()+r.slice(1):r}function wl(r){return typeof r=="string"?r.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,(e,t)=>/[\s+\-_\/]/.test(e)?"":t===0?e.toLowerCase():e.toUpperCase()):r}function Oo(r){return typeof r=="string"?wl(r).replace(/([A-Z])/g,"-$1").toLowerCase():r}function vt(r){if(typeof r=="string"){let e=r.replace(/([A-Z])|(\-)/g," $1").replace(/\s+/g," ").trim();return e.charAt(0).toUpperCase()+e.slice(1)}return r}function mu(r){return typeof r=="string"?wl(r).replace(/([A-Z])/g,"_$1").toLowerCase():r}function Sl(r){return Array.isArray(r)&&r.length>0?r.filter((e,t)=>r.indexOf(e)>=t):r}function gu(r,e="id"){if(Array.isArray(r)&&r.length>0){let t=[],i=new Map;for(let o of r)o&&!i.has(o[e])&&(i.set(o[e],!0),t.push({id:o[e],name:o.name}));return t}return r}var Ta=(r,e,t,i,o)=>{var s,l;t==null&&(t=mt.neutral);let a=0,d=(l=(s=i?.valueCouldBeUndefined)!==null&&s!==void 0?s:o?.cellValueCouldBeUndefined)!==null&&l!==void 0?l:!1;return r===e?a=0:r===null||d&&r===void 0?a=-1:e===null||d&&e===void 0?a=1:(o?.ignoreAccentOnStringFilterAndSort&&(r=xo(r,!1),e=xo(e,!1)),t?a=r<e?-1:1:a=r<e?1:-1),t*a};var Oa=(r,e,t,i,o)=>{var s,l;let a=(l=(s=i?.valueCouldBeUndefined)!==null&&s!==void 0?s:o?.cellValueCouldBeUndefined)!==null&&l!==void 0?l:!1,d=isNaN(r)||r===""||r===null||a&&r===void 0?-99e10:parseFloat(r),u=isNaN(e)||e===""||e===null||a&&e===void 0?-99e10:parseFloat(e);return t*(d===u?0:d>u?1:-1)};var yl=Oi(bo()),xr=yl.default||yl;function Ra(r,e,t,i,o,s,l){var a,d;let u=0,p=(d=(a=i?.valueCouldBeUndefined)!==null&&a!==void 0?a:o?.cellValueCouldBeUndefined)!==null&&d!==void 0?d:!1,f=xr(r,s,l),m=xr(e,s,l);return r===null||r===""||p&&r===void 0||!f.isValid()?u=-1:e===null||e===""||p&&e===void 0||!m.isValid()?u=1:u=f.valueOf()<m.valueOf()?-1:1,t*u}function st(r){let e=r===O.date?xr.ISO_8601:zt(r);return(t,i,o,s,l)=>e===xr.ISO_8601?Ra(t,i,o,s,l,e,!1):Ra(t,i,o,s,l,e,!0)}var Tr={date:st(O.date),dateIso:st(O.dateIso),dateUtc:st(O.dateUtc),dateTime:st(O.dateTime),dateTimeIso:st(O.dateTimeIso),dateTimeIsoAmPm:st(O.dateTimeIsoAmPm),dateTimeIsoAM_PM:st(O.dateTimeIsoAM_PM),dateTimeShortIso:st(O.dateTimeShortIso),dateEuro:st(O.dateEuro),dateEuroShort:st(O.dateEuroShort),dateTimeShortEuro:st(O.dateTimeShortEuro),dateTimeEuro:st(O.dateTimeEuro),dateTimeEuroAmPm:st(O.dateTimeEuroAmPm),dateTimeEuroAM_PM:st(O.dateTimeEuroAM_PM),dateTimeEuroShort:st(O.dateTimeEuroShort),dateTimeEuroShortAmPm:st(O.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:st(O.dateTimeEuroShortAM_PM),dateUs:st(O.dateUs),dateUsShort:st(O.dateUsShort),dateTimeShortUs:st(O.dateTimeShortUs),dateTimeUs:st(O.dateTimeUs),dateTimeUsAmPm:st(O.dateTimeUsAmPm),dateTimeUsAM_PM:st(O.dateTimeUsAM_PM),dateTimeUsShort:st(O.dateTimeUsShort),dateTimeUsShortAmPm:st(O.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:st(O.dateTimeUsShortAM_PM),numeric:Oa,objectString:xa,string:Ta};function Bo(r,e,t,i,o,s){let l=0;switch(r){case O.float:case O.integer:case O.number:l=Tr.numeric(e,t,i,o,s);break;case O.date:case O.dateIso:case O.dateUtc:case O.dateTime:case O.dateTimeIso:case O.dateTimeIsoAmPm:case O.dateTimeIsoAM_PM:case O.dateTimeShortIso:case O.dateEuro:case O.dateEuroShort:case O.dateTimeShortEuro:case O.dateTimeEuro:case O.dateTimeEuroAmPm:case O.dateTimeEuroAM_PM:case O.dateTimeEuroShort:case O.dateTimeEuroShortAmPm:case O.dateTimeEuroShortAM_PM:case O.dateUs:case O.dateUsShort:case O.dateTimeShortUs:case O.dateTimeUs:case O.dateTimeUsAmPm:case O.dateTimeUsAM_PM:case O.dateTimeUsShort:case O.dateTimeUsShortAmPm:case O.dateTimeUsShortAM_PM:l=st(r).call(this,e,t,i,o,s);break;case O.object:l=Tr.objectString(e,t,i,o,s);break;case O.string:case O.text:case O.password:case O.readonly:default:l=Tr.string(e,t,i,o,s);break}return l}var si=function(r){return r.camelCase="camelCase",r.kebabCase="kebabCase",r.lowerCase="lowerCase",r.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix",r}(si||{});var Or=class{constructor(e){this._subscribedEvents=[],this.eventNamingStyle=si.camelCase,this._elementSource=e||document.createElement("div")}get elementSource(){return this._elementSource}set elementSource(e){this._elementSource=e}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(e=>e.name)}dispose(){var e;this.unsubscribeAll(),this._subscribedEvents=[],clearTimeout(this._timer),(e=this._elementSource)===null||e===void 0||e.remove(),this._elementSource=null}dispatchCustomEvent(e,t,i=!0,o=!0){var s;let l={bubbles:i,cancelable:o};return t&&(l.detail=t),(s=this._elementSource)===null||s===void 0?void 0:s.dispatchEvent(new CustomEvent(e,l))}getEventNameByNamingConvention(e,t){let i="";switch(this.eventNamingStyle){case si.camelCase:i=t!==""?`${t}${To(e)}`:e;break;case si.kebabCase:i=t!==""?`${t}-${Oo(e)}`:Oo(e);break;case si.lowerCase:i=`${t}${e}`.toLowerCase();break;case si.lowerCaseWithoutOnPrefix:i=`${t}${e.replace(/^on/,"")}`.toLowerCase();break}return i}publish(e,t,i){let o=this.getEventNameByNamingConvention(e,"");return i?new Promise(s=>{this._timer=setTimeout(()=>s(this.dispatchCustomEvent(o,t,!0,!0)),i)}):this.dispatchCustomEvent(o,t,!0,!0)}subscribe(e,t){let i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,o=>t.call(null,o.detail)),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}subscribeEvent(e,t){let i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,t),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}unsubscribe(e,t,i=!0){let o=this.getEventNameByNamingConvention(e,"");this._elementSource.removeEventListener(o,t),i&&this.removeSubscribedEventWhenFound(e,t)}unsubscribeAll(e){if(Array.isArray(e)){let t;do t=e.pop(),t?.dispose?t.dispose():t?.unsubscribe&&t.unsubscribe();while(t)}else{let t=this._subscribedEvents.pop();for(;t;)this.unsubscribe(t.name,t.listener,!1),t=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(e,t){let i=this._subscribedEvents.findIndex(o=>o.name===e&&o.listener===t);i>=0&&this._subscribedEvents.splice(i,1)}};(function(r){"use strict";typeof define=="function"&&define.amd?define(["jquery","./menu","../keycode","../position","../version","../widget"],r):r(jQuery)})(function(r){"use strict";return r.widget("ui.autocomplete",{version:"1.14.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var e,t,i,o=this.element[0].nodeName.toLowerCase(),s=o==="textarea",l=o==="input";this.isMultiLine=s||!l&&this.element.prop("contentEditable")==="true",this.valueMethod=this.element[s||l?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly")){e=!0,i=!0,t=!0;return}e=!1,i=!1,t=!1;var d=r.ui.keyCode;switch(a.keyCode){case d.PAGE_UP:e=!0,this._move("previousPage",a);break;case d.PAGE_DOWN:e=!0,this._move("nextPage",a);break;case d.UP:e=!0,this._keyEvent("previous",a);break;case d.DOWN:e=!0,this._keyEvent("next",a);break;case d.ENTER:this.menu.active&&(e=!0,a.preventDefault(),this.menu.select(a));break;case d.TAB:this.menu.active&&this.menu.select(a);break;case d.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(a),a.preventDefault());break;default:t=!0,this._searchTimeout(a);break}},keypress:function(a){if(e){e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&a.preventDefault();return}if(!t){var d=r.ui.keyCode;switch(a.keyCode){case d.PAGE_UP:this._move("previousPage",a);break;case d.PAGE_DOWN:this._move("nextPage",a);break;case d.UP:this._keyEvent("previous",a);break;case d.DOWN:this._keyEvent("next",a);break}}},input:function(a){if(i){i=!1,a.preventDefault();return}this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){clearTimeout(this.searching),this.close(a),this._change(a)}}),this._initSource(),this.menu=r("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(a){a.preventDefault()},menufocus:function(a,d){var u,p;if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){r(a.target).trigger(a.originalEvent)});return}p=d.item.data("ui-autocomplete-item"),this._trigger("focus",a,{item:p})!==!1&&a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(p.value),u=d.item.attr("aria-label")||p.value,u&&String.prototype.trim.call(u).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(r("<div>").text(u))},100))},menuselect:function(a,d){var u=d.item.data("ui-autocomplete-item"),p=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.trigger("focus"),this.previous=p),this._trigger("select",a,{item:u})!==!1&&this._value(u.value),this.term=this._value(),this.close(a),this.selectedItem=u}}),this.liveRegion=r("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var t=this.menu.element[0];return e.target===this.element[0]||e.target===t||r.contains(t,e.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?r(e):this.document.find(e).eq(0)),(!e||!e[0])&&(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,t,i=this;Array.isArray(this.options.source)?(e=this.options.source,this.source=function(o,s){s(r.ui.autocomplete.filter(e,o.term))}):typeof this.options.source=="string"?(t=this.options.source,this.source=function(o,s){i.xhr&&i.xhr.abort(),i.xhr=r.ajax({url:t,data:o,dataType:"json",success:function(l){s(l)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),o=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!o)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){if(e=e??this._value(),this.term=this._value(),e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)!==!1)return this._search(e)},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}).bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:r.map(e,function(t){return typeof t=="string"?{label:t,value:t}:r.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(r.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,t){var i=this;r.each(t,function(o,s){i._renderItemData(e,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return r("<li>").append(r("<div>").text(t.label)).appendTo(e)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this.isMultiLine||this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),r.extend(r.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(r.ui.autocomplete.escapeRegex(t),"i");return r.grep(e,function(o){return i.test(o.label||o.value||o)})}}),r.widget("ui.autocomplete",r.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(r("<div>").text(t))},100))}}),r.ui.autocomplete});var Zn=Oi(Rr());function Ir(r,e,t,i,o=!1,s,l){var a,d,u,p,f,m,_,C,b,E,x,R,L,z,B,G,V,H;let K=(a=t?.id)!==null&&a!==void 0?a:"",oe=i.getOptions(),ne=(d=r==="editor"?t?.internalColumnEditor:t?.filter)!==null&&d!==void 0?d:{},Pe=(u=ne?.collectionOptions)!==null&&u!==void 0?u:{},He=(p=Pe?.separatorBetweenTextLabels)!==null&&p!==void 0?p:"",xe=(f=ne?.enableTranslateLabel)!==null&&f!==void 0?f:!1,Xe=(m=oe?.enableTranslate)!==null&&m!==void 0?m:!1,ge=(_=ne?.enableRenderHtml)!==null&&_!==void 0?_:!1,lt=(C=oe?.sanitizeHtmlOptions)!==null&&C!==void 0?C:{},Y=(E=(b=ne?.customStructure)===null||b===void 0?void 0:b.label)!==null&&E!==void 0?E:"label",De=(R=(x=ne?.customStructure)===null||x===void 0?void 0:x.labelPrefix)!==null&&R!==void 0?R:"labelPrefix",$e=(z=(L=ne?.customStructure)===null||L===void 0?void 0:L.labelSuffix)!==null&&z!==void 0?z:"labelSuffix",ze=(G=(B=ne?.customStructure)===null||B===void 0?void 0:B.optionLabel)!==null&&G!==void 0?G:"value",Ee=(H=(V=ne?.customStructure)===null||V===void 0?void 0:V.value)!==null&&H!==void 0?H:"value",Te=N("select",{className:"ms-filter search-filter"}),yt=r==="filter"?["search-filter",`filter-${K}`]:["select-editor",`editor-${K}`];Te.classList.add(...yt),Te.multiple=o;let _t=document.createDocumentFragment(),Je=!1;if(Array.isArray(e))if(e.every(Ge=>typeof Ge=="string"))for(let Ge of e){let Be=N("option",{label:Ge,value:Ge,textContent:Ge});r==="filter"&&Array.isArray(l)&&(Be.selected=l.findIndex(ve=>ve===Ge)>=0),_t.appendChild(Be),(Be.selected&&o||Be.selected&&!o&&Ge!=="")&&(Je=!0)}else e.forEach(Ge=>{if(!Ge||Ge[Y]===void 0&&Ge.labelKey===void 0)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");let Be=document.createElement("option"),ve=Ge.labelKey||Ge[Y],Pt=(Ge.labelKey||xe&&s)&&ve&&Xe?s?.translate(ve||" "):ve,Ct=Ge[De]||"",Bt=Ge[$e]||"",j=Ge.hasOwnProperty(ze)?Ge[ze]:"";j?.toString&&(j=j.toString().replace(/\"/g,"'")),Ct=xe&&s&&Ct&&typeof Ct=="string"?s.translate(Ct||" "):Ct,Bt=xe&&s&&Bt&&typeof Bt=="string"?s.translate(Bt||" "):Bt,j=xe&&s&&j&&typeof j=="string"?s.translate(j||" "):j;let Ue=[Ct,typeof Pt=="string"||typeof Pt=="number"?Pt.toString():Pt,Bt].filter(Vt=>Vt).join(He);if(ge){let Vt=kt(oe,Ue,lt);Ue=Pa(Vt),Be.innerHTML=Ue}else Be.textContent=Ue;let Gt=Ge[Ee];Gt==null&&(Gt=""),r==="filter"&&Array.isArray(l)&&(Be.selected=l.findIndex(Vt=>`${Vt}`==`${Ge[Ee]}`)>=0),Be.value=`${Gt}`,Be.label=`${j??""}`,_t.appendChild(Be),(Be.selected&&o||Be.selected&&!o&&Ge[Ee]!=="")&&(Je=!0)});return Te.appendChild(_t),{selectElement:Te,hasFoundSearchTerm:Je}}function Rl(r){var e,t,i,o;let s=0,l=0,a=0,d=0,u=(e=window.innerHeight)!==null&&e!==void 0?e:0,p=(t=window.innerWidth)!==null&&t!==void 0?t:0,f=vu(),m=f.top,_=f.left,C=Nt(r);if(C){let b=(i=C.top)!==null&&i!==void 0?i:0,E=(o=C.left)!==null&&o!==void 0?o:0;l=b-m,s=u-(b-m),a=E-_,d=p-(E-_)}return{top:l,bottom:s,left:a,right:d}}function N(r,e){let t=document.createElement(r);return e&&Object.keys(e).forEach(i=>{let o=e[i];typeof o=="object"?Hi(t[i],o):t[i]=e[i]}),t}function Wo(r){if(r)for(let e of Object.keys(r))Array.isArray(r[e])&&Wo(r[e]),r[e]instanceof HTMLElement&&(r[e]=null)}function Ve(r){if(r?.firstChild)for(;r.firstChild;)r.lastChild&&r.removeChild(r.lastChild);return r}function Ia(r,e){if(!r||!e)return;let t=r.getBoundingClientRect(),i=e.getBoundingClientRect();return{top:i.top-t.top,right:i.right-t.right,bottom:i.bottom-t.bottom,left:i.left-t.left}}function Nt(r){var e;if(!r)return;let t=(e=r?.getBoundingClientRect)===null||e===void 0?void 0:e.call(r),i=0,o=0,s=0,l=0;return t?.top!==void 0&&t.left!==void 0&&(i=t.top+window.pageYOffset,o=t.left+window.pageXOffset,l=t.right,s=t.bottom),{top:i,left:o,bottom:s,right:l}}function Ri(r,e="auto"){return(/^[0-9]+$/i.test(`${r}`)?`${+r}px`:r)||e}function Pa(r){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(r||"").toString().replace(/[&<>"']/g,t=>e[t])}function Da(r,e){let t=r.length,i=Pa(r);if(t<e)for(let o=t;o<e;o++)i+="&nbsp;";return i}function qi(r){let e=document.createElement("div");return e.innerHTML=r,e.textContent||e.innerText||""}function kt(r,e,t){let i=e;return typeof r?.sanitizer=="function"?i=r.sanitizer(e||""):typeof(Zn==null?void 0:Zn.sanitize)=="function"&&(i=(Zn.sanitize(e||"",t||{})||"").toString()),i}function vu(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}function cn(r,e){let t=N("select",{className:"form-control"});for(let i of r)t.appendChild(N("option",{value:i.operator,innerHTML:kt(e,`${Da(i.operator,3)}${i.description}`)}));return t}function _u(r,e,t){var i,o;let s=(i=e?.filter)!==null&&i!==void 0?i:{},l=(o=s?.collectionOptions)!==null&&o!==void 0?o:{};if(l&&l.collectionInsideObjectProperty){let a=l.collectionInsideObjectProperty;r=je(r,a)}if(!Array.isArray(r))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');s.collection=r,t(r)}function Pr(r,e,t,i,o){return Ot(this,null,function*(){var s,l,a;let d=(s=e?.filter)!==null&&s!==void 0?s:{},u=(l=d?.collectionOptions)!==null&&l!==void 0?l:{},p=null;if(r){let f=(a=i?.isObservable(r))!==null&&a!==void 0?a:!1;f&&i&&(p=yield jn(i,r));let m=yield r;if(Array.isArray(m)?p=m:m?.status>=200&&m.status<300&&typeof m.json=="function"?p=yield m.json():m&&m.content&&(p=m.content),!Array.isArray(p)&&u?.collectionInsideObjectProperty){let _=p||m,C=u.collectionInsideObjectProperty;p=je(_,C||"")}if(!Array.isArray(p))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');d.collection=p,t(p),f&&Cu(e,t,i,o)}return p})}function Cu(r,e,t,i){var o;let s=(o=r?.filter)!==null&&o!==void 0?o:{},l=t?.createSubject();s.collectionAsync=l,i&&l&&i.push(l.subscribe(a=>_u(a,r,e)))}var Dr=class{constructor(e,t,i){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[]}get autoCompleteOptions(){return this._autoCompleteOptions||{}}get collectionOptions(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.collectionOptions||{}}get collection(){return this._collection}get columnFilter(){var e;return((e=this.columnDef)===null||e===void 0?void 0:e.filter)||{}}get filterDomElement(){return this.$filterElm}get filterOptions(){var e;return((e=this.columnFilter)===null||e===void 0?void 0:e.filterOptions)||{}}get customStructure(){var e,t,i,o,s,l;let a=(e=this.columnFilter)===null||e===void 0?void 0:e.customStructure,d=(i=(t=this.columnFilter)===null||t===void 0?void 0:t.type)!==null&&i!==void 0?i:(o=this.columnDef)===null||o===void 0?void 0:o.type;return!a&&d===O.object&&(!((s=this.columnDef)===null||s===void 0)&&s.dataKey)&&(!((l=this.columnDef)===null||l===void 0)&&l.labelKey)&&(a={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),a}get defaultOperator(){return ue.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get instance(){return this.$filterElm.autocomplete("instance")}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autoComplete, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);this.enableTranslateLabel=this.columnFilter&&this.columnFilter.enableTranslateLabel||!1,this.labelName=this.customStructure&&this.customStructure.label||"label",this.valueName=this.customStructure&&this.customStructure.value||"value",this.labelPrefixName=this.customStructure&&this.customStructure.labelPrefix||"labelPrefix",this.labelSuffixName=this.customStructure&&this.customStructure.labelSuffix||"labelSuffix";let t=this.columnFilter.collection||[];return this._collection=t,this.renderDomElement(t),new Promise((i,o)=>Ot(this,null,function*(){try{let s=this.columnFilter.collectionAsync,l;s&&!this.columnFilter.collection?(l=Pr(s,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),i(l)):(l=t,i(t)),(s||this.columnFilter.enableCollectionWatch)&&(yield l??s,this.watchCollectionChanges())}catch(s){o(s)}}))}clear(e=!0){this.$filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.$filterElm.val(""),this.$filterElm.trigger("input"),this.$filterElm.removeClass("filled"))}destroy(){this.$filterElm&&(this.$filterElm.autocomplete("destroy"),this.$filterElm.off("input").remove()),this.$filterElm=null,this._collection=void 0,Eo(this.subscriptions)}getValues(){return this.$filterElm.val()}setValues(e,t){e&&this.$filterElm.val(e),this.getValues()!==""?this.$filterElm.addClass("filled"):this.$filterElm.removeClass("filled"),this.operator=t||this.defaultOperator}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){let i=this.columnFilter.collectionFilterBy,o=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,o)}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){let i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t}watchCollectionChanges(){var e;!((e=this.columnFilter)===null||e===void 0)&&e.collection&&($o(this.columnFilter.collection,t=>{this.renderDomElement(this.columnFilter.collection||t||[])}),Un(this.columnFilter,"collection",t=>{this.renderDomElement(t||[]),this.columnFilter.collection&&$o(this.columnFilter.collection,i=>{this.renderDomElement(this.columnFilter.collection||i||[])})}))}renderDomElement(e){var t;if(!Array.isArray(e)&&(!((t=this.collectionOptions)===null||t===void 0)&&t.collectionInsideObjectProperty)){let l=this.collectionOptions.collectionInsideObjectProperty;e=je(e,l||"")}if(!Array.isArray(e))throw new Error('The "collection" passed to the Autocomplete Filter is not a valid array.');let i=e;i=this.filterCollection(i),i=this.sortCollection(i);let o=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"",s=this.buildTemplateHtmlString();this._collection=i,this.createDomElement(s,i,o),this.$filterElm.on("input",this.handleOnInputChange.bind(this))}buildTemplateHtmlString(){var e,t,i;let o=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",s=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";return!((i=this.columnFilter)===null||i===void 0)&&i.placeholder&&(s=this.columnFilter.placeholder),`<input type="text" role="presentation" autocomplete="off" class="form-control search-filter filter-${o}" placeholder="${s}">`}createDomElement(e,t,i){var o,s;this._collection=t;let l=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"";$(this.filterContainerElm).empty(),this.$filterElm=$(e);let a=i;Array.isArray(t)&&(t=t.map(u=>({label:u[this.labelName],value:u[this.valueName],labelPrefix:u[this.labelPrefixName]||"",labelSuffix:u[this.labelSuffixName]||""})));let d=this.filterOptions;if(d?.source)d.select=(u,p)=>this.onSelect(u,p),this._autoCompleteOptions=P({},d),this._autoCompleteOptions.renderItem&&(this._autoCompleteOptions.classes={"ui-autocomplete":`autocomplete-custom-${Oo(this._autoCompleteOptions.renderItem.layout)}`}),this.$filterElm.autocomplete(this._autoCompleteOptions),this._autoCompleteOptions.renderItem&&(this.$filterElm.autocomplete("instance")._renderItem=this.renderCustomItem.bind(this));else{let u={minLength:0,source:t,select:(p,f)=>this.onSelect(p,f)};this._autoCompleteOptions=P(P({},u),this.filterOptions),this.$filterElm.autocomplete(this._autoCompleteOptions),this.$filterElm.autocomplete("instance")._renderItem=this.renderCollectionItem.bind(this)}if(this.$filterElm.val(a),this.$filterElm.data("columnId",l),i&&this.$filterElm.addClass("filled"),this.$filterElm&&typeof this.$filterElm.appendTo=="function"){let u=$('<div class="autocomplete-container"></div>');u.appendTo(this.filterContainerElm),this.$filterElm.appendTo(u),$("<span></span>").appendTo(u)}if(this.filterOptions.openSearchListOnFocus&&this.$filterElm.click(()=>this.$filterElm.autocomplete("search",this.$filterElm.val())),this.columnFilter.callbacks)for(let u of Object.keys(this.columnFilter.callbacks))typeof this.columnFilter.callbacks[u]=="function"&&(this.$filterElm.autocomplete("instance")[u]=this.columnFilter.callbacks[u]);return this.$filterElm}onSelect(e,t){var i,o,s,l,a,d;if(t&&t.item){let u=t.item,p=(d=(s=(o=(i=this.columnFilter)===null||i===void 0?void 0:i.callbacks)===null||o===void 0?void 0:o.hasOwnProperty("_renderItem"))!==null&&s!==void 0?s:(a=(l=this.columnFilter)===null||l===void 0?void 0:l.filterOptions)===null||a===void 0?void 0:a.renderItem)!==null&&d!==void 0?d:!1,f=typeof u=="string"?u:p?u[this.labelName]:u.label,m=typeof u=="string"?u:p?u[this.valueName]:u.value;this.setValues(f),m===""?this.$filterElm.removeClass("filled"):this.$filterElm.addClass("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[m],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){let t=e&&e.target&&e.target.value||"",i=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof t=="string"&&i&&(t=t.trim()),this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterElm.removeClass("filled")):(t===""?this.$filterElm.removeClass("filled"):this.$filterElm.addClass("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[t],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderCustomItem(e,t){var i,o,s;let l=(s=(o=(i=this._autoCompleteOptions)===null||i===void 0?void 0:i.renderItem)===null||o===void 0?void 0:o.templateCallback(t))!==null&&s!==void 0?s:"",a=kt(this.gridOptions,l)||"";return $("<li></li>").data("item.autocomplete",t).append(a).appendTo(e)}renderCollectionItem(e,t){var i,o;let s=(o=(i=this.columnFilter)===null||i===void 0?void 0:i.enableRenderHtml)!==null&&o!==void 0?o:!1,l=t.labelPrefix||"",a=t.label||"",d=t.labelSuffix||"",u=l+a+d,p=kt(this.gridOptions,u)||"",f=$("<div></div>")[s?"html":"text"](p);return $("<li></li>").data("item.autocomplete",t).append(f).appendTo(e)}};var Ki={};tn(Ki,{default:()=>Go});var Ar=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ro={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var e=new Date(r.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var kr={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var e=r%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Fr=kr;var Zt=function(r,e){return e===void 0&&(e=2),("000"+r).slice(e*-1)},li=function(r){return r===!0?1:0};function Il(r,e){var t;return function(){var i=this,o=arguments;clearTimeout(t),t=setTimeout(function(){return r.apply(i,o)},e)}}var Mr=function(r){return r instanceof Array?r:[r]};function Jt(r,e,t){if(t===!0)return r.classList.add(e);r.classList.remove(e)}function tt(r,e,t){var i=window.document.createElement(r);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function Jn(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Pl(r,e){if(e(r))return r;if(r.parentNode)return Pl(r.parentNode,e)}function er(r,e){var t=tt("div","numInputWrapper"),i=tt("input","numInput "+r),o=tt("span","arrowUp"),s=tt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var l in e)i.setAttribute(l,e[l]);return t.appendChild(i),t.appendChild(o),t.appendChild(s),t}function ai(r){try{if(typeof r.composedPath=="function"){var e=r.composedPath();return e[0]}return r.target}catch{return r.target}}var Dl=function(){},tr=function(r,e,t){return t.months[e?"shorthand":"longhand"][r]},Aa={D:Dl,F:function(r,e,t){r.setMonth(t.months.longhand.indexOf(e))},G:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},H:function(r,e){r.setHours(parseFloat(e))},J:function(r,e){r.setDate(parseFloat(e))},K:function(r,e,t){r.setHours(r.getHours()%12+12*li(new RegExp(t.amPM[1],"i").test(e)))},M:function(r,e,t){r.setMonth(t.months.shorthand.indexOf(e))},S:function(r,e){r.setSeconds(parseFloat(e))},U:function(r,e){return new Date(parseFloat(e)*1e3)},W:function(r,e,t){var i=parseInt(e),o=new Date(r.getFullYear(),0,2+(i-1)*7,0,0,0,0);return o.setDate(o.getDate()-o.getDay()+t.firstDayOfWeek),o},Y:function(r,e){r.setFullYear(parseFloat(e))},Z:function(r,e){return new Date(e)},d:function(r,e){r.setDate(parseFloat(e))},h:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},i:function(r,e){r.setMinutes(parseFloat(e))},j:function(r,e){r.setDate(parseFloat(e))},l:Dl,m:function(r,e){r.setMonth(parseFloat(e)-1)},n:function(r,e){r.setMonth(parseFloat(e)-1)},s:function(r,e){r.setSeconds(parseFloat(e))},u:function(r,e){return new Date(parseFloat(e))},w:Dl,y:function(r,e){r.setFullYear(2e3+parseFloat(e))}},ao={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},hn={Z:function(r){return r.toISOString()},D:function(r,e,t){return e.weekdays.shorthand[hn.w(r,e,t)]},F:function(r,e,t){return tr(hn.n(r,e,t)-1,!1,e)},G:function(r,e,t){return Zt(hn.h(r,e,t))},H:function(r){return Zt(r.getHours())},J:function(r,e){return e.ordinal!==void 0?r.getDate()+e.ordinal(r.getDate()):r.getDate()},K:function(r,e){return e.amPM[li(r.getHours()>11)]},M:function(r,e){return tr(r.getMonth(),!0,e)},S:function(r){return Zt(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,e,t){return t.getWeek(r)},Y:function(r){return Zt(r.getFullYear(),4)},d:function(r){return Zt(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return Zt(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,e){return e.weekdays.longhand[r.getDay()]},m:function(r){return Zt(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}};var Al=function(r){var e=r.config,t=e===void 0?Ro:e,i=r.l10n,o=i===void 0?kr:i,s=r.isMobile,l=s===void 0?!1:s;return function(a,d,u){var p=u||o;return t.formatDate!==void 0&&!l?t.formatDate(a,d,p):d.split("").map(function(f,m,_){return hn[f]&&_[m-1]!=="\\"?hn[f](a,p,t):f!=="\\"?f:""}).join("")}},Nr=function(r){var e=r.config,t=e===void 0?Ro:e,i=r.l10n,o=i===void 0?kr:i;return function(s,l,a,d){if(!(s!==0&&!s)){var u=d||o,p,f=s;if(s instanceof Date)p=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)p=new Date(s);else if(typeof s=="string"){var m=l||(t||Ro).dateFormat,_=String(s).trim();if(_==="today")p=new Date,a=!0;else if(t&&t.parseDate)p=t.parseDate(s,m);else if(/Z$/.test(_)||/GMT$/.test(_))p=new Date(s);else{for(var C=void 0,b=[],E=0,x=0,R="";E<m.length;E++){var L=m[E],z=L==="\\",B=m[E-1]==="\\"||z;if(ao[L]&&!B){R+=ao[L];var G=new RegExp(R).exec(s);G&&(C=!0)&&b[L!=="Y"?"push":"unshift"]({fn:Aa[L],val:G[++x]})}else z||(R+=".")}p=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(V){var H=V.fn,K=V.val;return p=H(p,K,u)||p}),p=C?p:void 0}}if(!(p instanceof Date&&!isNaN(p.getTime()))){t.errorHandler(new Error("Invalid date provided: "+f));return}return a===!0&&p.setHours(0,0,0,0),p}}};function di(r,e,t){return t===void 0&&(t=!0),t!==!1?new Date(r.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):r.getTime()-e.getTime()}var ka=function(r,e,t){return r>Math.min(e,t)&&r<Math.max(e,t)},Lr=function(r,e,t){return r*3600+e*60+t},Fa=function(r){var e=Math.floor(r/3600),t=(r-e*3600)/60;return[e,t,r-e*3600-t*60]},Ma={DAY:864e5};function Vr(r){var e=r.defaultHour,t=r.defaultMinute,i=r.defaultSeconds;if(r.minDate!==void 0){var o=r.minDate.getHours(),s=r.minDate.getMinutes(),l=r.minDate.getSeconds();e<o&&(e=o),e===o&&t<s&&(t=s),e===o&&t===s&&i<l&&(i=r.minDate.getSeconds())}if(r.maxDate!==void 0){var a=r.maxDate.getHours(),d=r.maxDate.getMinutes();e=Math.min(e,a),e===a&&(t=Math.min(d,t)),e===a&&t===d&&(i=r.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!r)throw TypeError("Cannot convert undefined or null to object");for(var i=function(a){a&&Object.keys(a).forEach(function(d){return r[d]=a[d]})},o=0,s=e;o<s.length;o++){var l=s[o];i(l)}return r});var ei=function(){return ei=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},ei.apply(this,arguments)},Na=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var s=arguments[e],l=0,a=s.length;l<a;l++,o++)i[o]=s[l];return i},bu=300;function wu(r,e){var t={config:ei(ei({},Ro),Lt.defaultConfig),l10n:Fr};t.parseDate=Nr({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=b,t._setHoursFromDate=m,t._positionCalendar=Qt,t.changeMonth=ze,t.changeYear=Ge,t.clear=Ee,t.close=Te,t.onMouseOver=Bt,t._createElement=tt,t.createDay=G,t.destroy=yt,t.isEnabled=Be,t.jumpToDate=R,t.updateValue=$t,t.open=Ii,t.redraw=Pi,t.set=J,t.setDate=Se,t.toggle=xt;function i(){t.utils={getDaysInMonth:function(S,T){return S===void 0&&(S=t.currentMonth),T===void 0&&(T=t.currentYear),S===1&&(T%4===0&&T%100!==0||T%400===0)?29:t.l10n.daysInMonth[S]}}}function o(){t.element=t.input=r,t.isOpen=!1,Gt(),Dt(),Ye(),ot(),i(),t.isMobile||B(),x(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&m(t.config.noCalendar?t.latestSelectedDateObj:void 0),$t(!1)),a();var S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&S&&Qt(),Oe("onReady")}function s(){var S;return((S=t.calendarContainer)===null||S===void 0?void 0:S.getRootNode()).activeElement||document.activeElement}function l(S){return S.bind(t)}function a(){var S=t.config;S.weekNumbers===!1&&S.showMonths===1||S.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var T=(t.days.offsetWidth+1)*S.showMonths;t.daysContainer.style.width=T+"px",t.calendarContainer.style.width=T+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function d(S){if(t.selectedDates.length===0){var T=t.config.minDate===void 0||di(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),k=Vr(t.config);T.setHours(k.hours,k.minutes,k.seconds,T.getMilliseconds()),t.selectedDates=[T],t.latestSelectedDateObj=T}S!==void 0&&S.type!=="blur"&&co(S);var W=t._input.value;f(),$t(),t._input.value!==W&&t._debouncedChange()}function u(S,T){return S%12+12*li(T===t.l10n.amPM[1])}function p(S){switch(S%24){case 0:case 12:return 12;default:return S%12}}function f(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var S=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,T=(parseInt(t.minuteElement.value,10)||0)%60,k=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(S=u(S,t.amPM.textContent));var W=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&di(t.latestSelectedDateObj,t.config.minDate,!0)===0,Q=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&di(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var se=Lr(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Re=Lr(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),pe=Lr(S,T,k);if(pe>Re&&pe<se){var Ae=Fa(se);S=Ae[0],T=Ae[1],k=Ae[2]}}else{if(Q){var ce=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;S=Math.min(S,ce.getHours()),S===ce.getHours()&&(T=Math.min(T,ce.getMinutes())),T===ce.getMinutes()&&(k=Math.min(k,ce.getSeconds()))}if(W){var Ce=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;S=Math.max(S,Ce.getHours()),S===Ce.getHours()&&T<Ce.getMinutes()&&(T=Ce.getMinutes()),T===Ce.getMinutes()&&(k=Math.max(k,Ce.getSeconds()))}}_(S,T,k)}}function m(S){var T=S||t.latestSelectedDateObj;T&&T instanceof Date&&_(T.getHours(),T.getMinutes(),T.getSeconds())}function _(S,T,k){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(S%24,T,k||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Zt(t.config.time_24hr?S:(12+S)%12+12*li(S%12===0)),t.minuteElement.value=Zt(T),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[li(S>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Zt(k)))}function C(S){var T=ai(S),k=parseInt(T.value)+(S.delta||0);(k/1e3>1||S.key==="Enter"&&!/[^\d]/.test(k.toString()))&&Ge(k)}function b(S,T,k,W){if(T instanceof Array)return T.forEach(function(Q){return b(S,Q,k,W)});if(S instanceof Array)return S.forEach(function(Q){return b(Q,T,k,W)});S.addEventListener(T,k,W),t._handlers.push({remove:function(){return S.removeEventListener(T,k,W)}})}function E(){Oe("onChange")}function x(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(k){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+k+"]"),function(W){return b(W,"click",t[k])})}),t.isMobile){dt();return}var S=Il(j,50);if(t._debouncedChange=Il(E,bu),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(t.daysContainer,"mouseover",function(k){t.config.mode==="range"&&Bt(ai(k))}),b(t._input,"keydown",Ct),t.calendarContainer!==void 0&&b(t.calendarContainer,"keydown",Ct),!t.config.inline&&!t.config.static&&b(window,"resize",S),window.ontouchstart!==void 0?b(window.document,"touchstart",Je):b(window.document,"mousedown",Je),b(window.document,"focus",Je,{capture:!0}),t.config.clickOpens===!0&&(b(t._input,"focus",t.open),b(t._input,"click",t.open)),t.daysContainer!==void 0&&(b(t.monthNav,"click",Ai),b(t.monthNav,["keyup","increment"],C),b(t.daysContainer,"click",re)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var T=function(k){return ai(k).select()};b(t.timeContainer,["increment"],d),b(t.timeContainer,"blur",d,{capture:!0}),b(t.timeContainer,"click",L),b([t.hourElement,t.minuteElement],["focus","click"],T),t.secondElement!==void 0&&b(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&b(t.amPM,"click",function(k){d(k)})}t.config.allowInput&&b(t._input,"blur",Pt)}function R(S,T){var k=S!==void 0?t.parseDate(S):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),W=t.currentYear,Q=t.currentMonth;try{k!==void 0&&(t.currentYear=k.getFullYear(),t.currentMonth=k.getMonth())}catch(se){se.message="Invalid date supplied: "+k,t.config.errorHandler(se)}T&&t.currentYear!==W&&(Oe("onYearChange"),He()),T&&(t.currentYear!==W||t.currentMonth!==Q)&&Oe("onMonthChange"),t.redraw()}function L(S){var T=ai(S);~T.className.indexOf("arrow")&&z(S,T.classList.contains("arrowUp")?1:-1)}function z(S,T,k){var W=S&&ai(S),Q=k||W&&W.parentNode&&W.parentNode.firstChild,se=Ht("increment");se.delta=T,Q&&Q.dispatchEvent(se)}function B(){var S=window.document.createDocumentFragment();if(t.calendarContainer=tt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(S.appendChild(ge()),t.innerContainer=tt("div","flatpickr-innerContainer"),t.config.weekNumbers){var T=$e(),k=T.weekWrapper,W=T.weekNumbers;t.innerContainer.appendChild(k),t.weekNumbers=W,t.weekWrapper=k}t.rContainer=tt("div","flatpickr-rContainer"),t.rContainer.appendChild(Y()),t.daysContainer||(t.daysContainer=tt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),Pe(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),S.appendChild(t.innerContainer)}t.config.enableTime&&S.appendChild(lt()),Jt(t.calendarContainer,"rangeMode",t.config.mode==="range"),Jt(t.calendarContainer,"animate",t.config.animate===!0),Jt(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(S);var Q=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Q&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var se=tt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(se,t.element),se.appendChild(t.element),t.altInput&&se.appendChild(t.altInput),se.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function G(S,T,k,W){var Q=Be(T,!0),se=tt("span",S,T.getDate().toString());return se.dateObj=T,se.$i=W,se.setAttribute("aria-label",t.formatDate(T,t.config.ariaDateFormat)),S.indexOf("hidden")===-1&&di(T,t.now)===0&&(t.todayDateElem=se,se.classList.add("today"),se.setAttribute("aria-current","date")),Q?(se.tabIndex=-1,Yt(T)&&(se.classList.add("selected"),t.selectedDateElem=se,t.config.mode==="range"&&(Jt(se,"startRange",t.selectedDates[0]&&di(T,t.selectedDates[0],!0)===0),Jt(se,"endRange",t.selectedDates[1]&&di(T,t.selectedDates[1],!0)===0),S==="nextMonthDay"&&se.classList.add("inRange")))):se.classList.add("flatpickr-disabled"),t.config.mode==="range"&&jt(T)&&!Yt(T)&&se.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&S!=="prevMonthDay"&&W%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(T)+"</span>"),Oe("onDayCreate",se),se}function V(S){S.focus(),t.config.mode==="range"&&Bt(S)}function H(S){for(var T=S>0?0:t.config.showMonths-1,k=S>0?t.config.showMonths:-1,W=T;W!=k;W+=S)for(var Q=t.daysContainer.children[W],se=S>0?0:Q.children.length-1,Re=S>0?Q.children.length:-1,pe=se;pe!=Re;pe+=S){var Ae=Q.children[pe];if(Ae.className.indexOf("hidden")===-1&&Be(Ae.dateObj))return Ae}}function K(S,T){for(var k=S.className.indexOf("Month")===-1?S.dateObj.getMonth():t.currentMonth,W=T>0?t.config.showMonths:-1,Q=T>0?1:-1,se=k-t.currentMonth;se!=W;se+=Q)for(var Re=t.daysContainer.children[se],pe=k-t.currentMonth===se?S.$i+T:T<0?Re.children.length-1:0,Ae=Re.children.length,ce=pe;ce>=0&&ce<Ae&&ce!=(T>0?Ae:-1);ce+=Q){var Ce=Re.children[ce];if(Ce.className.indexOf("hidden")===-1&&Be(Ce.dateObj)&&Math.abs(S.$i-ce)>=Math.abs(T))return V(Ce)}t.changeMonth(Q),oe(H(Q),0)}function oe(S,T){var k=s(),W=ve(k||document.body),Q=S!==void 0?S:W?k:t.selectedDateElem!==void 0&&ve(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&ve(t.todayDateElem)?t.todayDateElem:H(T>0?1:-1);Q===void 0?t._input.focus():W?K(Q,T):V(Q)}function ne(S,T){for(var k=(new Date(S,T,1).getDay()-t.l10n.firstDayOfWeek+7)%7,W=t.utils.getDaysInMonth((T-1+12)%12,S),Q=t.utils.getDaysInMonth(T,S),se=window.document.createDocumentFragment(),Re=t.config.showMonths>1,pe=Re?"prevMonthDay hidden":"prevMonthDay",Ae=Re?"nextMonthDay hidden":"nextMonthDay",ce=W+1-k,Ce=0;ce<=W;ce++,Ce++)se.appendChild(G("flatpickr-day "+pe,new Date(S,T-1,ce),ce,Ce));for(ce=1;ce<=Q;ce++,Ce++)se.appendChild(G("flatpickr-day",new Date(S,T,ce),ce,Ce));for(var Ne=Q+1;Ne<=42-k&&(t.config.showMonths===1||Ce%7!==0);Ne++,Ce++)se.appendChild(G("flatpickr-day "+Ae,new Date(S,T+1,Ne%Q),Ne,Ce));var ct=tt("div","dayContainer");return ct.appendChild(se),ct}function Pe(){if(t.daysContainer!==void 0){Jn(t.daysContainer),t.weekNumbers&&Jn(t.weekNumbers);for(var S=document.createDocumentFragment(),T=0;T<t.config.showMonths;T++){var k=new Date(t.currentYear,t.currentMonth,1);k.setMonth(t.currentMonth+T),S.appendChild(ne(k.getFullYear(),k.getMonth()))}t.daysContainer.appendChild(S),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Bt()}}function He(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var S=function(W){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&W<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&W>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var T=0;T<12;T++)if(S(T)){var k=tt("option","flatpickr-monthDropdown-month");k.value=new Date(t.currentYear,T).getMonth().toString(),k.textContent=tr(T,t.config.shorthandCurrentMonth,t.l10n),k.tabIndex=-1,t.currentMonth===T&&(k.selected=!0),t.monthsDropdownContainer.appendChild(k)}}}function xe(){var S=tt("div","flatpickr-month"),T=window.document.createDocumentFragment(),k;t.config.showMonths>1||t.config.monthSelectorType==="static"?k=tt("span","cur-month"):(t.monthsDropdownContainer=tt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),b(t.monthsDropdownContainer,"change",function(Re){var pe=ai(Re),Ae=parseInt(pe.value,10);t.changeMonth(Ae-t.currentMonth),Oe("onMonthChange")}),He(),k=t.monthsDropdownContainer);var W=er("cur-year",{tabindex:"-1"}),Q=W.getElementsByTagName("input")[0];Q.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Q.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Q.setAttribute("max",t.config.maxDate.getFullYear().toString()),Q.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var se=tt("div","flatpickr-current-month");return se.appendChild(k),se.appendChild(W),T.appendChild(se),S.appendChild(T),{container:S,yearElement:Q,monthElement:k}}function Xe(){Jn(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var S=t.config.showMonths;S--;){var T=xe();t.yearElements.push(T.yearElement),t.monthElements.push(T.monthElement),t.monthNav.appendChild(T.container)}t.monthNav.appendChild(t.nextMonthNav)}function ge(){return t.monthNav=tt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=tt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=tt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Xe(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(S){t.__hidePrevMonthArrow!==S&&(Jt(t.prevMonthNav,"flatpickr-disabled",S),t.__hidePrevMonthArrow=S)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(S){t.__hideNextMonthArrow!==S&&(Jt(t.nextMonthNav,"flatpickr-disabled",S),t.__hideNextMonthArrow=S)}}),t.currentYearElement=t.yearElements[0],ci(),t.monthNav}function lt(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var S=Vr(t.config);t.timeContainer=tt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var T=tt("span","flatpickr-time-separator",":"),k=er("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=k.getElementsByTagName("input")[0];var W=er("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=W.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Zt(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?S.hours:p(S.hours)),t.minuteElement.value=Zt(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():S.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(k),t.timeContainer.appendChild(T),t.timeContainer.appendChild(W),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Q=er("flatpickr-second");t.secondElement=Q.getElementsByTagName("input")[0],t.secondElement.value=Zt(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():S.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(tt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Q)}return t.config.time_24hr||(t.amPM=tt("span","flatpickr-am-pm",t.l10n.amPM[li((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function Y(){t.weekdayContainer?Jn(t.weekdayContainer):t.weekdayContainer=tt("div","flatpickr-weekdays");for(var S=t.config.showMonths;S--;){var T=tt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(T)}return De(),t.weekdayContainer}function De(){if(t.weekdayContainer){var S=t.l10n.firstDayOfWeek,T=Na(t.l10n.weekdays.shorthand);S>0&&S<T.length&&(T=Na(T.splice(S,T.length),T.splice(0,S)));for(var k=t.config.showMonths;k--;)t.weekdayContainer.children[k].innerHTML=`
      <span class='flatpickr-weekday'>
        `+T.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function $e(){t.calendarContainer.classList.add("hasWeeks");var S=tt("div","flatpickr-weekwrapper");S.appendChild(tt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var T=tt("div","flatpickr-weeks");return S.appendChild(T),{weekWrapper:S,weekNumbers:T}}function ze(S,T){T===void 0&&(T=!0);var k=T?S:S-t.currentMonth;k<0&&t._hidePrevMonthArrow===!0||k>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=k,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Oe("onYearChange"),He()),Pe(),Oe("onMonthChange"),ci())}function Ee(S,T){if(S===void 0&&(S=!0),T===void 0&&(T=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,T===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var k=Vr(t.config),W=k.hours,Q=k.minutes,se=k.seconds;_(W,Q,se)}t.redraw(),S&&Oe("onChange")}function Te(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Oe("onClose")}function yt(){t.config!==void 0&&Oe("onDestroy");for(var S=t._handlers.length;S--;)t._handlers[S].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var T=t.calendarContainer.parentNode;if(T.lastChild&&T.removeChild(T.lastChild),T.parentNode){for(;T.firstChild;)T.parentNode.insertBefore(T.firstChild,T);T.parentNode.removeChild(T)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(k){try{delete t[k]}catch{}})}function _t(S){return t.calendarContainer.contains(S)}function Je(S){if(t.isOpen&&!t.config.inline){var T=ai(S),k=_t(T),W=T===t.input||T===t.altInput||t.element.contains(T)||S.path&&S.path.indexOf&&(~S.path.indexOf(t.input)||~S.path.indexOf(t.altInput)),Q=!W&&!k&&!_t(S.relatedTarget),se=!t.config.ignoredFocusElements.some(function(Re){return Re.contains(T)});Q&&se&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&d(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function Ge(S){if(!(!S||t.config.minDate&&S<t.config.minDate.getFullYear()||t.config.maxDate&&S>t.config.maxDate.getFullYear())){var T=S,k=t.currentYear!==T;t.currentYear=T||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),k&&(t.redraw(),Oe("onYearChange"),He())}}function Be(S,T){var k;T===void 0&&(T=!0);var W=t.parseDate(S,void 0,T);if(t.config.minDate&&W&&di(W,t.config.minDate,T!==void 0?T:!t.minDateHasTime)<0||t.config.maxDate&&W&&di(W,t.config.maxDate,T!==void 0?T:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(W===void 0)return!1;for(var Q=!!t.config.enable,se=(k=t.config.enable)!==null&&k!==void 0?k:t.config.disable,Re=0,pe=void 0;Re<se.length;Re++){if(pe=se[Re],typeof pe=="function"&&pe(W))return Q;if(pe instanceof Date&&W!==void 0&&pe.getTime()===W.getTime())return Q;if(typeof pe=="string"){var Ae=t.parseDate(pe,void 0,!0);return Ae&&Ae.getTime()===W.getTime()?Q:!Q}else if(typeof pe=="object"&&W!==void 0&&pe.from&&pe.to&&W.getTime()>=pe.from.getTime()&&W.getTime()<=pe.to.getTime())return Q}return!Q}function ve(S){return t.daysContainer!==void 0?S.className.indexOf("hidden")===-1&&S.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(S):!1}function Pt(S){var T=S.target===t._input,k=t._input.value.trimEnd()!==wi();T&&k&&!(S.relatedTarget&&_t(S.relatedTarget))&&t.setDate(t._input.value,!0,S.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Ct(S){var T=ai(S),k=t.config.wrap?r.contains(T):T===t._input,W=t.config.allowInput,Q=t.isOpen&&(!W||!k),se=t.config.inline&&k&&!W;if(S.keyCode===13&&k){if(W)return t.setDate(t._input.value,!0,T===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),T.blur();t.open()}else if(_t(T)||Q||se){var Re=!!t.timeContainer&&t.timeContainer.contains(T);switch(S.keyCode){case 13:Re?(S.preventDefault(),d(),Ut()):re(S);break;case 27:S.preventDefault(),Ut();break;case 8:case 46:k&&!t.config.allowInput&&(S.preventDefault(),t.clear());break;case 37:case 39:if(!Re&&!k){S.preventDefault();var pe=s();if(t.daysContainer!==void 0&&(W===!1||pe&&ve(pe))){var Ae=S.keyCode===39?1:-1;S.ctrlKey?(S.stopPropagation(),ze(Ae),oe(H(1),0)):oe(void 0,Ae)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:S.preventDefault();var ce=S.keyCode===40?1:-1;t.daysContainer&&T.$i!==void 0||T===t.input||T===t.altInput?S.ctrlKey?(S.stopPropagation(),Ge(t.currentYear-ce),oe(H(1),0)):Re||oe(void 0,ce*7):T===t.currentYearElement?Ge(t.currentYear-ce):t.config.enableTime&&(!Re&&t.hourElement&&t.hourElement.focus(),d(S),t._debouncedChange());break;case 9:if(Re){var Ce=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(bt){return bt}),Ne=Ce.indexOf(T);if(Ne!==-1){var ct=Ce[Ne+(S.shiftKey?-1:1)];S.preventDefault(),(ct||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(T)&&S.shiftKey&&(S.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&T===t.amPM)switch(S.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],f(),$t();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],f(),$t();break}(k||_t(T))&&Oe("onKeyDown",S)}function Bt(S,T){if(T===void 0&&(T="flatpickr-day"),!(t.selectedDates.length!==1||S&&(!S.classList.contains(T)||S.classList.contains("flatpickr-disabled")))){for(var k=S?S.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),W=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Q=Math.min(k,t.selectedDates[0].getTime()),se=Math.max(k,t.selectedDates[0].getTime()),Re=!1,pe=0,Ae=0,ce=Q;ce<se;ce+=Ma.DAY)Be(new Date(ce),!0)||(Re=Re||ce>Q&&ce<se,ce<W&&(!pe||ce>pe)?pe=ce:ce>W&&(!Ae||ce<Ae)&&(Ae=ce));var Ce=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+T));Ce.forEach(function(Ne){var ct=Ne.dateObj,bt=ct.getTime(),Xt=pe>0&&bt<pe||Ae>0&&bt>Ae;if(Xt){Ne.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(hi){Ne.classList.remove(hi)});return}else if(Re&&!Xt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(hi){Ne.classList.remove(hi)}),S!==void 0&&(S.classList.add(k<=t.selectedDates[0].getTime()?"startRange":"endRange"),W<k&&bt===W?Ne.classList.add("startRange"):W>k&&bt===W&&Ne.classList.add("endRange"),bt>=pe&&(Ae===0||bt<=Ae)&&ka(bt,W,k)&&Ne.classList.add("inRange"))})}}function j(){t.isOpen&&!t.config.static&&!t.config.inline&&Qt()}function Ii(S,T){if(T===void 0&&(T=t._positionElement),t.isMobile===!0){if(S){S.preventDefault();var k=ai(S);k&&k.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Oe("onOpen");return}else if(t._input.disabled||t.config.inline)return;var W=t.isOpen;t.isOpen=!0,W||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Oe("onOpen"),Qt(T)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(S===void 0||!t.timeContainer.contains(S.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function Ue(S){return function(T){var k=t.config["_"+S+"Date"]=t.parseDate(T,t.config.dateFormat),W=t.config["_"+(S==="min"?"max":"min")+"Date"];k!==void 0&&(t[S==="min"?"minDateHasTime":"maxDateHasTime"]=k.getHours()>0||k.getMinutes()>0||k.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Q){return Be(Q)}),!t.selectedDates.length&&S==="min"&&m(k),$t()),t.daysContainer&&(Pi(),k!==void 0?t.currentYearElement[S]=k.getFullYear().toString():t.currentYearElement.removeAttribute(S),t.currentYearElement.disabled=!!W&&k!==void 0&&W.getFullYear()===k.getFullYear())}}function Gt(){var S=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],T=ei(ei({},JSON.parse(JSON.stringify(r.dataset||{}))),e),k={};t.config.parseDate=T.parseDate,t.config.formatDate=T.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ce){t.config._enable=he(Ce)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ce){t.config._disable=he(Ce)}});var W=T.mode==="time";if(!T.dateFormat&&(T.enableTime||W)){var Q=Lt.defaultConfig.dateFormat||Ro.dateFormat;k.dateFormat=T.noCalendar||W?"H:i"+(T.enableSeconds?":S":""):Q+" H:i"+(T.enableSeconds?":S":"")}if(T.altInput&&(T.enableTime||W)&&!T.altFormat){var se=Lt.defaultConfig.altFormat||Ro.altFormat;k.altFormat=T.noCalendar||W?"h:i"+(T.enableSeconds?":S K":" K"):se+(" h:i"+(T.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:Ue("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:Ue("max")});var Re=function(Ce){return function(Ne){t.config[Ce==="min"?"_minTime":"_maxTime"]=t.parseDate(Ne,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Re("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Re("max")}),T.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,k,T);for(var pe=0;pe<S.length;pe++)t.config[S[pe]]=t.config[S[pe]]===!0||t.config[S[pe]]==="true";Ar.filter(function(Ce){return t.config[Ce]!==void 0}).forEach(function(Ce){t.config[Ce]=Mr(t.config[Ce]||[]).map(l)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var pe=0;pe<t.config.plugins.length;pe++){var Ae=t.config.plugins[pe](t)||{};for(var ce in Ae)Ar.indexOf(ce)>-1?t.config[ce]=Mr(Ae[ce]).map(l).concat(t.config[ce]):typeof T[ce]>"u"&&(t.config[ce]=Ae[ce])}T.altInputClass||(t.config.altInputClass=Vt().className+" "+t.config.altInputClass),Oe("onParseConfig")}function Vt(){return t.config.wrap?r.querySelector("[data-input]"):r}function Dt(){typeof t.config.locale!="object"&&typeof Lt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=ei(ei({},Lt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Lt.l10ns[t.config.locale]:void 0),ao.D="("+t.l10n.weekdays.shorthand.join("|")+")",ao.l="("+t.l10n.weekdays.longhand.join("|")+")",ao.M="("+t.l10n.months.shorthand.join("|")+")",ao.F="("+t.l10n.months.longhand.join("|")+")",ao.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var S=ei(ei({},e),JSON.parse(JSON.stringify(r.dataset||{})));S.time_24hr===void 0&&Lt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Al(t),t.parseDate=Nr({config:t.config,l10n:t.l10n})}function Qt(S){if(typeof t.config.position=="function")return void t.config.position(t,S);if(t.calendarContainer!==void 0){Oe("onPreCalendarPosition");var T=S||t._positionElement,k=Array.prototype.reduce.call(t.calendarContainer.children,function(pi,it){return pi+it.offsetHeight},0),W=t.calendarContainer.offsetWidth,Q=t.config.position.split(" "),se=Q[0],Re=Q.length>1?Q[1]:null,pe=T.getBoundingClientRect(),Ae=window.innerHeight-pe.bottom,ce=se==="above"||se!=="below"&&Ae<k&&pe.top>k,Ce=window.pageYOffset+pe.top+(ce?-k-2:T.offsetHeight+2);if(Jt(t.calendarContainer,"arrowTop",!ce),Jt(t.calendarContainer,"arrowBottom",ce),!t.config.inline){var Ne=window.pageXOffset+pe.left,ct=!1,bt=!1;Re==="center"?(Ne-=(W-pe.width)/2,ct=!0):Re==="right"&&(Ne-=W-pe.width,bt=!0),Jt(t.calendarContainer,"arrowLeft",!ct&&!bt),Jt(t.calendarContainer,"arrowCenter",ct),Jt(t.calendarContainer,"arrowRight",bt);var Xt=window.document.body.offsetWidth-(window.pageXOffset+pe.right),hi=Ne+W>window.document.body.offsetWidth,Bi=Xt+W>window.document.body.offsetWidth;if(Jt(t.calendarContainer,"rightMost",hi),!t.config.static)if(t.calendarContainer.style.top=Ce+"px",!hi)t.calendarContainer.style.left=Ne+"px",t.calendarContainer.style.right="auto";else if(!Bi)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Xt+"px";else{var Wi=zi();if(Wi===void 0)return;var ho=window.document.body.offsetWidth,Do=Math.max(0,ho/2-W/2),Si=".flatpickr-calendar.centerMost:before",ht=".flatpickr-calendar.centerMost:after",eo=Wi.cssRules.length,ft="{left:"+pe.left+"px;right:auto;}";Jt(t.calendarContainer,"rightMost",!1),Jt(t.calendarContainer,"centerMost",!0),Wi.insertRule(Si+","+ht+ft,eo),t.calendarContainer.style.left=Do+"px",t.calendarContainer.style.right="auto"}}}}function zi(){for(var S=null,T=0;T<document.styleSheets.length;T++){var k=document.styleSheets[T];if(k.cssRules){try{k.cssRules}catch{continue}S=k;break}}return S??Po()}function Po(){var S=document.createElement("style");return document.head.appendChild(S),S.sheet}function Pi(){t.config.noCalendar||t.isMobile||(He(),ci(),Pe())}function Ut(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function re(S){S.preventDefault(),S.stopPropagation();var T=function(Ce){return Ce.classList&&Ce.classList.contains("flatpickr-day")&&!Ce.classList.contains("flatpickr-disabled")&&!Ce.classList.contains("notAllowed")},k=Pl(ai(S),T);if(k!==void 0){var W=k,Q=t.latestSelectedDateObj=new Date(W.dateObj.getTime()),se=(Q.getMonth()<t.currentMonth||Q.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=W,t.config.mode==="single")t.selectedDates=[Q];else if(t.config.mode==="multiple"){var Re=Yt(Q);Re?t.selectedDates.splice(parseInt(Re),1):t.selectedDates.push(Q)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Q,t.selectedDates.push(Q),di(Q,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ce,Ne){return Ce.getTime()-Ne.getTime()}));if(f(),se){var pe=t.currentYear!==Q.getFullYear();t.currentYear=Q.getFullYear(),t.currentMonth=Q.getMonth(),pe&&(Oe("onYearChange"),He()),Oe("onMonthChange")}if(ci(),Pe(),$t(),!se&&t.config.mode!=="range"&&t.config.showMonths===1?V(W):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Ae=t.config.mode==="single"&&!t.config.enableTime,ce=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Ae||ce)&&Ut()}E()}}var Di={locale:[Dt,De],showMonths:[Xe,a,Y],minDate:[R],maxDate:[R],positionElement:[qe],clickOpens:[function(){t.config.clickOpens===!0?(b(t._input,"focus",t.open),b(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function J(S,T){if(S!==null&&typeof S=="object"){Object.assign(t.config,S);for(var k in S)Di[k]!==void 0&&Di[k].forEach(function(W){return W()})}else t.config[S]=T,Di[S]!==void 0?Di[S].forEach(function(W){return W()}):Ar.indexOf(S)>-1&&(t.config[S]=Mr(T));t.redraw(),$t(!0)}function ae(S,T){var k=[];if(S instanceof Array)k=S.map(function(W){return t.parseDate(W,T)});else if(S instanceof Date||typeof S=="number")k=[t.parseDate(S,T)];else if(typeof S=="string")switch(t.config.mode){case"single":case"time":k=[t.parseDate(S,T)];break;case"multiple":k=S.split(t.config.conjunction).map(function(W){return t.parseDate(W,T)});break;case"range":k=S.split(t.l10n.rangeSeparator).map(function(W){return t.parseDate(W,T)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(S)));t.selectedDates=t.config.allowInvalidPreload?k:k.filter(function(W){return W instanceof Date&&Be(W,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(W,Q){return W.getTime()-Q.getTime()})}function Se(S,T,k){if(T===void 0&&(T=!1),k===void 0&&(k=t.config.dateFormat),S!==0&&!S||S instanceof Array&&S.length===0)return t.clear(T);ae(S,k),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),R(void 0,T),m(),t.selectedDates.length===0&&t.clear(!1),$t(T),T&&Oe("onChange")}function he(S){return S.slice().map(function(T){return typeof T=="string"||typeof T=="number"||T instanceof Date?t.parseDate(T,void 0,!0):T&&typeof T=="object"&&T.from&&T.to?{from:t.parseDate(T.from,void 0),to:t.parseDate(T.to,void 0)}:T}).filter(function(T){return T})}function ot(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var S=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);S&&ae(S,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Ye(){if(t.input=Vt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=tt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),qe()}function qe(){t._positionElement=t.config.positionElement||t._input}function dt(){var S=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=tt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=S,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=S==="datetime-local"?"Y-m-d\\TH:i:S":S==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}b(t.mobileInput,"change",function(T){t.setDate(ai(T).value,!1,t.mobileFormatStr),Oe("onChange"),Oe("onClose")})}function xt(S){if(t.isOpen===!0)return t.close();t.open(S)}function Oe(S,T){if(t.config!==void 0){var k=t.config[S];if(k!==void 0&&k.length>0)for(var W=0;k[W]&&W<k.length;W++)k[W](t.selectedDates,t.input.value,t,T);S==="onChange"&&(t.input.dispatchEvent(Ht("change")),t.input.dispatchEvent(Ht("input")))}}function Ht(S){var T=document.createEvent("Event");return T.initEvent(S,!0,!0),T}function Yt(S){for(var T=0;T<t.selectedDates.length;T++){var k=t.selectedDates[T];if(k instanceof Date&&di(k,S)===0)return""+T}return!1}function jt(S){return t.config.mode!=="range"||t.selectedDates.length<2?!1:di(S,t.selectedDates[0])>=0&&di(S,t.selectedDates[1])<=0}function ci(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(S,T){var k=new Date(t.currentYear,t.currentMonth,1);k.setMonth(t.currentMonth+T),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[T].textContent=tr(k.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=k.getMonth().toString(),S.value=k.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function wi(S){var T=S||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(k){return t.formatDate(k,T)}).filter(function(k,W,Q){return t.config.mode!=="range"||t.config.enableTime||Q.indexOf(k)===W}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function $t(S){S===void 0&&(S=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=wi(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=wi(t.config.altFormat)),S!==!1&&Oe("onValueUpdate")}function Ai(S){var T=ai(S),k=t.prevMonthNav.contains(T),W=t.nextMonthNav.contains(T);k||W?ze(k?-1:1):t.yearElements.indexOf(T)>=0?T.select():T.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):T.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function co(S){S.preventDefault();var T=S.type==="keydown",k=ai(S),W=k;t.amPM!==void 0&&k===t.amPM&&(t.amPM.textContent=t.l10n.amPM[li(t.amPM.textContent===t.l10n.amPM[0])]);var Q=parseFloat(W.getAttribute("min")),se=parseFloat(W.getAttribute("max")),Re=parseFloat(W.getAttribute("step")),pe=parseInt(W.value,10),Ae=S.delta||(T?S.which===38?1:-1:0),ce=pe+Re*Ae;if(typeof W.value<"u"&&W.value.length===2){var Ce=W===t.hourElement,Ne=W===t.minuteElement;ce<Q?(ce=se+ce+li(!Ce)+(li(Ce)&&li(!t.amPM)),Ne&&z(void 0,-1,t.hourElement)):ce>se&&(ce=W===t.hourElement?ce-se-li(!t.amPM):Q,Ne&&z(void 0,1,t.hourElement)),t.amPM&&Ce&&(Re===1?ce+pe===23:Math.abs(ce-pe)>Re)&&(t.amPM.textContent=t.l10n.amPM[li(t.amPM.textContent===t.l10n.amPM[0])]),W.value=Zt(ce)}}return o(),t}function pn(r,e){for(var t=Array.prototype.slice.call(r).filter(function(l){return l instanceof HTMLElement}),i=[],o=0;o<t.length;o++){var s=t[o];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=wu(s,e||{}),i.push(s._flatpickr)}catch(l){console.error(l)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return pn(this,r)},HTMLElement.prototype.flatpickr=function(r){return pn([this],r)});var Lt=function(r,e){return typeof r=="string"?pn(window.document.querySelectorAll(r),e):r instanceof Node?pn([r],e):pn(r,e)};Lt.defaultConfig={};Lt.l10ns={en:ei({},Fr),default:ei({},Fr)};Lt.localize=function(r){Lt.l10ns.default=ei(ei({},Lt.l10ns.default),r)};Lt.setDefaults=function(r){Lt.defaultConfig=ei(ei({},Lt.defaultConfig),r)};Lt.parseDate=Nr({});Lt.formatDate=Al({});Lt.compareDates=di;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return pn(this,r)});Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof r=="string"?parseInt(r,10):r))};typeof window<"u"&&(window.flatpickr=Lt);var Go=Lt;var We=class{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(e,t,i,o){let s=Array.isArray(t)?t:[t];if(e?.forEach)e?.forEach(l=>{for(let a of s)l.addEventListener(a,i,o),this._boundedEvents.push({element:l,eventName:a,listener:i})});else for(let l of s)e.addEventListener(l,i,o),this._boundedEvents.push({element:e,eventName:l,listener:i})}unbind(e,t,i){let o=Array.isArray(e)?e:[e],s=Array.isArray(t)?t:[t];for(let l of s)for(let a of o)a?.removeEventListener&&a.removeEventListener(l,i)}unbindAll(){for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:t,eventName:i,listener:o}=e;this.unbind(t,i,o)}}};var Su=Ki&&Go||Ki,Hr=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this._bindEventService=new We}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get currentDate(){return this._currentDate}get defaultOperator(){return ue.empty}get flatpickrOptions(){return this._flatpickrOptions||{}}get locales(){return this.gridOptions.locales||ie.locales}get operator(){return this._operator||this.columnFilter.operator||this.defaultOperator}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm;let t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._filterElm=this.createDomElement(t),this._bindEventService.bind(this._filterDivInputElm,"keyup",this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this.flatInstance&&this._selectOperatorElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._selectOperatorElm.selectedIndex=0,this.flatInstance.input&&this.flatInstance.clear()),this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")}destroy(){var e,t,i,o;this._bindEventService.unbindAll(),this.flatInstance&&typeof this.flatInstance.destroy=="function"&&(this.flatInstance.destroy(),this.flatInstance.element&&Wo(this.flatInstance)),Ve(this.filterContainerElm),Ve(this._filterDivInputElm),(e=this._filterDivInputElm)===null||e===void 0||e.remove(),(t=this.filterContainerElm)===null||t===void 0||t.remove(),(i=this._selectOperatorElm)===null||i===void 0||i.remove(),(o=this._filterElm)===null||o===void 0||o.remove(),this.grid=null}hide(){this.flatInstance&&typeof this.flatInstance.close=="function"&&this.flatInstance.close()}show(){this.flatInstance&&typeof this.flatInstance.open=="function"&&this.flatInstance.open()}getValues(){return this._currentDate}setValues(e,t){if(this.flatInstance){let i=Array.isArray(e)?e[0]:e;this._currentDate=e&&i?i:void 0,this.flatInstance.setDate(this._currentDate||"")}if(this.getValues()?(this._filterElm.classList.add("filled"),this._filterDivInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){let i=Xi(this.operator);this._selectOperatorElm.value=i}}buildDatePickerInput(e){var t,i,o,s,l,a;let d=ji(this.columnFilter.type||this.columnDef.type||O.dateIso),u=ji(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||O.dateUtc),p=this.columnFilter&&this.columnFilter.filterOptions||{},f=((t=p?.locale)!==null&&t!==void 0?t:(o=(i=this.translaterService)===null||i===void 0?void 0:i.getCurrentLanguage)===null||o===void 0?void 0:o.call(i))||this.gridOptions.locale||"en";f?.length>2&&(f=f.substring(0,2)),e&&(this._currentDate=e);let m={defaultDate:e||"",altInput:!0,altFormat:u,dateFormat:d,wrap:!0,closeOnSelect:!0,locale:f,onChange:(b,E)=>{this._currentValue=E,this._currentDate=Array.isArray(b)&&b[0]||void 0;let x;m.enableTime&&(x=new CustomEvent("keyup")),this.onTriggerEvent(x)},errorHandler:b=>{b.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${f}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};u&&(u==="Z"||u.toLowerCase().includes("h"))&&(m.enableTime=!0),this._flatpickrOptions=P(P({},m),p);let _=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.defaultFilterPlaceholder)!==null&&l!==void 0?l:"";!((a=this.columnFilter)===null||a===void 0)&&a.placeholder&&(_=this.columnFilter.placeholder);let C=N("div",{className:"flatpickr"});return C.appendChild(N("input",{type:"text",className:"form-control",placeholder:_,dataset:{input:""}})),this.flatInstance=Su(C,this._flatpickrOptions),C}getOperatorOptionValues(){var e;return!((e=this.columnFilter)===null||e===void 0)&&e.compoundOperatorList?this.columnFilter.compoundOperatorList:[{operator:"",description:""},{operator:"=",description:this.getOutputText("EQUAL_TO","TEXT_EQUAL_TO","Equal to")},{operator:"<",description:this.getOutputText("LESS_THAN","TEXT_LESS_THAN","Less than")},{operator:"<=",description:this.getOutputText("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to")},{operator:">",description:this.getOutputText("GREATER_THAN","TEXT_GREATER_THAN","Greater than")},{operator:">=",description:this.getOutputText("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to")},{operator:"<>",description:this.getOutputText("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to")}]}getOutputText(e,t,i){var o,s,l,a;if(!((o=this.gridOptions)===null||o===void 0)&&o.enableTranslate&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)){let d=Et(this.gridOptions);return this.translaterService.translate(`${d}${e}`)}return(a=(l=this.locales)===null||l===void 0?void 0:l[t])!==null&&a!==void 0?a:i}createDomElement(e){var t,i;let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";Ve(this.filterContainerElm),this._selectOperatorElm=cn(this.getOperatorOptionValues(),this.gridOptions),this._filterDivInputElm=this.buildDatePickerInput(e);let s=N("div",{className:`form-group search-filter filter-${o}`}),l=N("div",{className:"input-group flatpickr"}),a=N("div",{className:"input-group-addon input-group-prepend operator"});if(a.appendChild(this._selectOperatorElm),l.appendChild(a),l.appendChild(this._filterDivInputElm),s.appendChild(l),this._filterDivInputElm.dataset.columnid=`${o}`,this.operator){let d=Xi(this.operator);this._selectOperatorElm.value=d}return e&&e!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDate=e,this._currentValue=e),s&&this.filterContainerElm.appendChild(s),s}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else{let t=this._selectOperatorElm.value;this._currentValue?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var uo=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.searchTerms=[],this._bindEventService=new We}get gridOptions(){var e,t,i;return(i=(t=(e=this.grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get columnFilter(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)!==null&&t!==void 0?t:{}}get defaultOperator(){return ue.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get locales(){return this.gridOptions.locales||ie.locales}get operator(){return this._operator||this.defaultOperator}set operator(e){this._operator=e}init(e){var t,i,o,s,l;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm;let a=(t=this.gridOptions)===null||t===void 0?void 0:t.backendServiceApi;this._debounceTypingDelay=(l=a?(i=a?.filterTypingDebounce)!==null&&i!==void 0?i:(o=this.gridOptions)===null||o===void 0?void 0:o.defaultBackendServiceFilterTypingDebounce:(s=this.gridOptions)===null||s===void 0?void 0:s.filterTypingDebounce)!==null&&l!==void 0?l:0;let d=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._filterElm=this.createDomElement(d),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change","wheel"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this._filterElm&&this._selectOperatorElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._selectOperatorElm.selectedIndex=0,this._filterInputElm.value="",this.onTriggerEvent(void 0),this._filterElm.classList.remove("filled"),this._filterInputElm.classList.remove("filled"))}destroy(){var e,t,i,o;this._bindEventService.unbindAll(),(t=(e=this._selectOperatorElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e),(o=(i=this._filterElm)===null||i===void 0?void 0:i.remove)===null||o===void 0||o.call(i)}getValues(){return this._filterInputElm.value}setValues(e,t){let i="";if(e){let o=Array.isArray(e)?e[0]:e;i=`${o??""}`}if(this._filterInputElm.value=i,this.getValues()!==""?(this._filterElm.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterInputElm.classList.remove("filled")),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){let o=Xi(this.operator);this._selectOperatorElm.value=o}}buildInputElement(){var e,t,i,o,s,l,a;let d=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",u=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.defaultFilterPlaceholder)!==null&&o!==void 0?o:"";!((s=this.columnFilter)===null||s===void 0)&&s.placeholder&&(u=this.columnFilter.placeholder);let p=N("input",{type:this._inputType||"text",autocomplete:"off",placeholder:u,className:`form-control compound-input filter-${d}`});return p.setAttribute("role","presentation"),p.setAttribute("aria-label",(a=(l=this.columnFilter)===null||l===void 0?void 0:l.ariaLabel)!==null&&a!==void 0?a:`${vt(d+"")} Search Filter`),p}getOperatorOptionValues(){var e;let t=this.columnDef.type&&this.columnDef.type?this.columnDef.type:O.string,i=[];if(!((e=this.columnFilter)===null||e===void 0)&&e.compoundOperatorList)return this.columnFilter.compoundOperatorList;switch(t){case O.string:case O.text:case O.readonly:case O.password:i=[{operator:"",description:this.getOutputText("CONTAINS","TEXT_CONTAINS","Contains")},{operator:"<>",description:this.getOutputText("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains")},{operator:"=",description:this.getOutputText("EQUALS","TEXT_EQUALS","Equals")},{operator:"!=",description:this.getOutputText("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to")},{operator:"a*",description:this.getOutputText("STARTS_WITH","TEXT_STARTS_WITH","Starts with")},{operator:"*z",description:this.getOutputText("ENDS_WITH","TEXT_ENDS_WITH","Ends with")}];break;default:i=[{operator:"",description:""},{operator:"=",description:this.getOutputText("EQUAL_TO","TEXT_EQUAL_TO","Equal to")},{operator:"<",description:this.getOutputText("LESS_THAN","TEXT_LESS_THAN","Less than")},{operator:"<=",description:this.getOutputText("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to")},{operator:">",description:this.getOutputText("GREATER_THAN","TEXT_GREATER_THAN","Greater than")},{operator:">=",description:this.getOutputText("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to")},{operator:"<>",description:this.getOutputText("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to")}];break}return i}getOutputText(e,t,i){var o,s,l,a;if(!((o=this.gridOptions)===null||o===void 0)&&o.enableTranslate&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)){let d=Et(this.gridOptions);return this.translaterService.translate(`${d}${e}`)}return(a=(l=this.locales)===null||l===void 0?void 0:l[t])!==null&&a!==void 0?a:i}createDomElement(e){var t,i;let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";Ve(this.filterContainerElm),this._selectOperatorElm=cn(this.getOperatorOptionValues(),this.gridOptions),this._filterInputElm=this.buildInputElement();let s=N("span"),l=N("div",{className:`form-group search-filter filter-${o}`}),a=N("div",{className:"input-group"}),d=N("div",{className:"input-group-addon input-group-prepend operator"});if(d.appendChild(this._selectOperatorElm),a.appendChild(d),a.appendChild(this._filterInputElm),a.appendChild(s),l.appendChild(a),this._filterInputElm.value=`${e??""}`,this._filterInputElm.dataset.columnid=`${o}`,this.operator){let u=Xi(this.operator);this._selectOperatorElm.value=u}return e&&this._filterInputElm.classList.add("filled"),l&&this.filterContainerElm.appendChild(l),l}onTriggerEvent(e){var t;if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else{let i=(t=e?.type)!==null&&t!==void 0?t:"",o=this._selectOperatorElm.value,s=this._filterInputElm.value,l=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof s=="string"&&l&&(s=s.trim()),s!=null&&s!==""?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled");let a={columnDef:this.columnDef,searchTerms:s?[s]:null,operator:o,shouldTriggerQuery:this._shouldTriggerQuery},d=i==="keyup"&&e?.key!=="Enter"?this._debounceTypingDelay:0;d>0?(clearTimeout(this.timer),this.timer=setTimeout(()=>this.callback(e,a),d)):this.callback(e,a)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var $r=class extends uo{constructor(e){super(e),this.translaterService=e,this.inputType="number"}};var zr=class extends uo{constructor(e){super(e),this.translaterService=e,this.inputType="password"}};var La=0,Eu=100,yu=1,Br=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._elementRangeInputId="",this._elementRangeOutputId="",this.searchTerms=[],this._bindEventService=new We}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get defaultOperator(){return ue.empty}get filterParams(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.params||{}}get filterProperties(){return this.columnDef&&this.columnDef.filter||{}}get gridOptions(){var e,t,i;return(i=(t=(e=this.grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get locales(){return this.gridOptions.locales||ie.locales}get operator(){return this._operator||this.columnFilter.operator||this.defaultOperator}set operator(e){this._operator=e}init(e){var t;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=(t=e?.searchTerms)!==null&&t!==void 0?t:[],this.filterContainerElm=e.filterContainerElm,this._elementRangeInputId=`rangeInput_${this.columnDef.field}`,this._elementRangeOutputId=`rangeOutput_${this.columnDef.field}`;let i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.filterElm=this.createDomElement(i),this._bindEventService.bind(this.filterInputElm,["change","mouseup","touchend"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this.selectOperatorElm,["change","mouseup","touchend"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this.filterInputElm,["input","change"],this.handleInputChange.bind(this))}clear(e=!0){var t,i,o;if(this.filterElm&&this.selectOperatorElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];let s=(i=(t=this.filterParams)===null||t===void 0?void 0:t.sliderStartValue)!==null&&i!==void 0?i:La;this._currentValue=+s,this.selectOperatorElm.selectedIndex=0,this.filterInputElm.value=s,this.filterNumberElm&&(this.filterNumberElm.textContent=s),this.onTriggerEvent(void 0),this.filterElm.classList.remove("filled"),(o=this.divContainerFilterElm)===null||o===void 0||o.classList.remove("filled")}}destroy(){var e,t,i,o;this._bindEventService.unbindAll(),(t=(e=this.selectOperatorElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e),Ve(this.filterElm),(o=(i=this.filterElm)===null||i===void 0?void 0:i.remove)===null||o===void 0||o.call(i)}getValues(){return this._currentValue}setValues(e,t){var i,o,s;let l=Array.isArray(e)?e[0]:e;if(this._currentValue=yo(l)?+l:void 0,this.filterInputElm.value=`${l??""}`,this.filterNumberElm&&(this.filterNumberElm.textContent=`${(i=this._currentValue)!==null&&i!==void 0?i:""}`),this.getValues()!==void 0?(this.filterElm.classList.add("filled"),(o=this.divContainerFilterElm)===null||o===void 0||o.classList.add("filled")):(this.filterElm.classList.remove("filled"),(s=this.divContainerFilterElm)===null||s===void 0||s.classList.remove("filled")),this.operator=t||this.defaultOperator,t&&this.selectOperatorElm){let a=Xi(this.operator);this.selectOperatorElm.value=a}}getOperatorOptionValues(){var e;return!((e=this.columnFilter)===null||e===void 0)&&e.compoundOperatorList?this.columnFilter.compoundOperatorList:[{operator:"",description:""},{operator:"=",description:this.getOutputText("EQUAL_TO","TEXT_EQUAL_TO","Equal to")},{operator:"<",description:this.getOutputText("LESS_THAN","TEXT_LESS_THAN","Less than")},{operator:"<=",description:this.getOutputText("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to")},{operator:">",description:this.getOutputText("GREATER_THAN","TEXT_GREATER_THAN","Greater than")},{operator:">=",description:this.getOutputText("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to")},{operator:"<>",description:this.getOutputText("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to")}]}getOutputText(e,t,i){var o,s,l,a;if(!((o=this.gridOptions)===null||o===void 0)&&o.enableTranslate&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)){let d=Et(this.gridOptions);return this.translaterService.translate(`${d}${e}`)}return(a=(l=this.locales)===null||l===void 0?void 0:l[t])!==null&&a!==void 0?a:i}createDomElement(e){var t,i,o,s,l,a,d,u,p,f,m,_,C,b;let E=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",x=(s=(o=this.filterProperties)===null||o===void 0?void 0:o.minValue)!==null&&s!==void 0?s:La,R=(a=(l=this.filterProperties)===null||l===void 0?void 0:l.maxValue)!==null&&a!==void 0?a:Eu,L=(u=(d=this.filterParams)===null||d===void 0?void 0:d.sliderStartValue)!==null&&u!==void 0?u:x,z=(f=(p=this.filterProperties)===null||p===void 0?void 0:p.valueStep)!==null&&f!==void 0?f:yu,B=+((_=(m=this.filterParams)===null||m===void 0?void 0:m.sliderStartValue)!==null&&_!==void 0?_:x);Ve(this.filterContainerElm);let G=e||"0";+G<x&&(G=`${x}`),+G<B&&(G=`${B}`),this._currentValue=+G,this.selectOperatorElm=cn(this.getOperatorOptionValues(),this.gridOptions);let V=N("span",{className:"input-group-addon input-group-prepend operator"});if(V.appendChild(this.selectOperatorElm),this.filterInputElm=N("input",{type:"range",name:this._elementRangeInputId,className:`form-control slider-filter-input range compound-slider ${this._elementRangeInputId}`,defaultValue:L,value:G,title:G,min:`${x}`,max:`${R}`,step:`${z}`}),this.filterInputElm.setAttribute("aria-label",(b=(C=this.columnFilter)===null||C===void 0?void 0:C.ariaLabel)!==null&&b!==void 0?b:`${vt(E+"")} Search Filter`),this.divContainerFilterElm=N("div",{className:`form-group search-filter slider-container filter-${E}`}),this.containerInputGroupElm=N("div",{className:`input-group search-filter filter-${E}`}),this.containerInputGroupElm.appendChild(V),this.containerInputGroupElm.appendChild(this.filterInputElm),this.divContainerFilterElm.appendChild(this.containerInputGroupElm),!this.filterParams.hideSliderNumber){this.containerInputGroupElm.classList.add("input-group"),this.filterInputElm.value=G;let H=N("div",{className:"input-group-addon input-group-append slider-value"});this.filterNumberElm=N("span",{className:`input-group-text ${this._elementRangeOutputId}`,textContent:G}),H.appendChild(this.filterNumberElm),this.containerInputGroupElm.appendChild(H)}if(this.divContainerFilterElm.dataset.columnid=`${E}`,this.operator){let H=Xi(this.operator);this.selectOperatorElm.value=H}return e&&this.divContainerFilterElm.classList.add("filled"),this.filterContainerElm.appendChild(this.divContainerFilterElm),this.divContainerFilterElm}handleInputChange(e){var t;let i=(e?.target).value;i!=null&&(!this.filterParams.hideSliderNumber&&(!((t=this.filterNumberElm)===null||t===void 0)&&t.textContent)&&(this.filterNumberElm.textContent=i),this.filterInputElm.title=i)}onTriggerEvent(e){var t;let i=this.filterInputElm.value;if(this._currentValue=+i,this._clearFilterTriggered)this.filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery});else{this.filterElm.classList.add("filled");let o=this.selectOperatorElm.value;this.callback(e,{columnDef:this.columnDef,searchTerms:i?[i||"0"]:null,operator:o||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,(t=this.grid)===null||t===void 0||t.onHeaderMouseLeave.notify({column:this.columnDef,grid:this.grid})}};var kl=Oi(bo());var xu=Ki&&Go||Ki,Va=kl.default||kl,Wr=class{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this._bindEventService=new We}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get currentDates(){return this._currentDates}get defaultOperator(){return this.gridOptions.defaultFilterRangeOperator||ue.rangeInclusive}get flatpickrOptions(){return this._flatpickrOptions||{}}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,this._filterElm=this.createDomElement(this.searchTerms),this._bindEventService.bind(this._filterDivInputElm,"keyup",this.onTriggerEvent.bind(this))}clear(e=!0){this.flatInstance&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.flatInstance.input&&this.flatInstance.clear(),this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled"))}destroy(){var e,t,i,o;this._bindEventService.unbindAll(),!((e=this.flatInstance)===null||e===void 0)&&e.destroy&&(this.flatInstance.destroy(),this.flatInstance.element&&Wo(this.flatInstance)),Ve(this.filterContainerElm),Ve(this._filterDivInputElm),(t=this._filterDivInputElm)===null||t===void 0||t.remove(),(i=this.filterContainerElm)===null||i===void 0||i.remove(),(o=this._filterElm)===null||o===void 0||o.remove(),this.grid=null}hide(){this.flatInstance&&typeof this.flatInstance.close=="function"&&this.flatInstance.close()}show(){this.flatInstance&&typeof this.flatInstance.open=="function"&&this.flatInstance.open()}getValues(){return this._currentDates}setValues(e,t){let i=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?i=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(i=e),this.flatInstance&&(this._currentDates=e&&i?i:void 0,this.flatInstance.setDate(this._currentDates||"")),(this.getValues()||[]).length>0&&e?(this._filterElm.classList.add("filled"),this._filterDivInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")),this.operator=t||this.defaultOperator}buildDatePickerInput(e){var t,i,o,s,l;let a=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",d=ji(this.columnFilter.type||this.columnDef.type||O.dateIso),u=ji(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||O.dateUtc),p=this.columnFilter&&this.columnFilter.filterOptions||{},f=((o=p?.locale)!==null&&o!==void 0?o:(l=(s=this.translaterService)===null||s===void 0?void 0:s.getCurrentLanguage)===null||l===void 0?void 0:l.call(s))||this.gridOptions.locale||"en";f.length>2&&(f=f.substring(0,2));let m=[];if(typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?m=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(m=e),m){this._currentDates=m;let E=zt(this.columnFilter.type||this.columnDef.type||O.dateIso);this._currentDateStrings=m.map(x=>Va(x).format(E))}let _={defaultDate:m||"",altInput:!0,altFormat:u,dateFormat:d,mode:"range",wrap:!0,closeOnSelect:!0,locale:f,onChange:E=>{if(Array.isArray(E)){this._currentDates=E;let R=zt(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||O.dateIso);this._currentDateStrings=E.map(L=>Va(L).format(R)),this._currentValue=this._currentDateStrings.join("..")}let x=_.enableTime?new CustomEvent("keyup"):void 0;this.onTriggerEvent(x)},errorHandler:E=>{E.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${f}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};u&&(u==="Z"||u.toLowerCase().includes("h"))&&(_.enableTime=!0),this._flatpickrOptions=P(P({},_),p);let C=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";this.columnFilter&&this.columnFilter.placeholder&&(C=this.columnFilter.placeholder);let b=N("div",{className:`flatpickr search-filter filter-${a}`});return b.appendChild(N("input",{type:"text",className:"form-control",placeholder:C,dataset:{input:""}})),this.flatInstance=xu(b,this._flatpickrOptions),b}createDomElement(e){var t,i;let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";return Ve(this.filterContainerElm),this._filterDivInputElm=this.buildDatePickerInput(e),this._filterDivInputElm.dataset.columnid=`${o}`,Array.isArray(e)&&e.length>0&&e[0]!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDates=e,this._currentValue=e[0]),this._filterDivInputElm&&this.filterContainerElm.appendChild(this._filterDivInputElm),this._filterDivInputElm}onTriggerEvent(e){this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled")):(this._currentDateStrings?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentDateStrings?this._currentDateStrings:[this._currentValue],operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var fn=class{constructor(e){this.translaterService=e}filterCollection(e,t,i=Yn.chain){let o=[];if(Array.isArray(t)){o=i===Yn.merge?[]:[...e];for(let s of t)if(i===Yn.merge){let l=this.singleFilterCollection(e,s);o=Sl([...o,...l])}else o=this.singleFilterCollection(o,s)}else o=this.singleFilterCollection(e,t);return o}singleFilterCollection(e,t){let i=[];if(t){let o=t.property,s=t.operator||ue.equal,l=typeof t.value>"u"?"":t.value;switch(s){case ue.equal:o?i=e.filter(a=>a[o]===l):i=e.filter(a=>a===l);break;case ue.contains:o?i=e.filter(a=>a[o].toString().indexOf(l.toString())!==-1):i=e.filter(a=>a!=null&&a.toString().indexOf(l.toString())!==-1);break;case ue.notContains:o?i=e.filter(a=>a[o].toString().indexOf(l.toString())===-1):i=e.filter(a=>a!=null&&a.toString().indexOf(l.toString())===-1);break;case ue.notEqual:default:o?i=e.filter(a=>a[o]!==l):i=e.filter(a=>a!==l)}}return i}sortCollection(e,t,i,o){var s,l,a,d;if(o&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let u=[];if(i){if(Array.isArray(i))u=t.sort((p,f)=>{var m,_,C,b;for(let E=0,x=i.length;E<x;E++){let R=i[E];if(R?.property){let L=R.sortDesc?mt.desc:mt.asc,z=R.property,B=(_=(m=R?.fieldType)!==null&&m!==void 0?m:e?.type)!==null&&_!==void 0?_:O.string,G=o?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(p[z]||" "):p[z],V=o?((b=this.translaterService)===null||b===void 0?void 0:b.translate)&&this.translaterService.translate(f[z]||" "):f[z],H=Bo(B,G,V,L,e);if(H!==mt.neutral)return H}}return mt.neutral});else if(i?.property){let p=i.property,f=i.sortDesc?mt.desc:mt.asc,m=(l=(s=i?.fieldType)!==null&&s!==void 0?s:e?.type)!==null&&l!==void 0?l:O.string;u=t.sort((_,C)=>{var b,E;let x=o?((b=this.translaterService)===null||b===void 0?void 0:b.translate)&&this.translaterService.translate(_[p]||" "):_[p],R=o?((E=this.translaterService)===null||E===void 0?void 0:E.translate)&&this.translaterService.translate(C[p]||" "):C[p],L=Bo(m,x,R,f,e);return L!==mt.neutral?L:mt.neutral})}else if(i&&!i.property){let p=i.sortDesc?mt.desc:mt.asc,f=(d=(a=i?.fieldType)!==null&&a!==void 0?a:e?.type)!==null&&d!==void 0?d:O.string;u=t.sort((m,_)=>{var C,b;let E=o?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(m||" "):m,x=o?((b=this.translaterService)===null||b===void 0?void 0:b.translate)&&this.translaterService.translate(_||" "):_,R=Bo(f,E,x,p,e);return R!==mt.neutral?R:mt.neutral})}}return u}};var Gr=class{constructor(e,t,i){this.sharedService=e,this.backendUtilities=t,this.translaterService=i}getPickerTitleOutputString(e,t){var i,o,s,l,a,d,u,p,f,m,_,C,b,E,x;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let R="",L=(o=(i=this.sharedService.gridOptions)===null||i===void 0?void 0:i[t])!==null&&o!==void 0?o:{},z=(l=(s=this.sharedService.gridOptions)===null||s===void 0?void 0:s.enableTranslate)!==null&&l!==void 0?l:!1,B=(d=(a=this.sharedService.gridOptions)===null||a===void 0?void 0:a.locales)!==null&&d!==void 0?d:ie.locales,G=L?.[e],V=L?.[`${e}Key`],H=this.sharedService.gridOptions,K=Et(H);if(V&&(!((u=this.translaterService)===null||u===void 0)&&u.translate))R=this.translaterService.translate(V||" ");else switch(e){case"commandTitle":R=G||z&&((p=this.translaterService)===null||p===void 0?void 0:p.getCurrentLanguage)&&((f=this.translaterService)===null||f===void 0?void 0:f.translate(`${K}COMMANDS`||" "))||B?.TEXT_COMMANDS;break;case"columnTitle":R=G||z&&((m=this.translaterService)===null||m===void 0?void 0:m.getCurrentLanguage)&&((_=this.translaterService)===null||_===void 0?void 0:_.translate(`${K}COLUMNS`||" "))||B?.TEXT_COLUMNS;break;case"forceFitTitle":R=G||z&&((C=this.translaterService)===null||C===void 0?void 0:C.getCurrentLanguage)&&((b=this.translaterService)===null||b===void 0?void 0:b.translate(`${K}FORCE_FIT_COLUMNS`||" "))||B?.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":R=G||z&&((E=this.translaterService)===null||E===void 0?void 0:E.getCurrentLanguage)&&((x=this.translaterService)===null||x===void 0?void 0:x.translate(`${K}SYNCHRONOUS_RESIZE`||" "))||B?.TEXT_SYNCHRONOUS_RESIZE;break;default:R=G;break}return R}readjustFrozenColumnIndexWhenNeeded(e,t,i){if(e>=0){let o=i.findIndex(s=>s.id===this.sharedService.frozenVisibleColumnId);o>=0&&o!==e&&(this.sharedService.gridOptions.frozenColumn=o,this.sharedService.slickGrid.setOptions({frozenColumn:o})),Array.isArray(i)&&Array.isArray(t)&&i.length!==t.length&&this.sharedService.slickGrid.setColumns(i)}}refreshBackendDataset(e){var t;let i=this.sharedService.gridOptions;e&&(i=P(P({},this.sharedService.gridOptions),e),this.sharedService.gridOptions=i),(t=this.backendUtilities)===null||t===void 0||t.refreshBackendDataset(i)}runOverrideFunctionWhenExists(e,t){return typeof e=="function"?!!e.call(this,t):!0}sortItems(e,t){Array.isArray(e)&&e.sort((i,o)=>i&&o&&i.hasOwnProperty(t)&&o.hasOwnProperty(t)?i[t]-o[t]:0)}translateItems(e,t,i){var o,s;if(Array.isArray(e))for(let l of e)l.hasOwnProperty(t)&&(l[i]=(s=(o=this.translaterService)===null||o===void 0?void 0:o.translate)===null||s===void 0?void 0:s.call(o,l[t]))}translateMenuItemsFromTitleKey(e){for(let t of e)typeof t=="object"&&t.titleKey&&(t.title=this.translateWhenEnabledAndServiceExist(`${t.titleKey}`,`TEXT_${t.titleKey}`))}translateWhenEnabledAndServiceExist(e,t,i){var o,s,l;let a="",d=(o=this.sharedService)===null||o===void 0?void 0:o.gridOptions,u=(s=d?.locales)!==null&&s!==void 0?s:ie.locales;return i?a=i:d.enableTranslate&&(!((l=this.translaterService)===null||l===void 0)&&l.translate)?a=this.translaterService.translate(e||" "):t in u?a=u[t]:a=t,a}};var Ur=class{constructor(e){this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this.pluginName="AutoTooltips",this._eventHandler=new Slick.EventHandler,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions=P(P({},this._defaults),this.addonOptions),this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}dispose(){var e;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll()}handleMouseEnter(e){var t,i,o,s,l;let a=this._grid.getCellFromEvent(e);if(a){let d=this._grid.getCellNode(a.row,a.cell),u;this._addonOptions&&d&&(!d.title||!((t=this._addonOptions)===null||t===void 0)&&t.replaceExisting)&&(d.clientWidth<d.scrollWidth?(u=(o=(i=d.textContent)===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:"",!((s=this._addonOptions)===null||s===void 0)&&s.maxToolTipLength&&u.length>((l=this._addonOptions)===null||l===void 0?void 0:l.maxToolTipLength)&&(u=u.substr(0,this._addonOptions.maxToolTipLength-3)+"...")):u="",d.title=u),d=null}}handleHeaderMouseEnter(e,t){var i;let o=t.column,s,l=e.target;l&&(s=l.closest(".slick-header-column"),s&&!o?.toolTip&&(s.title=l.clientWidth<s.clientWidth&&(i=o?.name)!==null&&i!==void 0?i:"")),s=null}};var Yr=class{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new Slick.EventHandler,this._bindingEventService=new We}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,t){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new Xr,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions=P(P({},this.getDefaultOptions()),t),this._cellExternalCopyManagerPlugin=new jr,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(i,o)=>{this._addonOptions&&typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(i,o)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(i,o)=>{this._addonOptions&&typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(i,o)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(i,o)=>{this._addonOptions&&typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(i,o)})}dispose(){var e,t;this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),(e=this._cellSelectionModel)===null||e===void 0||e.dispose(),(t=this._cellExternalCopyManagerPlugin)===null||t===void 0||t.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:t=>{this._commandQueue[e]=t,e++,t.execute()},undo:()=>{if(e===0)return;e--;let t=this._commandQueue[e];t&&Slick.GlobalEditorLock.cancelCurrentEdit()&&t.undo()},redo:()=>{if(e>=this._commandQueue.length)return;let t=this._commandQueue[e];e++,t&&Slick.GlobalEditorLock.cancelCurrentEdit()&&t.execute()}}}getDefaultOptions(){let e=0;return{clipboardCommandHandler:t=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,t)},dataItemColumnValueExtractor:(t,i)=>{if(!this.gridOptions.editable||!i.editor){let o=P(P({},this.gridOptions.exportOptions),this.gridOptions.textExportOptions),s=i.exportWithFormatter!==void 0?i.exportWithFormatter:o?.exportWithFormatter;if(i.formatter&&s){let l=i.formatter(0,0,t[i.field],i,t,this._grid);if(i.sanitizeDataExport||o?.sanitizeDataExport){let a=l;return l&&typeof l=="object"&&l.hasOwnProperty("text")&&(a=l.text),a===null&&(a=""),qi(a)}return l}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:t=>{for(let i=0;i<t;i++)this._grid.getData().addItem({id:`newRow_${e++}`})}}}handleBodyKeyDown(e){(e.keyCode||e.code)===90&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}};var Tu=2e3,Ha=100,jr=class{constructor(){this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this.pluginName="CellExternalCopyManager",this.onCopyCells=new Slick.Event,this.onCopyCancelled=new Slick.Event,this.onPasteCells=new Slick.Event,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get clipCommand(){return this._clipCommand}get eventHandler(){return this._eventHandler}init(e,t){this._grid=e,this._addonOptions=P(P({},this._addonOptions),t),this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0,this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));let i=e.getSelectionModel();if(!i)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new Slick.CellSelectionModel())");this._eventHandler.subscribe(i.onSelectedRangesChanged,()=>this._grid.focus())}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if(typeof this._addonOptions.headerColumnValueExtractor=="function"){let t=this._addonOptions.headerColumnValueExtractor(e);if(t)return t}return e.name}getDataItemValueForColumn(e,t,i){if(typeof this._addonOptions.dataItemColumnValueExtractor=="function"){let s=this._addonOptions.dataItemColumnValueExtractor(e,t);if(s)return s}let o="";if(t)if(t.editor){let s=new t.editor({container:document.createElement("p"),column:t,event:i,position:{top:0,left:0},grid:this._grid});s.loadValue(e),o=s.serializeValue(),s.destroy()}else o=e[t.field||""];return o}setDataItemValueForColumn(e,t,i){if(!t?.denyPaste){if(this._addonOptions.dataItemColumnValueSetter)return this._addonOptions.dataItemColumnValueSetter(e,t,i);if(t.editor){let o=new t.editor({container:document.body,column:t,position:{top:0,left:0},grid:this._grid});o.loadValue(e),o.applyValue(e,i),o.destroy()}else e[t.field]=i}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){let t=N("textarea",{value:e,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}});return this._bodyElement.appendChild(t),t.select(),t}decodeTabularData(e,t){var i;let o=e.getColumns(),l=t.value.split(/[\n\f\r]/);l[l.length-1]===""&&l.pop();let a=0,d=[];this._bodyElement.removeChild(t);for(let z of l)d[a++]=z!==""?z.split("	"):[""];let u=this._grid.getActiveCell(),p=(i=this._grid.getSelectionModel())===null||i===void 0?void 0:i.getSelectedRanges(),f=p?.length?p[0]:null,m,_;if(f)m=f.fromRow,_=f.fromCell;else if(u)m=u.row,_=u.cell;else return;let C=!1,b=d.length,E=d.length?d[0].length:0;d.length===1&&d[0].length===1&&f&&(C=!0,b=f.toRow-f.fromRow+1,E=f.toCell-f.fromCell+1);let x=this._grid.getData().length-m,R=0;if(x<b&&typeof this._addonOptions.newRowCreator=="function"){let z=this._grid.getData();for(R=1;R<=b-x;R++)z.push({});this._grid.setData(z),this._grid.render()}if(m+b>this._grid.getDataLength()&&typeof this._addonOptions.newRowCreator=="function"){let z=m+b-this._grid.getDataLength();this._addonOptions.newRowCreator(z)}this._clipCommand={isClipboardCommand:!0,clippedRange:d,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:C,activeRow:m,activeCell:_,destH:b,destW:E,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{var z;this._clipCommand.h=0;for(let G=0;G<this._clipCommand.destH;G++){this._clipCommand.oldValues[G]=[],this._clipCommand.w=0,this._clipCommand.h++;for(let V=0;V<this._clipCommand.destW;V++){this._clipCommand.w++;let H=m+G,K=_+V;if(H<this._clipCommand.maxDestY&&K<this._clipCommand.maxDestX){let oe=this._grid.getDataItem(H);this._clipCommand.oldValues[G][V]=oe[o[K].field],C?this.setDataItemValueForColumn(oe,o[K],d[0][0]):this.setDataItemValueForColumn(oe,o[K],d[G]?d[G][V]:""),this._grid.updateCell(H,K),this._grid.onCellChange.notify({row:H,cell:K,item:oe,grid:this._grid,column:{}})}}}let B={fromCell:_,fromRow:m,toCell:_+this._clipCommand.w-1,toRow:m+this._clipCommand.h-1};this.markCopySelection([B]),(z=this._grid.getSelectionModel())===null||z===void 0||z.setSelectedRanges([B]),this.onPasteCells.notify({ranges:[B]})},undo:()=>{var z;for(let G=0;G<this._clipCommand.destH;G++)for(let V=0;V<this._clipCommand.destW;V++){let H=m+G,K=_+V;if(H<this._clipCommand.maxDestY&&K<this._clipCommand.maxDestX){let oe=this._grid.getDataItem(H);C?this.setDataItemValueForColumn(oe,o[K],this._clipCommand.oldValues[0][0]):this.setDataItemValueForColumn(oe,o[K],this._clipCommand.oldValues[G][V]),this._grid.updateCell(H,K),this._grid.onCellChange.notify({row:H,cell:K,item:oe,grid:this._grid,column:{}})}}let B={fromCell:_,fromRow:m,toCell:_+this._clipCommand.w-1,toRow:m+this._clipCommand.h-1};if(this.markCopySelection([B]),(z=this._grid.getSelectionModel())===null||z===void 0||z.setSelectedRanges([B]),this.onPasteCells.notify({ranges:[B]}),typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(new Slick.EventData,{ranges:[B]}),R>1){let G=this._grid.getData();for(;R>1;R--)G.splice(G.length-1,1);this._grid.setData(G),this._grid.render()}}},this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(this._clipCommand):this._clipCommand.execute()}handleKeyDown(e){var t,i,o,s,l,a;let d;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if((e.which===Ie.ESCAPE||e.key==="Escape")&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),(e.which===Ie.C||e.key==="c"||e.which===Ie.INSERT||e.key==="Insert")&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&(typeof this._onCopyInit=="function"&&this._onCopyInit.call(this),d=(i=(t=this._grid.getSelectionModel())===null||t===void 0?void 0:t.getSelectedRanges())!==null&&i!==void 0?i:[],d.length!==0)){this._copiedRanges=d,this.markCopySelection(d),this.onCopyCells.notify({ranges:d}),typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(e,{ranges:d});let u=this._grid.getColumns(),p="";for(let f=0;f<d.length;f++){let m=d[f],_=[];for(let C=m.fromRow;C<m.toRow+1;C++){let b=[],E=this._grid.getDataItem(C);if(_.length===0&&this._addonOptions.includeHeaderWhenCopying){let x=[];for(let R=m.fromCell;R<m.toCell+1;R++)u[R].name.length>0&&x.push(this.getHeaderValueForColumn(u[R]));_.push(x.join("	"))}for(let x=m.fromCell;x<m.toCell+1;x++)b.push(this.getDataItemValueForColumn(E,u[x],e));_.push(b.join("	"))}p+=_.join(`\r
`)+`\r
`}if(window.clipboardData)return window.clipboardData.setData("Text",p),!0;{let f=document.activeElement,m=this.createTextBox(p);if(m.focus(),setTimeout(()=>{this._bodyElement.removeChild(m),f?f.focus():console.log("No element to restore focus to after copy?")},(s=(o=this.addonOptions)===null||o===void 0?void 0:o.clipboardPasteDelay)!==null&&s!==void 0?s:Ha),typeof this._onCopySuccess=="function"){let _=d.length===1?d[0].toRow+1-d[0].fromRow:d.length;this._onCopySuccess(_)}return!1}}if(!this._addonOptions.readOnlyMode&&((e.which===Ie.V||e.key==="v")&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||(e.which===Ie.INSERT||e.key==="Insert")&&e.shiftKey&&!e.ctrlKey)){let u=this.createTextBox("");return setTimeout(()=>this.decodeTabularData(this._grid,u),(a=(l=this.addonOptions)===null||l===void 0?void 0:l.clipboardPasteDelay)!==null&&a!==void 0?a:Ha),!1}}}markCopySelection(e){var t;this.clearCopySelection();let i=this._grid.getColumns(),o={};for(let s of e)for(let l=s.fromRow;l<=s.toRow;l++){o[l]={};for(let a=s.fromCell;a<=s.toCell&&a<i.length;a++)o[l][i[a].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,o),clearTimeout(this._clearCopyTI),this._clearCopyTI=setTimeout(()=>this.clearCopySelection(),((t=this.addonOptions)===null||t===void 0?void 0:t.clearCopySelectionDelay)||Tu)}};var Qi=class{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new We,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){var e;return(e=this.sharedService.gridOptions)!==null&&e!==void 0?e:{}}get gridUid(){var e,t;return this._gridUid||((t=(e=this.grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuElement(){return this._menuElm||document.querySelector(`.${this._menuPluginCssPrefix||this._menuCssPrefix}${this.gridUidSelector}`)}dispose(){var e,t,i,o,s;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),(t=this._commandTitleElm)===null||t===void 0||t.remove(),(i=this._optionTitleElm)===null||i===void 0||i.remove(),(o=this.menuElement)===null||o===void 0||o.remove(),Ve(this._menuElm),(s=this._menuElm)===null||s===void 0||s.remove()}setOptions(e){this._addonOptions=P(P({},this._addonOptions),e)}populateCommandOrOptionItems(e,t,i,o,s,l){if(s&&o&&t)for(let a of o)this.populateSingleCommandOrOptionItem(e,t,i,a,s,l)}populateCommandOrOptionTitle(e,t,i){var o,s;if(t){let l=(s=(o=this._menuElm)===null||o===void 0?void 0:o.querySelector(`.slick-${e}-header`))!==null&&s!==void 0?s:N("div",{className:`slick-${e}-header`}),a=`${e}Title`;t?.[a]?(this[`_${e}TitleElm`]=N("span",{className:"slick-menu-title",textContent:t[a]}),l.appendChild(this[`_${e}TitleElm`]),l.classList.add("with-title")):l.classList.add("no-title"),i.appendChild(l)}}populateSingleCommandOrOptionItem(e,t,i,o,s,l){let a=null;if(s&&o&&t){let d=this._camelPluginName==="headerButtons"?"":"-item",u=`${this._menuCssPrefix}${d}`,p=!0,f=!0;if(typeof o=="object"&&(p=this.extensionUtility.runOverrideFunctionWhenExists(o.itemVisibilityOverride,s),f=this.extensionUtility.runOverrideFunctionWhenExists(o.itemUsabilityOverride,s)),!p)return null;if(typeof o=="object"&&o.itemUsabilityOverride&&(o.disabled=!f),a=N("li",{className:u}),typeof o=="object"&&yo(o[e])&&(a.dataset[e]=o?.[e]),i&&i.appendChild(a),typeof o=="object"&&o.divider||o==="divider")return a.classList.add(`${u}-divider`),a;if(o.disabled&&a.classList.add(`${u}-disabled`),(o.hidden||o.showOnHover)&&a.classList.add(`${u}-hidden`),o.cssClass&&a.classList.add(...o.cssClass.split(" ")),o.tooltip&&(a.title=o.tooltip),this._camelPluginName!=="headerButtons"){let m=N("div",{className:`${this._menuCssPrefix}-icon`});a.appendChild(m),o.iconCssClass?m.classList.add(...o.iconCssClass.split(" ")):m.textContent="\u25E6";let _=N("span",{className:`${this._menuCssPrefix}-content`,textContent:typeof o=="object"&&o.title||""});a.appendChild(_),o.textCssClass&&_.classList.add(...o.textCssClass.split(" "))}this._bindEventService.bind(a,"click",m=>l.call(this,m,e,o,s?.column)),o.handler&&!o.disabled&&this._bindEventService.bind(a,"click",m=>o.handler.call(this,m))}return a}};var mn=class extends Qi{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._currentCell=-1,this._currentRow=-1}createMenu(e){var t,i,o,s,l,a,d,u,p,f,m,_,C,b,E;(t=this.menuElement)===null||t===void 0||t.remove(),this._menuElm=void 0;let x=this.grid.getCellFromEvent(e);if(x){this._currentCell=(i=x.cell)!==null&&i!==void 0?i:0,this._currentRow=(o=x.row)!==null&&o!==void 0?o:0;let R=this.grid.getColumns()[this._currentCell],L=this.grid.getDataItem(this._currentRow),z=((s=this._addonOptions)===null||s===void 0?void 0:s.commandItems)||[],B=((l=this._addonOptions)===null||l===void 0?void 0:l.optionItems)||[],G=!0,V=!0;if(this._camelPluginName==="contextMenu"){if(G=this.checkIsColumnAllowed((d=(a=this._addonOptions)===null||a===void 0?void 0:a.optionShownOverColumnIds)!==null&&d!==void 0?d:[],R.id),V=this.checkIsColumnAllowed((p=(u=this._addonOptions)===null||u===void 0?void 0:u.commandShownOverColumnIds)!==null&&p!==void 0?p:[],R.id),!R||(!V||!z.length)&&(!G||!B.length)){this.hideMenu();return}}else if(!R||!R.cellMenu||!z.length&&!B.length)return;let H={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,H),typeof e.stopPropagation=="function"&&(this.pubSubService.publish(`on${To(this._camelPluginName)}BeforeMenuShow`,H),typeof((f=this.addonOptions)===null||f===void 0?void 0:f.onBeforeMenuShow)=="function"&&this.addonOptions.onBeforeMenuShow(e,H)===!1))return;this._menuElm=N("div",{className:`${this._menuPluginCssPrefix||this._menuCssPrefix} ${this.gridUid}`,style:{display:"none",left:`${e.pageX}px`,top:`${e.pageY+5}px`}});let K=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${(m=this.addonOptions.maxHeight)!==null&&m!==void 0?m:0}px`,oe=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${(_=this.addonOptions.maxWidth)!==null&&_!==void 0?_:0}px`;K&&(this._menuElm.style.maxHeight=K),oe&&(this._menuElm.style.maxWidth=oe),!((C=this.addonOptions)===null||C===void 0)&&C.width&&(this._menuElm.style.width=Ri((b=this.addonOptions)===null||b===void 0?void 0:b.width));let ne=N("button",{className:"close",type:"button",innerHTML:"&times;",dataset:{dismiss:this._menuCssPrefix}});if(ne.setAttribute("aria-label","Close"),!this.addonOptions.hideOptionSection&&G&&B.length>0){let Pe=N("div",{className:`${this._menuCssPrefix}-option-list`});this.populateCommandOrOptionTitle("option",this.addonOptions,Pe),this.addonOptions.hideCloseButton||this.populateCommandOrOptionCloseBtn("option",ne,Pe),this._menuElm.appendChild(Pe),this.populateCommandOrOptionItems("option",this.addonOptions,Pe,B,{cell:this._currentCell,row:this._currentRow,column:R,dataContext:L,grid:this.grid},this.handleMenuItemCommandClick)}if(!this.addonOptions.hideCommandSection&&V&&z.length>0){let Pe=N("div",{className:`${this._menuCssPrefix}-command-list`});this.populateCommandOrOptionTitle("command",this.addonOptions,Pe),!this.addonOptions.hideCloseButton&&(!G||B.length===0||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",ne,Pe),this._menuElm.appendChild(Pe),this.populateCommandOrOptionItems("command",this.addonOptions,Pe,z,{cell:this._currentCell,row:this._currentRow,column:R,dataContext:L,grid:this.grid},this.handleMenuItemCommandClick)}if(this._menuElm.style.display="block",document.body.appendChild(this._menuElm),this.pubSubService.publish(`on${To(this._camelPluginName)}AfterMenuShow`,H),typeof((E=this.addonOptions)===null||E===void 0?void 0:E.onAfterMenuShow)=="function"&&this.addonOptions.onAfterMenuShow(e,H)===!1)return}return this._menuElm}closeMenu(e,t){var i;if(this.menuElement){if(typeof((i=this.addonOptions)===null||i===void 0?void 0:i.onBeforeMenuClose)=="function"&&this.addonOptions.onBeforeMenuClose(e,t)===!1)return;this.hideMenu()}}hideMenu(){var e;(e=this.menuElement)===null||e===void 0||e.remove(),this._menuElm=null}checkIsColumnAllowed(e,t){return e?.length>0?e.findIndex(i=>i===t)>=0:!0}handleBodyMouseDown(e){var t;(this.menuElement!==e.target&&!(!((t=this.menuElement)===null||t===void 0)&&t.contains(e.target))||e.target.className==="close")&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemCommandClick(e,t,i){var o;if(i?.[t]!==void 0&&i!=="divider"&&!i.disabled&&!i.divider&&this._currentCell!==void 0&&this._currentRow!==void 0){if(t==="option"&&!this.grid.getEditorLock().commitCurrentEdit())return;let s=this._currentCell,l=this._currentRow,a=this.grid.getColumns()[this._currentCell],d=this.grid.getDataItem(this._currentRow),u={cell:this._currentCell,row:this._currentRow,grid:this.grid,[t]:i[t],item:i,column:a,dataContext:d},p=t==="command"?"onCommand":"onOptionSelected",f=`${this._camelPluginName}:${p}`;this.pubSubService.publish(f,u),typeof((o=this._addonOptions)===null||o===void 0?void 0:o[p])=="function"&&this._addonOptions[p](e,u),typeof i.action=="function"&&i.action.call(this,e,u),e.defaultPrevented||this.closeMenu(e,{cell:s,row:l,grid:this.grid})}}populateCommandOrOptionCloseBtn(e,t,i){var o;this._bindEventService.bind(t,"click",l=>this.handleCloseButtonClicked(l));let s=(o=i.querySelector(`.slick-${e}-header`))!==null&&o!==void 0?o:N("div",{className:`slick-${e}-header`});s?.appendChild(t),i.appendChild(s),s.classList.add("with-close")}repositionMenu(e){var t,i,o,s,l,a;if(this._menuElm&&e.target){this._menuElm.style.top="0px",this._menuElm.style.left="0px";let d=e.target.closest(".slick-cell"),u=d&&this._camelPluginName==="cellMenu"?(i=(t=Nt(d))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0:e.pageX,p=d&&this._camelPluginName==="cellMenu"?(s=(o=Nt(d))===null||o===void 0?void 0:o.top)!==null&&s!==void 0?s:0:e.pageY,f=d.offsetWidth||0,m=((l=this._menuElm)===null||l===void 0?void 0:l.offsetHeight)||0,_=((a=this._menuElm)===null||a===void 0?void 0:a.offsetWidth)||this._addonOptions.width||0,C=this.gridOptions.rowHeight||0,b=+(this._addonOptions.autoAdjustDropOffset||0),E=+(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){let x=Rl(d).bottom,R=Rl(d).top,L=x+b-C,z=R-b+C;(L<m&&z>L?"top":"bottom")==="top"||this._addonOptions.dropDirection==="top"?(this._menuElm.classList.remove("dropdown"),this._menuElm.classList.add("dropup"),p=p-m-b):(this._menuElm.classList.remove("dropup"),this._menuElm.classList.add("dropdown"),p=p+b,this._camelPluginName==="cellMenu"&&(p+=C))}if(this._addonOptions.autoAlignSide||this._addonOptions.dropSide==="left"){let x=this.grid.getGridPosition();(u+ +_>=x.width?"left":"right")==="left"||this._addonOptions.dropSide==="left"?(this._menuElm.classList.remove("dropright"),this._menuElm.classList.add("dropleft"),this._camelPluginName==="cellMenu"?u=u-(+_-f)-E:u=u-+_-E):(this._menuElm.classList.remove("dropleft"),this._menuElm.classList.add("dropright"),u=u+E)}this._menuElm.style.top=`${p}px`,this._menuElm.style.left=`${u}px`}}};var qr=class extends mn{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0},this.pluginName="CellMenu",this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(i.gridOptions.cellMenu)}init(e){this._addonOptions=P(P({},this._defaults),e),this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){var e;let t=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions,i=this.sharedService.allColumns;t?.enableTranslate&&Array.isArray(i)&&i.forEach(o=>{if(o?.cellMenu&&(Array.isArray(o.cellMenu.commandItems)||Array.isArray(o.cellMenu.optionItems))){let s=o.cellMenu.commandItems||[],l=o.cellMenu.optionItems||[];o.cellMenu.commandTitleKey&&(o.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.cellMenu.commandTitleKey,"TEXT_COMMANDS")||o.cellMenu.commandTitle),o.cellMenu.optionTitleKey&&(o.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.cellMenu.optionTitleKey,"TEXT_COMMANDS")||o.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(s),this.extensionUtility.translateMenuItemsFromTitleKey(l)}})}handleCellClick(e,t){let i=this.grid.getCellFromEvent(e);if(i){let o=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell];if(s?.cellMenu&&e.preventDefault(),this._addonOptions=P(P({},this._addonOptions),s.cellMenu),t=t||{},t.column=s,t.dataContext=o,t.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,t))return;this._menuElm=this.createMenu(e),this._menuElm&&(this.repositionMenu(e),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach(t=>{var i,o;!((i=t?.cellMenu)===null||i===void 0)&&i.commandItems&&this.extensionUtility.sortItems(t.cellMenu.commandItems||[],"positionOrder"),!((o=t?.cellMenu)===null||o===void 0)&&o.optionItems&&this.extensionUtility.sortItems(t.cellMenu.optionItems||[],"positionOrder")})}};var Kr=class{constructor(e,t){this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this.pluginName="CellRangeDecorator",this._addonOptions=Hi(this._defaults,t),this._grid=e}get addonOptions(){return this._addonOptions}get addonElement(){return this._elem}dispose(){this.hide()}hide(){var e;(e=this._elem)===null||e===void 0||e.remove(),this._elem=null}show(e){var t,i,o,s,l;this._elem||(this._elem=N("div",{className:this._addonOptions.selectionCssClass}),Object.keys(this._addonOptions.selectionCss).forEach(u=>{this._elem.style[u]=this._addonOptions.selectionCss[u]}),this._elem.style.position="absolute",(i=(t=this._grid)===null||t===void 0?void 0:t.getActiveCanvasNode())===null||i===void 0||i.appendChild(this._elem));let a=(o=this._grid)===null||o===void 0?void 0:o.getCellNodeBox(e.fromRow,e.fromCell),d=(s=this._grid)===null||s===void 0?void 0:s.getCellNodeBox(e.toRow,e.toCell);return a&&d&&(!((l=this._addonOptions)===null||l===void 0)&&l.offset)&&(this._elem.style.top=`${a.top+this._addonOptions.offset.top}px`,this._elem.style.left=`${a.left+this._addonOptions.offset.left}px`,this._elem.style.height=`${d.bottom-a.top+this._addonOptions.offset.height}px`,this._elem.style.width=`${d.right-a.left+this._addonOptions.offset.width}px`),this._elem}};var gn=class{constructor(e){this._currentlySelectedRange=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.pluginName="CellRangeSelector",this.onBeforeCellRangeSelected=new Slick.Event,this.onCellRangeSelecting=new Slick.Event,this.onCellRangeSelected=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions=Hi(this._defaults,e)}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridUid(){var e,t;return this._gridUid||((t=(e=this._grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._addonOptions.cellDecorator||new Kr(e,this._addonOptions),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID(),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){var e,t;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll(),Ve(this._activeCanvas),Ve(this._canvas),(t=this._decorator)===null||t===void 0||t.dispose(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,t){var i,o;let s=this._activeViewport.scrollLeft,l=this._activeViewport.scrollTop,a=s+this._viewportWidth,d=l+this._viewportHeight,u=Nt(this._activeViewport),p=(i=u?.left)!==null&&i!==void 0?i:0,f=(o=u?.top)!==null&&o!==void 0?o:0,m=p+this._viewportWidth,_=f+this._viewportHeight,C={e,dd:t,viewport:{left:s,top:l,right:a,bottom:d,offset:{left:p,top:f,right:m,bottom:_}},offset:{x:0,y:0},isOutsideViewport:!1};return e.pageX<p?C.offset.x=e.pageX-p:e.pageX>m&&(C.offset.x=e.pageX-m),e.pageY<f?C.offset.y=f-e.pageY:e.pageY>_&&(C.offset.y=_-e.pageY),C.isOutsideViewport=!!C.offset.x||!!C.offset.y,C}stopIntervalTimer(){this._autoScrollTimerId&&(clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,t){if(!(!this._dragging&&!this._gridOptions.enableRowMoveManager)){if(this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation(),this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(e,t),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(e,t)}}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,t=0;this._autoScrollTimerId=setInterval(()=>{let i=!1,o=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,i=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(t+=this.addonOptions.minIntervalToShowNextCell,o=t>=this._yDelayForNextCell):t=0,(i||o)&&(i&&(e=0),o&&(t=0),this.handleDragToNewPosition(i,o))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,t){let i=this._draggingMouseOffset.e.pageX,o=this._draggingMouseOffset.e.pageY,s=this._draggingMouseOffset.offset.x,l=this._draggingMouseOffset.offset.y,a=this._draggingMouseOffset.viewport.offset;e&&s&&(s>0?i=a.right+this._moveDistanceForOneCell.x:i=a.left-this._moveDistanceForOneCell.x),t&&l&&(l>0?o=a.top-this._moveDistanceForOneCell.y:o=a.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:i,pageY:o},this._draggingMouseOffset.dd)}handleDragTo(e,t){var i,o,s,l;let a=this._grid.getCellFromPoint(e.pageX-((o=(i=Nt(this._activeCanvas))===null||i===void 0?void 0:i.left)!==null&&o!==void 0?o:0)+this._columnOffset,e.pageY-((l=(s=Nt(this._activeCanvas))===null||s===void 0?void 0:s.top)!==null&&l!==void 0?l:0)+this._rowOffset);if(a!==void 0){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&a.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&a.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&a.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&a.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){let d=this._grid.getCellNodeBox(a.row,a.cell);if(d){let u=this._draggingMouseOffset.viewport;(d.left<u.left||d.right>u.right||d.top<u.top||d.bottom>u.bottom)&&this._grid.scrollCellIntoView(a.row,a.cell)}}if(!this._grid.canCellBeSelected(a.row,a.cell))return;if(t?.range){t.range.end=a;let d=new Slick.Range(t.range.start.row,t.range.start.cell,a.row,a.cell);this._decorator.show(d),this.onCellRangeSelecting.notify({range:d})}}}handleDragEnd(e,t){this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this._decorator.hide(),this.onCellRangeSelected.notify({range:new Slick.Range(t.range.start.row,t.range.start.cell,t.range.end.row,t.range.end.cell)}))}handleDragInit(e){var t,i,o,s;this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);let l=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-l.width,this._viewportHeight=this._activeViewport.offsetHeight-l.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){let a=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=(i=(t=document.querySelector(a))===null||t===void 0?void 0:t.clientHeight)!==null&&i!==void 0?i:0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=(s=(o=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`))===null||o===void 0?void 0:o.clientWidth)!==null&&s!==void 0?s:0),e.stopImmediatePropagation()}handleDragStart(e,t){var i,o,s,l;let a=this._grid.getCellFromEvent(e);if(a&&this.onBeforeCellRangeSelected.notify(a)!==!1&&this._grid.canCellBeSelected(a.row,a.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();let d=t.startX-((o=(i=Nt(this._canvas))===null||i===void 0?void 0:i.left)!==null&&o!==void 0?o:0);this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(d+=this._scrollLeft);let u=t.startY-((l=(s=Nt(this._canvas))===null||s===void 0?void 0:s.top)!==null&&l!==void 0?l:0);this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(u+=this._scrollTop);let p=this._grid.getCellFromPoint(d,u);return t.range={start:p,end:{}},this._currentlySelectedRange=t.range,this._decorator.show(new Slick.Range(p.row,p.cell))}handleScroll(e,t){this._scrollTop=t.scrollTop,this._scrollLeft=t.scrollLeft}};var Xr=class{constructor(e){this._canvas=null,this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new Slick.Event,this.pluginName="CellSelectionModel",this._eventHandler=new Slick.EventHandler,e===void 0||e.cellRangeSelector===void 0?this._selector=new gn({selectionCss:{border:"2px solid black"}}):this._selector=e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get canvas(){return this._canvas}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,this._addonOptions=P(P({},this._defaults),this._addonOptions),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector),this._canvas=this._grid.getCanvasNode()}destroy(){this.dispose()}dispose(){var e,t;this._canvas=null,this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),(e=this._grid)===null||e===void 0||e.unregisterPlugin(this._selector),(t=this._selector)===null||t===void 0||t.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,t){let i=e.length!==t.length;if(!i){for(let o=0;o<e.length;o++)if(e[o].fromCell!==t[o].fromCell||e[o].fromRow!==t[o].fromRow||e[o].toCell!==t[o].toCell||e[o].toRow!==t[o].toRow){i=!0;break}}return!i}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){let t=[];for(let i=0;i<e.length;i++){let o=e[i];this._grid.canCellBeSelected(o.fromRow,o.fromCell)&&this._grid.canCellBeSelected(o.toRow,o.toCell)&&t.push(o)}return t}setSelectedRanges(e,t="SlickCellSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;let i=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),i){let o=new Slick.EventData;Object.defineProperty(o,"detail",{writable:!0,configurable:!0,value:{caller:t}}),this.onSelectedRangesChanged.notify(this._ranges,o)}}handleActiveCellChange(e,t){var i,o;!((i=this._addonOptions)===null||i===void 0)&&i.selectActiveCell&&t.row!==null&&t.cell!==null?this.setSelectedRanges([new Slick.Range(t.row,t.cell)]):!((o=this._addonOptions)===null||o===void 0)&&o.selectActiveCell||this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){if(this._grid.getEditorLock().isActive())return e.stopPropagation(),!1}handleCellRangeSelected(e,t){this._grid.setActiveCell(t.range.fromRow,t.range.fromCell,!1,!1,!0),this.setSelectedRanges([t.range])}handleKeyDown(e){let t,i,o=this._grid.getActiveCell(),s=e.ctrlKey||e.metaKey;if(o&&e.shiftKey&&!s&&!e.altKey&&(e.which===Ie.LEFT||e.key==="ArrowLeft"||e.which===Ie.RIGHT||e.key==="ArrowRight"||e.which===Ie.UP||e.key==="ArrowUp"||e.which===Ie.DOWN||e.key==="ArrowDown")&&(t=this.getSelectedRanges().slice(),t.length||t.push(new Slick.Range(o.row,o.cell)),i=t.pop(),typeof i?.contains=="function")){i.contains(o.row,o.cell)||(i=new Slick.Range(o.row,o.cell));let l=i.toRow-i.fromRow,a=i.toCell-i.fromCell,d=o.row===i.fromRow?1:-1,u=o.cell===i.fromCell?1:-1;e.which===Ie.LEFT||e.key==="ArrowLeft"?a-=u:e.which===Ie.RIGHT||e.key==="ArrowRight"?a+=u:e.which===Ie.UP||e.key==="ArrowUp"?l-=d:(e.which===Ie.DOWN||e.key==="ArrowDown")&&(l+=d);let p=new Slick.Range(o.row,o.cell,o.row+d*l,o.cell+u*a);if(this.removeInvalidRanges([p]).length){t.push(p);let f=d>0?p.toRow:p.fromRow,m=u>0?p.toCell:p.fromCell;this._grid.scrollRowIntoView(f),this._grid.scrollCellIntoView(f,m,!1)}else t.push(i);this.setSelectedRanges(t),e.preventDefault(),e.stopPropagation()}}};var Zi=class{constructor(e){this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.pluginName="RowSelectionModel",this.onSelectedRangesChanged=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions=P(P({},this._defaults),e)}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid.getOptions()}init(e){this._grid=e,this._addonOptions=P(P({},this._defaults),this._addonOptions),this._selector=this.addonOptions.cellRangeSelector,!this._selector&&this._addonOptions.dragToSelect&&(this._selector=new gn({selectionCss:{border:"none"},autoScroll:this._addonOptions.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){var e,t;this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),(e=this._selector)===null||e===void 0||e.destroy(),(t=this._selector)===null||t===void 0||t.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e,t="SlickRowSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;this._ranges=e;let i=new Slick.EventData;Object.defineProperty(i,"detail",{writable:!0,configurable:!0,value:{caller:t}}),this.onSelectedRangesChanged.notify(this._ranges,i)}getRowsRange(e,t){let i,o=[];for(i=e;i<=t;i++)o.push(i);for(i=t;i<e;i++)o.push(i);return o}handleBeforeCellRangeSelected(e,t){var i;let o=!1;if(this.gridOptions.enableRowMoveManager&&(o=(i=this.isHandlerColumn(t.cell))!==null&&i!==void 0?i:!1),this._grid.getEditorLock().isActive()||o)return e.stopPropagation(),!1;this._grid.setActiveCell(t.row,t.cell)}handleCellRangeSelected(e,t){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new Slick.Range(t.range.fromRow,0,t.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,t){this._addonOptions.selectActiveRow&&t.row!==null&&this.setSelectedRanges([new Slick.Range(t.row,0,t.row,this._grid.getColumns().length-1)])}handleClick(e){let t=this._grid.getCellFromEvent(e);if(!t||!this._grid.canCellBeActive(t.row,t.cell)||!this.gridOptions.multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;let i=this.rangesToRows(this._ranges),o=i.indexOf(t.row);if(o===-1&&(e.ctrlKey||e.metaKey))i.push(t.row),this._grid.setActiveCell(t.row,t.cell);else if(o!==-1&&(e.ctrlKey||e.metaKey))i=i.filter(l=>l!==t.row),this._grid.setActiveCell(t.row,t.cell);else if(i.length&&e.shiftKey){let l=i.pop(),a=Math.min(t.row,l),d=Math.max(t.row,l);i=[];for(let u=a;u<=d;u++)u!==l&&i.push(u);i.push(l),this._grid.setActiveCell(t.row,t.cell)}let s=this.rowsToRanges(i);return this.setSelectedRanges(s),e.stopImmediatePropagation(),!0}handleKeyDown(e){let t=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which===Ie.UP||e.key==="ArrowUp"||e.which===Ie.DOWN||e.key==="ArrowDown")){let i=this.getSelectedRows();i.sort((a,d)=>a-d),i.length||(i=[t.row]);let o,s=i[0],l=i[i.length-1];if(e.which===Ie.DOWN||e.key==="ArrowDown"?o=t.row<l||s===l?++l:++s:o=t.row<l?--l:--s,o>=0&&o<this._grid.getDataLength()){this._grid.scrollRowIntoView(o);let a=this.rowsToRanges(this.getRowsRange(s,l));this.setSelectedRanges(a)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){let i=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(i)}rangesToRows(e){let t=[];for(let i=0;i<e.length;i++)for(let o=e[i].fromRow;o<=e[i].toRow;o++)t.push(o);return t}rowsToRanges(e){let t=[],i=this._grid.getColumns().length-1;for(let o of e)t.push(new Slick.Range(o,0,o,i));return t}};var ir=class{constructor(e){this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"sel",hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new We,this._eventHandler=new Slick.EventHandler,this._addonOptions=P(P({},this._defaults),e)}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new Zi(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),typeof this._addonOptions.selectableOverride=="function"&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,t){var i,o;if(this._addonOptions=P(P({},this._defaults),t.checkboxSelector),Array.isArray(e)&&t){let s=this.getColumnDefinition(),l=(o=(i=t?.checkboxSelector)===null||i===void 0?void 0:i.columnIndexPosition)!==null&&o!==void 0?o:0;l>0?e.splice(l,0,s):e.unshift(s)}return this}getOptions(){return this._addonOptions}setOptions(e){var t;if(this._addonOptions=P(P({},this._addonOptions),e),this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?this.hideSelectAllFromColumnHeaderTitleRow():(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{let i=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector("#filter-checkbox-selectall-container");if(i){i.style.display="flex";let o=i.querySelector('input[type="checkbox"]');o&&(o.checked=this._isSelectAllChecked)}}}deSelectRows(e){let t=[];for(let i of e)this._selectedRowsLookup[i]&&(t[t.length]=i);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(i=>t.indexOf(i)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){var t;let i=[];for(let s of e)this._selectedRowsLookup[s]&&(i[i.length]=s);let o=(t=this._grid.getSelectedRows())===null||t===void 0?void 0:t.concat(i);this._grid.setSelectedRows(o)}getColumnDefinition(){return{id:this._addonOptions.columnId,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":`<input id="header-selector${this._selectAll_UID}" type="checkbox"><label for="header-selector${this._selectAll_UID}"></label>`,toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:this._addonOptions.field||"sel",cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,sortable:!1,width:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"","","")}hideSelectAllFromColumnHeaderFilterRow(){var e;let t=(e=this.headerRowNode)===null||e===void 0?void 0:e.querySelector("#filter-checkbox-selectall-container");t&&(t.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,t){let i=this._grid.getDataItem(t);if(!this.checkSelectableOverride(t,i,this._grid))return;let o=this._grid.getSelectedRows();this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(e,{row:t,previousSelectedRows:o});let s=this._selectedRowsLookup[t]?this._grid.getSelectedRows().filter(l=>l!==t):this._grid.getSelectedRows().concat(t);this._grid.setSelectedRows(s,"click.toggle"),this._grid.setActiveCell(t,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:t,previousSelectedRows:o})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{if(i.column.field===(this.addonOptions.field||"sel")){Ve(i.node);let o=N("span",{id:"filter-checkbox-selectall-container"});o.appendChild(N("input",{type:"checkbox",id:`header-filter-selector${this._selectAll_UID}`})),o.appendChild(N("label",{htmlFor:`header-filter-selector${this._selectAll_UID}`})),i.node.appendChild(o),this._headerRowNode=i.node,this._bindEventService.bind(o,"click",s=>this.handleHeaderClick(s,i))}})}checkboxSelectionFormatter(e,t,i,o,s,l){if(s&&this.checkSelectableOverride(e,s,l)){let a=this.createUID()+e;return`<input id="selector${a}" type="checkbox" ${this._selectedRowsLookup[e]?'checked="checked"':""}><label for="selector${a}"></label>`}return null}checkSelectableOverride(e,t,i){return typeof this._selectableOverride=="function"?this._selectableOverride(e,t,i):!0}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(this._checkboxColumnCellIndex===null){this._checkboxColumnCellIndex=0;let e=this._grid.getColumns();for(let t=0;t<e.length;t++)e[t].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=t)}return this._checkboxColumnCellIndex}handleClick(e,t){if(this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}this.toggleRowSelectionWithEvent(e,t.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,t){if(t.column.id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}let i=e.target.checked,o=i?"click.selectAll":"click.unselectAll",s=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:s,caller:o});let l=[];if(i){let a=[];for(let d=0;d<this._grid.getDataLength();d++){let u=this._grid.getDataItem(d);!u.__group&&!u.__groupTotals&&this.checkSelectableOverride(d,u,this._grid)&&a.push(d)}l=a}this._grid.setSelectedRows(l,o),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:l,previousSelectedRows:s,caller:o}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,t){(e.which===Ie.SPACE||e.key===" ")&&this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(e,t.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){var e,t;let i=this._grid.getSelectedRows(),o={},s=0,l=0,a=0,d=0;if(typeof this._selectableOverride=="function")for(a=0;a<this._grid.getDataLength();a++){let p=this._grid.getDataItem(a);this.checkSelectableOverride(l,p,this._grid)||d++}let u=[];for(l=0;l<i.length;l++){s=i[l];let p=this._grid.getDataItem(s);this.checkSelectableOverride(l,p,this._grid)?(o[s]=!0,o[s]!==this._selectedRowsLookup[s]&&(this._grid.invalidateRow(s),delete this._selectedRowsLookup[s])):u.push(s)}for(let p in this._selectedRowsLookup)p!==void 0&&this._grid.invalidateRow(+p);if(this._selectedRowsLookup=o,this._grid.render(),this._isSelectAllChecked=((e=i?.length)!==null&&e!==void 0?e:0)+d>=this._grid.getDataLength(),!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){let p=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector(`#header-filter-selector${this._selectAll_UID}`);p&&(p.checked=this._isSelectAllChecked)}if(u.length>0){for(let p of u){let f=i.indexOf(p);i.splice(f,1)}this._grid.setSelectedRows(i,"click.toggle")}}renderSelectAllCheckbox(e){let t=e?' checked="checked"':"";this._grid.updateColumnHeader(this._addonOptions.columnId||"",`<input id="header-selector${this._selectAll_UID}" type="checkbox"${t}><label for="header-selector${this._selectAll_UID}"></label>`,this._addonOptions.toolTip)}};var vn=class extends Qi{constructor(e,t,i,o,s){var l,a,d,u;super(e,i,o),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=o,this.sortService=s,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._gridMenuOptions=null,this._headerElm=null,this._isMenuOpen=!1,this.onAfterMenuShow=new Slick.Event,this.onBeforeMenuShow=new Slick.Event,this.onMenuClose=new Slick.Event,this.onCommand=new Slick.Event,this.onColumnsChanged=new Slick.Event,this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:p=>p.name},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=(l=this.sharedService.allColumns)!==null&&l!==void 0?l:[],this._gridUid=(u=(d=(a=this.grid)===null||a===void 0?void 0:a.getUID)===null||d===void 0?void 0:d.call(a))!==null&&u!==void 0?u:"",this.initEventHandlers(),this.init()}get addonOptions(){return this._gridMenuOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.grid.getOptions()||{}}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,_n.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(e,t)=>{if(t&&t.optionsBefore&&t.optionsAfter){let i=t.optionsBefore.frozenColumn>=0&&t.optionsAfter.frozenColumn===-1,o=t.optionsBefore.frozenColumn===-1&&t.optionsAfter.frozenColumn>=0;(i||o)&&this.recreateGridMenu()}})}init(){var e;this._gridUid=(e=this.grid.getUID())!==null&&e!==void 0?e:"",this._userOriginalGridMenu=P({},this.sharedService.gridOptions.gridMenu),this._gridMenuOptions=P(P(P({},this._defaults),this.getDefaultGridMenuOptions()),this.sharedService.gridOptions.gridMenu),this.sharedService.gridOptions.gridMenu=this._gridMenuOptions;let t=this._userOriginalGridMenu.commandItems,i=this._userOriginalGridMenu&&Array.isArray(t)?t:[];this._gridMenuOptions.commandItems=[...i,...this.addGridMenuCustomCommands(i)],this.extensionUtility.translateMenuItemsFromTitleKey(this._gridMenuOptions.commandItems||[]),this.extensionUtility.sortItems(this._gridMenuOptions.commandItems,"positionOrder"),this._gridMenuOptions.commandItems=this._gridMenuOptions.commandItems,this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){var e,t,i;this._bindEventService.unbindAll();let o=document.querySelector(`div.slick-grid-menu.${this._gridUid}`);o&&(o.style.display="none"),this._headerElm&&(this._headerElm.style.width="100%"),(e=this._gridMenuButtonElm)===null||e===void 0||e.remove(),(t=this._menuElm)===null||t===void 0||t.remove(),(i=this._commandMenuElm)===null||i===void 0||i.remove()}createColumnPickerContainer(){this._menuElm&&(Zr.call(this,this._menuElm),this._listElm=N("div",{className:"slick-column-picker-list"}),this._bindEventService.bind(this._menuElm,"click",Jr.bind(this)))}createGridMenu(){var e,t,i,o,s,l;this._gridUid=(t=(e=this._gridUid)!==null&&e!==void 0?e:this.grid.getUID())!==null&&t!==void 0?t:"";let a=this._gridUid?`.${this._gridUid}`:"",d=((i=this._gridMenuOptions)===null||i===void 0?void 0:i.menuWidth)||this._defaults.menuWidth,u=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left";if(this._headerElm=document.querySelector(`${a} .slick-header-${u}`),this._headerElm&&this._gridMenuOptions){if(this._headerElm.style.width=`calc(100% - ${d}px)`,((o=this._gridMenuOptions.resizeOnShowHeaderRow)!==null&&o!==void 0?o:this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){let m=document.querySelector(`${a} .slick-headerrow`);m&&(m.style.width=`calc(100% - ${d}px)`)}((s=this._gridMenuOptions.showButton)!==null&&s!==void 0?s:this._defaults.showButton)&&(this._gridMenuButtonElm=N("button",{className:"slick-grid-menu-button"}),!((l=this._gridMenuOptions)===null||l===void 0)&&l.iconCssClass&&this._gridMenuButtonElm.classList.add(...this._gridMenuOptions.iconCssClass.split(" ")),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement.firstChild),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu=P(P({},this._defaults),this._gridMenuOptions),this.translateTitleLabels(this._gridMenuOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._menuElm=document.createElement("div"),this._menuElm.classList.add("slick-grid-menu",this._gridUid),this._menuElm.style.display="none",this._commandMenuElm=N("div",{className:"slick-menu-command-list"}),this._menuElm.appendChild(this._commandMenuElm),this.recreateCommandList(this._gridMenuOptions,{grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()}),this.createColumnPickerContainer(),document.body.appendChild(this._menuElm),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){var t,i,o,s;if(((i=(t=this._menuElm)===null||t===void 0?void 0:t.style)===null||i===void 0?void 0:i.display)==="block"){let l={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",l),typeof((o=this._gridMenuOptions)===null||o===void 0?void 0:o.onMenuClose)=="function"&&this._gridMenuOptions.onMenuClose(e,l)===!1||this.onMenuClose.notify(l,null,this)===!1)return;if(this._menuElm.style.display="none",this._menuElm.setAttribute("aria-expanded","false"),this._isMenuOpen=!1,typeof((s=this.grid)===null||s===void 0?void 0:s.autosizeColumns)=="function"){let a=this.grid.getUID()||"";this._areVisibleColumnDifferent&&a&&document.querySelector(`.${a}`)!==null&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,t,i=!0){var o,s,l,a,d,u,p,f;if(this._menuElm){let m=e.target.nodeName==="BUTTON"?e.target:e.target.querySelector("button");m||(m=e.target.parentElement),this._menuElm.style.display="block",this._menuElm.style.opacity="0";let _=Nt(m),C=getComputedStyle(m),b=parseInt((o=C?.width)!==null&&o!==void 0?o:(s=this._defaults)===null||s===void 0?void 0:s.menuWidth,10),E=(a=(l=this._menuElm)===null||l===void 0?void 0:l.offsetWidth)!==null&&a!==void 0?a:0,x=(u=(d=t?.contentMinWidth)!==null&&d!==void 0?d:this._defaults.contentMinWidth)!==null&&u!==void 0?u:0,R=(x>E?x:E)||0,L=(p=_?.top)!==null&&p!==void 0?p:0,z=(f=_?.right)!==null&&f!==void 0?f:0,B=(t?.marginBottom!==void 0?t.marginBottom:this._defaults.marginBottom)||0,G=t?.dropSide==="right"?z-b:z-R;this._menuElm.style.top=`${L+m.offsetHeight}px`,this._menuElm.style.left=`${G}px`,t.dropSide==="left"?(this._menuElm.classList.remove("dropright"),this._menuElm.classList.add("dropleft")):(this._menuElm.classList.remove("dropleft"),this._menuElm.classList.add("dropright")),this._menuElm.appendChild(this._listElm),x>0&&(this._menuElm.style.minWidth=`${x}px`),this._menuElm.style.minHeight=Ri(t.minHeight,""),t?.height!==void 0?this._menuElm.style.height=Ri(t.height,""):this._menuElm.style.maxHeight=Ri(t.maxHeight,`${window.innerHeight-e.clientY-B}px`),this._menuElm.style.display="block",i&&(this._menuElm.style.opacity="1"),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm),this._isMenuOpen=!0}}showGridMenu(e,t){if(e.preventDefault(),Ve(this._listElm),Ve(this._commandMenuElm),this._gridMenuOptions){let i={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},o=P(P({},this._gridMenuOptions),t);if(this.recreateCommandList(o,i),_n.call(this),this._columnCheckboxes=[],o&&!this.extensionUtility.runOverrideFunctionWhenExists(o.menuUsabilityOverride,i)||typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",i),typeof o?.onBeforeMenuShow=="function"&&o.onBeforeMenuShow(e,i)===!1||this.onBeforeMenuShow.notify(i,null,this)))return;es.call(this,o),this.repositionMenu(e,o,!1),this.repositionMenu(e,o,!0),this.pubSubService.publish("onGridMenuAfterMenuShow",i),typeof o?.onAfterMenuShow=="function"&&o.onAfterMenuShow(e,i),this.onAfterMenuShow.notify(i,null,this)}}updateAllTitles(e){var t,i,o,s;!((t=this._commandTitleElm)===null||t===void 0)&&t.textContent&&e.commandTitle&&(this._commandTitleElm.textContent=!((o=(i=this._gridMenuOptions)===null||i===void 0?void 0:i.commandItems)===null||o===void 0)&&o.length?e.commandTitle:"",this._gridMenuOptions.commandTitle=this._commandTitleElm.textContent),!((s=this._columnTitleElm)===null||s===void 0)&&s.textContent&&e.columnTitle&&(this._columnTitleElm.textContent=e.columnTitle,this._gridMenuOptions.columnTitle=e.columnTitle)}translateGridMenu(){var e;if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";let t=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...t,...this.addGridMenuCustomCommands(t)],this.extensionUtility.translateMenuItemsFromTitleKey(((e=this._gridMenuOptions)===null||e===void 0?void 0:e.commandItems)||[]),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._gridMenuOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.updateAllTitles(this.sharedService.gridOptions.gridMenu)}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){var t,i,o,s,l,a,d,u,p,f,m,_,C,b,E;let x=this.gridOptions.backendServiceApi||null,R=[],L=this.gridOptions,z=Et(L),B=(t=this._gridMenuOptions)===null||t===void 0?void 0:t.commandLabels;if(this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideClearFrozenColumnsCommand){let V="clear-pinning";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconClearFrozenColumnsCommand||"fa fa-times",titleKey:`${z}${(i=B?.clearFrozenColumnsCommandKey)!==null&&i!==void 0?i:"CLEAR_PINNING"}`,disabled:!1,command:V,positionOrder:52})}if(this.gridOptions&&this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideClearAllFiltersCommand){let V="clear-filter";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconClearAllFiltersCommand||"fa fa-filter text-danger",titleKey:`${z}${(o=B?.clearAllFiltersCommandKey)!==null&&o!==void 0?o:"CLEAR_ALL_FILTERS"}`,disabled:!1,command:V,positionOrder:50})}if(this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideToggleFilterCommand){let V="toggle-filter";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconToggleFilterCommand||"fa fa-random",titleKey:`${z}${(s=B?.toggleFilterCommandKey)!==null&&s!==void 0?s:"TOGGLE_FILTER_ROW"}`,disabled:!1,command:V,positionOrder:53})}if(x&&this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideRefreshDatasetCommand){let V="refresh-dataset";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconRefreshDatasetCommand||"fa fa-refresh",titleKey:`${z}${(l=B?.refreshDatasetCommandKey)!==null&&l!==void 0?l:"REFRESH_DATASET"}`,disabled:!1,command:V,positionOrder:57})}}if(this.gridOptions.showPreHeaderPanel&&this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideTogglePreHeaderCommand){let V="toggle-preheader";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconTogglePreHeaderCommand||"fa fa-random",titleKey:`${z}${(a=B?.togglePreHeaderCommandKey)!==null&&a!==void 0?a:"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:V,positionOrder:53})}if(this.gridOptions.enableSorting&&this.gridOptions&&this._gridMenuOptions&&!this._gridMenuOptions.hideClearAllSortingCommand){let V="clear-sorting";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconClearAllSortingCommand||"fa fa-unsorted text-danger",titleKey:`${z}${(d=B?.clearAllSortingCommandKey)!==null&&d!==void 0?d:"CLEAR_ALL_SORTING"}`,disabled:!1,command:V,positionOrder:51})}if((!((u=this.gridOptions)===null||u===void 0)&&u.enableExport||!((p=this.gridOptions)===null||p===void 0)&&p.enableTextExport)&&this._gridMenuOptions&&!this._gridMenuOptions.hideExportCsvCommand){let V="export-csv";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconExportCsvCommand||"fa fa-download",titleKey:`${z}${(f=B?.exportCsvCommandKey)!==null&&f!==void 0?f:"EXPORT_TO_CSV"}`,disabled:!1,command:V,positionOrder:54})}if(this.gridOptions&&this.gridOptions.enableExcelExport&&this._gridMenuOptions&&!this._gridMenuOptions.hideExportExcelCommand){let V="export-excel";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${z}${(m=B?.exportExcelCommandKey)!==null&&m!==void 0?m:"EXPORT_TO_EXCEL"}`,disabled:!1,command:V,positionOrder:55})}if((!((_=this.gridOptions)===null||_===void 0)&&_.enableExport||!((C=this.gridOptions)===null||C===void 0)&&C.enableTextExport)&&this._gridMenuOptions&&!this._gridMenuOptions.hideExportTextDelimitedCommand){let V="export-text-delimited";e.some(H=>H!=="divider"&&H.hasOwnProperty("command")&&H.command===V)||R.push({iconCssClass:this._gridMenuOptions.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${z}${(b=B?.exportTextDelimitedCommandKey)!==null&&b!==void 0?b:"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:V,positionOrder:56})}let G=((E=this._gridMenuOptions)===null||E===void 0?void 0:E.commandItems)||[];return this.gridOptions&&this._gridMenuOptions&&(Array.isArray(R)&&R.length>0||Array.isArray(G)&&G.length>0)&&(this._gridMenuOptions.commandTitle=this._gridMenuOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu")),R}executeGridMenuInternalCustomCommands(e,t){var i,o,s,l,a;let d=((i=this.sharedService)===null||i===void 0?void 0:i.externalRegisteredResources)||[];if(t?.command)switch(t.command){case"clear-pinning":let u=[...this.sharedService.visibleColumns],p={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(p),this.sharedService.gridOptions.frozenColumn=p.frozenColumn,this.sharedService.gridOptions.frozenRow=p.frozenRow,this.sharedService.gridOptions.frozenBottom=p.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=p.enableMouseWheelScrollHandler,Array.isArray(u)&&this.grid.setColumns(u),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":let m=d.find(x=>x.className==="TextExportService");m?.exportToFile?m.exportToFile({delimiter:Vi.comma,format:_i.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };");break;case"export-excel":let _=d.find(x=>x.className==="ExcelExportService");_?.exportToExcel?_.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, registerExternalResources: [new ExcelExportService()] };");break;case"export-text-delimited":let C=d.find(x=>x.className==="TextExportService");C?.exportToFile?C.exportToFile({delimiter:Vi.tab,format:_i.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };");break;case"toggle-filter":let b=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.showHeaderRow)!==null&&s!==void 0?s:!1;b=!b,this.grid.setHeaderRowVisibility(b),b===!0&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":let E=(a=(l=this.gridOptions)===null||l===void 0?void 0:l.showPreHeaderPanel)!==null&&a!==void 0?a:!1;this.grid.setPreHeaderPanelVisibility(!E);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset();break;default:break}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"fa fa-bars",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){var t;(this._menuElm!==e.target&&!(!((t=this._menuElm)===null||t===void 0)&&t.contains(e.target))&&this._isMenuOpen||e.target.className==="close")&&this.hideMenu(e)}handleMenuItemCommandClick(e,t,i){var o,s;if(i==="divider"||i.command&&(i.disabled||i.divider))return!1;let l={grid:this.grid,command:i.command,item:i,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,l),this.pubSubService.publish("onGridMenuCommand",l),typeof((o=this._gridMenuOptions)===null||o===void 0?void 0:o.onCommand)=="function"&&this._gridMenuOptions.onCommand(e,l),this.onCommand.notify(l,null,this),typeof i.action=="function"&&i.action.call(this,e,l),!(!((s=this._gridMenuOptions)===null||s===void 0)&&s.leaveOpen)&&!e.defaultPrevented&&this.hideMenu(e),e.preventDefault(),e.stopPropagation()}recreateCommandList(e,t){var i;this.populateCommandOrOptionTitle("command",e,this._commandMenuElm);let o=(i=this._commandMenuElm.querySelector(".slick-command-header"))!==null&&i!==void 0?i:N("div",{className:"slick-command-header"});o.classList.add("with-close"),Qr.call(this,o),this._commandMenuElm.appendChild(o),this.populateCommandOrOptionItems("command",e,this._commandMenuElm,e?.commandItems||[],t,this.handleMenuItemCommandClick)}};function Qr(r){let t=N("button",{type:"button",className:"close",innerHTML:"&times;",dataset:{dismiss:this instanceof Uo?"slick-column-picker":"slick-grid-menu"}});t.setAttribute("aria-label","Close"),r.appendChild(t)}function Zr(r){var e,t,i;let o=this;!((e=o.addonOptions)===null||e===void 0)&&e.columnTitle&&(o._columnTitleElm=N("div",{className:"slick-menu-title",textContent:(i=(t=o.addonOptions)===null||t===void 0?void 0:t.columnTitle)!==null&&i!==void 0?i:o._defaults.columnTitle}),r.appendChild(o._columnTitleElm))}function Jr(r){var e,t;let i=this,o=i instanceof Uo?"columnPicker":"gridMenu";if(r.target.dataset.option==="autoresize"){let s=i.getVisibleColumns(),l=r.target.checked;i.grid.setOptions({forceFitColumns:l}),i.grid.setColumns(s);return}if(r.target.dataset.option==="syncresize"){i.grid.setOptions({syncColumnCellResize:!!r.target.checked});return}if(r.target.type==="checkbox"){i._areVisibleColumnDifferent=!0;let s=r.target.checked,l=r.target.dataset.columnid||"",a=[];if(i._columnCheckboxes.forEach((p,f)=>{p.checked&&a.push(i.columns[f])}),!a.length){r.target.checked=!0;return}if(i.grid.setColumns(a),Array.isArray(a)&&a.length!==i.sharedService.visibleColumns.length&&(i.sharedService.visibleColumns=a),i.gridOptions.enableRowSelection&&s){let p=i.grid.getSelectedRows();i.grid.setSelectedRows(p)}let d=(e=i.gridOptions.frozenColumn)!==null&&e!==void 0?e:-1;d>=0&&i.extensionUtility.readjustFrozenColumnIndexWhenNeeded(d,i.columns,a);let u={columnId:l,showing:s,allColumns:i.columns,visibleColumns:a,columns:a,grid:i.grid};i.pubSubService.publish(`on${To(o)}ColumnsChanged`,u),typeof((t=i.addonOptions)===null||t===void 0?void 0:t.onColumnsChanged)=="function"&&i.addonOptions.onColumnsChanged(r,u),i.onColumnsChanged.notify(u,null,i)}}function es(r){var e,t;let i=this,o=i instanceof vn?"gridmenu-":"";for(let s of i.columns){let l=s.id,a=document.createElement("li");s.excludeFromColumnPicker&&(a.className="hidden");let d=N("input",{type:"checkbox",id:`${i._gridUid}-${o}colpicker-${l}`,dataset:{columnid:`${l}`}});i.grid.getColumnIndex(l)>=0&&(d.checked=!0),a.appendChild(d),i._columnCheckboxes.push(d);let f=(typeof r?.headerColumnValueExtractor=="function"?r.headerColumnValueExtractor:i._defaults.headerColumnValueExtractor)(s,i.gridOptions);a.appendChild(N("label",{htmlFor:`${i._gridUid}-${o}colpicker-${l}`,innerHTML:kt(i.gridOptions,f)})),i._listElm.appendChild(a)}if((!r.hideForceFitButton||!r.hideSyncResizeButton)&&i._listElm.appendChild(document.createElement("hr")),!r?.hideForceFitButton){let s=document.createElement("li");s.appendChild(N("input",{type:"checkbox",id:`${i._gridUid}-${o}colpicker-forcefit`,checked:i.gridOptions.forceFitColumns,dataset:{option:"autoresize"}})),s.appendChild(N("label",{htmlFor:`${i._gridUid}-${o}colpicker-forcefit`,textContent:(e=r?.forceFitTitle)!==null&&e!==void 0?e:""})),i._listElm.appendChild(s)}if(!r?.hideSyncResizeButton){let s=document.createElement("li");s.appendChild(N("input",{type:"checkbox",id:`${i._gridUid}-${o}colpicker-syncresize`,checked:i.gridOptions.syncColumnCellResize,dataset:{option:"syncresize"}})),s.appendChild(N("label",{htmlFor:`${i._gridUid}-${o}colpicker-syncresize`,textContent:(t=r?.syncResizeTitle)!==null&&t!==void 0?t:""})),i._listElm.appendChild(s)}}function _n(){let r=this,e=r.grid.getColumns().slice(0),t=new Array(r.columns.length);for(let i=0;i<t.length;i++)r.grid.getColumnIndex(r.columns[i].id)===void 0?t[i]=r.columns[i]:t[i]=e.shift();r._columns=t}var Uo=class{constructor(e,t,i){var o,s,l,a;this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._columnCheckboxes=[],this.onColumnsChanged=new Slick.Event,this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:d=>d.name},this._bindEventService=new We,this._eventHandler=new Slick.EventHandler,this._columns=(o=this.sharedService.allColumns)!==null&&o!==void 0?o:[],this._gridUid=(a=(l=(s=this.grid)===null||s===void 0?void 0:s.getUID)===null||l===void 0?void 0:l.call(s))!==null&&a!==void 0?a:"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){var e;return(e=this.sharedService.gridOptions)!==null&&e!==void 0?e:{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){var e;this._gridUid=(e=this.grid.getUID())!==null&&e!==void 0?e:"",this.gridOptions.columnPicker=P(P({},this._defaults),this.gridOptions.columnPicker),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,_n.bind(this)),this._menuElm=N("div",{className:`slick-column-picker ${this._gridUid}`,style:{display:"none"}}),this._menuElm.setAttribute("aria-expanded","false"),Zr.call(this,this._menuElm),Qr.call(this,this._menuElm),this._listElm=N("div",{className:"slick-column-picker-list"}),this._bindEventService.bind(this._menuElm,"click",Jr.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this)),document.body.appendChild(this._menuElm)}dispose(){var e,t,i,o;this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),(t=(e=this._listElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e),(o=(i=this._menuElm)===null||i===void 0?void 0:i.remove)===null||o===void 0||o.call(i)}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.addonOptions&&this.updateAllTitles(this.addonOptions)}handleBodyMouseDown(e){(this._menuElm!==e.target&&!this._menuElm.contains(e.target)||e.target.className==="close")&&(this._menuElm.setAttribute("aria-expanded","false"),this._menuElm.style.display="none")}handleHeaderContextMenu(e){e.preventDefault(),Ve(this._listElm),_n.call(this),this._columnCheckboxes=[],es.call(this,this.addonOptions),this.repositionMenu(e)}repositionMenu(e){this._menuElm.style.top=`${e.pageY-10}px`,this._menuElm.style.left=`${e.pageX-10}px`,this._menuElm.style.minHeight=Ri(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=Ri(this.addonOptions.maxHeight,`${window.innerHeight-e.clientY}px`),this._menuElm.style.display="block",this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm)}updateAllTitles(e){var t;!((t=this._columnTitleElm)===null||t===void 0)&&t.textContent&&e.columnTitle&&(this._columnTitleElm.textContent=e.columnTitle)}};var Cn=(r,e,t,i,o,s)=>{let l=i.params||{};if(!l.formatters||!Array.isArray(l.formatters))throw new Error(`The multiple formatter requires the "formatters" to be provided as a column params.
    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);let a=l.formatters,d=t;for(let u of a)d=u(r,e,d,i,o,s);return d};var Ml=Oi(bo());var Fl=Ml.default||Ml;function $a(r,e){if(Array.isArray(r)){for(let t of r)if(t.editor)if(t.formatter&&t.formatter!==Cn&&t.formatter!==e){let i=t.formatter;t.formatter=Cn,t.params=Me(P({},t.params),{formatters:[i,e]})}else t.formatter&&t.formatter===Cn&&t.params?t.params.formatters.findIndex(i=>i===e)===-1&&(t.params.formatters=[...t.params.formatters,e]):t.formatter=e}}function we(r,e,t,i){var o;let s=t&&typeof t.getOptions=="function"?t.getOptions():{},l=e&&e.params;return l&&l.hasOwnProperty(r)?l[r]:!((o=s.formatterOptions)===null||o===void 0)&&o.hasOwnProperty(r)?s.formatterOptions[r]:i}function bi(r,e){let t=zt(r);return(i,o,s,l,a,d)=>{var u,p,f,m,_;let C=d&&typeof d.getOptions=="function"?d.getOptions():{},b=(p=(u=C?.formatterOptions)===null||u===void 0?void 0:u.dateSeparator)!==null&&p!==void 0?p:e,E=(f=l?.type)!==null&&f!==void 0?f:O.date,x=zt(E),R=(_=(m=l?.params)===null||m===void 0?void 0:m.parseDateAsUtc)!==null&&_!==void 0?_:!1,L=Fl(s,x,!1).isValid(),z=s;if(s&&L&&(z=R?Fl.utc(s).format(t):Fl(s).format(t)),z&&b!==e){let B=new RegExp(e,"ig");z=z.replace(B,b)}return z}}function za(r,e,t,i,o,s){let l=!1;s&&s.hasOwnProperty("exportWithFormatter")&&(l=!!s.exportWithFormatter),t&&t.hasOwnProperty("exportWithFormatter")&&(l=!!t.exportWithFormatter);let a;i&&t.exportCustomFormatter?a=t.exportCustomFormatter:l&&t.formatter&&(a=t.formatter);let d=Yo(a,r,e,t,i,o);return s?.sanitizeDataExport?qi(d):d}function Yo(r,e,t,i,o,s){let l="",d=i.field||i.id||"";if(typeof i.field=="string"&&i.field.indexOf(".")>0){let p=i.field.split(".");d=p.length>0?p[0]:i.field}let u=o.hasOwnProperty(d)?o[d]:null;if(typeof r=="function"){let p=r(e,t,u,i,o,s);l=p,p&&typeof p=="object"&&p.hasOwnProperty("text")&&(l=p.text),l==null&&(l="")}else l=o.hasOwnProperty(d)?u:"",l==null&&(l="");return typeof l=="object"&&Object.entries(l).length===0&&(l=""),l}var ts=class extends mn{constructor(e,t,i,o){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.treeDataService=o,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[]},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(i.gridOptions.contextMenu)}init(e){this._addonOptions=P(P({},this._defaults),e);let t=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...t,...this.addMenuCustomCommands(t)],this._addonOptions=P({},this._addonOptions),this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){var e,t;let i=(t=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)!==null&&t!==void 0?t:{},o=this.sharedService.gridOptions.contextMenu;if(o&&i?.enableTranslate){let s=o.commandItems||[],l=o.optionItems||[];o.commandTitleKey&&(o.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.commandTitleKey,"TEXT_COMMANDS")||o.commandTitle),o.optionTitleKey&&(o.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.optionTitleKey,"TEXT_COMMANDS")||o.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(s),this.extensionUtility.translateMenuItemsFromTitleKey(l)}}handleClick(e,t){let i=this.grid.getCellFromEvent(e);if(i){let o=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell];if(t=t||{},t.cell=i.cell,t.row=i.row,t.column=s,t.dataContext=o,t.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,t))return;this._menuElm=this.createMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&(this.repositionMenu(e),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){var t;let i=[],o=this.sharedService&&this.sharedService.gridOptions||{},s=o?.contextMenu,l=(t=this.sharedService)===null||t===void 0?void 0:t.dataView,a=Et(o);if(s&&!s.hideCopyCellValueCommand){let d="copy";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconCopyCellValueCommand||"fa fa-clone",titleKey:`${a}COPY`,disabled:!1,command:d,positionOrder:50,action:(u,p)=>{this.copyToClipboard(p)},itemUsabilityOverride:u=>{let p=u?.column,f=u?.dataContext;if(typeof p.queryFieldNameGetterFn=="function"){let m=So(p,f,"");if(m!==""&&m!==void 0)return!0}else if(p&&f.hasOwnProperty(p.field))return f[p.field]!==""&&f[p.field]!==null&&f[p.field]!==void 0;return!1}})}if((o?.enableExport||o?.enableTextExport)&&s&&!s.hideExportCsvCommand){let d="export-csv";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconExportCsvCommand||"fa fa-download",titleKey:`${a}EXPORT_TO_CSV`,disabled:!1,command:d,positionOrder:51,action:()=>{var u;let f=(((u=this.sharedService)===null||u===void 0?void 0:u.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(f?.exportToFile)f.exportToFile({delimiter:Vi.comma,format:_i.csv});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };")}})}if(o&&o.enableExcelExport&&s&&!s.hideExportExcelCommand){let d="export-excel";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${a}EXPORT_TO_EXCEL`,disabled:!1,command:d,positionOrder:52,action:()=>{var u;let f=(((u=this.sharedService)===null||u===void 0?void 0:u.externalRegisteredResources)||[]).find(m=>m.className==="ExcelExportService");if(f?.exportToExcel)f.exportToExcel();else throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, registerExternalResources: [new ExcelExportService()] };")}})}if((o?.enableExport||o?.enableTextExport)&&s&&!s.hideExportTextDelimitedCommand){let d="export-text-delimited";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${a}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:d,positionOrder:53,action:()=>{var u;let f=(((u=this.sharedService)===null||u===void 0?void 0:u.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(f?.exportToFile)f.exportToFile({delimiter:Vi.tab,format:_i.txt});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };")}})}if(o&&(o.enableGrouping||o.enableDraggableGrouping||o.enableTreeData)){if(s&&!s.hideCopyCellValueCommand&&i.push({divider:!0,command:"",positionOrder:54}),o&&!o.enableTreeData&&s&&!s.hideClearAllGrouping){let d="clear-grouping";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconClearGroupingCommand||"fa fa-times",titleKey:`${a}CLEAR_ALL_GROUPING`,disabled:!1,command:d,positionOrder:55,action:()=>{l.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{let u=l&&l.getGrouping&&l.getGrouping();return Array.isArray(u)&&u.length>0}})}if(o&&s&&!s.hideCollapseAllGroups){let d="collapse-all-groups";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconCollapseAllGroupsCommand||"fa fa-compress",titleKey:`${a}COLLAPSE_ALL_GROUPS`,disabled:!1,command:d,positionOrder:56,action:()=>{o.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):l.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(o.enableTreeData)return!0;let u=l&&l.getGrouping&&l.getGrouping();return Array.isArray(u)&&u.length>0}})}if(o&&s&&!s.hideExpandAllGroups){let d="expand-all-groups";e.some(u=>u!=="divider"&&u.hasOwnProperty("command")&&u.command===d)||i.push({iconCssClass:s.iconExpandAllGroupsCommand||"fa fa-expand",titleKey:`${a}EXPAND_ALL_GROUPS`,disabled:!1,command:d,positionOrder:57,action:()=>{o.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):l.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(o.enableTreeData)return!0;let u=l&&l.getGrouping&&l.getGrouping();return Array.isArray(u)&&u.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(i),i}copyToClipboard(e){var t,i,o,s,l;try{if(e&&e.grid&&e.command){let a=(i=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)!==null&&i!==void 0?i:{},d=(o=e?.cell)!==null&&o!==void 0?o:0,u=(s=e?.row)!==null&&s!==void 0?s:0,p=e?.column,f=e?.dataContext,m=(l=this.sharedService)===null||l===void 0?void 0:l.slickGrid,_=a&&(a.excelExportOptions||P(P({},a.exportOptions),a.textExportOptions)),C=za(u,d,p,f,m,_);typeof p.queryFieldNameGetterFn=="function"&&(C=So(p,f,""));let b=C;typeof C=="string"&&(b=C.replace(/^([·|⮞|⮟]\s*)|([·|⮞|⮟])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());let E=document.createElement("textarea");E&&document.body&&(E.style.position="absolute",E.style.opacity="0",E.value=b,document.body.appendChild(E),E.select(),document.execCommand("copy",!1,b)&&E.remove())}}catch{}}sortMenuItems(){var e,t;let i=(t=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)===null||t===void 0?void 0:t.contextMenu;i&&(this.extensionUtility.sortItems(i.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(i.optionItems||[],"positionOrder"))}};var is=class{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._gridColumns=[],this._gridUid="",this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._bindEventService=new We,this._eventHandler=new Slick.EventHandler,this.onGroupChanged=new Slick.Event}get addonOptions(){return this._addonOptions}get dataView(){var e,t,i;return(i=(t=(e=this.grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get dropboxElement(){return this._dropboxElm}get droppableInstance(){return this._droppableInstance}get sortableInstance(){return this._sortableInstance}get eventHandler(){return this._eventHandler}get grid(){var e,t;return(t=(e=this._grid)!==null&&e!==void 0?e:this.sharedService.slickGrid)!==null&&t!==void 0?t:{}}get gridOptions(){var e;return(e=this.sharedService.gridOptions)!==null&&e!==void 0?e:{}}get gridUid(){var e,t;return this._gridUid||((t=(e=this.grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:"")}get gridUidSelector(){return this.gridUid?`#${this.gridUid}`:""}init(e,t){var i,o,s,l,a,d;if(this._addonOptions=P(P({},this._defaults),t),this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropboxElm=e.getPreHeaderPanel(),!this._addonOptions.hideToggleAllButton){this._groupToggler=N("div",{className:"slick-group-toggle-all",title:(i=this._addonOptions.toggleAllPlaceholderText)!==null&&i!==void 0?i:"",style:{display:"none"}});let u=N("span",{className:"slick-group-toggle-all-icon"});this._groupToggler.appendChild(u),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=(o=this._addonOptions.toggleAllPlaceholderText)!==null&&o!==void 0?o:"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(N("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropboxElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(u,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(u,!1,!1)))}this._dropboxPlaceholderElm=N("div",{className:"slick-draggable-dropbox-toggle-placeholder"}),this.gridOptions.enableTranslate&&(!((s=this._addonOptions)===null||s===void 0)&&s.dropPlaceHolderTextKey)&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropboxPlaceholderElm.textContent=(d=(a=(l=this._addonOptions)===null||l===void 0?void 0:l.dropPlaceHolderText)!==null&&a!==void 0?a:this._defaults.dropPlaceHolderText)!==null&&d!==void 0?d:"",this._dropboxElm.appendChild(this._dropboxPlaceholderElm),this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,(u,p)=>{var f;let m=p.node;if(!yr((f=p.column)===null||f===void 0?void 0:f.grouping)&&m&&(m.style.cursor="pointer",this._addonOptions.groupIconCssClass)){let _=N("span",{className:"slick-column-groupable"});this._addonOptions.groupIconCssClass&&_.classList.add(...this._addonOptions.groupIconCssClass.split(" ")),m.appendChild(_)}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(let u of this._gridColumns){let p=u.field;e.updateColumnHeader(p)}}return this}dispose(){this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),Ve(document.querySelector(".slick-preheader-panel")),this._grid=void 0}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");let e=this._dropboxElm.querySelectorAll(".slick-dropped-grouping");for(let t of Array.from(e)){let i=document.querySelector(".slick-groupby-remove");i?.remove(),t?.remove()}this._dropboxPlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}setColumns(e){this._gridColumns=e}setDroppedGroups(e){let t=Array.isArray(e)?e:[e];this._dropboxPlaceholderElm.style.display="none";for(let i of t){let o=$(this.grid.getHeaderColumn(i));this.handleGroupByDrop(this._dropboxElm,o)}}setupColumnReorder(e,t,i,o,s,l,a,d,u){t.filter(":ui-sortable").sortable("destroy");let p=e.getPreHeaderPanel();return t.sortable({distance:3,cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,appendTo:"body",start:(f,m)=>{$(m.helper).addClass("slick-header-column-active");let _=p.querySelector(".slick-draggable-dropbox-toggle-placeholder");_&&(_.style.display="inline-block");let C=p.querySelector(".slick-dropped-grouping");C&&(C.style.display="none")},beforeStop:(f,m)=>{if($(m.helper).removeClass("slick-header-column-active"),p.querySelectorAll(".slick-dropped-grouping").length>0){let C=p.querySelector(".slick-draggable-dropbox-toggle-placeholder");C&&(C.style.display="none");let b=p.querySelector(".slick-dropped-grouping");b&&(b.style.display="inline-block")}},stop:f=>{if(!e.getEditorLock().commitCurrentEdit()){$(f.target).sortable("cancel");return}let m=t.sortable("toArray");if(t.length>1)for(let C=1,b=t.length;C<b;C+=1){let x=$(t[C]).sortable("toArray");for(let R of x)m.push(R)}let _=[];for(let C of m)_.push(l[a(C.replace(d,""))]);o(_),u(e.onColumnsReordered,{grid:this.grid}),f.stopPropagation(),s()}})}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,t,i,o){let s=document.querySelector(`${this.gridUidSelector}_${e}_entry > .slick-groupby-remove`);s&&this._bindEventService.bind(s,"click",()=>{let l=this._bindEventService.boundedEvents.filter(a=>a.element===s);for(let a of l)this._bindEventService.unbind(a.element,"click",a.listener);this.removeGroupBy(e,i,o)})}handleGroupByDrop(e,t){let i=t.attr("id").replace(this._gridUid,""),o=!0;this.columnsGroupBy.forEach(s=>{s.id===i&&(o=!1)}),o&&(this._gridColumns.forEach(s=>{var l;if(s.id===i&&s.grouping!==null&&!yr(s.grouping)){let a=t.children(".slick-column-name").first(),d=N("div",{id:`${this._gridUid}_${s.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${s.id}`}}),u=N("div",{textContent:a.length?a.text():t.text(),style:{display:"inline-flex"}});d.appendChild(u);let p=N("div",{className:"slick-groupby-remove"});if(this._addonOptions.deleteIconCssClass&&p.classList.add(...this._addonOptions.deleteIconCssClass.split(" ")),this._addonOptions.deleteIconCssClass||p.classList.add("slick-groupby-remove-image"),d.appendChild(p),d.appendChild(document.createElement("div")),e.appendChild(d),this._groupToggler&&this.columnsGroupBy.length===0){let f=this._groupToggler.querySelector(".slick-group-toggle-all-icon");!((l=s.grouping)===null||l===void 0)&&l.collapsed?(f?.classList.add("collapsed"),f?.classList.remove("expanded")):(f?.classList.add("expanded"),f?.classList.remove("collapsed"))}this.addColumnGroupBy(s),this.addGroupByRemoveClickHandler(s.id,e,t,d)}}),this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-block"))}removeFromArray(e,t){if(Array.isArray(e)){let i=e.findIndex(o=>o.id===t.id);i>=0&&e.splice(i,1)}return e}removeGroupBy(e,t,i){i.remove();let o=[];this._gridColumns.forEach(s=>o[s.id]=s),this.removeFromArray(this.columnsGroupBy,o[e]),this.columnsGroupBy.length===0&&(this._dropboxPlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}setupColumnDropbox(){this._droppableInstance=$(this._dropboxElm).droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",deactivate:()=>{this._dropboxElm.classList.remove("slick-header-column-denied")},drop:(e,t)=>{this.handleGroupByDrop(e.target,t.draggable)},over:(e,t)=>{let i=t.draggable.attr("id").replace(this._gridUid,"");for(let o of this._gridColumns)o.id===i&&!o.grouping&&this._dropboxElm.classList.add("slick-header-column-denied")}}),this._sortableInstance=$(this._dropboxElm).sortable({items:"div.slick-dropped-grouping",cursor:"default",tolerance:"pointer",helper:"clone",update:e=>{let t=$(e.target).sortable("toArray",{attribute:"data-id"}),i=[];for(let o of t)for(let s of this.columnsGroupBy)if(s.id===o){i.push(s);break}this.columnsGroupBy=i,this.updateGroupBy("sort-group")}}),this._groupToggler&&this._bindEventService.bind(this._groupToggler,"click",e=>{let t=e.target.classList.contains("slick-group-toggle-all-icon")?e.target:e.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(t,t?.classList.contains("expanded"))})}toggleGroupToggler(e,t=!0,i=!0){e&&(t===!0?(e.classList.add("collapsed"),e.classList.remove("expanded"),i&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),i&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(this.columnsGroupBy.length===0){this.dataView.setGrouping([]),this._dropboxPlaceholderElm.style.display="inline-block",this.onGroupChanged.notify({caller:e,groupColumns:[]});return}let t=[];this.columnsGroupBy.forEach(i=>t.push(i.grouping)),this.dataView.setGrouping(t),this._dropboxPlaceholderElm.style.display="none",this.onGroupChanged.notify({caller:e,groupColumns:t})}};var bn=class{constructor(){this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new Slick.EventHandler,this._options=this._defaults}get eventHandler(){return this._eventHandler}get dataView(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get grid(){return this._grid}init(e,t){this._grid=e,this._options=P(P({},this._defaults),t),this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}dispose(){var e;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options=P(P({},this._options),e)}getGroupRowMetadata(e){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${e?.level||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editor:null}}}}getTotalsRowMetadata(e){var t;return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${((t=e?.group)===null||t===void 0?void 0:t.level)||0}`,formatter:this._options.totalsFormatter,editor:null}}defaultGroupCellFormatter(e,t,i,o,s){var l,a;if(!this._options.enableExpandCollapse)return s.title;let d=s.level||0,u=(a=(l=this._options)===null||l===void 0?void 0:l.indentation)!==null&&a!==void 0?a:15,p=`${d*u}px`,f=s.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass;return`<span class="${this._options.toggleCssClass} ${f}" aria-expanded="${!s.collapsed}" style="margin-left: ${p}"></span><span class="${this._options.groupTitleCssClass}" level="${d}">${s.title||""}</span>`}defaultTotalsCellFormatter(e,t,i,o,s,l){var a,d;return(d=(a=o?.groupTotalsFormatter)===null||a===void 0?void 0:a.call(o,s,o,l))!==null&&d!==void 0?d:""}handleGridClick(e,t){let i=e.target,o=this.grid.getDataItem(t.row);o instanceof Slick.Group&&i.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(o),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){if(this._options.enableExpandCollapse&&e.keyCode===Ie.SPACE){let t=this.grid.getActiveCell();if(t){let i=this.grid.getDataItem(t.row);i instanceof Slick.Group&&(this.handleDataViewExpandOrCollapse(i),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){let t=this.grid.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:t.top,ignoreDiffsAfter:t.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}};var os=class extends Qi{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new We,this._eventHandler=new Slick.EventHandler,this.init(i.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions=P(P({},this._defaults),e),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(e=>e.remove())}handleHeaderCellRendered(e,t){var i;let o=t.column;if(!((i=o.header)===null||i===void 0)&&i.buttons&&Array.isArray(o.header.buttons)){let s=o.header.buttons.length;for(;s--;){let l=o.header.buttons[s],a=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,l,t,this.handleButtonClick.bind(this));a&&(this._buttonElms.push(a),t.node.appendChild(a))}}}handleBeforeHeaderCellDestroy(e,t){var i,o,s;if(!((i=t.column.header)===null||i===void 0)&&i.buttons&&(!((o=this._addonOptions)===null||o===void 0)&&o.buttonCssClass)){let a=(((s=this._addonOptions)===null||s===void 0?void 0:s.buttonCssClass)||"").replace(/(\s+)/g,".");a&&t.node.querySelectorAll(`.${a}`).forEach(d=>d.remove())}}handleButtonClick(e,t,i,o){var s;if(i.command&&!i.disabled){let l=i.command||"",a={grid:this.grid,column:o,button:i};l&&(a.command=l),typeof i.action=="function"&&!i.disabled&&i.action.call(this,e,a),l!==null&&!i.disabled&&(!((s=this._addonOptions)===null||s===void 0)&&s.onCommand)&&(this.pubSubService.publish("onHeaderButtonCommand",a),this._addonOptions.onCommand(e,a),o?.id&&this.grid.updateColumnHeader(o.id))}e.preventDefault(),e.stopPropagation()}};var ns=class extends Qi{constructor(e,t,i,o,s){super(e,i,o),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=o,this.sortService=s,this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:""},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(o.gridOptions.headerMenu)}init(e){this._addonOptions=P(P({},this._defaults),e),this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(t,i)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(i.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){var e;super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),(e=this._menuElm)===null||e===void 0||e.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){var t,i,o;if(!((i=(t=this.sharedService)===null||t===void 0?void 0:t.slickGrid)===null||i===void 0)&&i.getColumnIndex){let s=this.sharedService.slickGrid.getColumnIndex(e.id),l=this.sharedService.slickGrid.getColumns(),a=(o=this.sharedService.gridOptions.frozenColumn)!==null&&o!==void 0?o:-1;a>=0&&a>=s&&(this.sharedService.gridOptions.frozenColumn=a-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));let d=Kn(l,s);this.sharedService.visibleColumns=d,this.sharedService.slickGrid.setColumns(d),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:d,hiddenColumn:e})}}hideMenu(){var e,t;(e=this._menuElm)===null||e===void 0||e.remove(),this._menuElm=void 0,(t=this._activeHeaderColumnElm)===null||t===void 0||t.classList.remove("slick-header-column-active")}showMenu(e,t,i){var o,s,l;let a={grid:this.grid,column:t,menu:i};typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",a),typeof((o=this.addonOptions)===null||o===void 0?void 0:o.onBeforeMenuShow)=="function"&&((s=this.addonOptions)===null||s===void 0?void 0:s.onBeforeMenuShow(e,a))===!1)||(this._menuElm||(this._menuElm=N("div",{className:"slick-header-menu",style:{minWidth:`${this.addonOptions.minWidth}px`}}),this._menuElm.setAttribute("aria-expanded","true"),(l=this.grid.getContainerNode())===null||l===void 0||l.appendChild(this._menuElm)),Ve(this._menuElm),this.populateHeaderMenuCommandList(e,i,a))}translateHeaderMenu(){var e;!((e=this.sharedService.gridOptions)===null||e===void 0)&&e.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,t){var i;let o=t.column,s=(i=o.header)===null||i===void 0?void 0:i.menu;if(s&&t.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,t))return;let l=N("div",{className:"slick-header-menu-button"});this.addonOptions.buttonCssClass&&l.classList.add(...this.addonOptions.buttonCssClass.split(" ")),this.addonOptions.tooltip&&(l.title=this.addonOptions.tooltip),t.node.appendChild(l),this._bindEventService.bind(l,"click",a=>this.showMenu(a,o,s))}}handleBeforeHeaderCellDestroy(e,t){var i;!((i=t.column.header)===null||i===void 0)&&i.menu&&t.node.querySelectorAll(".slick-header-menu-button").forEach(s=>s.remove())}handleBodyMouseDown(e){var t;(this._menuElm!==e.target&&!(!((t=this._menuElm)===null||t===void 0)&&t.contains(e.target))||e.target.className==="close")&&this.hideMenu()}handleMenuItemCommandClick(e,t,i,o){var s;if(i==="divider"||i.command&&(i.disabled||i.divider))return!1;let l={grid:this.grid,command:i.command,column:o,item:i};this.executeHeaderMenuInternalCommands(e,l),this.pubSubService.publish("onHeaderMenuCommand",l),typeof((s=this.addonOptions)===null||s===void 0?void 0:s.onCommand)=="function"&&this.addonOptions.onCommand(e,l),typeof i.action=="function"&&i.action.call(this,e,l),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}addHeaderMenuCustomCommands(e){let t=this.sharedService.gridOptions,i=t.headerMenu||{},o=Et(t);return Array.isArray(e)&&t.enableHeaderMenu&&e.forEach(s=>{var l,a,d;if(s&&!s.excludeFromHeaderMenu){s.header?s.header.menu||(s.header.menu={items:[]}):s.header={menu:{items:[]}};let u=(d=(a=(l=s?.header)===null||l===void 0?void 0:l.menu)===null||a===void 0?void 0:a.items)!==null&&d!==void 0?d:[],p=!1;i&&!i.hideFreezeColumnsCommand&&(p=!0,u.some(f=>f!=="divider"&&f?.command==="freeze-columns")||u.push({iconCssClass:i.iconFreezeColumns||"fa fa-thumb-tack",titleKey:`${o}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:47})),i&&!i.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(p=!0,u.some(f=>f!=="divider"&&f?.command==="column-resize-by-content")||u.push({iconCssClass:i.iconColumnResizeByContentCommand||"fa fa-arrows-h",titleKey:`${o}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:48})),p&&!u.some(f=>f!=="divider"&&f.positionOrder===49)&&u.push({divider:!0,command:"",positionOrder:49}),t.enableSorting&&s.sortable&&i&&!i.hideSortCommands&&(u.some(f=>f!=="divider"&&f?.command==="sort-asc")||u.push({iconCssClass:i.iconSortAscCommand||"fa fa-sort-asc",titleKey:`${o}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),u.some(f=>f!=="divider"&&f?.command==="sort-desc")||u.push({iconCssClass:i.iconSortDescCommand||"fa fa-sort-desc",titleKey:`${o}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),u.some(f=>f!=="divider"&&f.positionOrder===52)||u.push({divider:!0,command:"",positionOrder:52}),!i.hideClearSortCommand&&!u.some(f=>f!=="divider"&&f?.command==="clear-sort")&&u.push({iconCssClass:i.iconClearSortCommand||"fa fa-unsorted",titleKey:`${o}REMOVE_SORT`,command:"clear-sort",positionOrder:54})),t.enableFiltering&&s.filterable&&i&&!i.hideFilterCommand&&!i.hideClearFilterCommand&&!u.some(f=>f!=="divider"&&f?.command==="clear-filter")&&u.push({iconCssClass:i.iconClearFilterCommand||"fa fa-filter",titleKey:`${o}REMOVE_FILTER`,command:"clear-filter",positionOrder:53}),i&&!i.hideColumnHideCommand&&!u.some(f=>f!=="divider"&&f?.command==="hide-column")&&u.push({iconCssClass:i.iconColumnHideCommand||"fa fa-times",titleKey:`${o}HIDE_COLUMN`,command:"hide-column",positionOrder:55}),this.extensionUtility.translateMenuItemsFromTitleKey(u),this.extensionUtility.sortItems(u,"positionOrder")}}),i}clearColumnFilter(e,t){t?.column&&this.filterService.clearFilterByColumnId(e,t.column.id)}clearColumnSort(e,t){t?.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,t.column.id)}executeHeaderMenuInternalCommands(e,t){var i;if(t?.command)switch(t.command){case"hide-column":this.hideColumn(t.column),!((i=this.sharedService.gridOptions)===null||i===void 0)&&i.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,t);break;case"clear-sort":this.clearColumnSort(e,t);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:t.column.id});break;case"freeze-columns":let o=[...this.sharedService.visibleColumns],l={frozenColumn:o.findIndex(p=>p.id===t.column.id),enableMouseWheelScrollHandler:!0},a=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(l,!1,!0),this.sharedService.gridOptions.frozenColumn=l.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=l.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=t.column.id,this.sharedService.hasColumnsReordered||Array.isArray(o)&&Array.isArray(this.sharedService.allColumns)&&o.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(o):this.sharedService.slickGrid.setColumns(a),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":let u=t.command==="sort-asc";this.sortColumn(e,t,u);break;default:break}}populateHeaderMenuCommandList(e,t,i){var o,s;this.populateCommandOrOptionItems("command",this.addonOptions,this._menuElm,t.items,i,this.handleMenuItemCommandClick),this.repositionMenu(e),this.pubSubService.publish("onHeaderMenuAfterMenuShow",i),!(typeof((o=this.addonOptions)===null||o===void 0?void 0:o.onAfterMenuShow)=="function"&&((s=this.addonOptions)===null||s===void 0?void 0:s.onAfterMenuShow(e,i))===!1)&&(e.preventDefault(),e.stopPropagation())}repositionMenu(e){var t,i,o,s,l,a,d,u;let p=e.target;if(this._menuElm&&p.classList.contains("slick-header-menu-button")){let f=Ia(this.sharedService.gridContainerElement,p),m=(t=f?.left)!==null&&t!==void 0?t:0;if(this.addonOptions.autoAlign){let _=this.grid.getGridPosition();_?.width&&m+((i=this._menuElm.clientWidth)!==null&&i!==void 0?i:0)>=_.width&&(m=m+p.clientWidth-this._menuElm.clientWidth+((s=(o=this.addonOptions)===null||o===void 0?void 0:o.autoAlignOffset)!==null&&s!==void 0?s:0))}this._menuElm.style.top=`${((l=f?.top)!==null&&l!==void 0?l:0)+((d=(a=this.addonOptions)===null||a===void 0?void 0:a.menuOffsetTop)!==null&&d!==void 0?d:0)+p.clientHeight}px`,this._menuElm.style.left=`${m}px`,this._activeHeaderColumnElm=this._menuElm.closest(".slick-header-column"),(u=this._activeHeaderColumnElm)===null||u===void 0||u.classList.add("slick-header-column-active")}}resetHeaderMenuTranslations(e){e.forEach(t=>{var i,o;if(!((o=(i=t?.header)===null||i===void 0?void 0:i.menu)===null||o===void 0)&&o.items&&!t.excludeFromHeaderMenu){let s=t.header.menu.items||[];this.extensionUtility.translateMenuItemsFromTitleKey(s)}})}sortColumn(e,t,i=!0){if(t?.column){let o=t.column,s=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(o.id+""):[],l=at.local;s.push({columnId:o.id,sortCol:o,sortAsc:i}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:s,grid:this.sharedService.slickGrid}),l=at.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,s),l=at.local):t.grid.onSort.notify(s);let a=s.map(d=>{var u,p,f;return{columnId:(p=(u=d?.sortCol)===null||u===void 0?void 0:u.id)!==null&&p!==void 0?p:"",sortAsc:(f=d?.sortAsc)!==null&&f!==void 0?f:!0}});if(this.sharedService.slickGrid.setSortColumns(a),l){let d=[];a.forEach(u=>{d.push({columnId:`${u.columnId}`,direction:u.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(l,d)}}}};var or=class{constructor(){this._dragging=!1,this._handler=new Slick.EventHandler,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new Slick.Event,this.onMoveRows=new Slick.Event,this.pluginName="RowMoveManager",this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}init(e,t){var i;this._addonOptions=P(P({},this._defaults),t),this._grid=e,this._canvas=this._grid.getCanvasNode(),typeof((i=this._addonOptions)===null||i===void 0?void 0:i.usabilityOverride)=="function"&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){var e;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll()}create(e,t){var i,o;if(this._addonOptions=P(P({},this._defaults),t.rowMoveManager),Array.isArray(e)&&t){let s=this.getColumnDefinition(),l=Array.isArray(e)&&e.find(u=>u?.behavior==="selectAndMove"),a=l||s,d=(o=(i=t?.rowMoveManager)===null||i===void 0?void 0:i.columnIndexPosition)!==null&&o!==void 0?o:0;d>0?e.splice(d,0,a):e.unshift(a)}return this}getColumnDefinition(){return{id:this._addonOptions.columnId||"_move",name:"",behavior:"selectAndMove",cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:"move",resizable:!1,selectable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions=P(P({},this._addonOptions),e)}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,t){var i,o,s;if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),(i=t.guide)===null||i===void 0||i.remove(),(o=t.selectionProxy)===null||o===void 0||o.remove(),(s=t.clonedSlickRow)===null||s===void 0||s.remove(),t.canMove)){let l={grid:this._grid,rows:t.selectedRows,insertBefore:t.insertBefore};typeof this._addonOptions.onMoveRows=="function"&&this._addonOptions.onMoveRows(e,l),this.onMoveRows.notify(l)}}handleDrag(e,t){var i,o,s,l;if(this._dragging){e.stopImmediatePropagation();let a=e.pageY-((o=(i=Nt(this._canvas))===null||i===void 0?void 0:i.top)!==null&&o!==void 0?o:0);t.selectionProxy.style.top=`${a-5}px`,t.selectionProxy.style.display="block",t.clonedSlickRow&&(t.clonedSlickRow.style.top=`${a-6}px`,t.clonedSlickRow.style.display="block");let d=Math.max(0,Math.min(Math.round(a/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(d!==t.insertBefore){let u={grid:this._grid,rows:t.selectedRows,insertBefore:d};if(((l=(s=this._addonOptions)===null||s===void 0?void 0:s.onBeforeMoveRows)===null||l===void 0?void 0:l.call(s,e,u))===!1||this.onBeforeMoveRows.notify(u)===!1?t.canMove=!1:t.canMove=!0,this._usabilityOverride&&t.canMove){let p=this._grid.getDataItem(d);t.canMove=this.checkUsabilityOverride(d,p,this._grid)}t.canMove?t.guide.style.top=`${d*(this.gridOptions.rowHeight||0)}px`:t.guide.style.top="-1000px",t.insertBefore=d}}}handleDragStart(e,t){var i,o,s,l,a,d,u;let p=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},f=p.row,m=this._grid.getDataItem(f);if(this.checkUsabilityOverride(f,m,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[p.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){let b=(i=this._grid.getCellNode(p.row,p.cell))===null||i===void 0?void 0:i.closest(".slick-row");b&&(t.clonedSlickRow=b.cloneNode(!0),t.clonedSlickRow.classList.add("slick-reorder-shadow-row"),t.clonedSlickRow.style.display="none",t.clonedSlickRow.style.marginLeft=Ri((o=this._addonOptions)===null||o===void 0?void 0:o.rowMoveShadowMarginLeft,"0px"),t.clonedSlickRow.style.marginTop=Ri((s=this._addonOptions)===null||s===void 0?void 0:s.rowMoveShadowMarginTop,"0px"),t.clonedSlickRow.style.opacity=`${(a=(l=this._addonOptions)===null||l===void 0?void 0:l.rowMoveShadowOpacity)!==null&&a!==void 0?a:.95}`,t.clonedSlickRow.style.transform=`scale(${(u=(d=this.addonOptions)===null||d===void 0?void 0:d.rowMoveShadowScale)!==null&&u!==void 0?u:.75})`,this._canvas.appendChild(t.clonedSlickRow))}let _=this._addonOptions.singleRowMove?[p.row]:this._grid.getSelectedRows();(_.length===0||!_.some(b=>b===p.row))&&(_=[p.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(_));let C=this.gridOptions.rowHeight;t.selectedRows=_,t.selectionProxy=N("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:`${C*_.length}px`}}),this._canvas.appendChild(t.selectionProxy),t.guide=N("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}}),this._canvas.appendChild(t.guide),t.insertBefore=-1}}checkUsabilityOverride(e,t,i){return typeof this._usabilityOverride=="function"?this._usabilityOverride(e,t,i):!0}moveIconFormatter(e,t,i,o,s,l){return this.checkUsabilityOverride(e,s,l)?{addClasses:"cell-reorder dnd",text:""}:""}};var rs=class{constructor(e,t,i,o,s,l,a){this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=o,this.sortService=s,this.treeDataService=l,this.translaterService=a,this._extensionCreatedList={},this._extensionList={}}get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}dispose(){var e;this.sharedService.visibleColumns=[];for(let t of Object.keys(this._extensionList))if(this._extensionList.hasOwnProperty(t)){let i=this._extensionList[t];!((e=i?.instance)===null||e===void 0)&&e.dispose&&i.instance.dispose()}for(let t of Object.keys(this._extensionList))delete this._extensionList[t];this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList=null}addExtensionToList(e,t){this._extensionList[e]=t}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){var t;if(!((t=this._extensionCreatedList)===null||t===void 0)&&t.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){var t;return(t=this._extensionList)===null||t===void 0?void 0:t[e]}getExtensionInstanceByName(e){var t;return(t=this.getExtensionByName(e))===null||t===void 0?void 0:t.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){var e,t,i,o,s,l,a,d,u,p,f;if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableAutoTooltip){let m=new Ur((e=this.gridOptions)===null||e===void 0?void 0:e.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(m),this._extensionList[Le.autoTooltip]={name:Le.autoTooltip,instance:m}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new Yr,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),!((t=this.gridOptions.excelCopyBufferOptions)===null||t===void 0)&&t.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[Le.cellExternalCopyManager]={name:Le.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new qr(this.extensionUtility,this.pubSubService,this.sharedService),!((i=this.gridOptions.cellMenu)===null||i===void 0)&&i.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[Le.cellMenu]={name:Le.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){let m=(o=this.gridOptions.rowSelectionOptions)!==null&&o!==void 0?o:{};this.gridOptions.enableRowMoveManager&&((s=this.gridOptions.rowMoveManager)===null||s===void 0?void 0:s.dragToSelect)!==!1&&(m.dragToSelect=!0),this._rowSelectionModel=new Zi(m),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[Le.rowSelection]={name:Le.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new ir(this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);let m=this.getCreatedExtensionByName(Le.checkboxSelector);m&&m.instance&&(this._extensionList[Le.checkboxSelector]={name:Le.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new Uo(this.extensionUtility,this.pubSubService,this.sharedService),!((l=this.gridOptions.columnPicker)===null||l===void 0)&&l.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[Le.columnPicker]={name:Le.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new ts(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),!((a=this.gridOptions.contextMenu)===null||a===void 0)&&a.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[Le.contextMenu]={name:Le.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),!((d=this.gridOptions.draggableGrouping)===null||d===void 0)&&d.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[Le.contextMenu]={name:Le.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[Le.draggableGrouping]={name:Le.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new vn(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((u=this.gridOptions.gridMenu)===null||u===void 0)&&u.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[Le.gridMenu]={name:Le.gridMenu,instance:this._gridMenuControl}),(this.gridOptions.enableDraggableGrouping||this.gridOptions.enableGrouping)&&(this._groupItemMetadataProviderService=this._groupItemMetadataProviderService?this._groupItemMetadataProviderService:new bn,this._groupItemMetadataProviderService.init(this.sharedService.slickGrid),this._extensionList[Le.groupItemMetaProvider]={name:Le.groupItemMetaProvider,instance:this._groupItemMetadataProviderService}),this.gridOptions.enableHeaderButton){let m=new os(this.extensionUtility,this.pubSubService,this.sharedService);!((p=this.gridOptions.headerButton)===null||p===void 0)&&p.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(m),this._extensionList[Le.headerButton]={name:Le.headerButton,instance:m}}if(this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new ns(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((f=this.gridOptions.headerMenu)===null||f===void 0)&&f.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[Le.headerMenu]={name:Le.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager){this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new or,this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager);let m=this.getCreatedExtensionByName(Le.rowMoveManager);m?.instance&&(this._extensionList[Le.rowMoveManager]={name:Le.rowMoveManager,instance:this._rowMoveManagerPlugin})}}}createExtensionsBeforeGridCreation(e,t){var i,o,s,l;let a=[];t.enableCheckboxSelector&&(this.getCreatedExtensionByName(Le.checkboxSelector)||(this._checkboxSelectColumn=new ir(this.sharedService.gridOptions.checkboxSelector),a.push({name:Le.checkboxSelector,extension:this._checkboxSelectColumn,columnIndexPosition:(o=(i=t?.checkboxSelector)===null||i===void 0?void 0:i.columnIndexPosition)!==null&&o!==void 0?o:a.length}))),t.enableRowMoveManager&&(this.getCreatedExtensionByName(Le.rowMoveManager)||(this._rowMoveManagerPlugin=new or,a.push({name:Le.rowMoveManager,extension:this._rowMoveManagerPlugin,columnIndexPosition:(l=(s=t?.rowMoveManager)===null||s===void 0?void 0:s.columnIndexPosition)!==null&&l!==void 0?l:a.length}))),this.createExtensionByTheirColumnIndex(a,e,t),t.enableDraggableGrouping&&(this.getCreatedExtensionByName(Le.draggableGrouping)||(this._draggleGroupingPlugin=new is(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(t.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder,this._extensionCreatedList[Le.draggableGrouping]={name:Le.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){var t,i;if(typeof((i=(t=this.sharedService)===null||t===void 0?void 0:t.slickGrid)===null||i===void 0?void 0:i.getColumns)=="function"){let o=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),o),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,t){return Array.isArray(e)?e.filter((i,o)=>t!==o):e}translateAllExtensions(){this.translateCellMenu(),this.translateColumnHeaders(),this.translateColumnPicker(),this.translateContextMenu(),this.translateGridMenu(),this.translateHeaderMenu()}translateCellMenu(){var e,t;(t=(e=this._cellMenuPlugin)===null||e===void 0?void 0:e.translateCellMenu)===null||t===void 0||t.call(e)}translateColumnPicker(){var e;!((e=this._columnPickerControl)===null||e===void 0)&&e.translateColumnPicker&&this._columnPickerControl.translateColumnPicker()}translateContextMenu(){var e,t;(t=(e=this._contextMenuPlugin)===null||e===void 0?void 0:e.translateContextMenu)===null||t===void 0||t.call(e)}translateGridMenu(){var e,t;(t=(e=this._gridMenuControl)===null||e===void 0?void 0:e.translateGridMenu)===null||t===void 0||t.call(e)}translateHeaderMenu(){var e,t;(t=(e=this._headerMenuPlugin)===null||e===void 0?void 0:e.translateHeaderMenu)===null||t===void 0||t.call(e)}translateColumnHeaders(e,t){var i,o,s;if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&(!((i=this.translaterService)===null||i===void 0)&&i.use)&&this.translaterService.use(e);let l=t;l||(l=this.sharedService.columnDefinitions),this.translateItems(l,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.renderColumnHeaders(l,Array.isArray(t)),(s=(o=this._gridMenuControl)===null||o===void 0?void 0:o.translateGridMenu)===null||s===void 0||s.call(o)}renderColumnHeaders(e,t=!1){var i;let o=e;o||(o=this.sharedService.columnDefinitions),Array.isArray(o)&&this.sharedService.slickGrid&&this.sharedService.slickGrid.setColumns&&((o.length>this.sharedService.allColumns.length||t)&&(this.sharedService.allColumns=o),this.sharedService.slickGrid.setColumns(o)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=(i=this.sharedService.allColumns)!==null&&i!==void 0?i:[],this._gridMenuControl.recreateGridMenu())}createExtensionByTheirColumnIndex(e,t,i){e.sort((o,s)=>o.columnIndexPosition-s.columnIndexPosition),e.forEach(o=>{let s=o.extension.create(t,i);s&&(this._extensionCreatedList[o.name]={name:o.name,instance:s})})}translateItems(e,t,i){var o,s,l;if(!((o=this.gridOptions)===null||o===void 0)&&o.enableTranslate&&!(!((s=this.translaterService)===null||s===void 0)&&s.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(Array.isArray(e))for(let a of e)a[t]&&(a[i]=(l=this.translaterService)===null||l===void 0?void 0:l.translate(a[t]))}};var Ba=Object.prototype.hasOwnProperty;function ti(r,e){var t,i;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((i=r.length)===e.length)for(;i--&&ti(r[i],e[i]););return i===-1}if(!t||typeof r=="object"){i=0;for(t in r)if(Ba.call(r,t)&&++i&&!Ba.call(e,t)||!(t in e)||!ti(r[t],e[t]))return!1;return Object.keys(e).length===i}}return r!==r&&e!==e}function Nl(r,e,t){if(t&&(r?.hasOwnProperty(t)||e?.hasOwnProperty(t)))return r[t]===e||r===e[t]||r[t]===e[t];for(let i in r)if(r.hasOwnProperty(i)&&r[i]!==e[i])return!1;return!0}function Wa(r){switch(r&&r.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}var ui=(r,e,t)=>{switch(r.toUpperCase()){case"<":case"LT":return e<t;case"<=":case"LE":return e<=t;case">":case"GT":return e>t;case">=":case"GE":return e>=t;case"!=":case"<>":case"NE":return e!==t;case"=":case"==":case"EQ":return e===t;case"IN":return t&&Array.isArray(t)?t.includes(e):!1;case"NIN":case"NOT_IN":return t&&Array.isArray(t)?!t.includes(e):!1;case"IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?t.some(i=>e.split(/[,]+/).map(o=>o.trim()).includes(i)):!1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?!t.some(i=>e.split(/[,]+/).map(o=>o.trim()).includes(i)):!1;case"IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?t.some(i=>e.includes(i)):!1;case"NOT_IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?!t.some(i=>e.includes(i)):!1}return!0};var ss=(r,e)=>{var t;let[i,o]=e;if(i===void 0&&!r.operator)return!0;r.cellValue=r.cellValue===void 0||r.cellValue===null?"":r.cellValue.toString();let s=r?.ignoreAccentOnStringFilterAndSort?xo(r.cellValue,!0):r.cellValue.toLowerCase();if(typeof i=="string"&&(i=r?.ignoreAccentOnStringFilterAndSort?xo(i,!0):i.toLowerCase()),typeof o=="string"&&(o=r?.ignoreAccentOnStringFilterAndSort?xo(o,!0):o.toLowerCase()),i!==void 0&&o!==void 0){let a=(t=r?.operator)!==null&&t!==void 0?t:r.defaultFilterRangeOperator;a!==ue.rangeInclusive&&a!==ue.rangeExclusive&&(a=r.defaultFilterRangeOperator);let d=a===ue.rangeInclusive,u=Ll(d?">=":">",s,i,r.searchInputLastChar),p=Ll(d?"<=":"<",s,o,r.searchInputLastChar);return u&&p}return Ll(r.operator,s,i,r.searchInputLastChar)};function Ga(r){let t=Array.isArray(r)&&r||[""],i=[],o,s;if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let l=t.length===2?t:t[0].split("..");o=`${Array.isArray(l)?l[0]:""}`,s=`${Array.isArray(l)?l[1]:""}`}else{let l=Array.isArray(r)&&r.length>0?r[0]:"";o=l==null?"":`${l}`}return o!==void 0&&s!==void 0?i.push(o,s):o!==void 0&&i.push(o),i}function Ll(r,e,t,i){return r==="*"||r===ue.endsWith||r==="*z"?e.endsWith(t):r===""&&i==="*"||r===ue.startsWith||r==="a*"?e.startsWith(t):r===""||r===ue.contains?e.indexOf(t)>-1:r==="<>"||r===ue.notContains?e.indexOf(t)===-1:ui(r||"==",e,t)}var Ua=(r,e)=>{if(e===void 0&&!r.operator)return!0;switch((r.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Nl(r.cellValue,e,r.dataKey);case"=":case"==":case"EQ":default:return Nl(r.cellValue,e,r.dataKey)}};function Ya(r){return(Array.isArray(r)&&r.length>0?r[0]:"")||""}var ls=(r,e)=>{var t;let i=parseFloat(r.cellValue),[o,s]=e;if(o===void 0&&!r.operator)return!0;if(o!==void 0&&s!==void 0){let l=(t=r?.operator)!==null&&t!==void 0?t:r.defaultFilterRangeOperator;l!==ue.rangeInclusive&&l!==ue.rangeExclusive&&(l=r.defaultFilterRangeOperator);let a=l===ue.rangeInclusive,d=ui(a?">=":">",i,+o),u=ui(a?"<=":"<",i,+s);return d&&u}return ui(r.operator||"==",i,+o)};function ja(r){let t=Array.isArray(r)&&r||[0],i=[],o,s;if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let l=t.length===2?t:t[0].split("..");o=parseFloat(Array.isArray(l)?l[0]:""),s=parseFloat(Array.isArray(l)?l[1]:"")}else o=parseFloat(t[0]);return rt(o,!0)&&rt(s,!0)?i.push(o,s):rt(o,!0)&&i.push(o),i}var as=(r,e)=>Qn(r.cellValue)===Qn(e);function Xa(r){let e=Array.isArray(r)&&r[0]||!1;return Qn(e)}var ds=r=>{let e=r.operator,t;return Array.isArray(r.cellValue)&&(e==="IN_COLLECTION"||e==="NOT_IN_COLLECTION")?t=r.cellValue.length?r.cellValue.map(i=>`${i}`):[]:t=r.cellValue===void 0||r.cellValue===null?"":`${r.cellValue}`,ui(e||"IN",t,r.searchTerms||[])};var Vl=Oi(bo());var us=Vl.default||Vl;function qa(r,e){var t;let i=r&&(r.filterSearchType||r.fieldType)||O.dateIso,o=zt(i),[s,l]=e,a=us(r.cellValue,o,!0);if(!s&&!l||!a.isValid())return!1;let d=o.toLowerCase().includes("h")?a.valueOf():a.clone().startOf("day").valueOf();if(s&&l){let p=(t=r?.operator)!==null&&t!==void 0?t:r.defaultFilterRangeOperator;p!==ue.rangeInclusive&&p!==ue.rangeExclusive&&(p=r.defaultFilterRangeOperator);let f=p===ue.rangeInclusive,m=ui(f?">=":">",d,s.valueOf()),_=ui(f?"<=":"<",d,l.valueOf());return m&&_}let u=o.toLowerCase().includes("h")?s.valueOf():s.clone().startOf("day").valueOf();return ui(r.operator||"==",d,u)}function Ka(r,e){let t=Array.isArray(r)&&r||[],i=e||O.dateIso,o=zt(i),s=[];if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){let l=t.length===2?t:t[0].split(".."),a=Array.isArray(l)&&l[0]||"",d=Array.isArray(l)&&l[1]||"",u=us(a,o,!0),p=us(d,o,!0);if(!u.isValid()||!p.isValid())return[];s.push(u,p)}else{let l=us(t[0],o,!0);if(!l.isValid())return[];s.push(l)}return s}var Qa=(r,e)=>{if(Wa(r.operator))return ds(r);switch(Za(r.filterSearchType||r.fieldType)){case"boolean":return as(r,e);case"date":return qa(r,e||[]);case"number":return ls(r,e||[]);case"object":return Ua(r,e);case"string":default:return ss(r,e||[])}};function nr(r,e){let t=Za(e),i;switch(t){case"boolean":i=Xa(r);break;case"date":i=Ka(r,e);break;case"number":i=ja(r);break;case"object":i=Ya(r);break;case"string":i=Ga(r);break}return i}function Za(r){switch(r){case O.boolean:return"boolean";case O.date:case O.dateIso:case O.dateUtc:case O.dateTime:case O.dateTimeIso:case O.dateTimeIsoAmPm:case O.dateTimeIsoAM_PM:case O.dateTimeShortIso:case O.dateEuro:case O.dateEuroShort:case O.dateTimeShortEuro:case O.dateTimeEuro:case O.dateTimeEuroAmPm:case O.dateTimeEuroAM_PM:case O.dateTimeEuroShort:case O.dateTimeEuroShortAmPm:case O.dateTimeEuroShortAM_PM:case O.dateUs:case O.dateUsShort:case O.dateTimeShortUs:case O.dateTimeUs:case O.dateTimeUsAmPm:case O.dateTimeUsAM_PM:case O.dateTimeUsShort:case O.dateTimeUsShortAmPm:case O.dateTimeUsShortAM_PM:return"date";case O.integer:case O.float:case O.number:return"number";case O.object:return"object";case O.string:case O.text:case O.password:case O.readonly:default:return"string"}}var Hl={executeFilterConditionTest:Qa,booleanFilter:as,collectionSearchFilter:ds,numberFilter:ls,stringFilter:ss,testFilter:ui};var cs=class{constructor(e,t,i,o,s){this.filterFactory=e,this.pubSubService=t,this.sharedService=i,this.backendUtilities=o,this.rxjs=s,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new Slick.Event,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get _columnDefinitions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getColumns)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[]}get _dataView(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){var e;this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((e=this.rxjs)===null||e===void 0)&&e.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null,this._grid=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)e?.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{i.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(i,this._isFilterFirstRender),this._firstColumnIdRendered===""&&(this._firstColumnIdRendered=i.column.id)}),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,(t,i)=>Ot(this,null,function*(){var o,s;let l=(o=i?.clearFilterTriggered)!==null&&o!==void 0?o:!1;l||(yield this.emitFilterChanged(at.local,!0)),((s=this._gridOptions)===null||s===void 0?void 0:s.enableTreeData)===!0&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),i.columnId!==null&&this._dataView.refresh(),l||(yield this.emitFilterChanged(at.local)),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)})),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{this.addFilterTemplateToHeaderRow(i)}),this.subscribeToOnHeaderRowCellRendered(e)}clearFilterByColumnId(e,t){return Ot(this,null,function*(){var i,o;yield this.pubSubService.publish("onBeforeFilterClear",{columnId:t},0);let s=(o=(i=this._gridOptions)===null||i===void 0?void 0:i.backendServiceApi)!==null&&o!==void 0?o:!1,l=s?at.remote:at.local,a=Object.keys(this._columnFilters),d;Array.isArray(a)&&(d=a.find(p=>p===`${t}`));let u=this._filtersMetadata.find(p=>p.columnDef.id===t);return u?.clear&&u.clear(!0),s&&d!==void 0&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters}),yield this.emitFilterChanged(l),!0})}clearFilters(e=!0){return Ot(this,null,function*(){var t,i,o,s,l;e&&(yield this.pubSubService.publish("onBeforeFilterClear",!0,0)),this._filtersMetadata.forEach(d=>{d?.clear&&d.clear(!1)}),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach(d=>{var u;!((u=d.filter)===null||u===void 0)&&u.searchTerms&&delete d.filter.searchTerms}),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());let a=(t=this._gridOptions)===null||t===void 0?void 0:t.backendServiceApi;if(a&&e){let d={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:this._grid,columnFilters:this._columnFilters},p=a.service.processOnFilterChanged(void 0,d),f=(s=(o=(i=this._gridOptions)===null||i===void 0?void 0:i.pagination)===null||o===void 0?void 0:o.totalItems)!==null&&s!==void 0?s:0;(l=this.backendUtilities)===null||l===void 0||l.executeBackendCallback(a,p,d,new Date,f,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:m=>this._previousFilters=this.extractBasicFilterDetails(m.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);e&&this.pubSubService.publish("onFilterCleared",!0)})}customLocalFilter(e,t){var i,o,s,l,a,d;let u=t?.grid,p=(o=(i=this._gridOptions)===null||i===void 0?void 0:i.enableTreeData)!==null&&o!==void 0?o:!1,f=(s=t?.columnFilters)!==null&&s!==void 0?s:{},m;if(p&&this._gridOptions&&this._gridOptions.treeDataOptions){m=this._gridOptions.treeDataOptions;let _=(l=m.collapsedPropName)!==null&&l!==void 0?l:ie.treeDataProperties.COLLAPSED_PROP,C=(a=m.parentPropName)!==null&&a!==void 0?a:ie.treeDataProperties.PARENT_PROP,b=(d=this._gridOptions.datasetIdPropertyName)!==null&&d!==void 0?d:"id";if(e[C]!==null){let E=this._dataView.getItemById(e[C]);for(;E;){if(E[_])return!1;E=this._dataView.getItemById(E[C])}}if(this._tmpPreFilteredData instanceof Set)return this._tmpPreFilteredData.has(e[b])}else if(typeof f=="object")for(let _ of Object.keys(f)){let C=f[_],b=this.preProcessFilterConditionOnDataContext(e,C,u);if(typeof b=="boolean")return b;let E=C?.parsedSearchTerms;if(E===void 0&&(E=nr(C.searchTerms,C.columnDef.type||O.string),E!==void 0&&(C.parsedSearchTerms=E)),!Hl.executeFilterConditionTest(b,E))return!1}return!0}parseFormInputFilterConditions(e,t){var i,o,s;let l=un(e)||[],a=Array.isArray(l)&&l.length===1?l[0]:"",d=t.columnDef,u=(s=(o=(i=d.filter)===null||i===void 0?void 0:i.type)!==null&&o!==void 0?o:d.type)!==null&&s!==void 0?s:O.string,p=null;u!==O.object&&(a=a==null?"":`${a}`,p=a.match(/^([<>!=\*]{0,2})(.*[^<>!=\*])?([\*]?)$/));let f=p?.[1]||t.operator,m=p?.[2]||"",_=p?.[3]||(f==="*z"?"*":"");return typeof a=="string"&&(a=a.replace("'","''"),f==="*"||f==="*z"?f=ue.endsWith:(f==="a*"||_==="*")&&(f=ue.startsWith)),Array.isArray(p)&&p.length>=1&&Array.isArray(l)&&l.length===1&&(l[0]=m),{dataKey:d.dataKey,fieldType:u,searchTerms:l||[],operator:f,searchInputLastChar:_,filterSearchType:d.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,t,i){var o,s,l,a,d,u;let p=t.columnDef,f=t.columnId,m=i.getColumnIndex(f);if(!p&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(m=this.sharedService.allColumns.findIndex(R=>R.field===f)),!p)return!0;if(this._gridOptions.enableRowDetailView){let R=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";e[`${R}isPadding`]&&e[`${R}parent`]&&(e=e[`${R}parent`])}let _=((o=p.filter)===null||o===void 0?void 0:o.queryField)||p.queryFieldFilter||p.queryField||p.field||"";typeof p.queryFieldNameGetterFn=="function"&&(_=p.queryFieldNameGetterFn(e));let C=(a=(l=(s=p.filter)===null||s===void 0?void 0:s.type)!==null&&l!==void 0?l:p.type)!==null&&a!==void 0?a:O.string,b=e[_];_?.indexOf(".")>=0&&(b=je(e,_));let E=t.operator,x=t.searchTerms||[];if(!x||Array.isArray(x)&&(x.length===0||x.length===1&&E===x[0]))return!0;if(x&&Array.isArray(x)&&C!==O.object)for(let R=0,L=x.length;R<L;R++)x[R]=(x[R]===void 0||x[R]===null?"":x[R])+"";if(((d=p?.params)===null||d===void 0?void 0:d.useFormatterOuputToFilter)===!0){let R=i.getData(),L=this._gridOptions.datasetIdPropertyName||"id",z=R&&typeof R.getIdxById=="function"?R.getIdxById(e[L]):0,B=p&&typeof p.formatter=="function"?p.formatter(z||0,m,b,p,e,this._grid):"";b=qi(B)}return typeof b=="number"&&(b=b.toString()),{dataKey:p.dataKey,fieldType:C,searchTerms:x,cellValue:b,operator:E,searchInputLastChar:t.searchInputLastChar,filterSearchType:p.filterSearchType,ignoreAccentOnStringFilterAndSort:(u=this._gridOptions.ignoreAccentOnStringFilterAndSort)!==null&&u!==void 0?u:!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,t){var i,o,s,l,a,d,u,p,f,m,_,C,b,E,x,R,L,z,B;let G=(i=this._gridOptions)===null||i===void 0?void 0:i.treeDataOptions,V=(o=G?.collapsedPropName)!==null&&o!==void 0?o:ie.treeDataProperties.COLLAPSED_PROP,H=(s=G?.parentPropName)!==null&&s!==void 0?s:ie.treeDataProperties.PARENT_PROP,K=(l=G?.hasChildrenPropName)!==null&&l!==void 0?l:ie.treeDataProperties.HAS_CHILDREN_PROP,oe=(d=(a=this._gridOptions)===null||a===void 0?void 0:a.datasetIdPropertyName)!==null&&d!==void 0?d:"id",ne=(p=(u=this._gridOptions.presets)===null||u===void 0?void 0:u.treeData)===null||p===void 0?void 0:p.toggledItems,Pe=(m=(f=this._gridOptions.treeDataOptions)===null||f===void 0?void 0:f.initiallyCollapsed)!==null&&m!==void 0?m:!1,He=(_=this._gridOptions.treeDataOptions)===null||_===void 0?void 0:_.columnId,xe=(C=this._gridOptions.treeDataOptions)===null||C===void 0?void 0:C.excludeChildrenWhenFilteringTree,Xe=!xe&&((b=this._gridOptions.treeDataOptions)===null||b===void 0?void 0:b.autoApproveParentItemWhenTreeColumnIsValid)===!0,ge={},lt=new Set,Y=new Map;if(Array.isArray(e)){for(let De of e)ge[De[oe]]=De,delete ge[De[oe]].__used;for(let De of Object.keys(t)){let $e=t[De],ze=$e?.searchTerms?un($e.searchTerms):[],Ee=this.parseFormInputFilterConditions(ze,$e),Te=$e.columnDef,yt=(R=(x=(E=Te?.filter)===null||E===void 0?void 0:E.type)!==null&&x!==void 0?x:Te?.type)!==null&&R!==void 0?R:O.string,_t=nr(Ee.searchTerms,yt);_t!==void 0&&($e.parsedSearchTerms=_t)}for(let De of e){let $e=De[K],ze=!0;for(let Ee of Object.keys(t)){let Te=t[Ee],yt=this.preProcessFilterConditionOnDataContext(De,Te,this._grid);if(yt){let _t=Te?.parsedSearchTerms,Je=typeof yt=="boolean"?yt:Hl.executeFilterConditionTest(yt,_t);if(Je&&Xe&&$e&&Te.columnId===He){Y.set(De[oe],!0);break}if(Je||!xe&&Y.get(De[H])===!0){if($e&&Te.columnId===He&&Y.set(De[oe],!0),Je||!xe&&Te.columnId===He)continue}else $e&&Y.get(De[H])!==!0&&Te.columnId!==He&&Y.set(De[oe],!1)}ze=!1}if(ze){lt.add(De[oe]);let Ee=(L=ge[De[H]])!==null&&L!==void 0?L:!1,Te=!Pe;for(!this._isTreePresetExecuted&&Array.isArray(ne)&&ne.some(yt=>yt.itemId===Ee.id&&yt.isCollapsed===Te)&&(Ee[V]=Te);Ee;)(z=Ee.__used)!==null&&z!==void 0||lt.add(Ee[oe]),ge[Ee[oe]].__used=!0,Ee=(B=ge[Ee[H]])!==null&&B!==void 0?B:!1}}}return this._isTreePresetExecuted=!0,lt}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){var e,t;let i=[];if(this._columnFilters)for(let o of Object.keys(this._columnFilters)){let s=this._columnFilters[o],l={columnId:o||""},a=this.sharedService.allColumns.find(u=>u.id===l.columnId),d=(t=(e=a?.filter)===null||e===void 0?void 0:e.emptySearchTermReturnAllValues)!==null&&t!==void 0?t:!0;s?.searchTerms&&(l.searchTerms=s.searchTerms),s.operator&&(l.operator=s.operator),Array.isArray(l.searchTerms)&&l.searchTerms.length>0&&(!d||l.searchTerms[0]!=="")&&i.push(l)}return i}emitFilterChanged(e,t=!1){var i;let o=t?"onBeforeFilterChange":"onFilterChanged";if(e===at.remote&&(!((i=this._gridOptions)===null||i===void 0)&&i.backendServiceApi)){let s=[],l=this._gridOptions.backendServiceApi.service;return l?.getCurrentFilters&&(s=l.getCurrentFilters()),this.pubSubService.publish(o,s)}else if(e===at.local)return this.pubSubService.publish(o,this.getCurrentLocalFilters())}onBackendFilterChange(e,t){return Ot(this,null,function*(){var i,o,s,l;let a=t?.shouldTriggerQuery;if(a&&(yield this.emitFilterChanged(at.remote,!0)),!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');let d=this._gridOptions.backendServiceApi;if(!d||!d.process||!d.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');let u=new Date;if(d.preProcess&&d.preProcess(),a){let p=yield d.service.processOnFilterChanged(e,t),f=(s=(o=(i=this._gridOptions)===null||i===void 0?void 0:i.pagination)===null||o===void 0?void 0:o.totalItems)!==null&&s!==void 0?s:0;(l=this.backendUtilities)===null||l===void 0||l.executeBackendCallback(d,p,t,u,f,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:m=>this._previousFilters=this.extractBasicFilterDetails(m.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}})}populateColumnFilterSearchTermPresets(e){var t;return Array.isArray(e)&&(this._columnDefinitions.forEach(i=>{var o;!((o=i.filter)===null||o===void 0)&&o.searchTerms&&delete i.filter.searchTerms;let s=e.find(l=>l.columnId===i.id);s&&Array.isArray(s?.searchTerms)&&(i.filter=i.filter||{},i.filter.operator=s.operator||i.filter.operator||"",i.filter.searchTerms=s.searchTerms)}),!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){var t,i,o,s;let l=(o=e??((i=(t=this._dataView)===null||t===void 0?void 0:t.getItems)===null||i===void 0?void 0:i.call(t)))!==null&&o!==void 0?o:[];this._dataView&&(!((s=this._gridOptions)===null||s===void 0)&&s.enableTreeData)&&l.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(l,this._columnFilters),this._dataView.refresh()):l.length===0&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&setTimeout(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(e=!0,t=!0){let o=!this._gridOptions.enableFiltering;o!==e&&(t&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:o},!1,!0),this._grid.setHeaderRowVisibility(o),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(e=!0){let t=this._gridOptions.enableFiltering;this.disableFilterFunctionality(t,e)}toggleHeaderFilterRow(){var e,t;let i=(t=(e=this._gridOptions)===null||e===void 0?void 0:e.showHeaderRow)!==null&&t!==void 0?t:!1;i=!i,this._grid.setHeaderRowVisibility(i),i===!0&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}updateFilters(e,t=!0,i=!0,o=!1){return Ot(this,null,function*(){var s,l;if(!this._filtersMetadata||this._filtersMetadata.length===0||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach(u=>{var p;let f=this._filtersMetadata.find(m=>u.columnId===m.columnDef.id);if(u&&f){let m=u.operator||f.defaultOperator;this.updateColumnFilters(u.searchTerms,f.columnDef,m),f.setValues(u.searchTerms||[],m),(o||!((p=this._gridOptions)===null||p===void 0)&&p.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:f.columnDef,operator:m,searchTerms:u.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});let a=(s=this._gridOptions)===null||s===void 0?void 0:s.backendServiceApi,d=a?at.remote:at.local;if(t&&(yield this.emitFilterChanged(d,!0)),this._dataView.refresh(),a){let u=a?.service;u?.updateFilters&&(u.updateFilters(e,!0),i&&((l=this.backendUtilities)===null||l===void 0||l.refreshBackendDataset(this._gridOptions)))}t&&(yield this.emitFilterChanged(d))}return!0})}updateSingleFilter(e,t=!0,i=!0){return Ot(this,null,function*(){var o,s,l,a,d,u;let p=this.sharedService.allColumns.find(f=>f.id===e.columnId);if(p&&e.columnId){this._columnFilters={};let f=(s=(o=p.filter)===null||o===void 0?void 0:o.emptySearchTermReturnAllValues)!==null&&s!==void 0?s:!0;Array.isArray(e.searchTerms)&&(e.searchTerms.length>1||e.searchTerms.length===1&&(!f||e.searchTerms[0]!==""))&&(this._columnFilters[e.columnId]={columnId:e.columnId,operator:e.operator,searchTerms:e.searchTerms,columnDef:p,type:(l=p.type)!==null&&l!==void 0?l:O.string});let m=(a=this._gridOptions)===null||a===void 0?void 0:a.backendServiceApi,_=m?at.remote:at.local;if(t&&(yield this.emitFilterChanged(_,!0)),m){let C=m?.service;C?.updateFilters&&(C.updateFilters(this._columnFilters,!0),i&&((d=this.backendUtilities)===null||d===void 0||d.refreshBackendDataset(this._gridOptions)))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),!((u=this._gridOptions)===null||u===void 0)&&u.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();t&&(yield this.emitFilterChanged(_))}return!0})}drawFilterTemplate(e,t){var i;let o;if(typeof t=="string"){if(o=document.querySelector(t),o===null)return null}else o=t;let s=typeof e=="string"?this.sharedService.allColumns.find(a=>a.id===e):e;if(((i=s?.id)!==null&&i!==void 0?i:"")!=="selector"&&s?.filterable){let a,d,u=this.filterFactory.createFilter(s.filter);d=s&&s.filter&&s.filter.operator||u&&u.operator,this._columnFilters[s.id]?(a=this._columnFilters[s.id].searchTerms||void 0,d=this._columnFilters[s.id].operator||void 0):s.filter&&(a=s.filter.searchTerms||void 0,this.updateColumnFilters(a,s,d));let p={grid:this._grid,operator:d,searchTerms:a,columnDef:s,filterContainerElm:o,callback:this.callbackSearchEvent.bind(this)};return u&&(u.init(p),a&&u.setValues&&u.setValues(a,d)),u}return null}addFilterTemplateToHeaderRow(e,t=!0){var i;let o=e.column,s=(i=o?.id)!==null&&i!==void 0?i:"";if(s!=="selector"&&o?.filterable){let l,a,d=this.filterFactory.createFilter(o.filter);a=o&&o.filter&&o.filter.operator||d&&d.operator,this._columnFilters[o.id]?(l=this._columnFilters[o.id].searchTerms||void 0,a=this._columnFilters[o.id].operator||void 0):o.filter&&(l=o.filter.searchTerms||void 0,this.updateColumnFilters(l,o,a));let u={grid:this._grid,operator:a,searchTerms:l,columnDef:o,filterContainerElm:this._grid.getHeaderRowColumn(s),callback:this.callbackSearchEvent.bind(this)};if(d){d.init(u,t);let p=this._filtersMetadata.findIndex(f=>d.columnDef.id===f.columnDef.id);p===-1?this._filtersMetadata.push(d):this._filtersMetadata[p]=d,l&&d.setValues&&d.setValues(l,a)}}}callbackSearchEvent(e,t){var i,o,s,l,a,d;if(t){let u=e?.target?e.target.value:void 0,p=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:u?[u]:void 0,f=t.columnDef||null,m=(i=f?.id)!==null&&i!==void 0?i:"",_=(l=(s=(o=f?.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:f?.type)!==null&&l!==void 0?l:O.string,C=t.operator||void 0,b=p&&Array.isArray(p),E=b&&p&&p.length,x=P({},this._columnFilters),R=(d=(a=f.filter)===null||a===void 0?void 0:a.emptySearchTermReturnAllValues)!==null&&d!==void 0?d:!0,L;if(f&&m)if(!b||E===0||E===1&&Array.isArray(p)&&R&&p[0]==="")delete this._columnFilters[m];else{let V=`${m}`,H={columnId:V,columnDef:f,parsedSearchTerms:[],type:_},K=this.parseFormInputFilterConditions(p,H);H.operator=C||K.operator||Sr(_),L=nr(K.searchTerms,_),L!==void 0&&(H.parsedSearchTerms=L),H.searchTerms=K.searchTerms||[],this._columnFilters[V]=H}let z=e&&typeof e.isPropagationStopped!="function"?$.extend({},new Slick.EventData,e):e,B=e?.key,G=e?.keyCode;if(this._onSearchChange&&(t.forceOnSearchChangeEvent||B==="Enter"||G===Ie.ENTER||!ti(x,this._columnFilters))){let V={clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:m,columnDef:f,columnFilters:this._columnFilters,operator:C||Sr(_),searchTerms:p,parsedSearchTerms:L,grid:this._grid};this.pubSubService.publish("onBeforeSearchChange",V)===!1?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(V,z)}}}disableAllFilteringCommands(e=!0){var t,i;let o=this._grid.getColumns();o.forEach(l=>{var a;!((a=l?.header)===null||a===void 0)&&a.menu&&l.header.menu.items.forEach(d=>{d&&typeof d!="string"&&d.command==="clear-filter"&&(d.hidden=e)})});let s=(i=(t=this._gridOptions)===null||t===void 0?void 0:t.gridMenu)===null||i===void 0?void 0:i.commandItems;return s&&s.forEach(l=>{if(l&&typeof l!="string"){let a=l.command;(a==="clear-filter"||a==="toggle-filter")&&(l.hidden=e)}}),o}extractBasicFilterDetails(e){let t=[];if(e&&typeof e=="object")for(let i of Object.keys(e)){let{operator:o,searchTerms:s}=e[`${i}`];t.push({columnId:i,operator:o,searchTerms:s})}return t}removeAllColumnFiltersProperties(){if(typeof this._columnFilters=="object")for(let e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e]}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,(t,i)=>{var o;let s=this._filtersMetadata.find(l=>l.columnDef.id===i.column.id);(o=s?.destroy)===null||o===void 0||o.call(s)})}updateColumnFilters(e,t,i){var o,s,l;let a=(l=(s=(o=t.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:t.type)!==null&&l!==void 0?l:O.string,d=nr(e,a);e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i,parsedSearchTerms:d,type:a})}};var Ja,hs={skipError:!1,triggerEvent:!0},rr={highlightRow:!0,position:"top",resortGrid:!1,selectRow:!1,skipError:!1,triggerEvent:!0},$l={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},ed={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1},ps=class{constructor(e,t,i,o,s,l,a){this.gridStateService=e,this.filterService=t,this.pubSubService=i,this.paginationService=o,this.sharedService=s,this.sortService=l,this.treeDataService=a}get _dataView(){var e;return((e=this._grid)===null||e===void 0?void 0:e.getData)&&this._grid.getData()}get _gridOptions(){var e;return!((e=this._grid)===null||e===void 0)&&e.getOptions?this._grid.getOptions():{}}dispose(){var e;(e=this._rowSelectionPlugin)===null||e===void 0||e.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearPinning(){let e=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),Array.isArray(e)&&this.sharedService.slickGrid.setColumns(e)}setPinning(e,t=!0,i=!1,o=!0){bl(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,i,o),this.sharedService.gridOptions=P(P({},this.sharedService.gridOptions),e)),t&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!e||!e.grid||!e.grid.getColumns||!e.grid.getDataItem)throw new Error("To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error(`We could not find SlickGrid Grid object or it's "getDataItem" method`);return this._grid.getDataItem(e)}getItemRowMetadataToHighlight(e){return t=>{let i=this._dataView.getItem(t),o={cssClasses:""};return typeof e=="function"&&(o=e(t)),o||(o={cssClasses:""}),i&&i._dirty&&(o.cssClasses=(o&&o.cssClasses||"")+" dirty"),i&&i.rowClass&&o&&(o.cssClasses+=` ${i.rowClass}`,o.cssClasses+=` row${t}`),o}}getDataItemByRowIndex(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');let t=[];return Array.isArray(e)&&e.forEach(i=>{t.push(this._grid.getDataItem(i))}),t}getSelectedRows(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');let e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,t){if(t=P(P({},ed),t),this._grid&&this._grid.getColumns&&this._grid.setColumns){let i=this._grid.getColumns(),o=i.findIndex(s=>s.id===e);if(o>=0){let s=Kn(i,o);this.sharedService.visibleColumns=s,this._grid.setColumns(s);let l=this.sharedService.allColumns.findIndex(a=>a.id===e);return l&&(t?.hideFromColumnPicker&&(this.sharedService.allColumns[l].excludeFromColumnPicker=!0),t?.hideFromGridMenu&&(this.sharedService.allColumns[l].excludeFromGridMenu=!0)),t?.autoResizeColumns&&this._grid.autosizeColumns(),t?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:s}),o}}return-1}hideColumnByIds(e,t){if(t=P(P({},ed),t),Array.isArray(e)){for(let i of e)this.hideColumnById(i,Me(P({},t),{triggerEvent:!1,autoResizeColumns:!1}));t?.autoResizeColumns&&this._grid.autosizeColumns(),t?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(e,t=1500,i=300){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new Zi(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),Array.isArray(e)?e.forEach(o=>this.highlightRowByMetadata(o,t,i)):this.highlightRowByMetadata(e,t,i)}highlightRowByMetadata(e,t=1500,i=300){this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);let o=this._dataView.getItem(e),s=this._gridOptions.datasetIdPropertyName||"id";o?.[s]!==void 0&&(o.rowClass="highlight",this._dataView.updateItem(o[s],o),this.renderGrid(),clearTimeout(Ja),Ja=setTimeout(()=>{o.rowClass="highlight-end",this._dataView.updateItem(o[s],o),this.renderGrid()},i),setTimeout(()=>{o?.[s]!==void 0&&(delete o.rowClass,this._dataView.getIdxById(o[s])!==void 0&&(this._dataView.updateItem(o[s],o),this.renderGrid()))},t+i))}setSelectedRow(e){var t;!((t=this._grid)===null||t===void 0)&&t.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){var t;!((t=this._grid)===null||t===void 0)&&t.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){this._grid&&typeof this._grid.invalidate=="function"&&(this._grid.invalidate(),this._grid.render())}resetGrid(e){var t;if(this._grid){let i=this.sharedService.allColumns||[];Array.isArray(i)&&i.length>0&&(this._grid.setColumns(i),!((t=this._gridOptions)===null||t===void 0)&&t.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}this.clearPinning(),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters(),this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting()}addItem(e,t){var i,o,s,l;t=P(P({},rr),t);let a=(i=t?.position)!==null&&i!==void 0?i:"top";if(!t?.skipError&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("We could not find SlickGrid Grid, DataView objects");let d=this._gridOptions.datasetIdPropertyName||"id";if(!t?.skipError&&(!e||!(d in e)))throw new Error(`Adding an item requires the item to include an "${d}" property`);a==="bottom"||!((o=this._gridOptions)===null||o===void 0)&&o.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let u=0,p=(s=e?.[d])!==null&&s!==void 0?s:"";return!((l=this._gridOptions)===null||l===void 0)&&l.enableTreeData?(this.invalidateHierarchicalDataset(),u=this._dataView.getRowById(p),this._grid.scrollRowIntoView(u??0,!1)):t.resortGrid?(this._dataView.reSort(),u=this._dataView.getRowById(p)):(u=a==="bottom"?this._dataView.getRowById(p):0,this._grid.scrollRowIntoView(u??0)),t.highlightRow&&u!==void 0&&this.highlightRow(u),u!==void 0&&t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(u),t.triggerEvent&&this.pubSubService.publish("onItemAdded",e),!(this._gridOptions&&this._gridOptions.backendServiceApi)&&this._gridOptions.enablePagination&&(a==="top"?this.paginationService.goToFirstPage():this.paginationService.goToLastPage()),u}addItems(e,t){var i,o,s,l,a,d;t=P(P({},rr),t);let u=this._gridOptions.datasetIdPropertyName||"id",p=(i=t?.position)!==null&&i!==void 0?i:"top",f=[];if(Array.isArray(e))this._dataView.beginUpdate(!0),p==="bottom"||!((o=this._gridOptions)===null||o===void 0)&&o.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate();else return[this.addItem(e,t)||0];if(!((s=this._gridOptions)===null||s===void 0)&&s.enableTreeData){this.invalidateHierarchicalDataset();let m=(a=(l=e[0])===null||l===void 0?void 0:l[u])!==null&&a!==void 0?a:"",_=this._dataView.getRowById(m);this._grid.scrollRowIntoView(_??0,!1)}else t.resortGrid&&this._dataView.reSort();return p==="bottom"&&!(!((d=this._gridOptions)===null||d===void 0)&&d.enableTreeData)?this._grid.navigateBottom():this._grid.navigateTop(),e.forEach(m=>f.push(this._dataView.getRowById(m[u]))),t.highlightRow&&this.highlightRow(f),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(f),t.triggerEvent&&this.pubSubService.publish("onItemAdded",e),f}deleteItem(e,t){t=P(P({},hs),t);let i=this._gridOptions.datasetIdPropertyName||"id";if(!t?.skipError&&(!e||!(i in e)))throw new Error(`Deleting an item requires the item to include an "${i}" property`);return this.deleteItemById(e[i],t)}deleteItems(e,t){t=P(P({},hs),t);let i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,t),[e[i]];this._dataView.beginUpdate(!0);let o=[];return e.forEach(s=>{s?.[i]!==void 0&&o.push(s[i])}),this._dataView.deleteItems(o),this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),o}deleteItemById(e,t){if(t=P(P({},hs),t),!t?.skipError&&e==null)throw new Error('Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,t){if(t=P(P({},hs),t),Array.isArray(e)){this._dataView.beginUpdate(!0);for(let i=0;i<e.length;i++)e[i]!==null&&this.deleteItemById(e[i],{triggerEvent:!1});return this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,t){t=P(P({},$l),t);let i=this._gridOptions.datasetIdPropertyName||"id",o=!e||!(i in e)?void 0:e[i];if(!t?.skipError&&o===void 0)throw new Error(`Calling Update of an item requires the item to include an "${i}" property`);return this.updateItemById(o,e,t)}updateItems(e,t){var i;t=P(P({},$l),t);let o=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,t)];this._dataView.beginUpdate(!0);let s=[],l=[];return e.forEach(a=>{let d=!a||!(o in a)?void 0:a[o];if(l.push(d),this._dataView.getIdxById(d)!==void 0){let u=this._dataView.getRowById(d);u!==void 0&&(s.push(u),this._grid.updateRow(u))}}),this._dataView.updateItems(l,e),this._dataView.endUpdate(),!((i=this._gridOptions)===null||i===void 0)&&i.enableTreeData&&this.invalidateHierarchicalDataset(),t.highlightRow&&this.highlightRow(s),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(s),t.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),s}updateItemById(e,t,i){var o;if(i=P(P({},$l),i),!i?.skipError&&e===void 0)throw new Error('Cannot update a row without a valid "id"');let s=this._dataView.getRowById(e);if(!i?.skipError&&!t&&!this._gridOptions.enablePagination)throw new Error(`The item to update in the grid was not found with id: ${e}`);return this._dataView.getIdxById(e)!==void 0&&(this._dataView.updateItem(e,t),s!==void 0&&this._grid.updateRow(s),!((o=this._gridOptions)===null||o===void 0)&&o.enableTreeData&&this.invalidateHierarchicalDataset(),i.scrollRowIntoView&&s!==void 0&&this._grid.scrollRowIntoView(s),i.highlightRow&&s!==void 0&&this.highlightRow(s),s!==void 0&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(s),i.triggerEvent&&this.pubSubService.publish("onItemUpdated",t)),s}upsertItem(e,t){t=P(P({},rr),t);let i=this._gridOptions.datasetIdPropertyName||"id",o=!e||!(i in e)?void 0:e[i];if(!t?.skipError&&o===void 0)throw new Error(`Calling Upsert of an item requires the item to include an "${i}" property`);return this.upsertItemById(o,e,t)}upsertItems(e,t){if(t=P(P({},rr),t),!Array.isArray(e))return[this.upsertItem(e,t)];this._dataView.beginUpdate(!0);let i=[];e.forEach(s=>{i.push(this.upsertItem(s,Me(P({},t),{highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1})))}),this._dataView.endUpdate();let o=i.map(s=>s.added!==void 0?s.added:s.updated);if(t.highlightRow&&this.highlightRow(o),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(o),t.triggerEvent){this.pubSubService.publish("onItemUpserted",e);let s=i.filter(a=>a.added!==void 0);Array.isArray(s)&&s.length>0&&this.pubSubService.publish("onItemAdded",s);let l=i.filter(a=>a.updated!==void 0);Array.isArray(l)&&l.length>0&&this.pubSubService.publish("onItemUpdated",l)}return i}upsertItemById(e,t,i){let o=!1;if(i=P(P({},rr),i),!i?.skipError&&e===void 0&&!this.hasRowSelectionEnabled())throw new Error('Calling Upsert of an item requires the item to include a valid and unique "id" property');let s,l;return this._dataView.getRowById(e)===void 0?(s=this.addItem(t,i),o=!0):(l=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),o=!1),i.triggerEvent&&(this.pubSubService.publish("onItemUpserted",t),o?this.pubSubService.publish("onItemAdded",t):this.pubSubService.publish("onItemUpdated",t)),{added:s,updated:l}}invalidateHierarchicalDataset(e){var t;if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this.treeDataService){let i=e??this._dataView.getItems(),o=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(i||[],this.sharedService.allColumns,this._gridOptions);this.sharedService.hierarchicalDataset=o.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(o.flat)}}hasRowSelectionEnabled(){let e=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e}};var fs=class{constructor(){this._eventHandler=new Slick.EventHandler}get eventHandler(){return this._eventHandler}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){let t=e?.getData&&e.getData();this._eventHandler.subscribe(e.onBeforeEditCell,(i,o)=>{if(!i||!o||!e||o.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e.getColumns()[o.cell];if(typeof s.onBeforeEditCell=="function"){let l={row:o.row,cell:o.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(o.row)};s.onBeforeEditCell(i,l)}})}bindOnCellChange(e){let t=e?.getData&&e.getData();this._eventHandler.subscribe(e.onCellChange,(i,o)=>{if(!i||!o||!e||o.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e.getColumns()[o.cell];if(typeof s.onCellChange=="function"){let l={row:o.row,cell:o.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(o.row)};s.onCellChange(i,l)}})}bindOnClick(e){let t=e?.getData&&e.getData();this._eventHandler.subscribe(e.onClick,(i,o)=>{if(!i||!o||!e||o.cell===void 0||!e.getColumns||!e.getDataItem)return;let s=e&&e.getColumns&&e.getColumns()[o.cell],l=e&&e.getOptions&&e.getOptions()||{};if(l.enableCellNavigation&&(!l.editable||l.editable&&l.autoCommitEdit)&&e.setActiveCell(o.row,o.cell,!1,!1,!0),typeof s.onCellClick=="function"){let a={row:o.row,cell:o.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(o.row)};s.onCellClick(i,a)}})}};var ms=class{constructor(e,t,i,o,s,l){this.extensionService=e,this.filterService=t,this.pubSubService=i,this.sharedService=o,this.sortService=s,this.treeDataService=l,this._eventHandler=new Slick.EventHandler,this._columns=[],this._subscriptions=[],this._selectedRowDataContextIds=[],this._selectedFilteredRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0}get _dataView(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get _gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get datasetIdPropName(){return this._gridOptions.datasetIdPropertyName||"id"}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e,this._selectedFilteredRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e,t=!0,i=!1){var o,s,l,a,d,u,p,f,m;if(Array.isArray(e)&&e.length>0){let _=this.getAssociatedGridColumns(this._grid,e);if(_&&Array.isArray(_)&&_.length>0){if(Array.isArray(this.sharedService.allColumns)){let C=[];if(this._gridOptions.enableCheckboxSelector){let b=(l=(s=(o=this._gridOptions)===null||o===void 0?void 0:o.checkboxSelector)===null||s===void 0?void 0:s.columnIndexPosition)!==null&&l!==void 0?l:0;C.push({columnId:"_checkbox_selector",columnIndexPosition:b})}if(this._gridOptions.enableRowDetailView){let b=(u=(d=(a=this._gridOptions)===null||a===void 0?void 0:a.rowDetailView)===null||d===void 0?void 0:d.columnIndexPosition)!==null&&u!==void 0?u:0;C.push({columnId:"_detail_selector",columnIndexPosition:b})}if(this._gridOptions.enableRowMoveManager){let b=(m=(f=(p=this._gridOptions)===null||p===void 0?void 0:p.rowMoveManager)===null||f===void 0?void 0:f.columnIndexPosition)!==null&&m!==void 0?m:0;C.push({columnId:"_move",columnIndexPosition:b})}this.addColumnDynamicWhenFeatureEnabled(C,this.sharedService.allColumns,_)}_.forEach(C=>C.originalWidth=C.width||C.originalWidth),this._grid.setColumns(_),this.sharedService.visibleColumns=_,t?this._grid.autosizeColumns():(i||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(e){var t;let{frozenColumn:i,frozenRow:o,frozenBottom:s}=this.sharedService.gridOptions,l={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:i,frozenRow:o,frozenBottom:s}},a=this.getCurrentPagination();if(a&&(l.pagination=a),this.hasRowSelectionEnabled()){let d=this.getCurrentRowSelections(e?.requestRefreshRowFilteredRow);d&&(l.rowSelection=d)}if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData){let d=this.getCurrentTreeDataToggleState();d&&(l.treeData=d)}return l}getColumns(){return this._columns}getAssociatedCurrentColumns(e){let t=[];return e&&Array.isArray(e)&&e.forEach(i=>{i?.id&&t.push({columnId:i.id,cssClass:i.cssClass||"",headerCssClass:i.headerCssClass||"",width:i.width||0})}),t}getAssociatedGridColumns(e,t){let i=[],o=this.sharedService.allColumns||e.getColumns();return t&&Array.isArray(t)&&t.forEach(s=>{let l=o.find(a=>a.id===s.columnId);l?.id&&i.push(Me(P({},l),{cssClass:s.cssClass,headerCssClass:s.headerCssClass,width:s.width}))}),this._columns=i,i}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){var e,t;if(!((e=this._gridOptions)===null||e===void 0)&&e.backendServiceApi){let i=this._gridOptions.backendServiceApi.service;if(i?.getCurrentFilters)return i.getCurrentFilters()}else if(!((t=this.filterService)===null||t===void 0)&&t.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){var e;if(!((e=this._gridOptions)===null||e===void 0)&&e.enablePagination)if(this._gridOptions.backendServiceApi){let t=this._gridOptions.backendServiceApi.service;if(t?.getCurrentPagination)return t.getCurrentPagination()}else return this.sharedService.currentPagination;return null}getCurrentRowSelections(e=!0){if(this._grid&&this._gridOptions&&this._dataView&&this.hasRowSelectionEnabled()){let t=[],i=this._dataView.mapIdsToRows(this._selectedRowDataContextIds||[]),o=this._selectedRowDataContextIds;return e===!0&&(t=this.refreshFilteredRowSelections()),t=this._selectedFilteredRowDataContextIds,{gridRowIndexes:i,dataContextIds:o,filteredDataContextIds:t}}return null}getCurrentSorters(){var e,t;if(!((e=this._gridOptions)===null||e===void 0)&&e.backendServiceApi){let i=this._gridOptions.backendServiceApi.service;if(i?.getCurrentSorters)return i.getCurrentSorters()}else if(!((t=this.sortService)===null||t===void 0)&&t.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){var e;return!((e=this._gridOptions)===null||e===void 0)&&e.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){var e;let t=!1;if(!((e=this._gridOptions)===null||e===void 0)&&e.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){let i=this._gridOptions.dataView.syncGridSelection;typeof i=="boolean"?t=this._gridOptions.dataView.syncGridSelection:typeof i=="object"&&(t=i.preserveHidden),t&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(t=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return t}resetColumns(e){let t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:Kt.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(e=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){var e,t;if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){let i=(t=(e=this.extensionService)===null||e===void 0?void 0:e.getExtensionByName)===null||t===void 0?void 0:t.call(e,Le.rowSelection);i?.instance&&this._grid.setSelectedRows([])}}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Kt.filter},gridState:this.getCurrentGridState({requestRefreshRowFilteredRow:!this.hasRowSelectionEnabled()})}),this.hasRowSelectionEnabled()&&this.reEvaluateRowSelectionAfterFilterChange()})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:Kt.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Kt.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:Kt.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(Le.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(Le.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.bindSlickGridRowSelectionToGridStateChange(),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",t=>{let i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:Kt.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Kt.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Kt.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(e,t,i){e.sort((o,s)=>o.columnIndexPosition-s.columnIndexPosition),e.forEach(o=>{let s=t.findIndex(a=>a.id===o.columnId),l=i.findIndex(a=>a.id===o.columnId);if(s>=0&&l===-1){let a=t[s];s===0?i.unshift(a):i.splice(s,0,a)}})}bindExtensionAddonEventToGridStateChange(e,t){var i,o,s;let l=(o=(i=this.extensionService)===null||i===void 0?void 0:i.getExtensionByName)===null||o===void 0?void 0:o.call(i,e),a=(s=l?.instance)===null||s===void 0?void 0:s[t];a&&typeof a.subscribe=="function"&&this._eventHandler.subscribe(a,(d,u)=>{let p=u?.columns,f=this.getAssociatedCurrentColumns(p);this.pubSubService.publish("onGridStateChanged",{change:{newValues:f,type:Kt.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(e,t){let i=t?.[e];i&&typeof i.subscribe=="function"&&this._eventHandler.subscribe(i,()=>{let o=t.getColumns(),s=this.getAssociatedCurrentColumns(o);this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:Kt.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(e){let t=e.onSetOptions;this._eventHandler.subscribe(t,(i,o)=>{let{frozenBottom:s,frozenColumn:l,frozenRow:a}=o.optionsBefore,{frozenBottom:d,frozenColumn:u,frozenRow:p}=o.optionsAfter;if(s!==d||l!==u||a!==p){let f={frozenBottom:d,frozenColumn:u,frozenRow:p},m=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:f,type:Kt.pinning},gridState:m})}})}bindSlickGridRowSelectionToGridStateChange(){this._grid&&this._gridOptions&&this._dataView&&(this._eventHandler.subscribe(this._dataView.onBeforePagingInfoChanged,()=>{this._wasRecheckedAfterPageChange=!1}),this._eventHandler.subscribe(this._dataView.onPagingInfoChanged,()=>{setTimeout(()=>{let e=this._dataView.mapIdsToRows(this._selectedRowDataContextIds||[]),t=this._grid.getSelectedRows();ti(e,t)||this._grid.setSelectedRows(e)})}),this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,(e,t)=>{if(Array.isArray(t.rows)&&Array.isArray(t.previousSelectedRows)){let i=t.rows,o=t.previousSelectedRows,s=i.filter(f=>o.indexOf(f)<0),l=o.filter(f=>i.indexOf(f)<0);this._wasRecheckedAfterPageChange&&l.length>0&&(this._dataView.mapRowsToIds(l)||[]).forEach(m=>{Array.isArray(this._selectedRowDataContextIds)&&this._selectedRowDataContextIds.splice(this._selectedRowDataContextIds.indexOf(m),1)}),s.length>0&&(this._dataView.mapRowsToIds(s)||[]).forEach(m=>{this._selectedRowDataContextIds.indexOf(m)===-1&&this._selectedRowDataContextIds.push(m)}),this._wasRecheckedAfterPageChange=!0;let a=this._dataView.mapIdsToRows(this._selectedRowDataContextIds||[]),d=this._grid.getSelectedRows();!ti(a,d)&&this._gridOptions.enablePagination&&this._grid.setSelectedRows(a);let u=this.refreshFilteredRowSelections(),p={gridRowIndexes:this._grid.getSelectedRows(),dataContextIds:this._selectedRowDataContextIds,filteredDataContextIds:u};this.pubSubService.publish("onGridStateChanged",{change:{newValues:p,type:Kt.rowSelection},gridState:this.getCurrentGridState()})}}))}hasRowSelectionEnabled(){let e=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e}reEvaluateRowSelectionAfterFilterChange(){let e=this._grid.getSelectedRows(),t=(this._selectedFilteredRowDataContextIds||[]).slice(),i=this.refreshFilteredRowSelections();if(!ti(this._selectedFilteredRowDataContextIds,t)){let o={gridRowIndexes:e,dataContextIds:this._selectedRowDataContextIds,filteredDataContextIds:i};this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:Kt.rowSelection},gridState:this.getCurrentGridState({requestRefreshRowFilteredRow:!1})})}}refreshFilteredRowSelections(){let e=[],t=this._dataView.getFilteredItems()||[];return Array.isArray(this._selectedRowDataContextIds)&&(e=[...this._selectedRowDataContextIds].filter(o=>t.findIndex(s=>s[this.datasetIdPropName]===o)>-1),this._selectedFilteredRowDataContextIds=e),e}};var gs=class{constructor(e,t){this.extensionUtility=e,this.pubSubService=t,this._subscriptions=[],this._eventHandler=new Slick.EventHandler}get _dataView(){var e;return((e=this._grid)===null||e===void 0?void 0:e.getData)&&this._grid.getData()}get eventHandler(){return this._eventHandler}get _gridOptions(){var e;return!((e=this._grid)===null||e===void 0)&&e.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}init(e){if(this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(e.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));let t=e.getPluginByName("Resizer");t?.onGridAfterResize&&this._eventHandler.subscribe(t.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onSetOptions,(i,o)=>{var s,l;((s=o?.optionsBefore)===null||s===void 0?void 0:s.frozenColumn)!==((l=o?.optionsAfter)===null||l===void 0?void 0:l.frozenColumn)&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(e=0){setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),e)}renderPreHeaderRowGroupingTitles(){var e;if(this._gridOptions&&this._gridOptions.frozenColumn!==void 0&&this._gridOptions.frozenColumn>=0){let t=this._grid.getPreHeaderPanelLeft();this.renderHeaderGroups(t,0,this._gridOptions.frozenColumn+1),t=this._grid.getPreHeaderPanelRight(),this.renderHeaderGroups(t,((e=this._gridOptions)===null||e===void 0?void 0:e.frozenColumn)+1,this._columnDefinitions.length)}else{let t=this._grid.getPreHeaderPanel();this.renderHeaderGroups(t,0,this._columnDefinitions.length)}}renderHeaderGroups(e,t,i){var o,s,l;Ve(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,e.parentElement&&e.parentElement.classList.add("slick-header");let a=this._grid.getHeaderColumnWidthDiff(),d,u=null,p="",f=0,m=(s=(o=this._gridOptions)===null||o===void 0?void 0:o.frozenHeaderWidthCalcDifferential)!==null&&s!==void 0?s:0,_=((l=this._gridOptions)===null||l===void 0?void 0:l.frozenColumn)!==void 0&&this._gridOptions.frozenColumn>=0;for(let C=t;C<i;C++)if(d=this._columnDefinitions[C],d){if(p===d.columnGroup&&C>0)f+=d.width||0,u?.style&&(u.style.width=`${f-a-m}px`);else{f=d.width||0,u=N("div",{className:`ui-state-default slick-header-column ${_?"frozen":""}`,style:{width:`${f-a}px`}});let b=N("span",{className:"slick-column-name",textContent:d.columnGroup||""});u.appendChild(b),e.appendChild(u)}p=d.columnGroup||""}}translateGroupingAndColSpan(){let e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}};var vs=class{constructor(e,t,i,o){this.pubSubService=e,this.sharedService=t,this.backendUtilities=i,this.rxjs=o,this._eventHandler=new Slick.EventHandler,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[]}get dataView(){var e,t,i;return(i=(t=(e=this.grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}addRxJsResource(e){this.rxjs=e}init(e,t,i){if(this._availablePageSizes=t.pageSizes,this.grid=e,this._backendServiceApi=i,this._paginationOptions=t,this._isLocalGrid=!i,this._pageNumber=t.pageNumber||1,i&&(!i.service||!i.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(s,l)=>{this._totalItems!==l.totalRows&&(this.updateTotalItems(l.totalRows),this._previousPagination={pageNumber:l.pageNum,pageSize:l.pageSize,pageSizes:this.availablePageSizes,totalItems:l.totalRows})}),setTimeout(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",s=>this.processOnItemAddedOrRemoved(s,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",s=>this.processOnItemAddedOrRemoved(s,!1)))),this.refreshPagination(!1,!1,!0);let o=this.getFullPagination();this._previousPagination={pageNumber:o.pageNumber,pageSize:o.pageSize,pageSizes:o.pageSizes,totalItems:this.totalItems},this._initialized=!0}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,t,i=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToFirstPage(e,t=!0){return this._pageNumber=1,t?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e,t=!0){return this._pageNumber=this._pageCount||1,t?this.processOnPageChanged(this._pageNumber||1,e):Promise.resolve(this.getFullPagination())}goToNextPage(e,t=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,t?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,t,i=!0){let o=this._pageNumber;return e<1?this._pageNumber=1:e>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=e,this._pageNumber!==o?i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e,t=!0){return this._pageNumber>1?(this._pageNumber--,t?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(e=!1,t=!0,i=!1){var o,s,l;let a=P({},this.getFullPagination());if(this._paginationOptions){let u=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=u.pageSize:this._itemsPerPage=+(!((l=(s=(o=this._backendServiceApi)===null||o===void 0?void 0:o.options)===null||s===void 0?void 0:s.paginationOptions)===null||l===void 0)&&l.first?this._backendServiceApi.options.paginationOptions.first:u.pageSize)),(e||this._totalItems!==u.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&u.pageNumber&&u.pageNumber>1&&(this._pageNumber=u.pageNumber||1),this._pageNumber===1&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=u.pageSizes,!this._totalItems&&u.totalItems&&(this._totalItems=u.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),t&&!ti(a,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),i&&!ti(a,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());let d=this.getFullPagination();this._previousPagination={pageNumber:d.pageNumber,pageSize:d.pageSize,pageSizes:d.pageSizes,totalItems:this.totalItems}}resetPagination(e=!0){var t,i;this._isLocalGrid&&this.dataView&&(!((i=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)===null||i===void 0)&&i.enablePagination)&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this.refreshPagination(!0,e)}togglePaginationVisibility(e){var t;if(this.grid&&(!((t=this.sharedService)===null||t===void 0)&&t.gridOptions)){let i=e!==void 0?e:!this.sharedService.gridOptions.enablePagination;if(i&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){let o=e?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:o,pageNum:0})}this.sharedService.gridOptions.enablePagination=i,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:i})}}processOnPageChanged(e,t){return this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())===!1?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((i,o)=>{var s,l,a;if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),i(this.getFullPagination());else{let d=+this._itemsPerPage,u=new Date;if(!((s=this._backendServiceApi)===null||s===void 0)&&s.preProcess&&this._backendServiceApi.preProcess(),!((l=this._backendServiceApi)===null||l===void 0)&&l.process){let p=this._backendServiceApi.service.processOnPaginationChanged(t,{newPage:e,pageSize:d}),f=this._backendServiceApi.process(p);f instanceof Promise?f.then(m=>{var _;(_=this.backendUtilities)===null||_===void 0||_.executeBackendProcessesCallback(u,m,this._backendServiceApi,this._totalItems);let C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},i(this.getFullPagination())}).catch(m=>{var _,C,b;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(m,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((b=this.backendUtilities)===null||b===void 0)&&b.onBackendError))&&o(f)}):!((a=this.rxjs)===null||a===void 0)&&a.isObservable(f)&&this._subscriptions.push(f.subscribe(m=>{var _;let C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},i((_=this.backendUtilities)===null||_===void 0?void 0:_.executeBackendProcessesCallback(u,m,this._backendServiceApi,this._totalItems))},m=>{var _,C,b;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(m,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((b=this.backendUtilities)===null||b===void 0)&&b.onBackendError))&&o(f)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){this._totalItems===0?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._pageNumber=this._totalItems>0&&this._pageNumber===0?1:this._pageNumber,this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){var e,t,i,o,s,l,a,d,u,p,f,m,_;let C=((e=this._previousPagination)===null||e===void 0?void 0:e.pageNumber)!==this.getFullPagination().pageNumber,b=((t=this._previousPagination)===null||t===void 0?void 0:t.pageSize)!==this.getFullPagination().pageSize;b&&this.changeItemPerPage((o=(i=this._previousPagination)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:0,null,!1),C&&this.goToPageNumber((l=(s=this._previousPagination)===null||s===void 0?void 0:s.pageNumber)!==null&&l!==void 0?l:0,null,!1),(C||b)&&(this.refreshPagination(),(u=(d=(a=this._backendServiceApi)===null||a===void 0?void 0:a.service)===null||d===void 0?void 0:d.updatePagination)===null||u===void 0||u.call(d,(f=(p=this._previousPagination)===null||p===void 0?void 0:p.pageNumber)!==null&&f!==void 0?f:0,(_=(m=this._previousPagination)===null||m===void 0?void 0:m.pageSize)!==null&&_!==void 0?_:0))}updateTotalItems(e,t=!1){this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,t))}processOnItemAddedOrRemoved(e,t=!0){if(e!==null){let i=this._dataTo,o=Array.isArray(e)?e.length:1,s=t?+o:-o;this._totalItems+=s,this.recalculateFromToIndexes(),this._dataTo=i+s,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}};var Ou=20,Ru=25,Iu=35,Pu=180,Du=300,Au=200,_s=class{constructor(e){this.pubSubService=e,this._intervalRetryDelay=Au,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new Slick.EventHandler}get eventHandler(){return this._eventHandler}get gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get dataView(){var e;return(e=this._grid)===null||e===void 0?void 0:e.getData()}get gridUid(){var e,t;return(t=(e=this._grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){var e,t;return(t=(e=this.gridOptions)===null||e===void 0?void 0:e.resizeByContentOptions)!==null&&t!==void 0?t:{}}dispose(){var e,t;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._intervalId&&clearInterval(this._intervalId),clearTimeout(this._timer),((t=this.gridOptions.autoResize)===null||t===void 0?void 0:t.resizeDetection)==="container"?this._resizeObserver&&this._resizeObserver.disconnect():$(window).off(`resize.grid${this.gridUidSelector}`)}init(e,t){var i,o,s,l,a,d,u,p;if(!e||!this.gridOptions||!t)throw new Error(`
      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.
      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid()`);this._grid=e,this._gridParentContainerElm=t;let f=!((i=this.gridOptions)===null||i===void 0)&&i.gridHeight||!((o=this.gridOptions)===null||o===void 0)&&o.gridWidth?{height:(s=this.gridOptions)===null||s===void 0?void 0:s.gridHeight,width:(l=this.gridOptions)===null||l===void 0?void 0:l.gridWidth}:void 0;this._autoResizeOptions=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.autoResize)!==null&&d!==void 0?d:{container:"grid1",bottomPadding:0},f?.width&&t?.style&&(t.style.width=typeof f.width=="string"?f.width:`${f.width}px`);let m=(u=e?.getContainerNode)===null||u===void 0?void 0:u.call(e);this._gridDomElm=$(m),typeof this._autoResizeOptions.container=="string"?this._pageContainerElm=$(this._autoResizeOptions.container):this._pageContainerElm=$(this._autoResizeOptions.container),this._gridContainerElm=$(t),f&&(this._fixedHeight=f.height,this._fixedWidth=f.width),this.gridOptions&&this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),!((p=this.gridOptions)===null||p===void 0)&&p.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",_=>{this.handleSingleColumnResizeByContent(_.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(_,C)=>{this.handleSingleColumnResizeByContent(C.triggeredByColumn)}))}bindAutoResizeDataGrid(e){var t;if(((t=this.gridOptions.autoResize)===null||t===void 0?void 0:t.resizeDetection)==="container"){if(!this._pageContainerElm||!this._pageContainerElm[0])throw new Error(`
          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"
          You can fix this by setting your gridOption.autoResize.container`);this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm[0])}else{if(this._gridDomElm===void 0||this._gridDomElm.offset()===void 0)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(i=>console.log("Error:",i)),this.resizeGrid(10,e),$(window).on(`resize.grid${this.gridUidSelector}`,this.handleResizeGrid.bind(this,e))}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(e){var t,i,o,s,l,a;let d=(t=e?.autoResize)!==null&&t!==void 0?t:{};if(!window||this._pageContainerElm===void 0||this._gridDomElm.offset()===void 0)return null;let u=d?.bottomPadding!==void 0?d.bottomPadding:Ou;if(u&&e.enablePagination&&(u+=Iu),u&&e.showCustomFooter){let z=(s=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.customFooterOptions)===null||o===void 0?void 0:o.footerHeight)!==null&&s!==void 0?s:Ru;u+=parseInt(`${z}`,10)}let p=0,f=0;if(d.calculateAvailableSizeBy==="container")p=this._pageContainerElm.height()||0;else{p=window.innerHeight||0;let z=this._gridDomElm.offset();f=z!==void 0?z.top:0}let m=p-f-u,_=this._pageContainerElm.width()||window.innerWidth||0,C=d?.maxHeight,b=(l=d?.minHeight)!==null&&l!==void 0?l:Pu,E=d?.maxWidth,x=(a=d?.minWidth)!==null&&a!==void 0?a:Du,R=m,L=d?.rightPadding?_-d.rightPadding:_;return R<b&&(R=b),C&&R>C&&(R=C),L<x&&(L=x),E&&L>E&&(L=E),{height:this._fixedHeight||R,width:this._fixedWidth||L}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,t){return new Promise(i=>{e=e||0,e>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>i(this.resizeGridCallback(t)),e)):i(this.resizeGridCallback(t))})}resizeGridCallback(e){var t,i;let o=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",o),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((t=this._lastDimensions)===null||t===void 0)&&t.width)||o?.width!==((i=this._lastDimensions)===null||i===void 0?void 0:i.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions=o,o}resizeGridWithDimensions(e){var t,i,o,s;let l=this.calculateGridNewDimensions(this.gridOptions);if((e||l)&&this._gridDomElm.length>0){let a=e?.height?e.height:l?.height,d=e?.width?e.width:l?.width;this.gridOptions.autoHeight||(this._gridDomElm.height(a),this._gridContainerElm.height(a)),this._gridDomElm.width(d),this._gridContainerElm.width(d),new RegExp("MSIE [6-8]").exec(navigator.userAgent)===null&&(!((t=this._grid)===null||t===void 0)&&t.resizeCanvas)&&$(this._gridContainerElm)&&this._grid.resizeCanvas(),!((i=this.gridOptions)===null||i===void 0)&&i.enableAutoSizeColumns&&this._grid.autosizeColumns?this.gridUid&&$(`${this.gridUidSelector}`).length>0&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((o=this._lastDimensions)===null||o===void 0)&&o.width)||d!==((s=this._lastDimensions)===null||s===void 0?void 0:s.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:a||0,width:d||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(e=!0){this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(e=!1){var t,i,o,s,l,a,d;let u=this._grid.getColumns(),p=this.dataView.getItems(),f={},m=!1,_=0,C=(i=(t=this._gridParentContainerElm)===null||t===void 0?void 0:t.offsetWidth)!==null&&i!==void 0?i:0;if(!Array.isArray(p)||p.length===0||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<C){this._grid.autosizeColumns();return}if(this._hasResizedByContentAtLeastOnce&&(!((o=this.gridOptions)===null||o===void 0)&&o.resizeByContentOnlyOnFirstLoad)&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),this._totalColumnsWidthByContent===0||e){for(let x of u)f[x.id]=(l=(s=x.originalWidth)!==null&&s!==void 0?s:x.minWidth)!==null&&l!==void 0?l:0;_=this.calculateCellWidthByReadingDataset(u,f,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let E=0;for(let x of u){let R=(d=(a=x.resizeAlwaysRecalculateWidth)!==null&&a!==void 0?a:this.resizeByContentOptions.alwaysRecalculateColumnWidth)!==null&&d!==void 0?d:!1;x.originalWidth&&!R?x.width=x.originalWidth:f[x.id]!==void 0&&(x.rerenderOnResize&&(m=!0),this.applyNewCalculatedColumnWidthByReference(x,f[x.id])),E+=x.width||0,this._totalColumnsWidthByContent=E}}this._grid.setColumns(u),this._hasResizedByContentAtLeastOnce=!0;let b={};for(let E of u)b[E.id]=E.width;this._totalColumnsWidthByContent>C?this._grid.reRenderColumns(m):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:_,calculateColumnWidths:b})}calculateCellWidthByReadingDataset(e,t,i=1e3,o){let s=Array.isArray(e)?e:[e],l=this.dataView.getItems(),a=0;for(let[d,u]of l.entries()){if(d>i)break;Array.isArray(s)&&typeof t=="object"&&s.forEach((p,f)=>{let m=this.calculateCellWidthByContent(u,p,d,o??f,t[p.id]);m!==void 0&&(t[p.id]=m)}),a=d+1}return a}calculateCellWidthByContent(e,t,i,o,s){var l,a;let d=(l=this.resizeByContentOptions.cellCharWidthInPx)!==null&&l!==void 0?l:7;if(!t.originalWidth){let u=(a=t?.resizeCharWidthInPx)!==null&&a!==void 0?a:d,p=Yo(t?.formatter,i,o,t,e,this._grid),f=qi(p),m=Math.ceil(f.length*u),_=t.resizeMaxWidthThreshold;t&&(s===void 0||m>s)&&(s=_!==void 0&&m>_?_:t.maxWidth!==void 0&&m>t.maxWidth?t.maxWidth:m)}return s}applyNewCalculatedColumnWidthByReference(e,t){var i,o,s,l,a,d,u;let p=(i=this.resizeByContentOptions.cellPaddingWidthInPx)!==null&&i!==void 0?i:6,f=(o=this.resizeByContentOptions.formatterPaddingWidthInPx)!==null&&o!==void 0?o:6,m=(a=(l=(s=e?.filter)===null||s===void 0?void 0:s.type)!==null&&l!==void 0?l:e?.type)!==null&&a!==void 0?a:O.string,_=t,C=(u=(d=e?.resizeCalcWidthRatio)!==null&&d!==void 0?d:this.resizeByContentOptions.defaultRatioForStringType)!==null&&u!==void 0?u:.9;_*=m==="string"?C:1,_+=p,e.resizeExtraWidthPadding&&(_+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(_+=f),e.maxWidth!==void 0&&_>e.maxWidth&&(_=e.maxWidth),e.resizeMaxWidthThreshold!==void 0&&_>e.resizeMaxWidthThreshold&&(_=e.resizeMaxWidthThreshold),_=Math.ceil(_),(e.originalWidth===void 0||e.resizeAlwaysRecalculateWidth===!0||this.resizeByContentOptions.alwaysRecalculateColumnWidth===!0)&&(e.width=this.readjustNewColumnWidthWhenOverLimit(e,_))}handleSingleColumnResizeByContent(e){var t,i,o;let s=this._grid.getColumns(),l=s.findIndex(a=>a.id===e);if(l>=0){let a=s[l],d={[e]:(i=(t=a.originalWidth)!==null&&t!==void 0?t:a.minWidth)!==null&&i!==void 0?i:0};a.originalWidth=void 0,this.calculateCellWidthByReadingDataset(a,d,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,l),this.applyNewCalculatedColumnWidthByReference(a,d[e]),this._grid.reRenderColumns((o=a?.rerenderOnResize)!==null&&o!==void 0?o:!1)}}readjustNewColumnWidthWhenOverLimit(e,t){var i,o,s,l,a,d,u,p;let f=(i=this.gridOptions.frozenColumn)!==null&&i!==void 0?i:-1,m=(o=this._grid.getColumns().findIndex(C=>C.id===e.id))!==null&&o!==void 0?o:0,_=t;if(f>=0&&m<=f){let C=Array.from(this._grid.getViewports());if(C){let b=(l=(s=C.find(z=>z.classList.contains("slick-viewport-left")))===null||s===void 0?void 0:s.clientWidth)!==null&&l!==void 0?l:0,E=(d=(a=C.find(z=>z.classList.contains("slick-viewport-right")))===null||a===void 0?void 0:a.clientWidth)!==null&&d!==void 0?d:0,x=b+E,R=b-((u=e.width)!==null&&u!==void 0?u:0);if(R+t>x){let z=(p=this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment)!==null&&p!==void 0?p:50;_=b-R+E-z}}}return Math.ceil(_)}checkIsGridShown(){var e,t;return!!((t=(e=document.querySelector(`${this.gridUidSelector}`))===null||e===void 0?void 0:e.offsetParent)!==null&&t!==void 0&&t)}resizeGridWhenStylingIsBrokenUntilCorrected(){var e,t,i,o;let s=(t=(e=this.gridOptions)===null||e===void 0?void 0:e.autoFixResizeTimeout)!==null&&t!==void 0?t:18e3,l=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.autoFixResizeRequiredGoodCount)!==null&&o!==void 0?o:5,a=this._gridParentContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),d=this._gridParentContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`),u=0,p=0;if(a&&d&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){let f=this.dataView.getItemCount(),m=this._grid.getColumns()||[];this._intervalId=setInterval(()=>Ot(this,null,function*(){var _,C,b,E,x,R;let z=Nt(a),B=(_=z?.top)!==null&&_!==void 0?_:0;this.gridOptions&&this.gridOptions.enableFiltering&&this.gridOptions.headerRowHeight&&(B+=this.gridOptions.headerRowHeight),this.gridOptions&&this.gridOptions.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(B+=this.gridOptions.preHeaderPanelHeight),B+=44;let G=Nt(d),V=(C=G?.top)!==null&&C!==void 0?C:0,H=Nt(this._gridParentContainerElm),K=z?.top===0||B-V>2||H?.left===0&&H?.top===0,oe=(R=(x=(E=(b=this._grid).getRenderedRange)===null||E===void 0?void 0:E.call(b))===null||x===void 0?void 0:x.rightPx)!==null&&R!==void 0?R:0;!K&&f>0&&oe===0&&m.length>1&&(K=!0),this._isStopResizeIntervalRequested&&(K=!1,u=s),this.checkIsGridShown()&&(K||H?.left===0||H?.top===0)&&(yield this.resizeGrid(),this.checkIsGridShown()&&(K=!1)),this.checkIsGridShown()&&p++,this.checkIsGridShown()&&!K&&(p>=l||u++>=s)&&clearInterval(this._intervalId)}),this.intervalRetryDelay)}}};var Cs=class{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}get currentPagination(){return this._currentPagination}set currentPagination(e){this._currentPagination=e}get dataView(){return this._dataView}set dataView(e){this._dataView=e}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(e){this._frozenVisibleColumnId=e}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(e){this._hasColumnsReordered=e}get slickGrid(){return this._grid}set slickGrid(e){this._grid=e}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(e){this._gridContainerElm=e}get gridOptions(){var e;return this._gridOptions||((e=this._grid)===null||e===void 0?void 0:e.getOptions())||{}}set gridOptions(e){this._gridOptions=e}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(e){this._groupItemMetadataProvider=e}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(e){this._hideHeaderRowAfterPageLoad=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}};var bs=class{constructor(e,t,i,o){this.sharedService=e,this.pubSubService=t,this.backendUtilities=i,this.rxjs=o,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}dispose(){var e,t;!((e=this._eventHandler)===null||e===void 0)&&e.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((t=this.rxjs)===null||t===void 0)&&t.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){var t,i;this._isBackendGrid=!0,this._grid=e,this._dataView=(i=(t=e?.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{},this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(e,t){let i=t.multiColumnSort?t.sortCols:new Array({columnId:t.sortCol.id,sortAsc:t.sortAsc,sortCol:t.sortCol});this._currentLocalSorters=[],Array.isArray(i)&&i.forEach(o=>{o.sortCol&&this._currentLocalSorters.push({columnId:o.sortCol.id,direction:o.sortAsc?Yi.ASC:Yi.DESC})}),this.onLocalSortChanged(this._grid,i),this.emitSortChanged(at.local)}clearSortByColumnId(e,t){var i,o;let s=this.getCurrentColumnSorts(),l=this.getCurrentColumnSorts(`${t}`);if(Array.isArray(s)&&Array.isArray(l)&&s.length!==l.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:l,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,l,!0,!0);else{let u=((o=(i=this._gridOptions)===null||i===void 0?void 0:i.multiColumnSort)!==null&&o!==void 0?o:!1)?l:l[0];this._grid.onSort.notify(u)}let a=l.map(d=>({columnId:d&&d.sortCol&&d.sortCol.id,sortAsc:d&&d.sortAsc,sortCol:d&&d.sortCol}));this._grid.setSortColumns(a)}Array.isArray(l)&&l.length===0&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(e=!0){var t,i;if(this._grid&&this._gridOptions&&this._dataView){if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){let o=(i=(t=this._gridOptions)===null||t===void 0?void 0:t.backendServiceApi)===null||i===void 0?void 0:i.service;o?.clearSorters&&o.clearSorters()}}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(e=!0,t=!0){let o=!this._gridOptions.enableSorting;this._gridOptions.enableSorting=o;let s;e?(t&&this.clearSorting(),this._eventHandler.unsubscribeAll(),s=this.disableAllSortingCommands(!0)):(s=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(l,a)=>this.handleLocalOnSort(l,a))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(s)}toggleSortFunctionality(e=!0){let t=this._gridOptions.enableSorting;this.disableSortFunctionality(t,e)}emitSortChanged(e,t){var i;if(e===at.remote&&(!((i=this._gridOptions)===null||i===void 0)&&i.backendServiceApi)){let o=[],s=this._gridOptions.backendServiceApi.service;s?.getCurrentSorters&&(o=s.getCurrentSorters()),this.pubSubService.publish("onSortChanged",o)}else e===at.local&&(t&&(this._currentLocalSorters=t),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){let t=this._grid.getSortColumns();if(Array.isArray(t))return t.reduce((o,s)=>(s&&(!e||s.columnId!==e)&&o.push({columnId:s.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(s.columnId||"")],sortAsc:s.sortAsc}),o),[])}return[]}loadGridSorters(e){this._currentLocalSorters=[];let t=[];return Array.isArray(e)&&((this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach(o=>{let s=this._columnDefinitions.find(l=>l.id===o.columnId);s&&(t.push({columnId:s.id,sortAsc:o.direction.toUpperCase()===Yi.ASC,sortCol:s}),this._currentLocalSorters.push({columnId:s.id+"",direction:o.direction.toUpperCase()}))}),this.onLocalSortChanged(this._grid,t),this._grid.setSortColumns(t.map(o=>({columnId:o.columnId,sortAsc:o.sortAsc})))),t}processTreeDataInitialSort(){var e,t,i;if(!((e=this._gridOptions)===null||e===void 0)&&e.enableTreeData&&this._gridOptions.treeDataOptions){let o=this._gridOptions.treeDataOptions,s=this._columnDefinitions.find(l=>l.id===o.columnId);if(s){let l=Yi.ASC,a={columnId:o.columnId,sortCol:s,sortAsc:!0};if(!((t=o?.initialSort)===null||t===void 0)&&t.columnId){let d=o.initialSort.columnId,u=this._columnDefinitions.find(p=>p.id===d);l=(o.initialSort.direction||Yi.ASC).toUpperCase(),a={columnId:d,sortCol:u,sortAsc:l===Yi.ASC}}a?.columnId&&(!((i=this.sharedService)===null||i===void 0)&&i.hierarchicalDataset)&&this.updateSorting([{columnId:a.columnId||"",direction:l}])}}}onBackendSortChanged(e,t){var i,o;if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');let s=t.grid&&t.grid.getOptions?t.grid.getOptions():{},l=s.backendServiceApi;if(!l||!l.process||!l.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');let a=new Date;l.preProcess&&l.preProcess();let d=l.service.processOnSortChanged(e,t),u=((i=s?.pagination)===null||i===void 0?void 0:i.totalItems)||0;(o=this.backendUtilities)===null||o===void 0||o.executeBackendCallback(l,d,t,a,u,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{var p,f,m;this._grid.setSortColumns(t.previousSortColumns||[]);let _=(p=t.previousSortColumns)===null||p===void 0?void 0:p.map(C=>({columnId:C.columnId,sortAsc:C.sortAsc,sortCol:this._columnDefinitions.find(b=>b.id===C.columnId)}));(m=(f=l?.service)===null||f===void 0?void 0:f.updateSorters)===null||m===void 0||m.call(f,_||[])},httpCancelRequestSubject:this.httpCancelRequests$})}onLocalSortChanged(e,t,i=!1,o=!1){return Ot(this,null,function*(){var s,l,a,d,u;let p=(l=(s=this._gridOptions)===null||s===void 0?void 0:s.datasetIdPropertyName)!==null&&l!==void 0?l:"id",f=(d=(a=this._gridOptions)===null||a===void 0?void 0:a.enableTreeData)!==null&&d!==void 0?d:!1,m=(u=e.getData)===null||u===void 0?void 0:u.call(e);if(yield this.pubSubService.publish("onBeforeSortChange",{sortColumns:t},0),e&&m){if(i&&!f&&m.reSort(),f&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){let _=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,t);this._dataView.setItems(_.flat,p),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else m.sort(this.sortComparers.bind(this,t));e.invalidate(),o&&this.emitSortChanged(at.local,t.map(_=>{var C,b;return{columnId:(b=(C=_.sortCol)===null||C===void 0?void 0:C.id)!==null&&b!==void 0?b:"id",direction:_.sortAsc?Yi.ASC:Yi.DESC}}))}})}sortHierarchicalDataset(e,t,i=!1){var o,s,l,a,d,u;this.sortTreeData(e,t);let p=(s=(o=this._gridOptions)===null||o===void 0?void 0:o.datasetIdPropertyName)!==null&&s!==void 0?s:"id",f=(a=(l=this._gridOptions)===null||l===void 0?void 0:l.treeDataOptions)!==null&&a!==void 0?a:{columnId:""},m=Me(P({},f),{identifierPropName:(d=f.identifierPropName)!==null&&d!==void 0?d:p,shouldAddTreeLevelNumber:!0}),_=gl(e,m);if(i){this._currentLocalSorters=[];for(let b of t)this._currentLocalSorters.push({columnId:b.columnId,direction:b.sortAsc?"ASC":"DESC"});let C=!((u=this._gridOptions)===null||u===void 0)&&u.backendServiceApi?at.remote:at.local;this.emitSortChanged(C)}return{hierarchical:e,flat:_}}sortLocalGridByDefaultSortFieldId(){let e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",t={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:t.id,sortAsc:!0,sortCol:t,clearSortTriggered:!0}),!1,!0)}sortComparers(e,t,i){if(Array.isArray(e))for(let o of e){let s=this.sortComparer(o,t,i);if(s!==void 0)return s}return mt.neutral}sortComparer(e,t,i,o){if(e?.sortCol){let s=e.sortCol,l=e.sortAsc?mt.asc:mt.desc,a=o||s.queryFieldSorter||s.queryField||s.field,d=a,u=s.type||O.string;typeof s.queryFieldNameGetterFn=="function"&&(a=s.queryFieldNameGetterFn(t),d=s.queryFieldNameGetterFn(i));let p=t[a],f=i[d];if(a&&a.indexOf(".")>=0&&(p=je(t,a)),d&&d.indexOf(".")>=0&&(f=je(i,d)),s.sortComparer){let m=s.sortComparer(p,f,l,s,this._gridOptions);if(m!==mt.neutral)return m}else{let m=Bo(u,p,f,l,s,this._gridOptions);if(m!==mt.neutral)return m}}}sortTreeData(e,t){if(Array.isArray(t))for(let i of t)this.sortTreeChildren(e,i,0)}sortTreeChildren(e,t,i){var o,s;let l=(o=this._gridOptions)===null||o===void 0?void 0:o.treeDataOptions,a=(s=l?.childrenPropName)!==null&&s!==void 0?s:"children";e.sort((d,u)=>{var p;return(p=this.sortComparer(t,d,u))!==null&&p!==void 0?p:mt.neutral});for(let d of e)d&&d.hasOwnProperty(a)&&Array.isArray(d[a])&&(i++,this.sortTreeChildren(d[a],t,i),i--)}updateSorting(e,t=!0,i=!0){var o,s;if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){let l=(o=this._gridOptions)===null||o===void 0?void 0:o.backendServiceApi;if(l){let a=l?.service;a?.updateSorters&&(a.updateSorters(void 0,e),i&&((s=this.backendUtilities)===null||s===void 0||s.refreshBackendDataset(this._gridOptions)))}else this.loadGridSorters(e);if(t){let a=l?at.remote:at.local;this.emitSortChanged(a)}}}disableAllSortingCommands(e=!0){var t,i;let o=this._grid.getColumns();o.forEach(l=>{var a;typeof l.sortable!==void 0&&(l.sortable=!e),!((a=l?.header)===null||a===void 0)&&a.menu&&l.header.menu.items.forEach(d=>{if(d&&typeof d!="string"){let u=d.command;(u==="sort-asc"||u==="sort-desc"||u==="clear-sort")&&(d.hidden=e)}})});let s=(i=(t=this._gridOptions)===null||t===void 0?void 0:t.gridMenu)===null||i===void 0?void 0:i.commandItems;return s&&s.forEach(l=>{l&&typeof l!="string"&&l.command==="clear-sorting"&&(l.hidden=e)}),o}};var ws=class{constructor(e,t,i){this.pubSubService=e,this.sharedService=t,this.sortService=i,this._isLastFullToggleCollapsed=!1,this._currentToggledItems=[],this._subscriptions=[],this._eventHandler=new Slick.EventHandler}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){var e;return(e=this.dataView)===null||e===void 0?void 0:e.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getData)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get eventHandler(){return this._eventHandler}get gridOptions(){var e,t,i;return(i=(t=(e=this._grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){var t,i,o,s,l,a,d,u,p,f,m;if(this._grid=e,this._isLastFullToggleCollapsed=(o=(i=(t=this.gridOptions)===null||t===void 0?void 0:t.treeDataOptions)===null||i===void 0?void 0:i.initiallyCollapsed)!==null&&o!==void 0?o:!1,this._currentToggledItems=(a=(l=(s=this.gridOptions.presets)===null||s===void 0?void 0:s.treeData)===null||l===void 0?void 0:l.toggledItems)!==null&&a!==void 0?a:[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},!((d=this.gridOptions)===null||d===void 0)&&d.enableTreeData){if(!((u=this.gridOptions)===null||u===void 0)&&u.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!(!((p=this.gridOptions)===null||p===void 0)&&p.enableFiltering))throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(!((f=this.gridOptions)===null||f===void 0)&&f.backendServiceApi||!((m=this.gridOptions)===null||m===void 0)&&m.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this)))}applyToggledItemStateChanges(e,t,i=!0,o=!1){if(Array.isArray(e)){let s=this.getTreeDataOptionPropName("collapsedPropName"),l=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);let d=(t??this._lastToggleStateChange.previousFullToggleType)==="full-collapse";t&&(this._lastToggleStateChange.previousFullToggleType=t),i&&(this.dataView.getItems()||[]).forEach(u=>{u[l]&&(u[s]=d)}),this.dynamicallyToggleItemState(e,o)}}dynamicallyToggleItemState(e,t=!0){if(Array.isArray(e)){this.dataView.beginUpdate(!0);for(let i of e){let o=this.dataView.getItemById(i.itemId);if(this.updateToggledItem(o,i.isCollapsed),t){let s=this._currentToggledItems.findIndex(l=>l.itemId===i.itemId);s>=0?this._currentToggledItems[s].isCollapsed=i.isCollapsed:this._currentToggledItems.push({itemId:i.itemId,isCollapsed:i.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",Me(P({},this._lastToggleStateChange),{fromItemId:i.itemId,toggledItems:this._currentToggledItems,type:i.isCollapsed?wo.toggleCollapse:wo.toggleExpand}))}}this.dataView.endUpdate(),this.dataView.refresh()}}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,t){var i,o,s;let l=t?.treeDataOptions,a=(i=l?.initialSort)!==null&&i!==void 0?i:{columnId:(o=l?.columnId)!==null&&o!==void 0?o:"",direction:"ASC"},d=e.find(u=>u.id===a.columnId);return{columnId:a.columnId,sortAsc:((s=a?.direction)===null||s===void 0?void 0:s.toUpperCase())!=="DESC",sortCol:d}}getItemCount(e){if(e!==void 0){let t=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(i=>i[t]===e).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(e){var t,i,o,s,l,a,d,u,p,f,m,_,C,b;let E="";switch(e){case"childrenPropName":E=(i=(t=this.treeDataOptions)===null||t===void 0?void 0:t.childrenPropName)!==null&&i!==void 0?i:ie.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":E=(s=(o=this.treeDataOptions)===null||o===void 0?void 0:o.collapsedPropName)!==null&&s!==void 0?s:ie.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":E=(a=(l=this.treeDataOptions)===null||l===void 0?void 0:l.hasChildrenPropName)!==null&&a!==void 0?a:ie.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":E=(f=(u=(d=this.treeDataOptions)===null||d===void 0?void 0:d.identifierPropName)!==null&&u!==void 0?u:(p=this.gridOptions)===null||p===void 0?void 0:p.datasetIdPropertyName)!==null&&f!==void 0?f:"id";break;case"levelPropName":E=(_=(m=this.treeDataOptions)===null||m===void 0?void 0:m.levelPropName)!==null&&_!==void 0?_:ie.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":E=(b=(C=this.treeDataOptions)===null||C===void 0?void 0:C.parentPropName)!==null&&b!==void 0?b:ie.treeDataProperties.PARENT_PROP;break}return E}clearSorting(){let e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,t,i){var o;let s=this.convertFlatParentChildToTreeDataset(e,i),l=this.getInitialSort(t,i),a=this.sortService.sortHierarchicalDataset(s,[l],!0);return(o=this._grid)===null||o===void 0||o.setSortColumns([l]),a}convertFlatParentChildToTreeDataset(e,t){var i,o,s;let l=(i=t?.datasetIdPropertyName)!==null&&i!==void 0?i:"id",a=(o=t?.treeDataOptions)!==null&&o!==void 0?o:{columnId:"id"},d=Me(P({},a),{identifierPropName:(s=a.identifierPropName)!==null&&s!==void 0?s:l,initiallyCollapsed:this._isLastFullToggleCollapsed});return vl(e,d)}sortHierarchicalDataset(e,t){let i=t??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),o=Array.isArray(i)?i:[i];return this.sortService.sortHierarchicalDataset(e,o)}toggleTreeDataCollapse(e,t=!0){return Ot(this,null,function*(){var i;if(!((i=this.gridOptions)===null||i===void 0)&&i.enableTreeData){let s=this.getTreeDataOptionPropName("hasChildrenPropName");t&&(yield this.pubSubService.publish("onTreeFullToggleStart",{collapsing:e})),this.dataView.beginUpdate(!0),(this.dataView.getItems()||[]).forEach(l=>{l[s]&&this.updateToggledItem(l,e)}),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=e}let o=e?wo.fullCollapse:wo.fullExpand;this._lastToggleStateChange={type:o,previousFullToggleType:o,toggledItems:null},t&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)})}handleOnCellClick(e,t){var i;if(e&&t){let o=e.target||{},s=(i=this.gridOptions.datasetIdPropertyName)!==null&&i!==void 0?i:"id",l=this.getTreeDataOptionPropName("collapsedPropName"),a=this.getTreeDataOptionPropName("childrenPropName");if(typeof o?.className=="string"&&(o.className.indexOf("toggle")>=0||!1)){let u=this.dataView.getItem(t.row);if(u){u[l]=!u[l];let p=u[l],f=u[s],m=this._currentToggledItems.findIndex(b=>b.itemId===f);m>=0?this._currentToggledItems[m].isCollapsed=p:this._currentToggledItems.push({itemId:f,isCollapsed:p}),this.dataView.updateItem(f,u);let _=b=>b[s]===f,C=Xn(this.sharedService.hierarchicalDataset||[],_,a);C&&(C[l]=p),this._grid.invalidate(),this._lastToggleStateChange={type:p?wo.toggleCollapse:wo.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",Me(P({},this._lastToggleStateChange),{fromItemId:f}))}e.stopImmediatePropagation()}}}updateToggledItem(e,t){var i,o;let s=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.datasetIdPropertyName)!==null&&o!==void 0?o:"id",l=this.getTreeDataOptionPropName("childrenPropName"),a=this.getTreeDataOptionPropName("collapsedPropName");if(e){e[a]=t,this.dataView.updateItem(e[s],e);let d=p=>p[s]===e[s],u=Xn(this.sharedService.hierarchicalDataset||[],d,l);u&&(u[a]=t)}}};var $i=class{constructor(){this._clearFilterTriggered=!1,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.searchTerms=[],this._bindEventService=new We}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get defaultOperator(){return ue.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}init(e){var t,i,o,s,l;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm;let a=(t=this.gridOptions)===null||t===void 0?void 0:t.backendServiceApi;this._debounceTypingDelay=(l=a?(i=a?.filterTypingDebounce)!==null&&i!==void 0?i:(o=this.gridOptions)===null||o===void 0?void 0:o.defaultBackendServiceFilterTypingDebounce:(s=this.gridOptions)===null||s===void 0?void 0:s.filterTypingDebounce)!==null&&l!==void 0?l:0;let d=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._filterElm=this.createDomElement(d),this._bindEventService.bind(this._filterElm,["keyup","blur","change","wheel"],this.handleInputChange.bind(this))}clear(e=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.classList.remove("filled"),this._filterElm.dispatchEvent(new Event("change")))}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this._filterElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}getValues(){return this._filterElm.value}setValues(e,t){let i=Array.isArray(e)?e:[e],o="";for(let s of i)o=t?this.addOptionalOperatorIntoSearchString(s,t):s,this._filterElm.value=`${o??""}`;this.getValues()!==""?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.operator=t||this.defaultOperator}addOptionalOperatorIntoSearchString(e,t){let i="",o="",s=e==null?"":`${e}`;if(t&&s){switch(t){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":i=t;break;case"EndsWith":case"*z":i="*";break;case"StartsWith":case"a*":o="*";break}s=`${i}${s}${o}`}return s}createDomElement(e){var t,i,o,s,l,a,d;let u=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";Ve(this.filterContainerElm);let p=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.defaultFilterPlaceholder)!==null&&s!==void 0?s:"";!((l=this.columnFilter)===null||l===void 0)&&l.placeholder&&(p=this.columnFilter.placeholder);let f=N("input",{type:this._inputType||"text",autocomplete:"off",placeholder:p,className:`form-control search-filter filter-${u}`,value:e??"",dataset:{columnid:`${u}`}});return f.setAttribute("aria-label",(d=(a=this.columnFilter)===null||a===void 0?void 0:a.ariaLabel)!==null&&d!==void 0?d:`${vt(u+"")} Search Filter`),f.setAttribute("role","presentation"),e&&f.classList.add("filled"),this.filterContainerElm.appendChild(f),this.filterContainerElm.appendChild(document.createElement("span")),f}handleInputChange(e){var t,i,o;if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else{let s=(t=e?.type)!==null&&t!==void 0?t:"",l=(o=(i=e?.target)===null||i===void 0?void 0:i.value)!==null&&o!==void 0?o:"",a=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof l=="string"&&a&&(l=l.trim()),l===""?this._filterElm.classList.remove("filled"):this._filterElm.classList.add("filled");let d={columnDef:this.columnDef,operator:this.operator,searchTerms:[l],shouldTriggerQuery:this._shouldTriggerQuery},u=s==="keyup"&&e?.key!=="Enter"?this._debounceTypingDelay:0;u>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>this.callback(e,d),u)):this.callback(e,d)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var Ss=class extends $i{constructor(){super(),this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(e){var t,i,o,s;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!((i=(t=this.columnDef)===null||t===void 0?void 0:t.params)===null||i===void 0)&&i.mask?this._inputMask=this.columnDef.params.mask:!((s=(o=this.columnFilter)===null||o===void 0?void 0:o.params)===null||s===void 0)&&s.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error(`[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params
        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]`);let l=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._filterElm=this.createDomElement(l),this._bindEventService.bind(this._filterElm,["keyup","blur","change"],this.handleInputChange.bind(this))}handleInputChange(e){var t,i,o;let s="";if(!((t=e?.target)===null||t===void 0)&&t.value){let l=(o=(i=e?.target)===null||i===void 0?void 0:i.value)!==null&&o!==void 0?o:"",a=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof l=="string"&&a&&(l=l.trim());let d=this.unmaskValue(l),u=this.maskValue(d);s=d,e?.keyCode>=48&&(this._filterElm.value=u,e.preventDefault())}this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled")):(this._filterElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}maskValue(e){let t=0,i="";return this._inputMask&&(i=this._inputMask.replace(/[09A]/gi,o=>((o==="0"||o==="9")&&/\d+/g.test(e[t])||o.toUpperCase()==="A"&&/[^\d]+/gi.test(e[t]))&&e[t++]||"")),i}unmaskValue(e){let t=e.replace(/[^0-9a-z]*/gi,""),i=this._inputMask.replace(/[^0-9a-z]*/gi,""),o="";for(let s=0;s<i.length;s++)t[s]&&((i[s]==="0"||i[s]==="9")&&/\d+/g.test(t[s])||i[s].toUpperCase()==="A"&&/[^\d]+/gi.test(t[s]))&&(o+=t[s]);return o}};var Es=class extends $i{constructor(){super(),this.inputType="number"}};var ys=class extends $i{constructor(){super(),this.inputType="password"}};var wn=class{constructor(e,t,i,o=!0){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=o}get collectionOptions(){var e,t,i;return(i=(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)===null||t===void 0?void 0:t.collectionOptions)!==null&&i!==void 0?i:{}}get columnFilter(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)!==null&&t!==void 0?t:{}}get customStructure(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)===null||t===void 0?void 0:t.customStructure}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get defaultOperator(){return this.isMultipleSelect?ue.in:ue.equal}get isMultipleSelect(){return this._isMultipleSelect}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var t,i,o;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);if(this.enableTranslateLabel=this.columnFilter&&this.columnFilter.enableTranslateLabel||!1,this.labelName=this.customStructure&&this.customStructure.label||"label",this.labelPrefixName=this.customStructure&&this.customStructure.labelPrefix||"labelPrefix",this.labelSuffixName=this.customStructure&&this.customStructure.labelSuffix||"labelSuffix",this.optionLabel=this.customStructure&&this.customStructure.optionLabel||"value",this.valueName=this.customStructure&&this.customStructure.value||"value",this.enableTranslateLabel&&(!this.translaterService||typeof this.translaterService.translate!="function"))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions&&this.gridOptions.locales||ie.locales,this.initMultipleSelectTemplate();let s=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";this.columnFilter&&this.columnFilter.placeholder&&(s=this.columnFilter.placeholder),this.defaultOptions.placeholder=s||"",this._isMultipleSelect&&(!((t=this.columnDef)===null||t===void 0)&&t.filter)&&(this.columnDef.filter.emptySearchTermReturnAllValues=(o=(i=this.columnDef.filter)===null||i===void 0?void 0:i.emptySearchTermReturnAllValues)!==null&&o!==void 0?o:!1);let l=this.columnFilter.collection||[];return this.renderDomElement(l),new Promise((a,d)=>Ot(this,null,function*(){try{let u=this.columnFilter.collectionAsync,p;u&&!this.columnFilter.collection?(p=Pr(u,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),a(p)):(p=l,a(l)),(u||this.columnFilter.enableCollectionWatch)&&(yield p??u,this.watchCollectionChanges())}catch(u){d(u)}}))}clear(e=!0){this.$filterElm&&this.$filterElm.multipleSelect&&this._collectionLength>0&&(this.$filterElm.multipleSelect("setSelects",[]),this.$filterElm.removeClass("filled").siblings("div .search-filter").removeClass("filled"),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){if(this.$filterElm&&typeof this.$filterElm.multipleSelect=="function"){this.$filterElm.multipleSelect("destroy"),this.$filterElm.remove();let e=this.elementName.toString().replace(".","\\.");$(`[name=${e}].ms-drop`).remove()}this.$filterElm=null,Eo(this.subscriptions)}getValues(){return this.$filterElm&&typeof this.$filterElm.multipleSelect=="function"?this.$filterElm.multipleSelect("getSelects"):[]}setValues(e,t){e&&this.$filterElm&&typeof this.$filterElm.multipleSelect=="function"&&(e=Array.isArray(e)?e:[e],this.$filterElm.multipleSelect("setSelects",e)),this.updateFilterStyle(this.getValues().length>0),this.operator=t||this.defaultOperator}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){let i=this.columnFilter.collectionFilterBy,o=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,o)}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){let i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t}watchCollectionChanges(){var e;!((e=this.columnFilter)===null||e===void 0)&&e.collection&&($o(this.columnFilter.collection,t=>{this.renderDomElement(this.columnFilter.collection||t||[])}),Un(this.columnFilter,"collection",t=>{this.renderDomElement(t||[]),this.columnFilter.collection&&$o(this.columnFilter.collection,i=>{this.renderDomElement(this.columnFilter.collection||i||[])})}))}renderDomElement(e){var t,i,o,s;if(!Array.isArray(e)&&(!((t=this.collectionOptions)===null||t===void 0)&&t.collectionInsideObjectProperty)){let u=this.collectionOptions.collectionInsideObjectProperty;e=je(e,u||"")}if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let l=[];if(e.length>0&&(l=[...e]),!((i=this.collectionOptions)===null||i===void 0)&&i.addBlankEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==""&&l.unshift(this.createBlankEntry()),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomFirstEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&l.unshift(this.collectionOptions.addCustomFirstEntry),!((s=this.collectionOptions)===null||s===void 0)&&s.addCustomLastEntry&&Array.isArray(l)&&l.length>0){let u=l.length-1;l[u][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&l.push(this.collectionOptions.addCustomLastEntry)}let a=l;a=this.filterCollection(a),a=this.sortCollection(a);let d=Ir("filter",a,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=d.hasFoundSearchTerm,this.createDomElement(d.selectElement),this._collectionLength=a.length}createBlankEntry(){let e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createDomElement(e){var t,i;let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";if(this.elementName=`filter-${o}`,this.defaultOptions.name=this.elementName,$(this.filterContainerElm).empty(),this.$filterElm=$(e),typeof this.$filterElm.multipleSelect!="function")throw new Error("multiple-select.js was not found, make sure to read the HOWTO Wiki on how to install it.");this.$filterElm.data("columnId",o),this.updateFilterStyle(this.isFilled),this.$filterElm&&typeof this.$filterElm.appendTo=="function"&&this.$filterElm.appendTo(this.filterContainerElm);let s=this.columnFilter?this.columnFilter.filterOptions:{};this.filterElmOptions=P(P({},this.defaultOptions),s),this.$filterElm=this.$filterElm.multipleSelect(this.filterElmOptions)}initMultipleSelectTemplate(){var e,t,i,o,s,l,a,d;let u=this.gridOptions&&this.gridOptions.enableTranslate,p={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,single:!0,textTemplate:f=>this.columnDef&&this.columnDef.filter&&this.columnDef.filter.enableRenderHtml||!1?f.text():f.html(),onClose:()=>this.onTriggerEvent()};if(this._isMultipleSelect){p.single=!1,p.okButton=!0,p.addTitle=!0;let f=Et(this.gridOptions);p.countSelected=u&&(!((e=this.translaterService)===null||e===void 0)&&e.translate)?this.translaterService.translate(`${f}X_OF_Y_SELECTED`):(t=this._locales)===null||t===void 0?void 0:t.TEXT_X_OF_Y_SELECTED,p.allSelected=u&&(!((i=this.translaterService)===null||i===void 0)&&i.translate)?this.translaterService.translate(`${f}ALL_SELECTED`):(o=this._locales)===null||o===void 0?void 0:o.TEXT_ALL_SELECTED,p.okButtonText=u&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)?this.translaterService.translate(`${f}OK`):(l=this._locales)===null||l===void 0?void 0:l.TEXT_OK,p.selectAllText=u&&(!((a=this.translaterService)===null||a===void 0)&&a.translate)?this.translaterService.translate(`${f}SELECT_ALL`):(d=this._locales)===null||d===void 0?void 0:d.TEXT_SELECT_ALL,p.selectAllDelimiter=["",""]}this.defaultOptions=p}onTriggerEvent(){if(this.$filterElm){let e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||e.length===1&&e[0]!==""),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){var t;e?(this.isFilled=!0,(t=this.$filterElm)===null||t===void 0||t.addClass("filled").siblings("div .search-filter").addClass("filled")):(this.isFilled=!1,this.$filterElm.removeClass("filled"),this.$filterElm.siblings("div .search-filter").removeClass("filled"))}};var xs=class extends wn{constructor(e,t,i){super(e,t,i,!0),this.translaterService=e,this.collectionService=t,this.rxjs=i}};var Ts=class{constructor(e){this.translater=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._currentValues=[],this.searchTerms=[],this._bindEventService=new We}get columnFilter(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)!==null&&t!==void 0?t:{}}get defaultOperator(){return ue.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection)throw new Error('[Slickgrid-Universal] You need to pass a "collection" for the Native Select Filter to work correctly.');if(this.columnFilter.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translater||typeof this.translater.translate!="function"))throw new Error('The I18N Service is required for the Native Select Filter to work correctly when "enableTranslateLabel" is set.');let t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";(typeof t=="boolean"||typeof t=="number")&&(t=`${t??""}`),this.filterElm=this.createDomElement(t),this._bindEventService.bind(this.filterElm,"change",this.handleOnChange.bind(this))}clear(e=!0){this.filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._currentValues=[],this.filterElm.value="",this.filterElm.classList.remove("filled"),this.filterElm.dispatchEvent(new Event("change")))}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this.filterElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}getValues(){return this._currentValues||[]}setValues(e,t){var i;Array.isArray(e)?(this.filterElm.value=`${(i=e[0])!==null&&i!==void 0?i:""}`,this._currentValues=e):e&&(this.filterElm.value=`${e??""}`,this._currentValues=[e]),this.getValues().length>0?this.filterElm.classList.add("filled"):this.filterElm.classList.remove("filled"),this.operator=t||this.defaultOperator}buildFilterSelectFromCollection(e){var t,i,o,s,l,a,d,u,p,f,m,_;let C=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",b=N("select",{className:`form-control search-filter filter-${C}`});b.setAttribute("aria-label",(s=(o=this.columnFilter)===null||o===void 0?void 0:o.ariaLabel)!==null&&s!==void 0?s:`${vt(C+"")} Search Filter`);let E=(a=(l=this.columnFilter.customStructure)===null||l===void 0?void 0:l.label)!==null&&a!==void 0?a:"label",x=(u=(d=this.columnFilter.customStructure)===null||d===void 0?void 0:d.value)!==null&&u!==void 0?u:"value",R=(f=(p=this.columnFilter)===null||p===void 0?void 0:p.enableTranslateLabel)!==null&&f!==void 0?f:!1;if(e.every(L=>typeof L=="string"))for(let L of e)b.appendChild(N("option",{value:L,label:L,textContent:L}));else for(let L of e){if(!L||L[E]===void 0&&L.labelKey===void 0)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Native Select Filter list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')");let z=L.labelKey||L[E],B=(L.labelKey||R)&&typeof this.translater!==void 0&&(!((_=(m=this.translater).getCurrentLanguage)===null||_===void 0)&&_.call(m))?this.translater.translate(z||" "):z;b.appendChild(N("option",{value:L[x],textContent:B}))}return b}createDomElement(e){var t,i,o,s;let l=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";Ve(this.filterContainerElm);let a=e||"",d=(s=(o=this.columnFilter)===null||o===void 0?void 0:o.collection)!==null&&s!==void 0?s:[];if(!Array.isArray(d))throw new Error('The "collection" passed to the Native Select Filter is not a valid array.');let u=this.buildFilterSelectFromCollection(d);return u.value=a,u.dataset.columnid=`${l||""}`,a&&(this._currentValues=[a]),this.filterContainerElm.appendChild(u),u}handleOnChange(e){let t=e&&e.target&&e.target.value||"";this._currentValues=[t],this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.filterElm.classList.remove("filled")):(t===""?this.filterElm.classList.remove("filled"):this.filterElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[t],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var Os=class extends wn{constructor(e,t,i){super(e,t,i,!1),this.translaterService=e,this.collectionService=t,this.rxjs=i}};var td=0,ku=100,Fu=1,Rs=class{constructor(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._elementRangeInputId="",this._elementRangeOutputId="",this.searchTerms=[],this._bindEventService=new We}get columnFilter(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)!==null&&t!==void 0?t:{}}get defaultOperator(){return ue.equal}get filterParams(){var e,t,i;return(i=(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)===null||t===void 0?void 0:t.params)!==null&&i!==void 0?i:{}}get filterProperties(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.filter)!==null&&t!==void 0?t:{}}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,this._elementRangeInputId=`rangeInput_${this.columnDef.field}`,this._elementRangeOutputId=`rangeOutput_${this.columnDef.field}`;let t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.filterElm=this.createDomElement(t),this._bindEventService.bind(this.filterInputElm,["change","mouseup","touchend"],this.handleOnChange.bind(this)),this._bindEventService.bind(this.filterInputElm,["input","change"],this.handleInputChange.bind(this))}clear(e=!0){var t,i;if(this.filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];let o=(i=(t=this.filterParams)===null||t===void 0?void 0:t.sliderStartValue)!==null&&i!==void 0?i:td;this._currentValue=+o,this.filterInputElm.value=o,this.filterNumberElm&&(this.filterNumberElm.textContent=o),this.divContainerFilterElm.classList.remove("filled"),this.filterElm.classList.remove("filled"),this.filterInputElm.dispatchEvent(new Event("change"))}}destroy(){var e,t;this._bindEventService.unbindAll(),Ve(this.filterElm),(t=(e=this.filterElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}getValues(){return this._currentValue}setValues(e,t){Array.isArray(e)?(this.filterInputElm.value=`${e[0]}`,this.filterNumberElm&&(this.filterNumberElm.textContent=`${e[0]}`),this._currentValue=+e[0]):yo(e)?(this.filterInputElm.value=`${e??""}`,this._currentValue=+e):(this._currentValue=void 0,this.filterInputElm.value=""),this.getValues()!==void 0?(this.divContainerFilterElm.classList.add("filled"),this.filterElm.classList.add("filled")):(this.divContainerFilterElm.classList.remove("filled"),this.filterElm.classList.remove("filled")),this.operator=t||this.defaultOperator}createDomElement(e){var t,i,o,s,l,a,d,u,p,f,m,_,C,b;let E=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",x=(s=(o=this.filterProperties)===null||o===void 0?void 0:o.minValue)!==null&&s!==void 0?s:td,R=(a=(l=this.filterProperties)===null||l===void 0?void 0:l.maxValue)!==null&&a!==void 0?a:ku,L=(u=(d=this.filterParams)===null||d===void 0?void 0:d.sliderStartValue)!==null&&u!==void 0?u:x,z=(f=(p=this.filterProperties)===null||p===void 0?void 0:p.valueStep)!==null&&f!==void 0?f:Fu,B=+((_=(m=this.filterParams)===null||m===void 0?void 0:m.sliderStartValue)!==null&&_!==void 0?_:x);Ve(this.filterContainerElm);let G=e||"0";if(+G<x&&(G=`${x}`),+G<B&&(G=`${B}`),this._currentValue=+G,this.filterInputElm=N("input",{type:"range",name:this._elementRangeInputId,className:`form-control slider-filter-input range ${this._elementRangeInputId}`,defaultValue:L,value:G,title:G,min:`${x}`,max:`${R}`,step:`${z}`}),this.filterInputElm.setAttribute("aria-label",(b=(C=this.columnFilter)===null||C===void 0?void 0:C.ariaLabel)!==null&&b!==void 0?b:`${vt(E+"")} Search Filter`),this.divContainerFilterElm=N("div",{className:`search-filter slider-container filter-${E}`}),this.divContainerFilterElm.appendChild(this.filterInputElm),!this.filterParams.hideSliderNumber){this.divContainerFilterElm.classList.add("input-group"),this.filterInputElm.value=G;let V=N("div",{className:"input-group-addon input-group-append slider-value"});this.filterNumberElm=N("span",{className:`input-group-text ${this._elementRangeOutputId}`,textContent:G}),V.appendChild(this.filterNumberElm),this.divContainerFilterElm.appendChild(V)}return this.divContainerFilterElm.dataset.columnid=`${E}`,e&&this.divContainerFilterElm.classList.add("filled"),this.filterContainerElm.appendChild(this.divContainerFilterElm),this.divContainerFilterElm}handleInputChange(e){var t;let i=(e?.target).value;i!=null&&(!this.filterParams.hideSliderNumber&&(!((t=this.filterNumberElm)===null||t===void 0)&&t.textContent)&&(this.filterNumberElm.textContent=i),this.filterInputElm.title=i)}handleOnChange(e){var t,i,o;let s=(i=(t=e?.target)===null||t===void 0?void 0:t.value)!==null&&i!==void 0?i:"";this._currentValue=+s,this._clearFilterTriggered?(this.filterElm.classList.remove("filled"),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery})):(this.filterElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s||"0"],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,(o=this.grid)===null||o===void 0||o.onHeaderMouseLeave.notify({column:this.columnDef,grid:this.grid})}};(function(r){"use strict";typeof define=="function"&&define.amd?define(["jquery","./mouse","../keycode","../version","../widget"],r):r(jQuery)})(function(r){"use strict";return r.widget("ui.slider",r.ui.mouse,{version:"1.14.0",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t,i=this.options,o=this.element.find(".ui-slider-handle"),s="<span tabindex='0'></span>",l=[];for(t=i.values&&i.values.length||1,o.length>t&&(o.slice(t).remove(),o=o.slice(0,t)),e=o.length;e<t;e++)l.push(s);this.handles=o.add(r(l.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(a){r(this).data("ui-slider-handle-index",a).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&e.values.length!==2?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=r("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")):(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})),(e.range==="min"||e.range==="max")&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var t,i,o,s,l,a,d,u,p=this,f=this.options;return f.disabled||(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(m){var _=Math.abs(i-p.values(m));(o>_||o===_&&(m===p._lastChangedValue||p.values(m)===f.min))&&(o=_,s=r(this),l=m)}),a=this._start(e,l),a===!1)?!1:(this._mouseSliding=!0,this._handleIndex=l,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),d=s.offset(),u=!r(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-d.left-s.width()/2,top:e.pageY-d.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,l,i),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,o,s,l;return this.orientation==="horizontal"?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),o=i/t,o>1&&(o=1),o<0&&(o=0),this.orientation==="vertical"&&(o=1-o),s=this._valueMax()-this._valueMin(),l=this._valueMin()+o*s,this._trimAlignValue(l)},_uiHash:function(e,t,i){var o={handle:this.handles[e],handleIndex:e,value:t!==void 0?t:this.value()};return this._hasMultipleValues()&&(o.value=t!==void 0?t:this.values(e),o.values=i||this.values()),o},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var o,s,l=this.value(),a=this.values();this._hasMultipleValues()&&(s=this.values(t?0:1),l=this.values(t),this.options.values.length===2&&this.options.range===!0&&(i=t===0?Math.min(s,i):Math.max(s,i)),a[t]=i),i!==l&&(o=this._trigger("slide",e,this._uiHash(t,i,a)),o!==!1&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(e,t){var i,o,s;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),this._change(null,e);return}if(arguments.length)if(Array.isArray(arguments[0])){for(i=this.options.values,o=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()}else return this._hasMultipleValues()?this._values(e):this.value();else return this._values()},_setOption:function(e,t){var i,o=0;switch(e==="range"&&this.options.range===!0&&(t==="min"?(this.options.value=this._values(0),this.options.values=null):t==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(o=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css(t==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=o-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1;break}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,i,o;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this._hasMultipleValues()){for(i=this.options.values.slice(),o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(i[o]);return i}else return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,o=e-i;return Math.abs(i)*2>=t&&(o+=i>0?t:-t),parseFloat(o.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,o=Math.round((e-t)/i)*i;e=o+t,e>this.options.max&&(e-=i),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){e==="vertical"&&this.range.css({width:"",left:""}),e==="horizontal"&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,t,i,o,s,l=this.options.range,a=this.options,d=this,u=this._animateOff?!1:a.animate,p={};this._hasMultipleValues()?this.handles.each(function(f){t=(d.values(f)-d._valueMin())/(d._valueMax()-d._valueMin())*100,p[d.orientation==="horizontal"?"left":"bottom"]=t+"%",r(this).stop(1,1)[u?"animate":"css"](p,a.animate),d.options.range===!0&&(d.orientation==="horizontal"?(f===0&&d.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},a.animate),f===1&&d.range[u?"animate":"css"]({width:t-e+"%"},{queue:!1,duration:a.animate})):(f===0&&d.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},a.animate),f===1&&d.range[u?"animate":"css"]({height:t-e+"%"},{queue:!1,duration:a.animate}))),e=t}):(i=this.value(),o=this._valueMin(),s=this._valueMax(),t=s!==o?(i-o)/(s-o)*100:0,p[this.orientation==="horizontal"?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](p,a.animate),l==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},a.animate),l==="max"&&this.orientation==="horizontal"&&this.range.stop(1,1)[u?"animate":"css"]({width:100-t+"%"},a.animate),l==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},a.animate),l==="max"&&this.orientation==="vertical"&&this.range.stop(1,1)[u?"animate":"css"]({height:100-t+"%"},a.animate))},_handleEvents:{keydown:function(e){var t,i,o,s,l=r(e.target).data("ui-slider-handle-index");switch(e.keyCode){case r.ui.keyCode.HOME:case r.ui.keyCode.END:case r.ui.keyCode.PAGE_UP:case r.ui.keyCode.PAGE_DOWN:case r.ui.keyCode.UP:case r.ui.keyCode.RIGHT:case r.ui.keyCode.DOWN:case r.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(r(e.target),null,"ui-state-active"),t=this._start(e,l),t===!1))return;break}switch(s=this.options.step,this._hasMultipleValues()?i=o=this.values(l):i=o=this.value(),e.keyCode){case r.ui.keyCode.HOME:o=this._valueMin();break;case r.ui.keyCode.END:o=this._valueMax();break;case r.ui.keyCode.PAGE_UP:o=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case r.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case r.ui.keyCode.UP:case r.ui.keyCode.RIGHT:if(i===this._valueMax())return;o=this._trimAlignValue(i+s);break;case r.ui.keyCode.DOWN:case r.ui.keyCode.LEFT:if(i===this._valueMin())return;o=this._trimAlignValue(i-s);break}this._slide(e,l,o)},keyup:function(e){var t=r(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),this._removeClass(r(e.target),null,"ui-state-active"))}}})});var zl=0,Is=100,Mu=1,Ps=class{constructor(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[]}get filterParams(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.params||{}}get filterProperties(){return this.columnDef&&this.columnDef.filter||{}}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get currentValues(){return this._currentValues}get defaultOperator(){return this.gridOptions.defaultFilterRangeOperator||ue.rangeInclusive}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get sliderOptions(){return this._sliderOptions||{}}get operator(){var e,t;return(t=(e=this.columnFilter)===null||e===void 0?void 0:e.operator)!==null&&t!==void 0?t:this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,this.$filterElm=this.createDomElement(this.searchTerms)}clear(e=!0){if(this.$filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];let t=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:zl,i=this.filterParams.hasOwnProperty("sliderEndValue")?this.filterParams.sliderEndValue:Is;this._currentValues=[t,i],this.$filterElm.slider("values",[t,i]),this.filterParams.hideSliderNumbers||this.renderSliderValues(t,i),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e}),this.$filterContainerElm.removeClass("filled")}}destroy(){this.$filterElm&&(this.$filterElm.off("change").remove(),this.$filterContainerElm.remove()),this.$filterElm=null,this.$filterContainerElm=null}renderSliderValues(e,t){var i,o,s,l;let a=(o=(i=this.columnDef)===null||i===void 0?void 0:i.id)!==null&&o!==void 0?o:"",d=(s=this.$filterContainerElm.get(0))===null||s===void 0?void 0:s.querySelector(`.lowest-range-${a}`),u=(l=this.$filterContainerElm.get(0))===null||l===void 0?void 0:l.querySelector(`.highest-range-${a}`);d?.textContent&&(d.textContent=e.toString()),u?.textContent&&(u.textContent=t.toString())}getValues(){return this._currentValues}setValues(e,t){var i,o;if(e){let s=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?s=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(s=e),Array.isArray(s)&&s.length===2&&(this.$filterElm.slider("values",s),this.filterParams.hideSliderNumbers||this.renderSliderValues(s[0],s[1]))}e&&((o=(i=this.getValues)===null||i===void 0?void 0:i.call(this))!==null&&o!==void 0?o:[]).length>0?this.$filterContainerElm.addClass("filled"):this.$filterContainerElm.removeClass("filled"),this.operator=t||this.defaultOperator}createDomElement(e){var t,i;if(this.columnFilter&&this.columnFilter.filterOptions&&(this.columnFilter.filterOptions.change||this.columnFilter.filterOptions.slide))throw new Error(`[Slickgrid-Universal] You cannot override the "change" and/or the "slide" callback methods
        since they are used in SliderRange Filter itself, however any other methods can be used for example the "create", "start", "stop" methods.`);let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",s=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:zl,l=this.filterProperties.hasOwnProperty("maxValue")?this.filterProperties.maxValue:Is,a=this.filterProperties.hasOwnProperty("valueStep")?this.filterProperties.valueStep:Mu,d=zl,u=Is;Array.isArray(e)&&e.length>1?(d=+e[0],u=+e[1]):(d=+(this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:s),u=+(this.filterParams.hasOwnProperty("sliderEndValue")?this.filterParams.sliderEndValue:l)),$(this.filterContainerElm).empty();let p=$(`
    <div class="input-group-addon input-group-prepend slider-range-value">
      <span class="input-group-text lowest-range-${o}">${d}</span>
    </div>`),f=$(`
    <div class="input-group-addon input-group-append slider-range-value">
      <span class="input-group-text highest-range-${o}">${u}</span>
    </div>`);this.$filterElm=$(`<div class="filter-input filter-${o}"></div>`),this.$filterContainerElm=$(`<div class="input-group form-control search-filter slider-range-container slider-values filter-${o}">`),this.filterParams.hideSliderNumbers?this.$filterContainerElm.append(this.$filterElm):(this.$filterContainerElm.append(p),this.$filterContainerElm.append(this.$filterElm),this.$filterContainerElm.append(f)),this._currentValues=[d,u];let m={range:!0,min:+(s||0),max:+(l||Is),step:+(a||1),values:[d,u],change:(_,C)=>this.onValueChanged(_,C),slide:(_,C)=>{let b=C.values;!this.filterParams.hideSliderNumbers&&Array.isArray(b)&&this.renderSliderValues(b[0],b[1])}};return this._sliderOptions=P(P({},m),this.columnFilter.filterOptions),this.$filterElm.slider(this._sliderOptions),Array.isArray(e)&&e.length>0&&e[0]!==""&&this.$filterContainerElm.addClass("filled"),this.$filterContainerElm&&typeof this.$filterContainerElm.appendTo=="function"&&this.$filterContainerElm.appendTo(this.filterContainerElm),this.$filterElm}onValueChanged(e,t){let i=t&&Array.isArray(t.values)?t.values:[],o=i.join("..");this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterContainerElm.removeClass("filled")):(o===""?this.$filterContainerElm.removeClass("filled"):this.$filterContainerElm.addClass("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:i,shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}};var Sn={autoComplete:Dr,compoundDate:Hr,compoundInput:uo,compoundInputNumber:$r,compoundInputPassword:zr,compoundInputText:uo,compoundSlider:Br,dateRange:Wr,input:$i,inputMask:Ss,inputNumber:Es,inputPassword:ys,inputText:$i,multipleSelect:xs,select:Ts,singleSelect:Os,slider:Rs,sliderRange:Ps};var Ds=class{constructor(e,t,i,o){var s,l;this.config=e,this.translaterService=t,this.collectionService=i,this.rxjs=o,this._options=(l=(s=this.config)===null||s===void 0?void 0:s.options)!==null&&l!==void 0?l:{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let t;return e?.model&&(t=typeof e.model=="function"?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!t&&this._options.defaultFilter&&(t=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),t}};var od={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:5*60*5,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:id},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"fa fa-compress mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"fa fa-expand mdi mdi-arrow-expand",iconClearGroupingCommand:"fa fa-times mdi mdi-close",iconCopyCellValueCommand:"fa fa-clone mdi mdi-content-copy",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",showBulletWhenIconMissing:!0},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:!0,syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Sn.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"\u{1F50E}\uFE0E",defaultFilterRangeOperator:ue.rangeInclusive,defaultColumnSortFieldId:"id",defaultComponentEventPrefix:"",defaultSlickgridEventPrefix:"",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:_i.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2B9E",groupExpandedSymbol:"\u2B9F",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:Vi.comma,exportWithFormatter:!1,filename:"export",format:_i.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},gridAutosizeColsMode:fl.none,eventNamingStyle:si.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars mdi mdi-menu",iconClearAllFiltersCommand:"fa fa-filter mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconClearFrozenColumnsCommand:"fa fa-times mdi mdi-pin-off-outline",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",iconRefreshDatasetCommand:"fa fa-refresh mdi mdi-sync",iconToggleFilterCommand:"fa fa-random mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"fa fa-random mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,headerColumnValueExtractor:id},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"fa fa-filter mdi mdi mdi-filter-remove-outline",iconClearSortCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconFreezeColumns:"fa fa-thumb-tack mdi mdi-pin-outline",iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-flip-v mdi-sort-ascending",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-flip-v mdi-sort-descending",iconColumnHideCommand:"fa fa-times mdi mdi-close",iconColumnResizeByContentCommand:"fa fa-arrows-h mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!0,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\xB7"}};function id(r,e){var t,i;let o=r?.columnGroup||"",s=(t=e?.columnGroupSeparator)!==null&&t!==void 0?t:" - ";return o?o+s+r.name:(i=r?.name)!==null&&i!==void 0?i:""}function Io(r,e){var t;let i=e.errorMessage,o=e.required,s=e.minLength,l=e.maxLength,a=e.operatorConditionalType||"inclusive",d={"{{minLength}}":s,"{{maxLength}}":l},u=!0,p="",f=(t=r?.length)!==null&&t!==void 0?t:0;if(e.validator)return e.validator(r,e.editorArgs);if(o&&r==="")u=!1,p=i||ie.VALIDATION_REQUIRED_FIELD;else if(s!==void 0&&l!==void 0&&(a==="exclusive"&&(f<=s||f>=l)||a==="inclusive"&&(f<s||f>l)))u=!1,p=i||ie.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN.replace(/{{minLength}}|{{maxLength}}/gi,m=>d[m]);else if(s!==void 0&&f!==null&&(a==="exclusive"&&f<=s||a==="inclusive"&&f!==null&&f<s)){u=!1;let m=a==="inclusive"?ie.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE:ie.VALIDATION_EDITOR_TEXT_MIN_LENGTH;p=i||m.replace(/{{minLength}}/gi,_=>d[_])}else if(l!==void 0&&f!==null&&(a==="exclusive"&&f>=l||a==="inclusive"&&f!==null&&f>l)){u=!1;let m=a==="inclusive"?ie.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE:ie.VALIDATION_EDITOR_TEXT_MAX_LENGTH;p=i||m.replace(/{{maxLength}}/gi,_=>d[_])}return{valid:u,msg:p}}var Nu=3,As=class{constructor(e){if(this.args=e,this._isValueTouched=!1,this._lastTriggeredByClearInput=!1,this.disabled=!1,this.forceUserInput=!1,this.finalCollection=[],!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}get autoCompleteOptions(){return this._autoCompleteOptions||{}}get collection(){var e,t;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.collection)!==null&&t!==void 0?t:[]}get editorDomElement(){return this._$input}get elementCollection(){return this._elementCollection}get columnDef(){return this.args.column}get columnEditor(){var e;return((e=this.columnDef)===null||e===void 0?void 0:e.internalColumnEditor)||{}}get customStructure(){var e,t,i,o,s,l;let a=(e=this.columnEditor)===null||e===void 0?void 0:e.customStructure,d=(i=(t=this.columnEditor)===null||t===void 0?void 0:t.type)!==null&&i!==void 0?i:(o=this.columnDef)===null||o===void 0?void 0:o.type;return!a&&d===O.object&&(!((s=this.columnDef)===null||s===void 0)&&s.dataKey)&&(!((l=this.columnDef)===null||l===void 0)&&l.labelKey)&&(a={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),a}get dataContext(){return this.args.item}get editorOptions(){var e;return((e=this.columnEditor)===null||e===void 0?void 0:e.editorOptions)||{}}get gridOptions(){var e,t,i;return(i=(t=(e=this.grid)===null||e===void 0?void 0:e.getOptions)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}}get instance(){return this._$input.autocomplete("instance")}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e;this.labelName=this.customStructure&&this.customStructure.label||"label",this.valueName=this.customStructure&&this.customStructure.value||"value",this.labelPrefixName=this.customStructure&&this.customStructure.labelPrefix||"labelPrefix",this.labelSuffixName=this.customStructure&&this.customStructure.labelSuffix||"labelSuffix";let t=this.columnEditor.collection||[];this.renderDomElement(t),(this.disabled||!((e=this.columnEditor)===null||e===void 0)&&e.collectionAsync&&Array.isArray(t)&&t.length===0)&&this.disable(!0)}destroy(){this._$input&&(this._$input.autocomplete("destroy"),this._$input.off("keydown.nav").remove()),this._$input=null,this._elementCollection=null}changeEditorOption(e,t){this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[e]=t,this._autoCompleteOptions=Me(P({},this._autoCompleteOptions),{[e]:t}),this._$input.autocomplete("option",e,t)}disable(e=!0){var t;let i=this.disabled;if(this.disabled=e,this._$input)if(e){this._$input.attr("disabled","disabled");let o=this.getValue();i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&o!==""&&this.clear(!0)}else this._$input.removeAttr("disabled")}focus(){this._$input&&this._$input.focus().select()}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){return this._$input.val()}setValue(e,t=!1,i=!0){var o;let s=e;if(e&&e.hasOwnProperty(this.labelName)?s=e[this.labelName]:s=e,this._$input.val(s),t){this._currentValue=e,this._defaultTextValue=typeof e=="string"?e:(o=e?.[this.labelName])!==null&&o!==void 0?o:"",this.applyValue(this.args.item,this.serializeValue());let l=this.args.compositeEditorOptions;l&&i&&this.handleChangeOnCompositeEditor(null,l,"system")}}applyValue(e,t){var i,o,s;let l=t,a=this.columnDef&&this.columnDef.field;if(a!==void 0){Array.isArray(this.collection)&&this.collection.length>0&&(l=Ci(this.collection,p=>p&&typeof t=="object"&&p.hasOwnProperty(this.labelName)?(p.hasOwnProperty(this.labelName)&&p[this.labelName].toString())===(t.hasOwnProperty(this.labelName)&&t[this.labelName].toString()):p&&typeof t=="string"&&p.hasOwnProperty(this.labelName)?(p.hasOwnProperty(this.labelName)&&p[this.labelName].toString())===t:p&&p.toString()===t));let d=a?.indexOf(".")>0,u=this.validate(null,l);if(l=u&&u.valid?l:"",d){let p=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.complexObjectPath)!==null&&o!==void 0?o:a)!==null&&s!==void 0?s:"";It(e,p,l)}else e[a]=l}}isValueChanged(){let e=this._$input.val(),t=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;if(this.columnEditor&&this.columnEditor.alwaysSaveOnEnterKey&&t===Ie.ENTER)return!0;let i=!(e===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&e!==this._defaultTextValue;return this._lastTriggeredByClearInput||i}isValueTouched(){return this._isValueTouched}loadValue(e){var t;let i=this.columnDef&&this.columnDef.field;if(e&&i!==void 0){let s=i?.indexOf(".")>0?je(e,i):e[i];this._currentValue=s,this._originalValue=s,this._defaultTextValue=typeof s=="string"?s:(t=s?.[this.labelName])!==null&&t!==void 0?t:"",this._$input.val(this._defaultTextValue),this._$input.select()}}clear(e=!1){this._$input&&(this._currentValue="",this._defaultTextValue="",this.setValue("",!0)),this._isValueTouched=!0,this._lastTriggeredByClearInput=!0;let t=this.args.compositeEditorOptions;if(t){let i=!e;this.handleChangeOnCompositeEditor(null,t,"user",i)}else this.save()}reset(e,t=!0,i=!1){var o,s;let l=(o=e??this._originalValue)!==null&&o!==void 0?o:"";this._$input&&(this._currentValue=l,this._defaultTextValue=typeof l=="string"?l:(s=l?.[this.labelName])!==null&&s!==void 0?s:"",this._$input.val(this._defaultTextValue)),this._isValueTouched=!1;let a=this.args.compositeEditorOptions;if(a&&t){let d=!i;this.handleChangeOnCompositeEditor(null,a,"user",d)}}save(){let e=this.validate(),t=e&&e.valid||!1;this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e,t,i,o,s,l;if(this.editorOptions.forceUserInput){let a=(t=(e=this.editorOptions)===null||e===void 0?void 0:e.minLength)!==null&&t!==void 0?t:Nu;this._currentValue=this._$input.val().length>a?this._$input.val():this._currentValue}return this.customStructure&&this._currentValue&&this._currentValue.hasOwnProperty(this.valueName)&&((i=this.columnDef)===null||i===void 0?void 0:i.type)!==O.object&&((o=this.columnEditor)===null||o===void 0?void 0:o.type)!==O.object?this._currentValue[this.valueName]:this._currentValue&&this._currentValue.value!==void 0?((s=this.columnDef)===null||s===void 0?void 0:s.type)===O.object||((l=this.columnEditor)===null||l===void 0?void 0:l.type)===O.object?{[this.labelName]:this._currentValue.label,[this.valueName]:this._currentValue.value}:this._currentValue.value:this._currentValue}validate(e,t){var i,o;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let s=t!==void 0?t:(i=this._$input)===null||i===void 0?void 0:i.val();return Io(s,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((o=this.args)===null||o===void 0)&&o.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u;let p=this.grid.getActiveCell(),f=this.args.column,m=(l=(s=this.columnDef)===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:"",_=this.dataContext,C=this.grid,b=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,b),this.applyValue(t.formValues,b);let E=(u=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.compositeEditorOptions)===null||d===void 0?void 0:d.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(o||this.disabled&&E&&t.formValues.hasOwnProperty(m))&&delete t.formValues[m],C.onCompositeEditorChange.notify(Me(P({},p),{item:_,grid:C,column:f,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}handleSelect(e,t){var i,o,s,l,a,d;if(t&&t.item){let u=t&&t.item;this._currentValue=u,this._isValueTouched=!0;let p=this.args.compositeEditorOptions,f=(d=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.callbacks)===null||o===void 0?void 0:o.hasOwnProperty("_renderItem"))!==null&&s!==void 0?s:(a=(l=this.columnEditor)===null||l===void 0?void 0:l.editorOptions)===null||a===void 0?void 0:a.renderItem)!==null&&d!==void 0?d:!1,m=typeof u=="string"?u:f?u[this.labelName]:u.label;if(this.setValue(m),p?this.handleChangeOnCompositeEditor(e,p):this.save(),this.editorOptions.onSelect){let _=this.grid.getActiveCell();this.editorOptions.onSelect(e,t,_.row,_.cell,this.args.column,this.args.item)}setTimeout(()=>this._lastTriggeredByClearInput=!1)}return!1}renderCustomItem(e,t){var i,o,s;let l=(s=(o=(i=this._autoCompleteOptions)===null||i===void 0?void 0:i.renderItem)===null||o===void 0?void 0:o.templateCallback(t))!==null&&s!==void 0?s:"",a=kt(this.gridOptions,l)||"";return $("<li></li>").data("item.autocomplete",t).append(a).appendTo(e)}renderCollectionItem(e,t){var i,o;let s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.enableRenderHtml)!==null&&o!==void 0?o:!1,l=t.labelPrefix||"",a=t.label||"",d=t.labelSuffix||"",u=l+a+d,p=kt(this.gridOptions,u)||"",f=$("<div></div>")[s?"html":"text"](p);return $("<li></li>").data("item.autocomplete",t).append(f).appendTo(e)}renderDomElement(e){var t,i,o,s,l,a,d,u,p,f;if(!Array.isArray(e))throw new Error('The "collection" passed to the Autocomplete Editor is not a valid array.');let m=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",_=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",C=(a=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&a!==void 0?a:"";if(this._$input=$(`<input type="text" role="presentation" autocomplete="off" class="autocomplete form-control editor-text editor-${m}" placeholder="${_}" title="${C}" />`).appendTo(this.args.container).on("keydown.nav",x=>{this._lastInputKeyEvent=x,(x.keyCode===Ie.LEFT||x.keyCode===Ie.RIGHT)&&x.stopImmediatePropagation()}),this._$input&&typeof this._$input.appendTo=="function"){this._$editorInputGroupElm=$('<div class="autocomplete-container input-group"></div>'),this._$editorInputGroupElm.appendTo(this.args.container),this._$input.appendTo(this._$editorInputGroupElm),this._$input.addClass("input-group-editor");let x=$('<span class="input-group-btn input-group-append" data-clear></span>');this._$closeButtonGroupElm=$('<button class="btn btn-default icon-clear" type="button"></button>'),$("<span></span>").appendTo(this._$editorInputGroupElm),!((u=(d=this.columnEditor)===null||d===void 0?void 0:d.params)===null||u===void 0)&&u.hideClearButton||(this._$closeButtonGroupElm.appendTo(x),x.appendTo(this._$editorInputGroupElm),this._$closeButtonGroupElm.on("click",this.clear.bind(this)))}let b=P({position:{of:(p=this._$editorInputGroupElm)!==null&&p!==void 0?p:this._$input}},this.columnEditor.editorOptions),E=e;if(!((f=this.columnEditor)===null||f===void 0)&&f.collectionOverride){let x={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){let{formValues:R,modalType:L}=this.args.compositeEditorOptions;x.compositeEditorOptions={formValues:R,modalType:L}}E=this.columnEditor.collectionOverride(E,x)}if(this.finalCollection=E,Array.isArray(E)&&(E=E.map(x=>({label:x[this.labelName],value:x[this.valueName],labelPrefix:x[this.labelPrefixName]||"",labelSuffix:x[this.labelSuffixName]||""}))),this._elementCollection=E,b?.source)b.select=(x,R)=>this.handleSelect(x,R),this._autoCompleteOptions=P({},b),this._autoCompleteOptions.renderItem&&(this._autoCompleteOptions.classes={"ui-autocomplete":`autocomplete-custom-${Oo(this._autoCompleteOptions.renderItem.layout)}`}),this._$input.autocomplete(this._autoCompleteOptions),this._autoCompleteOptions.renderItem&&(this._$input.autocomplete("instance")._renderItem=this.renderCustomItem.bind(this));else{let x={source:E,minLength:0,select:(R,L)=>this.handleSelect(R,L)};this._autoCompleteOptions=P(P({},x),this.columnEditor.editorOptions),this._$input.autocomplete(this._autoCompleteOptions),this._$input.autocomplete("instance")._renderItem=this.renderCollectionItem.bind(this)}if(this.columnEditor.alwaysSaveOnEnterKey&&this._$input.keydown(x=>{x.keyCode===Ie.ENTER&&(this._currentValue=null)}),this.columnEditor.callbacks)for(let x of Object.keys(this.columnEditor.callbacks))typeof this.columnEditor.callbacks[x]=="function"&&(this.instance[x]=this.columnEditor.callbacks[x]);this._$input.on("focus",()=>{this._$input.select(),this.editorOptions.openSearchListOnFocus&&this._$input.autocomplete("search",this._$input.val())}),this.args.compositeEditorOptions||setTimeout(()=>this.focus(),50)}};var ks=class{constructor(e){if(this.args=e,this._isValueTouched=!1,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new We,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o,s,l,a;let d=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",u=this.args.compositeEditorOptions;this._checkboxContainerElm=N("div",{className:`checkbox-editor-container editor-${d}`}),this._input=N("input",{type:"checkbox",value:"true",className:`editor-checkbox editor-${d}`,title:(o=(i=this.columnEditor)===null||i===void 0?void 0:i.title)!==null&&o!==void 0?o:""}),this._input.setAttribute("aria-label",(l=(s=this.columnEditor)===null||s===void 0?void 0:s.ariaLabel)!==null&&l!==void 0?l:`${vt(d+"")} Checkbox Editor`);let p=(a=this.args)===null||a===void 0?void 0:a.container;p&&typeof p.appendChild=="function"&&(u?(this._checkboxContainerElm.appendChild(this._input),p.appendChild(this._checkboxContainerElm)):p.appendChild(this._input)),this.hasAutoCommitEdit&&!u&&this._bindEventService.bind(this._input,"click",()=>{this._isValueTouched=!0,this.save()}),u?this._bindEventService.bind(this._input,"change",f=>{this._isValueTouched=!0,this.handleChangeOnCompositeEditor(f,u)}):this.focus()}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this._input)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}disable(e=!0){var t;let i=this.disabled;if(this.disabled=e,this._input)if(e){this._input.setAttribute("disabled","disabled"),this._checkboxContainerElm.classList.add("disabled");let o=this.getValue();i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&o!==!1&&this.reset(!1,!0,!0)}else this._input.removeAttribute("disabled"),this._checkboxContainerElm.classList.remove("disabled")}focus(){this._input&&this._input.focus()}preClick(){this._input&&(this._input.checked=!this._input.checked)}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setValue(e,t=!1,i=!0){let o=!!e;if(this._input&&(this._input.checked=o),t){this.applyValue(this.args.item,this.serializeValue());let s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(null,s,"system")}}applyValue(e,t){var i,o,s;let l=this.columnDef&&this.columnDef.field;if(l!==void 0){let a=l?.indexOf(".")>0,d=this.validate(null,t),u=d&&d.valid?t:"";if(a){let p=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";It(e,p,u)}else e[l]=u}}isValueChanged(){return this.serializeValue()!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(e){let t=this.columnDef&&this.columnDef.field;if(e&&t!==void 0&&this._input){let o=t?.indexOf(".")>0?je(e,t):e[t];this._originalValue=o,this._input.checked=!!this._originalValue}}reset(e,t=!0,i=!1){var o;let s=(o=e??this._originalValue)!==null&&o!==void 0?o:!1;this._input&&(this._originalValue=s,this._input.checked=!!s),this._isValueTouched=!1;let l=this.args.compositeEditorOptions;if(l&&t){let a=!i;this.handleChangeOnCompositeEditor(null,l,"user",a)}}save(){let e=this.validate(),t=e&&e.valid||!1;this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}validate(e,t){var i,o;let s=!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions?!1:this.columnEditor.required,l=t!==void 0?t:(o=this._input)===null||o===void 0?void 0:o.checked,a=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(l,this.args):s&&!l?{valid:!1,msg:a||ie.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u;let p=this.grid.getActiveCell(),f=this.args.column,m=(l=(s=this.columnDef)===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:"",_=this.dataContext,C=this.grid,b=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,b),this.applyValue(t.formValues,b);let E=(u=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.compositeEditorOptions)===null||d===void 0?void 0:d.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(o||this.disabled&&E&&t.formValues.hasOwnProperty(m))&&delete t.formValues[m],C.onCompositeEditorChange.notify(Me(P({},p),{item:_,grid:C,column:f,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}};var Bl=Oi(bo());var Lu=Ki&&Go||Ki,Fs=Bl.default||Bl,Ms=class{constructor(e){var t;if(this.args=e,this._isValueTouched=!1,this._lastTriggeredByClearDate=!1,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{},!((t=this.gridOptions)===null||t===void 0)&&t.translater&&(this._translaterService=this.gridOptions.translater),this._bindEventService=new We,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._inputElm}get editorOptions(){return this.columnEditor.editorOptions||{}}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get pickerOptions(){return this._pickerMergedOptions}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o,s,l,a,d,u;if(this.args&&this.columnDef){let p=this.args.compositeEditorOptions,f=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",m=this.args.grid.getOptions()||{};this.defaultDate=this.args.item?this.args.item[this.columnDef.field]:null;let _=ji(this.columnEditor.type||this.columnDef.type||O.dateUtc),C=ji(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||O.dateUtc),b=((o=(i=this._translaterService)===null||i===void 0?void 0:i.getCurrentLanguage)===null||o===void 0?void 0:o.call(i))||m.locale||"en";b.length>2&&(b=b.substring(0,2));let E={defaultDate:this.defaultDate,altInput:!0,altFormat:C,dateFormat:_,closeOnSelect:!0,wrap:!0,locale:b,onChange:()=>this.handleOnDateChange(),errorHandler:L=>{L.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${b}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};this._pickerMergedOptions=P(P({},E),this.editorOptions);let x=`.editor-text.editor-${f}.form-control`;this._pickerMergedOptions.altInput&&(this._pickerMergedOptions.altInputClass="flatpickr-alt-input form-control"),this._editorInputGroupElm=N("div",{className:"flatpickr input-group"});let R=N("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._closeButtonElm=N("button",{type:"button",className:"btn btn-default icon-clear"}),this._inputElm=N("input",{placeholder:(l=(s=this.columnEditor)===null||s===void 0?void 0:s.placeholder)!==null&&l!==void 0?l:"",title:this.columnEditor&&this.columnEditor.title||"",className:x.replace(/\./g," "),dataset:{input:"",defaultdate:this.defaultDate}}),this._editorInputGroupElm.appendChild(this._inputElm),!((d=(a=this.columnEditor)===null||a===void 0?void 0:a.params)===null||d===void 0)&&d.hideClearButton||(R.appendChild(this._closeButtonElm),this._editorInputGroupElm.appendChild(R),this._bindEventService.bind(this._closeButtonElm,"click",()=>this._lastTriggeredByClearDate=!0)),this.args.container.appendChild(this._editorInputGroupElm),this.flatInstance=Lu(this._editorInputGroupElm,this._pickerMergedOptions),this._inputWithDataElm=!((u=this._pickerMergedOptions)===null||u===void 0)&&u.altInput?document.querySelector(`${x}.flatpickr-alt-input`):this._inputElm,p||setTimeout(()=>{this.show(),this.focus()},50)}}destroy(){var e,t,i,o,s,l,a,d;this.hide(),this._bindEventService.unbindAll(),!((e=this.flatInstance)===null||e===void 0)&&e.destroy&&(this.flatInstance.destroy(),!((t=this.flatInstance)===null||t===void 0)&&t.element&&setTimeout(()=>Wo(this.flatInstance))),Ve(this._editorInputGroupElm),Ve(this._inputWithDataElm),Ve(this._inputElm),(o=(i=this._editorInputGroupElm)===null||i===void 0?void 0:i.remove)===null||o===void 0||o.call(i),(l=(s=this._inputWithDataElm)===null||s===void 0?void 0:s.remove)===null||l===void 0||l.call(s),(d=(a=this._inputElm)===null||a===void 0?void 0:a.remove)===null||d===void 0||d.call(a)}disable(e=!0){var t,i;let o=this.disabled;if(this.disabled=e,!((t=this.flatInstance)===null||t===void 0)&&t._input)if(e){this.flatInstance._input.setAttribute("disabled","disabled"),this._closeButtonElm.disabled=!0;let s=this.getValue();o!==e&&(!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions)&&s!==""&&this.reset("",!0,!0)}else this.flatInstance._input.removeAttribute("disabled"),this._closeButtonElm.disabled=!1}changeEditorOption(e,t){this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[e]=t,this._pickerMergedOptions=Me(P({},this._pickerMergedOptions),{[e]:t}),this.flatInstance.set(e,t)}focus(){var e,t;!((e=this._inputElm)===null||e===void 0)&&e.focus&&this._inputElm.focus(),!((t=this._inputWithDataElm)===null||t===void 0)&&t.focus&&(this._inputWithDataElm.focus(),this._inputWithDataElm.select())}hide(){this.flatInstance&&typeof this.flatInstance.close=="function"&&this.flatInstance.close()}show(){var e;let t=!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions);!t&&this.flatInstance&&typeof this.flatInstance.open=="function"&&this.flatInstance._input?this.flatInstance.open():t&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(e,t=!1,i=!0){if(this.flatInstance.setDate(e),t){this.applyValue(this.args.item,this.serializeValue());let o=this.args.compositeEditorOptions;o&&i&&this.handleChangeOnCompositeEditor(o,"system")}}applyValue(e,t){var i,o,s;let l=this.columnDef&&this.columnDef.field;if(l!==void 0){let a=zt(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||O.dateUtc),d=zt(this.columnDef&&(this.columnDef.saveOutputType||this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||O.dateUtc),u=l?.indexOf(".")>0,p=this.validate(null,t),f=t&&p&&p.valid?Fs(t,a).format(d):"";if(u){let m=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";It(e,m,f)}else e[l]=f}}isValueChanged(){var e;let t=this._inputElm.value,i=zt(this.columnEditor.type||((e=this.columnDef)===null||e===void 0?void 0:e.type)||O.dateIso),o=zt(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||O.dateUtc),s=t?Fs(t,i,!1).format(o):"",l=this._originalDate?Fs(this._originalDate,i,!1).format(o):"";return s==="Invalid date"||l==="Invalid date"?!1:this._lastTriggeredByClearDate||!(s===""&&l==="")&&s!==l}isValueTouched(){return this._isValueTouched}loadValue(e){let t=this.columnDef&&this.columnDef.field;if(e&&t!==void 0){let o=t?.indexOf(".")>0?je(e,t):e[t];this._originalDate=o,this.flatInstance.setDate(o)}}reset(e,t=!0,i=!1){var o;let s=(o=e??this._originalDate)!==null&&o!==void 0?o:"";this.flatInstance&&(this._originalDate=s,this.flatInstance.setDate(s),s||this.flatInstance.clear()),this._isValueTouched=!1;let l=this.args.compositeEditorOptions;if(l&&t){let a=!i;this.handleChangeOnCompositeEditor(l,"user",a)}}save(){let e=this.validate(),t=e&&e.valid||!1;this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e;let t=this._inputElm.value;if(!t)return"";let i=zt(this.columnEditor.type||((e=this.columnDef)===null||e===void 0?void 0:e.type)||O.dateIso),o=zt(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||O.dateIso);return Fs(t,i,!1).format(o)}validate(e,t){var i,o;let s=!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions?!1:this.columnEditor.required,l=t!==void 0?t:(o=this._inputElm)===null||o===void 0?void 0:o.value,a=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(l,this.args):s&&l===""?{valid:!1,msg:a||ie.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleOnDateChange(){var e,t;this._isValueTouched=!0;let i=(t=(e=this.flatInstance)===null||e===void 0?void 0:e.config)!==null&&t!==void 0?t:this._pickerMergedOptions;if(this.args&&i?.closeOnSelect){let o=this.args.compositeEditorOptions;o?this.handleChangeOnCompositeEditor(o):this.save()}setTimeout(()=>this._lastTriggeredByClearDate=!1)}handleChangeOnCompositeEditor(e,t="user",i=!1){var o,s,l,a,d;let u=this.grid.getActiveCell(),p=this.args.column,f=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",m=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);let b=(d=(a=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||a===void 0?void 0:a.excludeDisabledFieldFormValues)!==null&&d!==void 0?d:!1;(i||this.disabled&&b&&e.formValues.hasOwnProperty(f))&&delete e.formValues[f],_.onCompositeEditorChange.notify(Me(P({},u),{item:m,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:t}),new Slick.EventData)}};function Ns(r,e){let t=isNaN(r)?null:parseFloat(r),i=e.decimal||0,o=e.required,s=e.minValue,l=e.maxValue,a=e.operatorConditionalType||"inclusive",d=e.errorMessage,u={"{{minValue}}":s,"{{maxValue}}":l,"{{minDecimal}}":0,"{{maxDecimal}}":i},p=!0,f="";if(typeof e.validator=="function")return e.validator(r,e.editorArgs);if(o&&r==="")p=!1,f=d||ie.VALIDATION_REQUIRED_FIELD;else if(r!==""&&(isNaN(r)||i===0&&!/^[-+]?(\d*(\.)?(\d)*)$/.test(r)))p=!1,f=d||ie.VALIDATION_EDITOR_VALID_NUMBER;else if(s!==void 0&&l!==void 0&&t!==null&&(a==="exclusive"&&(t<=s||t>=l)||a==="inclusive"&&(t<s||t>l)))p=!1,f=d||ie.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,m=>u[m]);else if(s!==void 0&&t!==null&&(a==="exclusive"&&t<=s||a==="inclusive"&&t<s)){p=!1;let m=a==="inclusive"?ie.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE:ie.VALIDATION_EDITOR_NUMBER_MIN;f=d||m.replace(/{{minValue}}/gi,_=>u[_])}else if(l!==void 0&&t!==null&&(a==="exclusive"&&t>=l||a==="inclusive"&&t>l)){p=!1;let m=a==="inclusive"?ie.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE:ie.VALIDATION_EDITOR_NUMBER_MAX;f=d||m.replace(/{{maxValue}}/gi,_=>u[_])}else i>0&&!new RegExp(`^[-+]?(\\d*(\\.)?(\\d){0,${i}})$`).test(r)&&(p=!1,f=d||ie.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi,m=>u[m]));return{valid:p,msg:f}}function Ls(r,e){let t=isNaN(r)?null:parseInt(r,10);t!==null&&isNaN(t)&&(t=null);let i=e.errorMessage,o=e.required,s=e.minValue,l=e.maxValue,a=e.operatorConditionalType||"inclusive",d={"{{minValue}}":s,"{{maxValue}}":l},u=!0,p="";if(e.validator)return e.validator(r,e.editorArgs);if(o&&r==="")u=!1,p=i||ie.VALIDATION_REQUIRED_FIELD;else if(r!==""&&(isNaN(r)||!/^[+-]?\d+$/.test(r)))u=!1,p=i||ie.VALIDATION_EDITOR_VALID_INTEGER;else if(s!==void 0&&l!==void 0&&t!==null&&(a==="exclusive"&&(t<=s||t>=l)||a==="inclusive"&&(t<s||t>l)))u=!1,p=i||ie.VALIDATION_EDITOR_INTEGER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,f=>d[f]);else if(s!==void 0&&t!==null&&(a==="exclusive"&&t<=s||a==="inclusive"&&t!==null&&t<s)){u=!1;let f=a==="inclusive"?ie.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE:ie.VALIDATION_EDITOR_INTEGER_MIN;p=i||f.replace(/{{minValue}}/gi,m=>d[m])}else if(l!==void 0&&t!==null&&(a==="exclusive"&&t>=l||a==="inclusive"&&t!==null&&t>l)){u=!1;let f=a==="inclusive"?ie.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE:ie.VALIDATION_EDITOR_INTEGER_MAX;p=i||f.replace(/{{maxValue}}/gi,m=>d[m])}return{valid:u,msg:p}}function nd(r,e){let t=e.required,i=e.minValue,o=e.maxValue,s=e.errorMessage,l={"{{minValue}}":i,"{{maxValue}}":o};return e.validator?e.validator(r,e.editorArgs):t&&r===""?{valid:!1,msg:s||ie.VALIDATION_REQUIRED_FIELD}:i!==void 0&&o!==void 0&&r!==null&&(r<i||r>o)?{valid:!1,msg:s||ie.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,a=>l[a])}:{valid:!0,msg:null}}var Vs=class{constructor(e){if(this.args=e,this._isValueSaveCalled=!1,this._isLeftValueTouched=!1,this._isRightValueTouched=!1,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{},this._eventHandler=new Slick.EventHandler,this._bindEventService=new We,this.init(),this._eventHandler.subscribe(this.grid.onValidationError,()=>this._isValueSaveCalled=!0)}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return{leftInput:this._leftInput,rightInput:this._rightInput}}get editorParams(){return this.columnEditor.params||{}}get eventHandler(){return this._eventHandler}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get isValueSaveCalled(){return this._isValueSaveCalled}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o;if(!this.editorParams||!this.editorParams.leftInput||!this.editorParams.leftInput.field||!this.editorParams.rightInput||!this.editorParams.rightInput.field)throw new Error(`[Slickgrid-Universal] Please make sure that your Combo Input Editor has params defined with "leftInput" and "rightInput" (example: { editor: { model: Editors.comboInput, params: { leftInput: { field: 'firstName' }, { rightSide: { field: 'lastName' } }}}`);this._leftFieldName=(e=this.editorParams.leftInput)===null||e===void 0?void 0:e.field,this._rightFieldName=(t=this.editorParams.rightInput)===null||t===void 0?void 0:t.field,this._leftInput=this.createInput("leftInput"),this._rightInput=this.createInput("rightInput");let s=(i=this.args)===null||i===void 0?void 0:i.container;s&&typeof s.appendChild=="function"&&(s.appendChild(this._leftInput),s.appendChild(this._rightInput)),this._bindEventService.bind(this._leftInput,"keydown",a=>this.handleKeyDown(a,"leftInput")),this._bindEventService.bind(this._rightInput,"keydown",a=>this.handleKeyDown(a,"rightInput")),this.hasAutoCommitEdit&&(this._bindEventService.bind(this._leftInput,"focusout",a=>this.handleFocusOut(a,"leftInput")),this._bindEventService.bind(this._rightInput,"focusout",a=>this.handleFocusOut(a,"rightInput"))),((o=this.args)===null||o===void 0?void 0:o.compositeEditorOptions)?(this._bindEventService.bind(this._leftInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this)),this._bindEventService.bind(this._rightInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this))):setTimeout(()=>this._leftInput.select(),50)}handleFocusOut(e,t){var i;let o=((i=e.relatedTarget)===null||i===void 0?void 0:i.className)||"";!this.args.compositeEditorOptions&&o.indexOf("dual-editor")===-1&&this._lastEventType!=="focusout-right"&&(t==="rightInput"||t==="leftInput"&&this._lastEventType!=="focusout-left")&&(t==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this.save());let l=t==="leftInput"?"left":"right";this._lastEventType=`${e?.type}-${l}`}handleKeyDown(e,t){t==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this._lastInputKeyEvent=e,(e.keyCode===Ie.LEFT||e.keyCode===Ie.RIGHT||e.keyCode===Ie.TAB)&&e.stopImmediatePropagation()}destroy(){var e,t,i,o;this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),(t=(e=this._leftInput)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e),(o=(i=this._rightInput)===null||i===void 0?void 0:i.remove)===null||o===void 0||o.call(i)}createInput(e){var t,i,o,s,l;let a=this.editorParams[e],d=(i=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"",u=this.gridOptions.datasetIdPropertyName||"id",p=((o=this.args)===null||o===void 0?void 0:o.item[u])||0,f=a.type||"text";(f==="float"||f==="integer")&&(f="number");let m=N("input",{type:f||"text",id:`item-${p}-${e}`,className:`dual-editor-text editor-${d} ${e.replace(/input/gi,"")}`,autocomplete:"off",placeholder:a.placeholder||"",title:a.title||""});return m.setAttribute("role","presentation"),m.setAttribute("aria-label",(l=(s=this.columnEditor)===null||s===void 0?void 0:s.ariaLabel)!==null&&l!==void 0?l:`${vt(d+"")} Input Editor`),f==="readonly"&&(m.readOnly=!0,f="text"),f==="number"&&(m.step=this.getInputDecimalSteps(e)),m}disable(e=!0){var t;let i=this.disabled;this.disabled=e,this._leftInput&&this._rightInput&&(e?(this._leftInput.setAttribute("disabled","disabled"),this._rightInput.setAttribute("disabled","disabled"),i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.reset("",!0,!0)):(this._leftInput.removeAttribute("disabled"),this._rightInput.removeAttribute("disabled")))}focus(){}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValues(){let e={},t=this._leftInput.value,i=this._rightInput.value,o=this.editorParams.leftInput&&(this.editorParams.leftInput.type==="float"||this.editorParams.leftInput.type==="integer"),s=this.editorParams.rightInput&&(this.editorParams.rightInput.type==="float"||this.editorParams.rightInput.type==="integer"),l=t!==""&&o?+this._leftInput.value:t||"",a=i!==""&&s?+this._rightInput.value:i||"";return It(e,this._leftFieldName,l),It(e,this._rightFieldName,a),e}setValues(e){Array.isArray(e)&&e.length===2&&(this._leftInput.value=`${e[0]}`,this._rightInput.value=`${e[1]}`)}applyValue(e,t){this.applyValueByPosition(e,t,"leftInput"),this.applyValueByPosition(e,t,"rightInput")}applyValueByPosition(e,t,i){var o,s,l;let a=i==="leftInput"?this._leftFieldName:this._rightFieldName;if(a!==void 0){let d=a?.indexOf(".")>0,u=a;if(d){let m=a.split(/\.(.*)/);u=m.length>1?m[1]:m}let p=d?je(t,u):t[a],f=this.validate(null,{position:i,inputValue:p});if(d){let m=je(t,u),_=f&&f.valid?m:"",C=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:a)!==null&&l!==void 0?l:"";It(e,C,_)}else a&&(e[a]=f&&f.valid?t[a]:"")}}isValueChanged(){let e=this._leftInput.value,t=this._rightInput.value,i=this.editorParams&&this.editorParams.leftInput,o=this.editorParams&&this.editorParams.rightInput,s=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;if((i&&i.alwaysSaveOnEnterKey||o&&o.alwaysSaveOnEnterKey)&&s===Ie.ENTER)return!0;let l=!(e===""&&(this._originalLeftValue===null||this._originalLeftValue===void 0))&&e!==this._originalLeftValue,a=!(t===""&&(this._originalRightValue===null||this._originalRightValue===void 0))&&t!==this._originalRightValue;return l||a}isValueTouched(){return this._isLeftValueTouched||this._isRightValueTouched}loadValue(e){this.loadValueByPosition(e,"leftInput"),this.loadValueByPosition(e,"rightInput"),this._leftInput.select()}loadValueByPosition(e,t){let i=t==="leftInput"?this._leftFieldName:this._rightFieldName,o=t==="leftInput"?"_originalLeftValue":"_originalRightValue",s=t==="leftInput"?"_leftInput":"_rightInput";if(e&&i!==void 0){let a=i?.indexOf(".")>0?je(e,i):e.hasOwnProperty(i)?e[i]:"";if(this[o]=a,this.editorParams[t].type==="float"){let d=this.getDecimalPlaces(t);d!==null&&(this[o]||this[o]===0)&&typeof this[o]!==void 0&&(this[o]=(+this[o]).toFixed(d))}this[s]&&(this[s].value=`${this[o]}`)}}reset(e,t=!0,i=!1){var o,s;let l=(o=e??this._originalLeftValue)!==null&&o!==void 0?o:"",a=(s=e??this._originalRightValue)!==null&&s!==void 0?s:"";this._leftInput&&this._rightInput&&(this._originalLeftValue=l,this._originalRightValue=a,this._leftInput.value=`${l}`,this._rightInput.value=`${a}`),this._isLeftValueTouched=!1,this._isRightValueTouched=!1;let d=this.args.compositeEditorOptions;if(d&&t){let u=!i;this.handleChangeOnCompositeEditor(null,d,"user",u)}}save(){let e=this.validate(),t=e&&e.valid||!1;this._isValueSaveCalled||(this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges(),this._isValueSaveCalled=!0)}serializeValue(){let e={},t=this.serializeValueByPosition("leftInput"),i=this.serializeValueByPosition("rightInput");return It(e,this._leftFieldName,t),It(e,this._rightFieldName,i),e}serializeValueByPosition(e){let t=e==="leftInput"?this._leftInput.value:this._rightInput.value;if(t===""||isNaN(+t))return t;let i=parseFloat(t),o=this.getDecimalPlaces(e);return o!==null&&(i||i===0)&&i.toFixed&&(i=parseFloat(i.toFixed(o))),i}getDecimalPlaces(e){let i=e==="leftInput"?"leftInput":"rightInput",o=this.editorParams[i],s=o?.decimal;return s===void 0?0:s}getInputDecimalSteps(e){let t=this.getDecimalPlaces(e),i="";for(let o=1;o<t;o++)i+="0";return t>0?`0.${i}1`:"1"}validate(e,t){if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(t){let i=this.validateByPosition(t.position,t.inputValue);if(!i.valid)return t.position==="leftInput"?this._leftInput.select():this._rightInput.select(),i}else{let i=this.validateByPosition("leftInput"),o=this.validateByPosition("rightInput");if(!i.valid)return this._leftInput.select(),i;if(!o.valid)return this._rightInput.select(),o}return{valid:!0,msg:""}}validateByPosition(e,t){var i;let o=this.editorParams[e],s="";if(t)s=t;else{let d=e==="leftInput"?this._leftInput:this._rightInput;s=d&&d.value}let l=this.validator;s=typeof l=="function"?this.getValues():s;let a={editorArgs:this.args,errorMessage:o.errorMessage,required:!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions?!1:o.required,validator:typeof l=="function"?l:o.validator};switch(o.type){case"float":return Ns(s,Me(P({},a),{decimal:this.getDecimalPlaces(e),minValue:o.minValue,maxValue:o.maxValue,operatorConditionalType:o.operatorConditionalType}));case"integer":return Ls(s,Me(P({},a),{minValue:o.minValue,maxValue:o.maxValue,operatorConditionalType:o.operatorConditionalType}));case"text":case"password":default:return Io(s,a)}}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u,p,f,m,_;let C=this.grid.getActiveCell(),b=this.args.column,E=(a=(l=(s=this.columnEditor.params)===null||s===void 0?void 0:s.leftInput)===null||l===void 0?void 0:l.field)!==null&&a!==void 0?a:"",x=(p=(u=(d=this.columnEditor.params)===null||d===void 0?void 0:d.rightInput)===null||u===void 0?void 0:u.field)!==null&&p!==void 0?p:"",R=this.dataContext,L=this.grid,z=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,z),this.applyValue(t.formValues,z);let B=(_=(m=(f=this.gridOptions)===null||f===void 0?void 0:f.compositeEditorOptions)===null||m===void 0?void 0:m.excludeDisabledFieldFormValues)!==null&&_!==void 0?_:!1;(o||this.disabled&&B&&t.formValues.hasOwnProperty(E))&&delete t.formValues[E],(o||this.disabled&&B&&t.formValues.hasOwnProperty(x))&&delete t.formValues[x],L.onCompositeEditorChange.notify(Me(P({},C),{item:R,grid:L,column:b,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}handleChangeOnCompositeEditorDebounce(e){var t,i,o;let s=(t=this.args)===null||t===void 0?void 0:t.compositeEditorOptions;if(s){let l=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.editorTypingDebounce)!==null&&o!==void 0?o:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(e,s),l)}}};var Ji=class{constructor(e,t){if(this.args=e,this._inputType="text",this._isValueTouched=!1,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=e.grid&&e.grid.getOptions(),this._bindEventService=new We,this.inputType=t||"text",this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o,s,l,a,d;let u=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",p=this.args.compositeEditorOptions;this._input=N("input",{type:this._inputType||"text",autocomplete:"off",placeholder:(o=(i=this.columnEditor)===null||i===void 0?void 0:i.placeholder)!==null&&o!==void 0?o:"",title:(l=(s=this.columnEditor)===null||s===void 0?void 0:s.title)!==null&&l!==void 0?l:"",className:`editor-text editor-${u}`}),this._input.setAttribute("role","presentation"),this._input.setAttribute("aria-label",(d=(a=this.columnEditor)===null||a===void 0?void 0:a.ariaLabel)!==null&&d!==void 0?d:`${vt(u+"")} Input Editor`);let f=this.args.container;f&&typeof f.appendChild=="function"&&f.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._isValueTouched=!0,this._lastInputKeyEvent=m,(m.keyCode===Ie.LEFT||m.keyCode===Ie.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!p&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),p&&this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this))}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this._input)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}disable(e=!0){var t;let i=this.disabled;if(this.disabled=e,this._input)if(e){this._input.setAttribute("disabled","disabled");let o=this.getValue();i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&o!==""&&this.reset("",!0,!0)}else this._input.removeAttribute("disabled")}focus(){this._input&&this._input.focus()}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var e;return((e=this._input)===null||e===void 0?void 0:e.value)||""}setValue(e,t=!1,i=!0){if(this._input&&(this._input.value=`${e}`,t)){this.applyValue(this.args.item,this.serializeValue());let o=this.args.compositeEditorOptions;o&&i&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(e,t){var i,o,s;let l=this.columnDef&&this.columnDef.field;if(l!==void 0){let a=l?.indexOf(".")>0,d=this.validate(null,t),u=d?.valid?t:"";if(a){let p=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";It(e,p,u)}else l&&(e[l]=u)}}isValueChanged(){var e;let t=(e=this._input)===null||e===void 0?void 0:e.value,i=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;return this.columnEditor&&this.columnEditor.alwaysSaveOnEnterKey&&i===Ie.ENTER?!0:!(t===""&&(this._originalValue===null||this._originalValue===void 0))&&t!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(e){let t=this.columnDef&&this.columnDef.field;if(e&&t!==void 0&&this._input){let o=t?.indexOf(".")>0?je(e,t):e.hasOwnProperty(t)&&e[t]||"";this._originalValue=o,this._input.value=this._originalValue,this._input.select()}}reset(e,t=!0,i=!1){var o;let s=(o=e??this._originalValue)!==null&&o!==void 0?o:"";this._input&&(this._originalValue=s,this._input.value=`${s}`),this._isValueTouched=!1;let l=this.args.compositeEditorOptions;if(l&&t){let a=!i;this.handleChangeOnCompositeEditor(null,l,"user",a)}}save(){let e=this.validate(),t=e&&e.valid||!1;this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e,t;return(t=(e=this._input)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:""}validate(e,t){var i;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let o=t!==void 0?t:this._input&&this._input.value;return Io(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u;let p=this.grid.getActiveCell(),f=this.args.column,m=(l=(s=this.columnDef)===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:"",_=this.dataContext,C=this.grid,b=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,b),this.applyValue(t.formValues,b);let E=(u=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.compositeEditorOptions)===null||d===void 0?void 0:d.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(o||this.disabled&&E&&t.formValues.hasOwnProperty(m))&&delete t.formValues[m],C.onCompositeEditorChange.notify(Me(P({},p),{item:_,grid:C,column:f,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}handleOnInputChange(e){var t,i;this._isValueTouched=!0;let o=this.args.compositeEditorOptions;if(o){let s=(i=(t=this.gridOptions)===null||t===void 0?void 0:t.editorTypingDebounce)!==null&&i!==void 0?i:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(e,o),s)}}};var Vu=0,Hs=class extends Ji{constructor(e){super(e,"number"),this.args=e}init(){var e,t,i,o,s,l,a,d;if(this.columnDef&&this.columnEditor&&this.args){let u=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",p=this.args.compositeEditorOptions;this._input=N("input",{type:"number",autocomplete:"off",className:`editor-text editor-${u}`,placeholder:(o=(i=this.columnEditor)===null||i===void 0?void 0:i.placeholder)!==null&&o!==void 0?o:"",title:(l=(s=this.columnEditor)===null||s===void 0?void 0:s.title)!==null&&l!==void 0?l:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:this.getInputDecimalSteps()}`}),this._input.setAttribute("role","presentation"),this._input.setAttribute("aria-label",(d=(a=this.columnEditor)===null||a===void 0?void 0:a.ariaLabel)!==null&&d!==void 0?d:`${vt(u+"")} Number Editor`);let f=this.args.container;f&&typeof f.appendChild=="function"&&f.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===Ie.LEFT||m.keyCode===Ie.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!p&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),p&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this)))}}getDecimalPlaces(){var e,t,i,o,s;let l=(s=(t=(e=this.columnEditor)===null||e===void 0?void 0:e.decimal)!==null&&t!==void 0?t:(o=(i=this.columnEditor)===null||i===void 0?void 0:i.params)===null||o===void 0?void 0:o.decimalPlaces)!==null&&s!==void 0?s:void 0;return l===void 0&&(l=Vu),!l&&l!==0?null:l}getInputDecimalSteps(){let e=this.getDecimalPlaces(),t="";for(let i=1;i<e;i++)t+="0";return e>0?`0.${t}1`:"1"}loadValue(e){let t=this.columnDef&&this.columnDef.field;if(t!==void 0&&e&&t!==void 0&&this._input){let o=t?.indexOf(".")>0?je(e,t):e[t];this._originalValue=o;let s=this.getDecimalPlaces();s!==null&&(this._originalValue||this._originalValue===0)&&typeof this._originalValue!==void 0&&(this._originalValue=(+this._originalValue).toFixed(s)),this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var e;let t=(e=this._input)===null||e===void 0?void 0:e.value;if(t===void 0||t===""||isNaN(+t))return t;let i=parseFloat(t),o=this.getDecimalPlaces();return o!==null&&(i||i===0)&&i.toFixed&&(i=parseFloat(i.toFixed(o))),i}validate(e,t){var i,o;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let s=t!==void 0?t:(i=this._input)===null||i===void 0?void 0:i.value;return Ns(s,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,decimal:this.getDecimalPlaces(),minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((o=this.args)===null||o===void 0)&&o.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(e){this._isValueTouched=!0;let t=this.args.compositeEditorOptions;t&&this.handleChangeOnCompositeEditor(e,t)}};var $s=class extends Ji{constructor(e){super(e,"password"),this.args=e}};var zs=class extends Ji{constructor(e){super(e,"number"),this.args=e}init(){var e,t,i,o,s,l,a,d;if(this.columnDef&&this.columnEditor&&this.args){let u=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",p=this.args.compositeEditorOptions;this._input=N("input",{type:"number",autocomplete:"off",placeholder:(o=(i=this.columnEditor)===null||i===void 0?void 0:i.placeholder)!==null&&o!==void 0?o:"",title:(l=(s=this.columnEditor)===null||s===void 0?void 0:s.title)!==null&&l!==void 0?l:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:"1"}`,className:`editor-text editor-${u}`}),this._input.setAttribute("role","presentation"),this._input.setAttribute("aria-label",(d=(a=this.columnEditor)===null||a===void 0?void 0:a.ariaLabel)!==null&&d!==void 0?d:`${vt(u+"")} Slider Editor`);let f=this.args.container;f&&typeof f.appendChild=="function"&&f.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===Ie.LEFT||m.keyCode===Ie.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!p&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),p&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this)))}}loadValue(e){let t=this.columnDef&&this.columnDef.field;if(t!==void 0&&e&&t!==void 0&&this._input){let o=t?.indexOf(".")>0?je(e,t):e[t];this._originalValue=isNaN(o)||o===null||o===void 0?o:`${o}`,this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var e;let t=(e=this._input)===null||e===void 0?void 0:e.value;if(t===void 0||t===""||isNaN(+t))return t;let i=isNaN(+t)?t:parseInt(t,10);return isNaN(+i)?t:i}validate(e,t){var i;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let o=t!==void 0?t:this.getValue();return Ls(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((i=this.args)===null||i===void 0)&&i.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(e){this._isValueTouched=!0;let t=this.args.compositeEditorOptions;t&&this.handleChangeOnCompositeEditor(e,t)}};var Bs=class{constructor(e){if(this.args=e,this._isValueTouched=!1,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=e.grid&&e.grid.getOptions();let t=this.gridOptions||this.args.column.params||{};t?.translater&&(this._translater=t.translater),this._locales=this.gridOptions&&this.gridOptions.locales||ie.locales,this._bindEventService=new We,this.init()}get columnDef(){return this.args.column}get columnEditor(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.internalColumnEditor)!==null&&t!==void 0?t:{}}get dataContext(){return this.args.item}get editorDomElement(){return this._textareaElm}get editorOptions(){var e,t;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.editorOptions)!==null&&t!==void 0?t:{}}get hasAutoCommitEdit(){var e,t;return(t=(e=this.gridOptions)===null||e===void 0?void 0:e.autoCommitEdit)!==null&&t!==void 0?t:!1}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o,s,l,a,d,u,p,f,m,_,C,b,E,x,R,L,z,B,G,V,H,K,oe;let ne="",Pe="";if(this._translater&&this._translater.translate&&this.gridOptions.enableTranslate){let $e=Et(this.gridOptions),ze=(t=(e=this.editorOptions.buttonTexts)===null||e===void 0?void 0:e.cancelKey)!==null&&t!==void 0?t:`${$e}CANCEL`,Ee=(o=(i=this.editorOptions.buttonTexts)===null||i===void 0?void 0:i.saveKey)!==null&&o!==void 0?o:`${$e}SAVE`;ne=this._translater.translate(`${$e}${ze}`),Pe=this._translater.translate(`${$e}${Ee}`)}else ne=(d=(l=(s=this.editorOptions.buttonTexts)===null||s===void 0?void 0:s.cancel)!==null&&l!==void 0?l:(a=this._locales)===null||a===void 0?void 0:a.TEXT_CANCEL)!==null&&d!==void 0?d:"Cancel",Pe=(m=(p=(u=this.editorOptions.buttonTexts)===null||u===void 0?void 0:u.save)!==null&&p!==void 0?p:(f=this._locales)===null||f===void 0?void 0:f.TEXT_SAVE)!==null&&m!==void 0?m:"Save";let He=this.args.compositeEditorOptions,xe=(C=(_=this.columnDef)===null||_===void 0?void 0:_.id)!==null&&C!==void 0?C:"",Xe=(b=this.columnEditor)===null||b===void 0?void 0:b.maxLength,ge=(x=(E=this.editorOptions)===null||E===void 0?void 0:E.rows)!==null&&x!==void 0?x:4,lt=He?this.args.container:document.body;this._wrapperElm=N("div",{className:`slick-large-editor-text editor-${xe}`,style:{position:He?"relative":"absolute"}}),lt.appendChild(this._wrapperElm),this._textareaElm=N("textarea",{cols:(L=(R=this.editorOptions)===null||R===void 0?void 0:R.cols)!==null&&L!==void 0?L:40,rows:He&&ge>3?3:ge,placeholder:(B=(z=this.columnEditor)===null||z===void 0?void 0:z.placeholder)!==null&&B!==void 0?B:"",title:(V=(G=this.columnEditor)===null||G===void 0?void 0:G.title)!==null&&V!==void 0?V:""}),this._textareaElm.setAttribute("aria-label",(K=(H=this.columnEditor)===null||H===void 0?void 0:H.ariaLabel)!==null&&K!==void 0?K:`${vt(xe+"")} Text Editor`),this._wrapperElm.appendChild(this._textareaElm);let Y=N("div",{className:"editor-footer"}),De=N("span",{className:"counter"});if(this._currentLengthElm=N("span",{className:"text-length",textContent:"0"}),De.appendChild(this._currentLengthElm),Xe!==void 0&&(De.appendChild(N("span",{className:"separator",textContent:"/"})),De.appendChild(N("span",{className:"max-length",textContent:`${Xe}`}))),Y.appendChild(De),!He){let $e=N("button",{className:"btn btn-cancel btn-default btn-xs",textContent:ne}),ze=N("button",{className:"btn btn-save btn-primary btn-xs",textContent:Pe});Y.appendChild($e),Y.appendChild(ze),this._bindEventService.bind($e,"click",this.cancel.bind(this)),this._bindEventService.bind(ze,"click",this.save.bind(this)),this.position((oe=this.args)===null||oe===void 0?void 0:oe.position),this._textareaElm.focus(),this._textareaElm.select()}this._wrapperElm.appendChild(Y),this._bindEventService.bind(this._textareaElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._textareaElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._textareaElm,"paste",this.handleOnInputChange.bind(this))}cancel(){var e;let t=this._defaultTextValue||"";this._textareaElm.value=t,this._currentLengthElm.textContent=`${t.length}`,!((e=this.args)===null||e===void 0)&&e.cancelChanges&&this.args.cancelChanges()}hide(){this._wrapperElm.style.display="none"}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)?this.applyInputUsabilityState():this._wrapperElm.style.display="block"}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this._wrapperElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}disable(e=!0){var t;let i=this.disabled;if(this.disabled=e,this._textareaElm&&this._wrapperElm)if(e){this._textareaElm.disabled=!0,this._wrapperElm.classList.add("disabled");let o=this.getValue();i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&o!==""&&this.reset("",!0,!0)}else this._textareaElm.disabled=!1,this._wrapperElm.classList.remove("disabled")}focus(){this._textareaElm&&(this._textareaElm.focus(),this._textareaElm.select())}getValue(){return this._textareaElm.value}setValue(e,t=!1,i=!0){if(this._textareaElm.value=e,this._currentLengthElm.textContent=`${e.length}`,t){this.applyValue(this.args.item,this.serializeValue());let o=this.args.compositeEditorOptions;o&&i&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(e,t){var i,o,s,l;let a=(i=this.columnDef)===null||i===void 0?void 0:i.field;if(a!==void 0){let d=a?.indexOf(".")>0,u=this.validate(void 0,t),p=u&&u.valid?t:"";if(d){let f=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:a)!==null&&l!==void 0?l:"";It(e,f,p)}else e[a]=p}}isValueChanged(){let e=this._textareaElm.value;return!(e===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&e!==this._defaultTextValue}isValueTouched(){return this._isValueTouched}loadValue(e){var t;let i=(t=this.columnDef)===null||t===void 0?void 0:t.field;if(e&&i!==void 0){let s=i?.indexOf(".")>0?je(e,i):e[i];this._defaultTextValue=s||"",this._textareaElm.value=this._defaultTextValue,this._currentLengthElm.textContent=this._defaultTextValue.length,this._textareaElm.defaultValue=this._defaultTextValue,this._textareaElm.select()}}position(e){var t,i,o,s,l,a,d,u;let p=Nt(this.args.container),f=this.args.container.offsetHeight,m=this.args.container.offsetWidth,_=this._wrapperElm.getBoundingClientRect().height||this.args.position.height,C=this._wrapperElm.getBoundingClientRect().width||this.args.position.width,b=document.body.offsetHeight||window.innerHeight,E=document.body.offsetWidth||window.innerWidth,x=(i=(t=p?.top)!==null&&t!==void 0?t:e.top)!==null&&i!==void 0?i:0,R=(s=(o=p?.left)!==null&&o!==void 0?o:e.left)!==null&&s!==void 0?s:0,L=(a=(l=this.editorOptions)===null||l===void 0?void 0:l.position)!==null&&a!==void 0?a:"auto";if(L==="left"||L==="auto"&&R+C>E){let z=(u=(d=this.editorOptions)===null||d===void 0?void 0:d.marginRight)!==null&&u!==void 0?u:0;R-=C-m+z}(L==="top"||L==="auto"&&x+_>b)&&(x-=_-f),this._wrapperElm.style.top=`${x}px`,this._wrapperElm.style.left=`${R}px`}reset(e,t=!0,i=!1){var o;let s=(o=e??this._defaultTextValue)!==null&&o!==void 0?o:"";this._textareaElm&&(this._defaultTextValue=s,this._textareaElm.value=s,this._currentLengthElm.textContent=s.length),this._isValueTouched=!1;let l=this.args.compositeEditorOptions;if(l&&t){let a=!i;this.handleChangeOnCompositeEditor(null,l,"user",a)}}save(){var e;let t=this.validate(),i=(e=t?.valid)!==null&&e!==void 0?e:!1;this.hasAutoCommitEdit&&i?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){return this._textareaElm.value}validate(e,t){var i,o;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let s=t!==void 0?t:(i=this._textareaElm)===null||i===void 0?void 0:i.value;return Io(s,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((o=this.args)===null||o===void 0)&&o.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleKeyDown(e){var t;let i=(t=e.keyCode)!==null&&t!==void 0?t:e.code;this._isValueTouched=!0,this.args.compositeEditorOptions||(i===Ie.ENTER&&e.ctrlKey||e.ctrlKey&&e.key.toUpperCase()==="S"?(e.preventDefault(),this.save()):i===Ie.ESCAPE?(e.preventDefault(),this.cancel()):i===Ie.TAB&&e.shiftKey?(e.preventDefault(),this.args&&this.grid&&this.grid.navigatePrev()):i===Ie.TAB&&(e.preventDefault(),this.args&&this.grid&&this.grid.navigateNext()))}handleOnInputChange(e){var t,i,o;let s=this.args.compositeEditorOptions,l=(t=this.columnEditor)===null||t===void 0?void 0:t.maxLength,a=!1;if(l&&(a=this.truncateText(this._textareaElm,l)),a)this._currentLengthElm.textContent=`${l}`;else{let d=e.type==="paste"?e.clipboardData.getData("text"):e.target.value;this._currentLengthElm.textContent=`${d.length}`}if(s){let d=(o=(i=this.gridOptions)===null||i===void 0?void 0:i.editorTypingDebounce)!==null&&o!==void 0?o:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(e,s),d)}}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u;let p=this.grid.getActiveCell(),f=this.args.column,m=(l=(s=this.columnDef)===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:"",_=this.dataContext,C=this.grid,b=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,b),this.applyValue(t.formValues,b);let E=(u=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.compositeEditorOptions)===null||d===void 0?void 0:d.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(o||this.disabled&&E&&t.formValues.hasOwnProperty(m))&&delete t.formValues[m],C.onCompositeEditorChange.notify(Me(P({},p),{item:_,grid:C,column:f,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}truncateText(e,t){let i=e.value+"";return i.length>t?(e.value=i.substring(0,t),!0):!1}};var En=class{constructor(e,t){var i,o,s,l,a,d,u;if(this.args=e,this.isMultipleSelect=t,this._isValueTouched=!1,this._isDisposingOrCallingSave=!1,this.disabled=!1,this.enableTranslateLabel=!1,this.finalCollection=[],!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{},!((i=this.gridOptions)===null||i===void 0)&&i.translater&&(this._translaterService=this.gridOptions.translater),this._locales=this.gridOptions.locales||ie.locales;let p=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"";this.elementName=`editor-${p}`;let f=this.args.compositeEditorOptions,m={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,name:this.elementName,single:!0,textTemplate:_=>{var C,b;return((b=(C=this.columnEditor)===null||C===void 0?void 0:C.enableRenderHtml)!==null&&b!==void 0?b:!1)?_.text():_.html()},onClick:()=>this._isValueTouched=!0,onCheckAll:()=>this._isValueTouched=!0,onUncheckAll:()=>this._isValueTouched=!0,onClose:()=>{f?this.handleChangeOnCompositeEditor(f):(this._isDisposingOrCallingSave=!0,this.save(this.hasAutoCommitEdit))}};if(t)if(m.single=!1,m.addTitle=!0,m.okButton=!0,m.selectAllDelimiter=["",""],this._translaterService&&this._translaterService.getCurrentLanguage&&this._translaterService.getCurrentLanguage()){let _=Et(this.gridOptions);m.countSelected=this._translaterService.translate(`${_}X_OF_Y_SELECTED`),m.allSelected=this._translaterService.translate(`${_}ALL_SELECTED`),m.selectAllText=this._translaterService.translate(`${_}SELECT_ALL`),m.okButtonText=this._translaterService.translate(`${_}OK`)}else m.countSelected=(l=this._locales)===null||l===void 0?void 0:l.TEXT_X_OF_Y_SELECTED,m.allSelected=(a=this._locales)===null||a===void 0?void 0:a.TEXT_ALL_SELECTED,m.selectAllText=(d=this._locales)===null||d===void 0?void 0:d.TEXT_SELECT_ALL,m.okButtonText=(u=this._locales)===null||u===void 0?void 0:u.TEXT_OK;this.defaultOptions=m,this.init()}get collection(){var e,t;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.collection)!==null&&t!==void 0?t:[]}get collectionOptions(){var e;return(e=this.columnEditor)===null||e===void 0?void 0:e.collectionOptions}get columnDef(){return this.args.column}get columnEditor(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.internalColumnEditor)!==null&&t!==void 0?t:{}}get dataContext(){return this.args.item}get editorDomElement(){return this.$editorElm}get isCompositeEditor(){var e;return!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)}get customStructure(){var e,t;return(t=(e=this.columnDef)===null||e===void 0?void 0:e.internalColumnEditor)===null||t===void 0?void 0:t.customStructure}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get currentValues(){var e,t,i,o,s;let l=(e=this.$editorElm)===null||e===void 0?void 0:e.val();if(this.collection.every(u=>typeof u=="string"))return this.collection.filter(u=>l.indexOf(u?.toString())!==-1);let a=(i=(t=this.collectionOptions)===null||t===void 0?void 0:t.separatorBetweenTextLabels)!==null&&i!==void 0?i:"",d=(s=(o=this.collectionOptions)===null||o===void 0?void 0:o.includePrefixSuffixToSelectedValues)!==null&&s!==void 0?s:!1;return this.collection.filter(u=>{var p;return l.indexOf(u.hasOwnProperty(this.valueName)&&((p=u[this.valueName])===null||p===void 0?void 0:p.toString()))!==-1}).map(u=>{var p,f,m,_;let C=u[this.valueName],b=u[this.labelPrefixName]||"",E=u[this.labelSuffixName]||"",x=(f=(p=this.columnDef)===null||p===void 0?void 0:p.field)!==null&&f!==void 0?f:"",R=x?.indexOf(".")>0,L=(_=(m=this.columnEditor)===null||m===void 0?void 0:m.serializeComplexValueFormat)!==null&&_!==void 0?_:"object";return R&&typeof u=="object"&&L==="object"?u:(b=this.enableTranslateLabel&&this._translaterService&&b&&typeof b=="string"?this._translaterService.translate(b||" "):b,E=this.enableTranslateLabel&&this._translaterService&&E&&typeof E=="string"?this._translaterService.translate(E||" "):E,d?[b,C,E].filter(B=>B).join(a):C)})}get currentValue(){var e,t,i,o,s,l;let a=this.$editorElm.val(),d=this.columnDef&&this.columnDef.field;if(d!==void 0){if(this.collection.every(C=>typeof C=="string"))return Ci(this.collection,C=>{var b;return((b=C?.toString)===null||b===void 0?void 0:b.call(C))===a});let u=(t=(e=this.collectionOptions)===null||e===void 0?void 0:e.separatorBetweenTextLabels)!==null&&t!==void 0?t:"",p=(o=(i=this.collectionOptions)===null||i===void 0?void 0:i.includePrefixSuffixToSelectedValues)!==null&&o!==void 0?o:!1,f=Ci(this.collection,C=>{var b;return C.hasOwnProperty(this.valueName)&&((b=C[this.valueName])===null||b===void 0?void 0:b.toString())===a}),m=d?.indexOf(".")>0,_=(l=(s=this.columnEditor)===null||s===void 0?void 0:s.serializeComplexValueFormat)!==null&&l!==void 0?l:"object";if(m&&typeof f=="object"&&_==="object")return f;if(f&&f.hasOwnProperty(this.valueName)){let C=f[this.valueName];if(p){let b=f[this.labelPrefixName]||"",E=f[this.labelSuffixName]||"";return b=this.enableTranslateLabel&&this._translaterService&&b&&typeof b=="string"?this._translaterService.translate(b||" "):b,E=this.enableTranslateLabel&&this._translaterService&&E&&typeof E=="string"?this._translaterService.translate(E||" "):E,[b,C,E].filter(R=>R).join(u)}return C}}return""}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i,o,s,l,a,d,u,p,f,m,_;if(!this.columnDef||!this.columnDef.internalColumnEditor||!this.columnDef.internalColumnEditor.collection&&!this.columnDef.internalColumnEditor.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.
      Also each option should include a value/label pair (or value/labelKey when using Locale).
      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }`);if(this._collectionService=new fn(this._translaterService),this.enableTranslateLabel=(t=(e=this.columnEditor)===null||e===void 0?void 0:e.enableTranslateLabel)!==null&&t!==void 0?t:!1,this.labelName=(o=(i=this.customStructure)===null||i===void 0?void 0:i.label)!==null&&o!==void 0?o:"label",this.labelPrefixName=(l=(s=this.customStructure)===null||s===void 0?void 0:s.labelPrefix)!==null&&l!==void 0?l:"labelPrefix",this.labelSuffixName=(d=(a=this.customStructure)===null||a===void 0?void 0:a.labelSuffix)!==null&&d!==void 0?d:"labelSuffix",this.optionLabel=(p=(u=this.customStructure)===null||u===void 0?void 0:u.optionLabel)!==null&&p!==void 0?p:"value",this.valueName=(m=(f=this.customStructure)===null||f===void 0?void 0:f.value)!==null&&m!==void 0?m:"value",this.enableTranslateLabel&&(!this._translaterService||typeof this._translaterService.translate!="function"))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.renderDomElement(this.collection),(this.disabled||!((_=this.columnEditor)===null||_===void 0)&&_.collectionAsync&&Array.isArray(this.collection)&&this.collection.length===0)&&this.disable(!0)}getValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}setValue(e,t=!1,i=!0){if(this.isMultipleSelect&&Array.isArray(e)?this.loadMultipleValues(e):this.loadSingleValue(e),t){this.applyValue(this.args.item,this.serializeValue());let o=this.args.compositeEditorOptions;o&&i&&this.handleChangeOnCompositeEditor(o,"system")}}hide(){this.$editorElm&&typeof this.$editorElm.multipleSelect=="function"&&this.$editorElm.multipleSelect("close")}show(){!this.isCompositeEditor&&this.$editorElm&&typeof this.$editorElm.multipleSelect=="function"?this.$editorElm.multipleSelect("open"):this.isCompositeEditor&&this.applyInputUsabilityState()}applyValue(e,t){var i,o,s;let l=this.columnDef&&this.columnDef.field,a=this.columnDef&&this.columnDef.type,d=t;if(l!==void 0){(a===O.number||a===O.integer||a===O.boolean)&&!isNaN(parseFloat(t))&&(d=parseFloat(t)),this.isMultipleSelect&&typeof t=="string"&&t.indexOf(",")>=0&&(d=t.split(","));let u=l?.indexOf(".")>0,p=this.validate(null,d);if(d=p?.valid?d:"",u){let f=(s=(o=(i=this.columnEditor)===null||i===void 0?void 0:i.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";It(e,f,d)}else e[l]=d}}destroy(){if(this.$editorElm&&this.hasAutoCommitEdit&&this.isValueChanged()&&!this._isDisposingOrCallingSave&&!this.isCompositeEditor&&(this._isDisposingOrCallingSave=!0,this.save(!0)),this._isDisposingOrCallingSave=!0,this.$editorElm&&typeof this.$editorElm.multipleSelect=="function"){this.$editorElm.multipleSelect("destroy"),this.$editorElm.remove();let e=this.elementName.toString().replace(".","\\.");$(`[name=${e}].ms-drop`).remove(),this.$editorElm.remove(),this.$editorElm=null}}loadValue(e){var t,i;let o=this.columnDef&&this.columnDef.field,s=o!==void 0&&o?.indexOf(".")>0;if(e&&o!==void 0){let l=(i=(t=this.columnEditor)===null||t===void 0?void 0:t.complexObjectPath)!==null&&i!==void 0?i:o,a=s?je(e,l):e.hasOwnProperty(o)&&e[o],d=s&&a?.hasOwnProperty(this.valueName)?a[this.valueName]:a;this.isMultipleSelect&&Array.isArray(d)?this.loadMultipleValues(d):this.loadSingleValue(d),this.refresh()}}loadMultipleValues(e){if(Array.isArray(e)){this.originalValue=e.map(i=>i),this.$editorElm.multipleSelect("setSelects",e);let t=this.args.compositeEditorOptions;t&&this.handleChangeOnCompositeEditor(t)}}loadSingleValue(e){this.originalValue=typeof e=="number"?`${e}`:e,this.$editorElm.val(e),this.$editorElm.multipleSelect("setSelects",[e])}serializeValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}changeEditorOption(e,t){this.columnEditor&&(this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[e]=t,this.editorElmOptions=Me(P({},this.editorElmOptions),{[e]:t}),this.$editorElm.multipleSelect("refreshOptions",this.editorElmOptions))}disable(e=!0){let t=this.disabled;if(this.disabled=e,this.$editorElm)if(e){this.$editorElm.multipleSelect("disable");let i=this.getValue(),o=this.isMultipleSelect?i===[""]:i==="";t!==e&&this.isCompositeEditor&&!o&&this.reset("",!0,!0)}else this.$editorElm.multipleSelect("enable")}focus(){this.$editorElm&&this.$editorElm.multipleSelect&&this.$editorElm.multipleSelect("focus")}isValueChanged(){var e;let t=(e=this.$editorElm)===null||e===void 0?void 0:e.multipleSelect("getSelects");if(this.isMultipleSelect)return!ti(t,this.originalValue);let i=Array.isArray(t)&&t.length>0?t[0]:void 0;return i!==void 0&&i!==this.originalValue}isValueTouched(){return this._isValueTouched}reset(e,t=!0,i=!1){let o=e??this.originalValue;if(this.$editorElm){this.originalValue=this.isMultipleSelect?o!==void 0?[o]:[]:o;let l=this.originalValue===void 0?[]:[this.originalValue];this.$editorElm.multipleSelect("setSelects",l)}this._isValueTouched=!1;let s=this.args.compositeEditorOptions;if(s&&t){let l=!i;this.handleChangeOnCompositeEditor(s,"user",l)}}save(e=!1){var t;let i=this.validate(),o=(t=i?.valid)!==null&&t!==void 0?t:!1;(!this._isDisposingOrCallingSave||e)&&this.hasAutoCommitEdit&&o?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}validate(e,t){var i;let o=this.isCompositeEditor?!1:(i=this.columnEditor)===null||i===void 0?void 0:i.required,s=t!==void 0?t:this.$editorElm&&this.$editorElm.val&&this.$editorElm.val(),l=this.columnEditor&&this.columnEditor.errorMessage;if(this.isCompositeEditor&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(this.validator){let a=t!==void 0?t:this.isMultipleSelect?this.currentValues:this.currentValue;return this.validator(a,this.args)}return o&&(s===""||Array.isArray(s)&&s.length===0)?{valid:!1,msg:l||ie.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}filterCollection(e){var t,i;let o=e;if(this.columnEditor&&this.columnEditor.collectionFilterBy){let s=this.columnEditor.collectionFilterBy,l=(i=(t=this.columnEditor.collectionOptions)===null||t===void 0?void 0:t.filterResultAfterEachPass)!==null&&i!==void 0?i:null;o=this._collectionService.filterCollection(o,s,l)}return o}sortCollection(e){let t=e;if(this.columnDef&&this.columnEditor&&this.columnEditor.collectionSortBy){let i=this.columnEditor.collectionSortBy;t=this._collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t}renderDomElement(e){var t,i,o,s,l;if(!Array.isArray(e)&&(!((t=this.collectionOptions)===null||t===void 0)&&t.collectionInsideObjectProperty)){let p=this.collectionOptions.collectionInsideObjectProperty;e=je(e,p)}if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Editor is not a valid array.');let a=[];if(e.length>0&&(a=[...e]),!((i=this.collectionOptions)===null||i===void 0)&&i.addBlankEntry&&Array.isArray(a)&&a.length>0&&a[0][this.valueName]!==""&&(a.unshift(this.createBlankEntry()),this.collection.unshift(this.createBlankEntry())),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomFirstEntry&&Array.isArray(a)&&a.length>0&&a[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&(a.unshift(this.collectionOptions.addCustomFirstEntry),this.collection.unshift(this.collectionOptions.addCustomFirstEntry)),!((s=this.collectionOptions)===null||s===void 0)&&s.addCustomLastEntry&&Array.isArray(a)&&a.length>0){let p=a.length-1;a[p][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&a.push(this.collectionOptions.addCustomLastEntry)}let d=a;if(d=this.filterCollection(d),d=this.sortCollection(d),!((l=this.columnEditor)===null||l===void 0)&&l.collectionOverride){let p={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){let{formValues:f,modalType:m}=this.args.compositeEditorOptions;p.compositeEditorOptions={formValues:f,modalType:m}}d=this.columnEditor.collectionOverride(d,p)}this.finalCollection=d;let u=Ir("editor",d,this.columnDef,this.grid,this.isMultipleSelect,this._translaterService);this.createDomElement(u.selectElement)}createBlankEntry(){let e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createDomElement(e){var t,i;this.$editorElm=$(e),this.$editorElm&&typeof this.$editorElm.appendTo=="function"&&($(this.args.container).empty(),this.$editorElm.appendTo(this.args.container));let o=(i=(t=this.columnEditor)===null||t===void 0?void 0:t.placeholder)!==null&&i!==void 0?i:"";if(this.defaultOptions.placeholder=o||"",typeof this.$editorElm.multipleSelect=="function"){let s=this.columnDef&&this.columnDef.internalColumnEditor?this.columnDef.internalColumnEditor.editorOptions:{};this.editorElmOptions=P(P({},this.defaultOptions),s),this.$editorElm=this.$editorElm.multipleSelect(this.editorElmOptions),this.isCompositeEditor||setTimeout(()=>this.show())}}handleChangeOnCompositeEditor(e,t="user",i=!1){var o,s,l,a,d;let u=this.grid.getActiveCell(),p=this.args.column,f=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",m=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);let b=(d=(a=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||a===void 0?void 0:a.excludeDisabledFieldFormValues)!==null&&d!==void 0?d:!1;(i||this.disabled&&b&&e.formValues.hasOwnProperty(f))&&delete e.formValues[f],_.onCompositeEditorChange.notify(Me(P({},u),{item:m,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:t}),new Slick.EventData)}refresh(){typeof this.$editorElm.multipleSelect=="function"&&this.$editorElm.multipleSelect("refresh")}};var Ws=class extends En{constructor(e){super(e,!0),this.args=e}};var Gs=class extends En{constructor(e){super(e,!1),this.args=e}};var Hu=0,$u=100,zu=1,Us=class{constructor(e){if(this.args=e,this._defaultValue=0,this._elementRangeInputId="",this._elementRangeOutputId="",this._isValueTouched=!1,this.sliderNumberElm=null,this.disabled=!1,!e)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new We,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._editorElm}get editorInputDomElement(){return this._inputElm}get hasAutoCommitEdit(){var e;return(e=this.gridOptions.autoCommitEdit)!==null&&e!==void 0?e:!1}get editorParams(){return this.columnEditor.params||{}}get validator(){var e,t,i;return(t=(e=this.columnEditor)===null||e===void 0?void 0:e.validator)!==null&&t!==void 0?t:(i=this.columnDef)===null||i===void 0?void 0:i.validator}init(){var e,t,i;let o=this.args&&this.args.container;if(o&&this.columnDef){let s=(i=(t=(e=this.args)===null||e===void 0?void 0:e.item)===null||t===void 0?void 0:t.id)!==null&&i!==void 0?i:"";this._elementRangeInputId=`rangeInput_${this.columnDef.id}_${s}`,this._elementRangeOutputId=`rangeOutput_${this.columnDef.id}_${s}`;let l=this.args.compositeEditorOptions;this._editorElm=this.buildDomElement(),this._inputElm=this._editorElm.querySelector("input"),this.sliderNumberElm=this._editorElm.querySelector(`span.input-group-text.${this._elementRangeOutputId}`),l||this.focus(),o.appendChild(this._editorElm),this._bindEventService.bind(this._editorElm,["change","mouseup","touchend"],this.handleChangeEvent.bind(this)),this._bindEventService.bind(this._editorElm,["input","change"],this.handleChangeSliderNumber.bind(this))}}cancel(){this._inputElm&&(this._inputElm.value=`${this.originalValue}`),this.args.cancelChanges()}destroy(){var e,t;this._bindEventService.unbindAll(),(t=(e=this._inputElm)===null||e===void 0?void 0:e.remove)===null||t===void 0||t.call(e)}disable(e=!0){var t;let i=this.disabled;if(this.disabled=e,this._inputElm)if(e){this._inputElm.disabled=!0;let o=this.getValue();i!==e&&(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&o!==""&&this.reset(0,!0,!0)}else this._inputElm.disabled=!1}focus(){this._inputElm&&this._inputElm.focus()}show(){var e;!!(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var e,t;return(t=(e=this._inputElm)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:""}setValue(e,t=!1,i=!0){if(this._inputElm&&(this._inputElm.value=`${e}`),this.sliderNumberElm&&(this.sliderNumberElm.textContent=`${e}`),t){this.applyValue(this.args.item,this.serializeValue());let o=this.args.compositeEditorOptions;o&&i&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(e,t){var i,o,s,l,a;let d=(o=(i=this.columnDef)===null||i===void 0?void 0:i.field)!==null&&o!==void 0?o:"";if(d!==void 0){let u=d?.indexOf(".")>0,p=this.validate(void 0,t),f=p&&p.valid?t:"";if(u){let m=(a=(l=(s=this.columnEditor)===null||s===void 0?void 0:s.complexObjectPath)!==null&&l!==void 0?l:d)!==null&&a!==void 0?a:"";It(e,m,f)}else e&&(e[d]=f)}}isValueChanged(){var e,t;let i=(t=(e=this._inputElm)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:"";return!(i===""&&this.originalValue===void 0)&&+i!==this.originalValue}isValueTouched(){return this._isValueTouched}loadValue(e){var t,i;let o=(i=(t=this.columnDef)===null||t===void 0?void 0:t.field)!==null&&i!==void 0?i:"";if(e&&o!==void 0){let l=o?.indexOf(".")>0?je(e,o):e.hasOwnProperty(o)?e[o]:this._defaultValue;(l===""||l===null||l===void 0)&&(l=this._defaultValue),this.originalValue=+l,this._inputElm&&(this._inputElm.value=`${l}`,this._inputElm.title=`${l}`),this.sliderNumberElm&&(this.sliderNumberElm.textContent=`${l}`)}}reset(e,t=!0,i=!1){var o;let s=(o=e??this.originalValue)!==null&&o!==void 0?o:0;this._editorElm&&(this._editorElm.querySelector("input").value=`${s}`,this._editorElm.querySelector("div.input-group-addon.input-group-append").textContent=`${s}`),this._isValueTouched=!1;let l=this.args.compositeEditorOptions;if(l&&t){let a=!i;this.handleChangeOnCompositeEditor(null,l,"user",a)}}save(){let e=this.validate(),t=e&&e.valid||!1;this.hasAutoCommitEdit&&t?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e,t;let i=(t=(e=this._inputElm)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:"";return i!==""?parseInt(i,10):this.originalValue}validate(e,t){var i,o;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};let s=t!==void 0?t:(i=this._inputElm)===null||i===void 0?void 0:i.value;return nd(s,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,required:!((o=this.args)===null||o===void 0)&&o.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}buildDomElement(){var e,t,i,o;let s=(t=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:"",l=this.columnEditor&&this.columnEditor.title||"",a=this.columnEditor.hasOwnProperty("minValue")?this.columnEditor.minValue:Hu,d=this.columnEditor.hasOwnProperty("maxValue")?this.columnEditor.maxValue:$u,u=this.editorParams.hasOwnProperty("sliderStartValue")?this.editorParams.sliderStartValue:a;this._defaultValue=u;let p=N("input",{type:"range",name:this._elementRangeInputId,title:l,defaultValue:u,value:u,min:`${a}`,max:`${d}`,step:`${this.columnEditor.hasOwnProperty("valueStep")?this.columnEditor.valueStep:zu}`,className:`form-control slider-editor-input editor-${s} range ${this._elementRangeInputId}`});p.setAttribute("aria-label",(o=(i=this.columnEditor)===null||i===void 0?void 0:i.ariaLabel)!==null&&o!==void 0?o:`${vt(s+"")} Slider Editor`);let f=N("div",{className:"slider-container slider-editor"});if(f.appendChild(p),!this.editorParams.hideSliderNumber){f.classList.add("input-group");let m=N("div",{className:"input-group-addon input-group-append slider-value"});m.appendChild(N("span",{className:`input-group-text ${this._elementRangeOutputId}`,textContent:`${u}`})),f.appendChild(m)}return f}applyInputUsabilityState(){let e=this.grid.getActiveCell(),t=this.grid.onBeforeEditCell.notify(Me(P({},e),{item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}));this.disable(t===!1)}handleChangeEvent(e){this._isValueTouched=!0;let t=this.args.compositeEditorOptions;t?this.handleChangeOnCompositeEditor(e,t):this.save()}handleChangeSliderNumber(e){var t,i;let o=(i=(t=e.target)===null||t===void 0?void 0:t.value)!==null&&i!==void 0?i:"";o!==""&&(!this.editorParams.hideSliderNumber&&this.sliderNumberElm&&(this.sliderNumberElm.textContent=o),this._inputElm.title=o)}handleChangeOnCompositeEditor(e,t,i="user",o=!1){var s,l,a,d,u;let p=this.grid.getActiveCell(),f=this.args.column,m=(l=(s=this.columnDef)===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:"",_=this.dataContext,C=this.grid,b=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,b),this.applyValue(t.formValues,b);let E=(u=(d=(a=this.gridOptions)===null||a===void 0?void 0:a.compositeEditorOptions)===null||d===void 0?void 0:d.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(o||this.disabled&&E&&t.formValues.hasOwnProperty(m))&&delete t.formValues[m],C.onCompositeEditorChange.notify(Me(P({},p),{item:_,grid:C,column:f,formValues:t.formValues,editors:t.editors,triggeredBy:i}),P(P({},new Slick.EventData),e))}};var rd={autoComplete:As,checkbox:ks,date:Ms,dualInput:Vs,float:Hs,integer:zs,longText:Bs,multipleSelect:Ws,password:$s,singleSelect:Gs,slider:Us,text:Ji};var sd=(r,e,t)=>{let i=t;return t==null&&(i=""),`<div style="float: right">${i}</div>`};var ld=(r,e,t,i,o)=>{var s;let l=i&&i.params||{},a=l.propertyNames,d=(s=l?.includeTitle)!==null&&s!==void 0?s:!0,u=l.dataContextProperty;if(u||(u=i&&i.field&&i.field.split(".")[0]),!a||!Array.isArray(a)||!u)throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.
      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}.
      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.`);if(o[u]&&Array.isArray(o[u])&&Array.isArray(o[u])&&o[u].length>0){let p=[];o[u].forEach(m=>{let _=[];a.forEach(C=>{_.push(m[C])}),p.push(_.join(" "))});let f=p.join(", ");return d?`<span title="${f}">${f}</span>`:f}return t};var jo=(r,e,t)=>{if(t&&Array.isArray(t)&&t.length>0){let i=t.join(", ");return`<span title="${i}">${i}</span>`}return t};var ad=(r,e,t)=>t?`<b>${t}</b>`:"";var Wl=(r,e,t)=>{let i=t;return t==null&&(i=""),`<center>${i}</center>`};var dd=(r,e,t)=>t?"&#x2611;":"";var ud=(r,e,t)=>{let i=!1,o=rt(t);return o&&(t=+t),(t===!0||o&&+t>0||typeof t=="string"&&t.length>0&&t.toLowerCase()!=="false"&&t!=="0")&&(i=!0),i?'<i class="mdi mdi-18px mdi-check checkmark-icon" aria-hidden="true"></i>':""};var cd=(r,e,t)=>{let i=!1,o=rt(t);return o&&(t=+t),(t===!0||o&&+t>0||typeof t=="string"&&t.length>0&&t.toLowerCase()!=="false"&&t!=="0")&&(i=!0),i?'<i class="fa fa-check checkmark-icon" aria-hidden="true"></i>':""};var hd=(r,e,t,i,o,s)=>{if(!t||!i||!i.internalColumnEditor||!i.internalColumnEditor.collection||!i.internalColumnEditor.collection.length)return t;let{internalColumnEditor:l,internalColumnEditor:{collection:a}}=i,d=l.customStructure?l.customStructure.label:"label",u=l.customStructure?l.customStructure.value:"value";return Array.isArray(t)?a.every(p=>typeof p=="string")?jo(r,e,t.map(p=>Ci(a,f=>f===p)),i,o,s):jo(r,e,t.map(p=>Ci(a,f=>f[u]===p)[d]),i,o,s):Ci(a,p=>p[u]===t)[d]||""};var pd=(r,e,t,i,o,s)=>{if(!t||!i||!i.params||!i.params.collection||!i.params.collection.length)return t;let{params:l,params:{collection:a}}=i,d=l.customStructure?l.customStructure.label:"label",u=l.customStructure?l.customStructure.value:"value";return Array.isArray(t)?jo(r,e,t.map(p=>Ci(a,f=>f[u]===p)[d]),i,o,s):Ci(a,p=>p[u]===t)[d]||""};var Gl=(r,e,t,i,o)=>{var s,l,a;if(!i)return"";let d=i.params||{},u=(l=(s=d?.complexField)!==null&&s!==void 0?s:d?.complexFieldLabel)!==null&&l!==void 0?l:i.field;if(!u)throw new Error(`For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.
      There are 3 ways to provide it:
      1- via the generic "params" with a "complexField" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]
      2- via the generic "params" with a "complexField" and a "labelKey" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]
      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] `);if(i.labelKey&&o.hasOwnProperty(u))return(a=o[u])===null||a===void 0?void 0:a[i.labelKey];if(typeof u=="string"&&u.indexOf(".")>0){let p=u.split(".").reduce((f,m)=>f?.hasOwnProperty(m)?f[m]:"",o);return(p==null||typeof p=="object"&&Object.entries(p).length===0&&!(p instanceof Date))&&(p=""),p}return t};var fd=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s,2),a=we("maxDecimal",i,s,2),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("numberPrefix",i,s,""),f=we("numberSuffix",i,s,""),m=we("displayNegativeNumberWithParentheses",i,s,!1);return rt(t)?gt(t,l,a,m,p,f,d,u):t};var md=()=>'<i class="fa fa-trash pointer delete-icon" aria-hidden="true"></i>';var gd=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s,2),a=we("maxDecimal",i,s,4),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);return rt(t)?gt(t,l,a,p,"$","",d,u):t};var vd=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s,2),a=we("maxDecimal",i,s,4),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);if(rt(t)){let f=t>=0?"green":"red",m=gt(t,l,a,p,"$","",d,u);return`<span style="color:${f}">${m}</span>`}return t};var _d=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s,2),a=we("maxDecimal",i,s,4),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);if(rt(t)){let f=t>=0?"green":"red",m=gt(t,l,a,p,"$","",d,u);return`<span style="color:${f}; font-weight:bold;">${m}</span>`}return t};var Cd=()=>'<i class="fa fa-pencil pointer edit-icon" aria-hidden="true"></i>';var bd=(r,e,t)=>t?`<span class="fake-hyperlink">${t}</span>`:"";var wd=(r,e,t,i,o,s)=>{let l=i&&i.params||{},a=s&&typeof s.getOptions=="function"?s.getOptions():{},d=l.hyperlinkText?l.hyperlinkText:t;d=kt(a,d);let u=l.hyperlinkUrl?l.hyperlinkUrl:t;u=kt(a,u);let p=u.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);return p&&Array.isArray(p)&&p.length>0?`<a href="${p[0]}">${d}</a>`:t};var Sd=(r,e,t,i)=>{let o=i&&i.params||{},s=o.icon||o.formatterIcon;if(!s)throw new Error(`You must provide the "icon" or "formatterIcon" via the generic "params" options (e.g.: { formatter: Formatters.icon, params: { formatterIcon: 'fa fa-search' }}`);return`<i class="${s}" aria-hidden="true"></i>`};var Ed=()=>'<i class="fa fa-info-circle pointer info-icon" aria-hidden="true"></i>';var yd=(r,e,t)=>t?`<i>${t}</i>`:"";var xd=(r,e,t)=>(t!==void 0&&typeof t!="string"&&(t=t+""),t?t.toLowerCase():"");var Td=(r,e,t,i)=>{let s=(i.params||{}).mask;if(!s)throw new Error(`You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);if(t){let l=0,a=t.toString();return s.replace(/[09A]/gi,()=>a[l++]||"")}return t};var Od=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s),a=we("maxDecimal",i,s),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);if(rt(t)){let f=t*100;return gt(f,l,a,p,"","%",d,u)}return t};var Rd=(r,e,t)=>{if(!rt(t))return"";let i="",o=parseFloat(t);return o>100&&(o=100),o<30?i="red":o<70?i="silver":i="green",`<span class="percent-complete-bar" title="${o}%" style="background:${i}; width:${o}%"></span>`};var Id=(r,e,t)=>{if(!rt(t))return"";let i="",o=parseFloat(t);return o>100&&(o=100),o<30?i="red":o<70?i="silver":i="green",`<div class="percent-complete-bar-with-text" title="${o}%" style="background:${i}; width:${o}%">${o}%</div>`};var Pd=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s),a=we("maxDecimal",i,s),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);if(rt(t)){let f=t<50?"red":"green",m=gt(t,l,a,p,"","%",d,u),_=t>100?"100%":m;return`<span style="color:${f}">${_}</span>`}return t};var Dd=(r,e,t,i,o,s)=>{let l=we("minDecimal",i,s),a=we("maxDecimal",i,s),d=we("decimalSeparator",i,s,"."),u=we("thousandSeparator",i,s,""),p=we("displayNegativeNumberWithParentheses",i,s,!1);return rt(t)?gt(t,l,a,p,"","%",d,u):t};var Ad=(r,e,t)=>{if(!rt(t))return"";let i="",o=parseFloat(t);return o>100&&(o=100),o<30?i="danger":o<70?i="warning":i="success",`<div class="progress">
    <div class="progress-bar progress-bar-${i} bg-${i}" role="progressbar" aria-valuenow="${o}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: ${o}%;">
    ${o}%
    </div>
  </div>`.replace(/\s{2,}/g," ").trim()};var kd=(r,e,t,i,o,s)=>{let a=(s&&typeof s.getOptions=="function"?s.getOptions():{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t):""};var Fd=(r,e,t,i,o,s)=>{var l,a,d,u,p,f,m,_,C,b,E;let x=s.getOptions(),R=x?.treeDataOptions,L=(l=R?.collapsedPropName)!==null&&l!==void 0?l:ie.treeDataProperties.COLLAPSED_PROP,z=(a=R?.hasChildrenPropName)!==null&&a!==void 0?a:ie.treeDataProperties.HAS_CHILDREN_PROP,B=(d=R?.levelPropName)!==null&&d!==void 0?d:ie.treeDataProperties.TREE_LEVEL_PROP,G=(u=R?.exportIndentMarginLeft)!==null&&u!==void 0?u:5,V=(p=R?.exportIndentationLeadingChar)!==null&&p!==void 0?p:".",H=(f=R?.exportIndentationLeadingSpaceCount)!==null&&f!==void 0?f:3,K=(_=(m=x?.excelExportOptions)===null||m===void 0?void 0:m.groupCollapsedSymbol)!==null&&_!==void 0?_:"\u2B9E",oe=(b=(C=x?.excelExportOptions)===null||C===void 0?void 0:C.groupExpandedSymbol)!==null&&b!==void 0?b:"\u2B9F",ne=t;if(ne=So(i,o,t),ne==null||o===void 0)return"";if(!o.hasOwnProperty(B))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');let Pe=(E=o?.[B])!==null&&E!==void 0?E:0,He="",xe=0;o[z]?(He=o?.[L]?K:oe,xe=Pe===0?0:G*Pe):xe=G*(Pe===0?0:Pe+1);let Xe=Er(xe);return R?.titleFormatter&&(ne=Yo(R.titleFormatter,r,e,i,o,s)),ne=`${Pe===0&&He?"":Pe===0?`${V}${Er(H)}`:V}${Xe}${He} ${ne}`,qi(ne)};var Md=(r,e,t,i,o,s)=>{var l,a,d,u,p;let f=s.getOptions(),m=f?.treeDataOptions,_=(l=m?.indentMarginLeft)!==null&&l!==void 0?l:15,C=(a=m?.collapsedPropName)!==null&&a!==void 0?a:ie.treeDataProperties.COLLAPSED_PROP,b=(d=m?.hasChildrenPropName)!==null&&d!==void 0?d:ie.treeDataProperties.HAS_CHILDREN_PROP,E=(u=m?.levelPropName)!==null&&u!==void 0?u:ie.treeDataProperties.TREE_LEVEL_PROP,x=t;if(x=So(i,o,t),x==null||o===void 0)return"";if(!o.hasOwnProperty(E))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');let R=(p=o?.[E])!==null&&p!==void 0?p:0,L=`<span style="display:inline-block; width:${_*R}px;"></span>`,z=`slick-tree-level-${R}`,B="";o[b]&&(B=o?.[C]?"collapsed":"expanded"),m?.titleFormatter&&(x=Yo(m.titleFormatter,r,e,i,o,s));let G=kt(f,x,{ADD_ATTR:["target"]}),V=`slick-group-toggle ${B}`.trim(),H=`${L}<span class="${V}" aria-expanded="${B==="expanded"}"></span><span class="slick-tree-title" level="${R}">${G}</span>`;return{addClasses:z,text:H}};var Nd=(r,e,t,i,o,s)=>{let a=(s&&typeof s.getOptions=="function"?s.getOptions():{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t.toUpperCase()):""};var Ld=(r,e,t)=>(t!==void 0&&typeof t!="string"&&(t=t+""),t?t.toUpperCase():"");var Vd=(r,e,t)=>t?"Yes":"No";var kT={alignCenter:Wl,alignRight:sd,arrayObjectToCsv:ld,arrayToCsv:jo,bold:ad,center:Wl,checkbox:dd,checkmark:cd,checkmarkMaterial:ud,complex:Gl,complexObject:Gl,collection:pd,collectionEditor:hd,dateIso:bi(O.dateIso,"-"),dateTimeIso:bi(O.dateTimeIso,"-"),dateTimeShortIso:bi(O.dateTimeShortIso,"-"),dateTimeIsoAmPm:bi(O.dateTimeIsoAmPm,"-"),dateEuro:bi(O.dateEuro,"/"),dateTimeEuro:bi(O.dateTimeEuro,"/"),dateTimeShortEuro:bi(O.dateTimeShortEuro,"/"),dateTimeEuroAmPm:bi(O.dateTimeEuroAmPm,"/"),dateUs:bi(O.dateUs,"/"),dateTimeUs:bi(O.dateTimeUs,"/"),dateTimeShortUs:bi(O.dateTimeShortUs,"/"),dateTimeUsAmPm:bi(O.dateTimeUsAmPm,"/"),deleteIcon:md,decimal:fd,dollar:gd,dollarColored:vd,dollarColoredBold:_d,editIcon:Cd,fakeHyperlink:bd,hyperlink:wd,icon:Sd,infoIcon:Ed,italic:yd,lowercase:xd,mask:Td,multiple:Cn,percent:Od,percentComplete:Pd,percentCompleteBar:Rd,percentCompleteBarWithText:Id,percentSymbol:Dd,progressBar:Ad,translate:kd,translateBoolean:Nd,tree:Md,treeExport:Fd,uppercase:Ld,yesNo:Vd};var sr=class{constructor(){this.options=od}};var YR=Me(P(P(P(P(P({},ul),cl),_l),xl),El),{deepAssign:Hi});var yn=class{},Hd=(()=>{class r extends yn{getTranslation(t){return Li({})}static \u0275fac=(()=>{let t;return function(o){return(t||(t=gr(r)))(o||r)}})();static \u0275prov=oi({token:r,factory:r.\u0275fac})}return r})(),lr=class{},$d=(()=>{class r{handle(t){return t.key}static \u0275fac=function(i){return new(i||r)};static \u0275prov=oi({token:r,factory:r.\u0275fac})}return r})();function Xo(r){return typeof r<"u"&&r!==null}function Ul(r){return r&&typeof r=="object"&&!Array.isArray(r)}function Wd(r,e){let t=Object.assign({},r);return Ul(r)&&Ul(e)&&Object.keys(e).forEach(i=>{Ul(e[i])?i in r?t[i]=Wd(r[i],e[i]):Object.assign(t,{[i]:e[i]}):Object.assign(t,{[i]:e[i]})}),t}var xn=class{},zd=(()=>{class r extends xn{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,i){let o;return typeof t=="string"?o=this.interpolateString(t,i):typeof t=="function"?o=this.interpolateFunction(t,i):o=t,o}getValue(t,i){let o=typeof i=="string"?i.split("."):[i];i="";do i+=o.shift(),Xo(t)&&Xo(t[i])&&(typeof t[i]=="object"||!o.length)?(t=t[i],i=""):o.length?i+=".":t=void 0;while(o.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(o,s)=>{let l=this.getValue(i,s);return Xo(l)?l:o}):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=gr(r)))(o||r)}})();static \u0275prov=oi({token:r,factory:r.\u0275fac})}return r})(),Tn=class{},Bd=(()=>{class r extends Tn{compile(t,i){return t}compileTranslations(t,i){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=gr(r)))(o||r)}})();static \u0275prov=oi({token:r,factory:r.\u0275fac})}return r})(),Ys=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Ho;onLangChange=new Ho;onDefaultLangChange=new Ho},Yl=new Bn("USE_STORE"),jl=new Bn("USE_DEFAULT_LANG"),Xl=new Bn("DEFAULT_LANGUAGE"),ql=new Bn("USE_EXTEND"),ar=(()=>{class r{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Ho;_onLangChange=new Ho;_onDefaultLangChange=new Ho;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,i,o,s,l,a=!0,d=!1,u=!1,p){this.store=t,this.currentLoader=i,this.compiler=o,this.parser=s,this.missingTranslationHandler=l,this.useDefaultLang=a,this.isolate=d,this.extend=u,p&&this.setDefaultLang(p)}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(this.defaultLang==null&&(this.defaultLang=t),i.pipe($n(1)).subscribe(o=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Li(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe($n(1)).subscribe(o=>{this.changeLang(t)}),i):(this.changeLang(t),Li(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;let i=this.currentLoader.getTranslation(t).pipe(ll(1),$n(1));return this.loadingTranslations=i.pipe(nl(o=>this.compiler.compileTranslations(o,t)),ll(1),$n(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[t]=this.extend&&this.translations[t]?P(P({},o),this.translations[t]):o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),i}setTranslation(t,i,o=!1){i=this.compiler.compileTranslations(i,t),(o||this.extend)&&this.translations[t]?this.translations[t]=Wd(this.translations[t],i):this.translations[t]=i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{this.langs.indexOf(i)===-1&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,o){let s;if(i instanceof Array){let l={},a=!1;for(let d of i)l[d]=this.getParsedResult(t,d,o),lo(l[d])&&(a=!0);if(a){let d=i.map(u=>lo(l[u])?l[u]:Li(l[u]));return na(d).pipe(nl(u=>{let p={};return u.forEach((f,m)=>{p[i[m]]=f}),p}))}return l}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,i),o)),typeof s>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),o)),typeof s>"u"){let l={key:i,translateService:this};typeof o<"u"&&(l.interpolateParams=o),s=this.missingTranslationHandler.handle(l)}return typeof s<"u"?s:i}get(t,i){if(!Xo(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(sa(o=>(o=this.getParsedResult(o,t,i),lo(o)?o:Li(o))));{let o=this.getParsedResult(this.translations[this.currentLang],t,i);return lo(o)?o:Li(o)}}getStreamOnTranslationChange(t,i){if(!Xo(t)||!t.length)throw new Error('Parameter "key" required');return rl(sl(()=>this.get(t,i)),this.onTranslationChange.pipe(zn(o=>{let s=this.getParsedResult(o.translations,t,i);return typeof s.subscribe=="function"?s:Li(s)})))}stream(t,i){if(!Xo(t)||!t.length)throw new Error('Parameter "key" required');return rl(sl(()=>this.get(t,i)),this.onLangChange.pipe(zn(o=>{let s=this.getParsedResult(o.translations,t,i);return lo(s)?s:Li(s)})))}instant(t,i){if(!Xo(t)||!t.length)throw new Error('Parameter "key" required');let o=this.getParsedResult(this.translations[this.currentLang],t,i);if(lo(o)){if(t instanceof Array){let s={};return t.forEach((l,a)=>{s[t[a]]=t[a]}),s}return t}else return o}set(t,i,o=this.currentLang){this.translations[o][t]=this.compiler.compile(i,o),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;if(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof t>"u"))return t.indexOf("-")!==-1&&(t=t.split("-")[0]),t.indexOf("_")!==-1&&(t=t.split("_")[0]),t}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(i){return new(i||r)(Rt(Ys),Rt(yn),Rt(Tn),Rt(xn),Rt(lr),Rt(jl),Rt(Yl),Rt(ql),Rt(Xl))};static \u0275prov=oi({token:r,factory:r.\u0275fac})}return r})();var Gd=(()=>{class r{static forRoot(t={}){return{ngModule:r,providers:[t.loader||{provide:yn,useClass:Hd},t.compiler||{provide:Tn,useClass:Bd},t.parser||{provide:xn,useClass:zd},t.missingTranslationHandler||{provide:lr,useClass:$d},Ys,{provide:Yl,useValue:t.isolate},{provide:jl,useValue:t.useDefaultLang},{provide:ql,useValue:t.extend},{provide:Xl,useValue:t.defaultLanguage},ar]}}static forChild(t={}){return{ngModule:r,providers:[t.loader||{provide:yn,useClass:Hd},t.compiler||{provide:Tn,useClass:Bd},t.parser||{provide:xn,useClass:zd},t.missingTranslationHandler||{provide:lr,useClass:$d},{provide:Yl,useValue:t.isolate},{provide:jl,useValue:t.useDefaultLang},{provide:ql,useValue:t.extend},{provide:Xl,useValue:t.defaultLanguage},ar]}}static \u0275fac=function(i){return new(i||r)};static \u0275mod=rn({type:r});static \u0275inj=on({})}return r})();var js=class{constructor(){this._dataViewIdProperty="id",this._expandableOverride=null,this._expandedRows=[],this._gridRowBuffer=0,this._gridUid="",this._keyPrefix="",this._lastRange=null,this._outsideRange=5,this._pubSubService=null,this._rowIdsOutOfViewport=[],this._visibleRenderedCellCount=0,this._defaults={alwaysRenderColumn:!0,columnId:"_detail_selector",cssClass:"detailView-toggle",collapseAllOnSort:!0,collapsedClass:null,expandedClass:null,keyPrefix:"_",loadOnce:!1,maxRows:null,saveDetailViewOnScroll:!0,singleRowExpand:!1,useSimpleViewportCalc:!1,toolTip:"",width:30},this.pluginName="RowDetailView",this.onAsyncEndUpdate=new Slick.Event,this.onAsyncResponse=new Slick.Event,this.onAfterRowDetailToggle=new Slick.Event,this.onBeforeRowDetailToggle=new Slick.Event,this.onRowBackToViewportRange=new Slick.Event,this.onRowOutOfViewportRange=new Slick.Event,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get dataView(){var e;return((e=this._grid)===null||e===void 0?void 0:e.getData())||{}}get dataViewIdProperty(){return this._dataViewIdProperty}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return((e=this._grid)===null||e===void 0?void 0:e.getOptions())||{}}get gridUid(){var e;return this._gridUid||((e=this._grid)===null||e===void 0?void 0:e.getUID())||""}set lastRange(e){this._lastRange=e}set rowIdsOutOfViewport(e){this._rowIdsOutOfViewport=e}get visibleRenderedCellCount(){return this._visibleRenderedCellCount}init(e){var t;if(this._grid=e,!e)throw new Error('[Slickgrid-Universal] RowDetailView Plugin requires the Grid instance to be passed as argument to the "init()" method.');this._grid=e,this._gridUid=e.getUID(),this._addonOptions=this.gridOptions.rowDetailView||{},this._keyPrefix=((t=this._addonOptions)===null||t===void 0?void 0:t.keyPrefix)||"_",this._gridRowBuffer=this.gridOptions.minRowBuffer||0,this.gridOptions.minRowBuffer=this._addonOptions.panelRows+3,this._eventHandler.subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this)),this._addonOptions.collapseAllOnSort&&(this._eventHandler.subscribe(this._grid.onSort,this.collapseAll.bind(this)),this._expandedRows=[],this._rowIdsOutOfViewport=[]),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{this._grid.updateRowCount(),this._grid.render()}),this._eventHandler.subscribe(this.dataView.onRowsChanged,(i,o)=>{this._grid.invalidateRows(o.rows),this._grid.render()}),this._eventHandler.subscribe(this.onAsyncResponse,this.handleOnAsyncResponse.bind(this)),this._eventHandler.subscribe(this.dataView.onSetItemsCalled,()=>{var i;this._dataViewIdProperty=((i=this.dataView)===null||i===void 0?void 0:i.getIdPropertyName())||"id"}),this._addonOptions.useSimpleViewportCalc&&this._eventHandler.subscribe(this._grid.onRendered,(i,o)=>{o?.endRow&&(this._visibleRenderedCellCount=o.endRow-o.startRow)})}dispose(){var e;(e=this._eventHandler)===null||e===void 0||e.unsubscribeAll()}create(e,t){var i,o;if(!t.rowDetailView)throw new Error('[Slickgrid-Universal] The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(this._addonOptions=P(P({},this._defaults),t.rowDetailView),typeof this._addonOptions.expandableOverride=="function"&&this.expandableOverride(this._addonOptions.expandableOverride),Array.isArray(e)&&t){let s=this.getColumnDefinition(),l=Array.isArray(e)&&e.find(u=>u?.behavior==="selectAndMove"),a=l||s,d=(o=(i=t?.rowDetailView)===null||i===void 0?void 0:i.columnIndexPosition)!==null&&o!==void 0?o:0;d>0?e.splice(d,0,a):e.unshift(a)}return this}getOptions(){return this._addonOptions}setOptions(e){var t;this._addonOptions=P(P({},this._addonOptions),e),!((t=this._addonOptions)===null||t===void 0)&&t.singleRowExpand&&this.collapseAll()}collapseAll(){this.dataView.beginUpdate();for(let e of this._expandedRows)this.collapseDetailView(e,!0);this.dataView.endUpdate()}collapseDetailView(e,t=!1){t||this.dataView.beginUpdate(),this._addonOptions.loadOnce&&this.saveDetailView(e),e[`${this._keyPrefix}collapsed`]=!0;for(let i=1;i<=e[`${this._keyPrefix}sizePadding`];i++)this.dataView.deleteItem(`${e[this._dataViewIdProperty]}.${i}`);e[`${this._keyPrefix}sizePadding`]=0,this.dataView.updateItem(e[this._dataViewIdProperty],e),this._expandedRows=this._expandedRows.filter(i=>i[this._dataViewIdProperty]!==e[this._dataViewIdProperty]),t||this.dataView.endUpdate()}expandDetailView(e){var t,i,o;if(!((t=this._addonOptions)===null||t===void 0)&&t.singleRowExpand&&this.collapseAll(),e[`${this._keyPrefix}collapsed`]=!1,this._expandedRows.push(e),e[`${this._keyPrefix}detailContent`]||(e[`${this._keyPrefix}detailViewLoaded`]=!1),!e[`${this._keyPrefix}detailViewLoaded`]||this._addonOptions.loadOnce!==!0)e[`${this._keyPrefix}detailContent`]=(o=(i=this._addonOptions)===null||i===void 0?void 0:i.preTemplate)===null||o===void 0?void 0:o.call(i,e);else{this.onAsyncResponse.notify({item:e,itemDetail:e,detailView:e[`${this._keyPrefix}detailContent`]}),this.applyTemplateNewLineHeight(e),this.dataView.updateItem(e[this._dataViewIdProperty],e);return}this.applyTemplateNewLineHeight(e),this.dataView.updateItem(e[this._dataViewIdProperty],e),this._addonOptions.process(e)}saveDetailView(e){let t=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(t){let i=t.innerHTML;i!==void 0&&(e[`${this._keyPrefix}detailContent`]=i)}}handleOnAsyncResponse(e,t){var i,o,s;if(!t||!t.item&&!t.itemDetail){console.error('SlickRowDetailView plugin requires the onAsyncResponse() to supply "args.item" property.');return}let l=t.item||t.itemDetail;l[`${this._keyPrefix}detailContent`]=(i=t.detailView)!==null&&i!==void 0?i:(s=(o=this._addonOptions)===null||o===void 0?void 0:o.postTemplate)===null||s===void 0?void 0:s.call(o,l),l[`${this._keyPrefix}detailViewLoaded`]=!0,this.dataView.updateItem(l[this._dataViewIdProperty],l),this.onAsyncEndUpdate.notify({grid:this._grid,item:l,itemDetail:l})}expandableOverride(e){this._expandableOverride=e}getExpandableOverride(){return this._expandableOverride}getColumnDefinition(){var e,t,i;return{id:(t=(e=this._addonOptions)===null||e===void 0?void 0:e.columnId)!==null&&t!==void 0?t:"_rowDetail_",field:"sel",name:"",alwaysRenderColumn:(i=this._addonOptions)===null||i===void 0?void 0:i.alwaysRenderColumn,cssClass:this._addonOptions.cssClass||"",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,formatter:this.detailSelectionFormatter.bind(this),resizable:!1,sortable:!1,toolTip:this._addonOptions.toolTip,width:this._addonOptions.width}}getExpandedRows(){return this._expandedRows}getOutOfViewportRows(){return this._rowIdsOutOfViewport}getFilterItem(e){return e[`${this._keyPrefix}isPadding`]&&e[`${this._keyPrefix}parent`]&&(e=e[`${this._keyPrefix}parent`]),e}resizeDetailView(e){if(!e)return;let t=document.querySelector(`.${this.gridUid} .detailViewContainer_${e[this._dataViewIdProperty]}`),i=document.querySelector(`.${this.gridUid} .cellDetailView_${e[this._dataViewIdProperty]}`),o=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(!t||!i||!o)return;for(let f=1;f<=e[`${this._keyPrefix}sizePadding`];f++)this.dataView.deleteItem(`${e[this._dataViewIdProperty]}.${f}`);let s=this.gridOptions.rowHeight,l=13;t.style.minHeight="";let a=t.scrollHeight,d=Math.ceil(a/s);e[`${this._keyPrefix}sizePadding`]=Math.ceil(d*2*l/s),e[`${this._keyPrefix}height`]=a;let u=e[`${this._keyPrefix}sizePadding`]*s;this._addonOptions.maxRows!==null&&e[`${this._keyPrefix}sizePadding`]>this._addonOptions.maxRows&&(u=this._addonOptions.maxRows*s,e[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows),this.gridOptions.minRowBuffer<e[`${this._keyPrefix}sizePadding`]&&(this.gridOptions.minRowBuffer=e[`${this._keyPrefix}sizePadding`]+3),t.setAttribute("style",`min-height: ${e[this._keyPrefix+"height"]}px`),i&&i.setAttribute("style",`height: ${u}px; top: ${s}px`);let p=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let f=1;f<=e[`${this._keyPrefix}sizePadding`];f++)this.dataView.insertItem(p+f,this.getPaddingItem(e,f));this.saveDetailView(e)}applyTemplateNewLineHeight(e){let t=this._addonOptions.panelRows,i=13;e[`${this._keyPrefix}sizePadding`]=Math.ceil(t*2*i/this.gridOptions.rowHeight),e[`${this._keyPrefix}height`]=e[`${this._keyPrefix}sizePadding`]*this.gridOptions.rowHeight;let o=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let s=1;s<=e[`${this._keyPrefix}sizePadding`];s++)this.dataView.insertItem((o||0)+s,this.getPaddingItem(e,s))}calculateOutOfRangeViews(){if(this._grid){let e,t=this._grid.getRenderedRange();if(this._expandedRows.length>0&&(e="DOWN",this._lastRange)){if(this._lastRange.top===t.top&&this._lastRange.bottom===t.bottom)return;(this._lastRange.top>t.top||this._lastRange.top===0&&t.top===0&&this._lastRange.bottom>t.bottom)&&(e="UP")}this._expandedRows.forEach(i=>{let o=this.dataView.getRowById(i[this._dataViewIdProperty]),s=i[`${this._keyPrefix}sizePadding`],l=this._rowIdsOutOfViewport.some(a=>a===i[this._dataViewIdProperty]);e==="UP"?(this._addonOptions.saveDetailViewOnScroll&&o>=t.bottom-this._gridRowBuffer&&this.saveDetailView(i),l&&o-this._outsideRange<t.top&&o>=t.top?this.notifyBackToViewportWhenDomExist(i,i[this._dataViewIdProperty]):!l&&o+s>t.bottom&&this.notifyOutOfViewport(i,i[this._dataViewIdProperty])):e==="DOWN"&&(this._addonOptions.saveDetailViewOnScroll&&o<=t.top+this._gridRowBuffer&&this.saveDetailView(i),l&&o+s+this._outsideRange>t.bottom&&o<o+s?this.notifyBackToViewportWhenDomExist(i,i[this._dataViewIdProperty]):!l&&o<t.top&&this.notifyOutOfViewport(i,i[this._dataViewIdProperty]))}),this._lastRange=t}}calculateOutOfRangeViewsSimplerVersion(){if(this._grid){let e=this._grid.getRenderedRange();this._expandedRows.forEach(t=>{let i=this.dataView.getRowById(t[this._dataViewIdProperty]),o=this.checkIsRowOutOfViewportRange(i,e);!o&&this._rowIdsOutOfViewport.some(s=>s===t[this._dataViewIdProperty])?this.notifyBackToViewportWhenDomExist(t,t[this._dataViewIdProperty]):o&&this.notifyOutOfViewport(t,t[this._dataViewIdProperty])})}}checkExpandableOverride(e,t,i){return typeof this._expandableOverride=="function"?this._expandableOverride(e,t,i):!0}checkIsRowOutOfViewportRange(e,t){return Math.abs(t.bottom-this._gridRowBuffer-e)>this._visibleRenderedCellCount*2}getPaddingItem(e,t){let i={};for(let o in this.dataView)o&&(i[o]=null);return i[this._dataViewIdProperty]=`${e[this._dataViewIdProperty]}.${t}`,i[`${this._keyPrefix}collapsed`]=!0,i[`${this._keyPrefix}isPadding`]=!0,i[`${this._keyPrefix}parent`]=e,i[`${this._keyPrefix}offset`]=t,i}detailSelectionFormatter(e,t,i,o,s,l){if(this.checkExpandableOverride(e,s,l)){if(s[`${this._keyPrefix}collapsed`]===void 0&&(s[`${this._keyPrefix}collapsed`]=!0,s[`${this._keyPrefix}sizePadding`]=0,s[`${this._keyPrefix}height`]=0,s[`${this._keyPrefix}isPadding`]=!1,s[`${this._keyPrefix}parent`]=void 0,s[`${this._keyPrefix}offset`]=0),!s[`${this._keyPrefix}isPadding`])if(s[`${this._keyPrefix}collapsed`]){let a=`${this._addonOptions.cssClass||""} expand `;return this._addonOptions.collapsedClass&&(a+=this._addonOptions.collapsedClass),`<div class="${a.trim()}"></div>`}else{let a=[],d=this.gridOptions.rowHeight||0,u=(s[`${this._keyPrefix}sizePadding`]||0)*this.gridOptions.rowHeight;this._addonOptions.maxRows!==null&&(s[`${this._keyPrefix}sizePadding`]||0)>this._addonOptions.maxRows&&(u=this._addonOptions.maxRows*d,s[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows);let p=`${this._addonOptions.cssClass||""} collapse `;return this._addonOptions.expandedClass&&(p+=this._addonOptions.expandedClass),a.push(`<div class="${p.trim()}"></div></div>`),a.push(`<div class="dynamic-cell-detail cellDetailView_${s[this._dataViewIdProperty]}" `),a.push(`style="height: ${u}px;`),a.push(`top: ${d}px">`),a.push(`<div class="detail-container detailViewContainer_${s[this._dataViewIdProperty]}">`),a.push(`<div class="innerDetailView_${s[this._dataViewIdProperty]}">${s[`${this._keyPrefix}detailContent`]}</div></div>`),a.join("")}}else return"";return""}handleAccordionShowHide(e){e&&(e[`${this._keyPrefix}collapsed`]?this.expandDetailView(e):this.collapseDetailView(e))}handleClick(e,t){let i=this._grid.getDataItem(t.row);if(this.checkExpandableOverride(t.row,i,this._grid)){let o=this._grid.getColumns()[t.cell];if(this._addonOptions.useRowClick||o.id===this._addonOptions.columnId&&e.target.classList.contains(this._addonOptions.cssClass||"")){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}this.onBeforeRowDetailToggle.notify({grid:this._grid,item:i}),this.toggleRowSelection(t.row,i),this.onAfterRowDetailToggle.notify({grid:this._grid,item:i,expandedRows:this._expandedRows}),e.stopPropagation(),e.stopImmediatePropagation()}}}handleScroll(){this._addonOptions.useSimpleViewportCalc?this.calculateOutOfRangeViewsSimplerVersion():this.calculateOutOfRangeViews()}notifyOutOfViewport(e,t){let i=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]);this.onRowOutOfViewportRange.notify({grid:this._grid,item:e,rowId:t,rowIndex:i,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(t,!0)})}notifyBackToViewportWhenDomExist(e,t){let i=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]);setTimeout(()=>{document.querySelector(`.cellDetailView_${e[this._dataViewIdProperty]}`)&&this.onRowBackToViewportRange.notify({grid:this._grid,item:e,rowId:t,rowIndex:i,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(t,!1)})},100)}syncOutOfViewportArray(e,t){let i=this._rowIdsOutOfViewport.findIndex(o=>o===e);return t&&i<0?this._rowIdsOutOfViewport.push(e):!t&&i>=0&&this._rowIdsOutOfViewport.splice(i,1),this._rowIdsOutOfViewport}toggleRowSelection(e,t){this.checkExpandableOverride(e,t,this._grid)&&(this.dataView.beginUpdate(),this.handleAccordionShowHide(t),this.dataView.endUpdate())}};var Jl=Oi(Rr(),1);(function(r){"use strict";typeof define=="function"&&define.amd?define(["jquery","./mouse","../data","../plugin","../scroll-parent","../version","../widget"],r):r(jQuery)})(function(r){"use strict";return r.widget("ui.draggable",r.ui.mouse,{version:"1.14.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var t=this.options;return this.helper||t.disabled||r(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle)?!1:(this._blurActiveElement(e),this._blockFrames(t.iframeFix===!0?"iframe":t.iframeFix),!0)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var t=r(this);return r("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=this.document[0].activeElement,i=r(e.target);i.closest(t).length||r(t).trigger("blur")},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),r.ui.ddmanager&&(r.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return r(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),r.ui.ddmanager&&!t.dropBehaviour&&r.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),r.ui.ddmanager&&r.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp(new r.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",r.ui.ddmanager&&r.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return r.ui.ddmanager&&!this.options.dropBehaviour&&(i=r.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,i)?r(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){t._trigger("stop",e)!==!1&&t._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),r.ui.ddmanager&&r.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),r.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new r.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!r(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=typeof t.helper=="function",o=i?r(t.helper.apply(this.element[0],[e])):t.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo(t.appendTo==="parent"?this.element[0].parentNode:t.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]!==this.element[0]&&!/(fixed|absolute)/.test(o.css("position"))&&o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){typeof e=="string"&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==t&&r.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,o=this.options,s=this.document[0];if(this.relativeContainer=null,!o.containment){this.containment=null;return}if(o.containment==="window"){this.containment=[r(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,r(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,r(window).scrollLeft()+r(window).width()-this.helperProportions.width-this.margins.left,r(window).scrollTop()+(r(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment==="document"){this.containment=[0,0,r(s).width()-this.helperProportions.width-this.margins.left,(r(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment.constructor===Array){this.containment=o.containment;return}o.containment==="parent"&&(o.containment=this.helper[0].parentNode),t=r(o.containment),i=t[0],i&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)},_convertPositionTo:function(e,t){t||(t=this.position);var i=e==="absolute"?1:-1,o=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:o?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:o?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,o,s,l,a=this.options,d=this._isRootNode(this.scrollParent[0]),u=e.pageX,p=e.pageY;return(!d||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(o=this.relativeContainer.offset(),i=[this.containment[0]+o.left,this.containment[1]+o.top,this.containment[2]+o.left,this.containment[3]+o.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(u=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(p=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(u=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(p=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((p-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,p=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,l=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=i?l-this.offset.click.left>=i[0]||l-this.offset.click.left>i[2]?l:l-this.offset.click.left>=i[0]?l-a.grid[0]:l+a.grid[0]:l),a.axis==="y"&&(u=this.originalPageX),a.axis==="x"&&(p=this.originalPageY)),{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:d?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:d?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),r.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),r.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),r.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var o=r.extend({},t,{item:i.element});i.sortables=[],r(i.options.connectToSortable).each(function(){var s=r(this).sortable("instance");s&&!s.options.disabled&&(i.sortables.push(s),s.refreshPositions(),s._trigger("activate",e,o))})},stop:function(e,t,i){var o=r.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,r.each(i.sortables,function(){var s=this;s.isOver?(s.isOver=0,i.cancelHelperRemoval=!0,s.cancelHelperRemoval=!1,s._storedCSS={position:s.placeholder.css("position"),top:s.placeholder.css("top"),left:s.placeholder.css("left")},s._mouseStop(e),s.options.helper=s.options._helper):(s.cancelHelperRemoval=!0,s._trigger("deactivate",e,o))})},drag:function(e,t,i){r.each(i.sortables,function(){var o=!1,s=this;s.positionAbs=i.positionAbs,s.helperProportions=i.helperProportions,s.offset.click=i.offset.click,s._intersectsWith(s.containerCache)&&(o=!0,r.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&r.contains(s.element[0],this.element[0])&&(o=!1),o})),o?(s.isOver||(s.isOver=1,i._parent=t.helper.parent(),s.currentItem=t.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return t.helper[0]},e.target=s.currentItem[0],s._mouseCapture(e,!0),s._mouseStart(e,!0,!0),s.offset.click.top=i.offset.click.top,s.offset.click.left=i.offset.click.left,s.offset.parent.left-=i.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=i.offset.parent.top-s.offset.parent.top,i._trigger("toSortable",e),i.dropped=s.element,r.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,s.fromOutside=i),s.currentItem&&(s._mouseDrag(e),t.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",e,s._uiHash(s)),s._mouseStop(e,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),t.helper.appendTo(i._parent),i._refreshOffsets(e),t.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,r.each(i.sortables,function(){this.refreshPositions()}))})}}),r.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var o=r("body"),s=i.options;o.css("cursor")&&(s._cursor=o.css("cursor")),o.css("cursor",s.cursor)},stop:function(e,t,i){var o=i.options;o._cursor&&r("body").css("cursor",o._cursor)}}),r.ui.plugin.add("draggable","opacity",{start:function(e,t,i){var o=r(t.helper),s=i.options;o.css("opacity")&&(s._opacity=o.css("opacity")),o.css("opacity",s.opacity)},stop:function(e,t,i){var o=i.options;o._opacity&&r(t.helper).css("opacity",o._opacity)}}),r.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var o=i.options,s=!1,l=i.scrollParentNotHidden[0],a=i.document[0];l!==a&&l.tagName!=="HTML"?((!o.axis||o.axis!=="x")&&(i.overflowOffset.top+l.offsetHeight-e.pageY<o.scrollSensitivity?l.scrollTop=s=l.scrollTop+o.scrollSpeed:e.pageY-i.overflowOffset.top<o.scrollSensitivity&&(l.scrollTop=s=l.scrollTop-o.scrollSpeed)),(!o.axis||o.axis!=="y")&&(i.overflowOffset.left+l.offsetWidth-e.pageX<o.scrollSensitivity?l.scrollLeft=s=l.scrollLeft+o.scrollSpeed:e.pageX-i.overflowOffset.left<o.scrollSensitivity&&(l.scrollLeft=s=l.scrollLeft-o.scrollSpeed))):((!o.axis||o.axis!=="x")&&(e.pageY-r(a).scrollTop()<o.scrollSensitivity?s=r(a).scrollTop(r(a).scrollTop()-o.scrollSpeed):r(window).height()-(e.pageY-r(a).scrollTop())<o.scrollSensitivity&&(s=r(a).scrollTop(r(a).scrollTop()+o.scrollSpeed))),(!o.axis||o.axis!=="y")&&(e.pageX-r(a).scrollLeft()<o.scrollSensitivity?s=r(a).scrollLeft(r(a).scrollLeft()-o.scrollSpeed):r(window).width()-(e.pageX-r(a).scrollLeft())<o.scrollSensitivity&&(s=r(a).scrollLeft(r(a).scrollLeft()+o.scrollSpeed)))),s!==!1&&r.ui.ddmanager&&!o.dropBehaviour&&r.ui.ddmanager.prepareOffsets(i,e)}}),r.ui.plugin.add("draggable","snap",{start:function(e,t,i){var o=i.options;i.snapElements=[],r(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var s=r(this),l=s.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:s.outerWidth(),height:s.outerHeight(),top:l.top,left:l.left})})},drag:function(e,t,i){var o,s,l,a,d,u,p,f,m,_,C=i.options,b=C.snapTolerance,E=t.offset.left,x=E+i.helperProportions.width,R=t.offset.top,L=R+i.helperProportions.height;for(m=i.snapElements.length-1;m>=0;m--){if(d=i.snapElements[m].left-i.margins.left,u=d+i.snapElements[m].width,p=i.snapElements[m].top-i.margins.top,f=p+i.snapElements[m].height,x<d-b||E>u+b||L<p-b||R>f+b||!r.contains(i.snapElements[m].item.ownerDocument,i.snapElements[m].item)){i.snapElements[m].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,r.extend(i._uiHash(),{snapItem:i.snapElements[m].item})),i.snapElements[m].snapping=!1;continue}C.snapMode!=="inner"&&(o=Math.abs(p-L)<=b,s=Math.abs(f-R)<=b,l=Math.abs(d-x)<=b,a=Math.abs(u-E)<=b,o&&(t.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top),s&&(t.position.top=i._convertPositionTo("relative",{top:f,left:0}).top),l&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u}).left)),_=o||s||l||a,C.snapMode!=="outer"&&(o=Math.abs(p-R)<=b,s=Math.abs(f-L)<=b,l=Math.abs(d-E)<=b,a=Math.abs(u-x)<=b,o&&(t.position.top=i._convertPositionTo("relative",{top:p,left:0}).top),s&&(t.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top),l&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d}).left),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left)),!i.snapElements[m].snapping&&(o||s||l||a||_)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,r.extend(i._uiHash(),{snapItem:i.snapElements[m].item})),i.snapElements[m].snapping=o||s||l||a||_}}}),r.ui.plugin.add("draggable","stack",{start:function(e,t,i){var o,s=i.options,l=r.makeArray(r(s.stack)).sort(function(a,d){return(parseInt(r(a).css("zIndex"),10)||0)-(parseInt(r(d).css("zIndex"),10)||0)});l.length&&(o=parseInt(r(l[0]).css("zIndex"),10)||0,r(l).each(function(a){r(this).css("zIndex",o+a)}),this.css("zIndex",o+l.length))}}),r.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){var o=r(t.helper),s=i.options;o.css("zIndex")&&(s._zIndex=o.css("zIndex")),o.css("zIndex",s.zIndex)},stop:function(e,t,i){var o=i.options;o._zIndex&&r(t.helper).css("zIndex",o._zIndex)}}),r.ui.draggable});(function(r){"use strict";typeof define=="function"&&define.amd?define(["jquery","./draggable","./mouse","../version","../widget"],r):r(jQuery)})(function(r){"use strict";return r.widget("ui.droppable",{version:"1.14.0",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=typeof i=="function"?i:function(o){return o.is(i)},this.proportions=function(){if(arguments.length)e=arguments[0];else return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){r.ui.ddmanager.droppables[e]=r.ui.ddmanager.droppables[e]||[],r.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=r.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,t){if(e==="accept")this.accept=typeof t=="function"?t:function(o){return o.is(t)};else if(e==="scope"){var i=r.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(t)}this._super(e,t)},_activate:function(e){var t=r.ui.ddmanager.current;this._addActiveClass(),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=r.ui.ddmanager.current;this._removeActiveClass(),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=r.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=r.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(t)))},_drop:function(e,t){var i=t||r.ui.ddmanager.current,o=!1;return!i||(i.currentItem||i.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var s=r(this).droppable("instance");if(s.options.greedy&&!s.options.disabled&&s.options.scope===i.options.scope&&s.accept.call(s.element[0],i.currentItem||i.element)&&r.ui.intersect(i,r.extend(s,{offset:s.element.offset()}),s.options.tolerance,e))return o=!0,!1}),o)?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),r.ui.intersect=function(){function e(t,i,o){return t>=i&&t<i+o}return function(t,i,o,s){if(!i.offset)return!1;var l=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,d=l+t.helperProportions.width,u=a+t.helperProportions.height,p=i.offset.left,f=i.offset.top,m=p+i.proportions().width,_=f+i.proportions().height;switch(o){case"fit":return p<=l&&d<=m&&f<=a&&u<=_;case"intersect":return p<l+t.helperProportions.width/2&&d-t.helperProportions.width/2<m&&f<a+t.helperProportions.height/2&&u-t.helperProportions.height/2<_;case"pointer":return e(s.pageY,f,i.proportions().height)&&e(s.pageX,p,i.proportions().width);case"touch":return(a>=f&&a<=_||u>=f&&u<=_||a<f&&u>_)&&(l>=p&&l<=m||d>=p&&d<=m||l<p&&d>m);default:return!1}}}(),r.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var i,o,s=r.ui.ddmanager.droppables[e.options.scope]||[],l=t?t.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<s.length;i++)if(!(s[i].options.disabled||e&&!s[i].accept.call(s[i].element[0],e.currentItem||e.element))){for(o=0;o<a.length;o++)if(a[o]===s[i].element[0]){s[i].proportions().height=0;continue e}s[i].visible=s[i].element.css("display")!=="none",s[i].visible&&(l==="mousedown"&&s[i]._activate.call(s[i],t),s[i].offset=s[i].element.offset(),s[i].proportions({width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight}))}},drop:function(e,t){var i=!1;return r.each((r.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&r.ui.intersect(e,this,this.options.tolerance,t)&&(i=this._drop.call(this,t)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),i},dragStart:function(e,t){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||r.ui.ddmanager.prepareOffsets(e,t)})},drag:function(e,t){e.options.refreshPositions&&r.ui.ddmanager.prepareOffsets(e,t),r.each(r.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var i,o,s,l=r.ui.intersect(e,this,this.options.tolerance,t),a=!l&&this.isover?"isout":l&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return r(this).droppable("instance").options.scope===o}),s.length&&(i=r(s[0]).droppable("instance"),i.greedyChild=a==="isover")),i&&a==="isover"&&(i.isover=!1,i.isout=!0,i._out.call(i,t)),this[a]=!0,this[a==="isout"?"isover":"isout"]=!1,this[a==="isover"?"_over":"_out"].call(this,t),i&&a==="isout"&&(i.isout=!1,i.isover=!0,i._over.call(i,t)))}})},dragStop:function(e,t){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||r.ui.ddmanager.prepareOffsets(e,t)}},r.uiBackCompat===!0&&r.widget("ui.droppable",r.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),r.ui.droppable});(function(r){"use strict";typeof define=="function"&&define.amd?define(["jquery","./mouse","../data","../scroll-parent","../version","../widget"],r):r(jQuery)})(function(r){"use strict";return r.widget("ui.sortable",r.ui.mouse,{version:"1.14.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),e==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),r.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,o=!1,s=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(e),r(e.target).parents().each(function(){if(r.data(this,s.widgetName+"-item")===s)return i=r(this),!1}),r.data(e.target,s.widgetName+"-item")===s&&(i=r(e.target)),!i)||this.options.handle&&!t&&(r(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o)?!1:(this.currentItem=i,this._removeCurrentsFromItems(),!0)},_mouseStart:function(e,t,i){var o,s,l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=r(l.appendTo!=="parent"?l.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},r.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),r.extend(this.offset,{parent:this._getParentOffset()}),l.containment&&this._setContainment(),l.cursor&&l.cursor!=="auto"&&(s=this.document.find("body"),this._storedStylesheet=r("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(s)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return r.ui.ddmanager&&(r.ui.ddmanager.current=this),r.ui.ddmanager&&!l.dropBehaviour&&r.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(e){var t=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-this.document.scrollTop()<t.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),e.pageX-this.document.scrollLeft()<t.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),i},_mouseDrag:function(e){var t,i,o,s,l=this.options;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),l.scroll&&this._scroll(e)!==!1&&(this._refreshItemPositions(!0),r.ui.ddmanager&&!l.dropBehaviour&&r.ui.ddmanager.prepareOffsets(this,e)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},t=this.items.length-1;t>=0;t--)if(i=this.items[t],o=i.item[0],s=this._intersectsWithPointer(i),!!s&&i.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==o&&!r.contains(this.placeholder[0],o)&&(this.options.type!=="semi-dynamic"||!r.contains(this.element[0],o))){if(this.direction=s===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(i))this._rearrange(e,i);else break;this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),r.ui.ddmanager&&r.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(r.ui.ddmanager&&!this.options.dropBehaviour&&r.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),s=this.options.axis,l={};(!s||s==="x")&&(l.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!s||s==="y")&&(l.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,r(this.helper).animate(l,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new r.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),r.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?r(this.domPosition.prev).after(this.currentItem):r(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},r(t).each(function(){var o=(r(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);o&&i.push((e.key||o[1]+"[]")+"="+(e.key&&e.expression?o[1]:o[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(r(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,o=this.positionAbs.top,s=o+this.helperProportions.height,l=e.left,a=l+e.width,d=e.top,u=d+e.height,p=this.offset.click.top,f=this.offset.click.left,m=this.options.axis==="x"||o+p>d&&o+p<u,_=this.options.axis==="y"||t+f>l&&t+f<a,C=m&&_;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?C:l<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&d<o+this.helperProportions.height/2&&s-this.helperProportions.height/2<u},_intersectsWithPointer:function(e){var t,i,o=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),l=o&&s;return l?(t=this.dragDirection.vertical,i=this.dragDirection.horizontal,this.floating?i==="right"||t==="down"?2:1:t&&(t==="down"?2:1)):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this.dragDirection.vertical,s=this.dragDirection.horizontal;return this.floating&&s?s==="right"&&i||s==="left"&&!i:o&&(o==="down"&&t||o==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t,i,o,s,l=[],a=[],d=this._connectWith();if(d&&e)for(t=d.length-1;t>=0;t--)for(o=r(d[t],this.document[0]),i=o.length-1;i>=0;i--)s=r.data(o[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([typeof s.options.items=="function"?s.options.items.call(s.element):r(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);a.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):r(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function u(){l.push(this)}for(t=a.length-1;t>=0;t--)a[t][0].each(u);return r(l)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=r.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,o,s,l,a,d,u,p=this.items,f=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],e,{item:this.currentItem}):r(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(t=m.length-1;t>=0;t--)for(o=r(m[t],this.document[0]),i=o.length-1;i>=0;i--)s=r.data(o[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(f.push([typeof s.options.items=="function"?s.options.items.call(s.element[0],e,{item:this.currentItem}):r(s.options.items,s.element),s]),this.containers.push(s));for(t=f.length-1;t>=0;t--)for(l=f[t][1],a=f[t][0],i=0,u=a.length;i<u;i++)d=r(a[i]),d.data(this.widgetName+"-item",l),p.push({item:d,instance:l,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(e){var t,i,o,s;for(t=this.items.length-1;t>=0;t--)i=this.items[t],!(this.currentContainer&&i.instance!==this.currentContainer&&i.item[0]!==this.currentItem[0])&&(o=this.options.toleranceElement?r(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),s=o.offset(),i.left=s.left,i.top=s.top)},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(e);var t,i;if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;t>=0;t--)i=this.containers[t].element.offset(),this.containers[t].containerCache.left=i.left,this.containers[t].containerCache.top=i.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var t,i,o=e.options;(!o.placeholder||o.placeholder.constructor===String)&&(t=o.placeholder,i=e.currentItem[0].nodeName.toLowerCase(),o.placeholder={element:function(){var s=r("<"+i+">",e.document[0]);return e._addClass(s,"ui-sortable-placeholder",t||e.currentItem[0].className)._removeClass(s,"ui-sortable-helper"),i==="tbody"?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),r("<tr>",e.document[0]).appendTo(s)):i==="tr"?e._createTrPlaceholder(e.currentItem,s):i==="img"&&s.attr("src",e.currentItem.attr("src")),t||s.css("visibility","hidden"),s},update:function(s,l){t&&!o.forcePlaceholderSize||((!l.height()||o.forcePlaceholderSize&&(i==="tbody"||i==="tr"))&&l.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),l.width()||l.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=r(o.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),o.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){r("<td>&#160;</td>",i.document[0]).attr("colspan",r(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,i,o,s,l,a,d,u,p,f,m=null,_=null;for(t=this.containers.length-1;t>=0;t--)if(!r.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(m&&r.contains(this.containers[t].element[0],m.element[0]))continue;m=this.containers[t],_=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(m)if(this.containers.length===1)this.containers[_].containerCache.over||(this.containers[_]._trigger("over",e,this._uiHash(this)),this.containers[_].containerCache.over=1);else{for(o=1e4,s=null,p=m.floating||this._isFloating(this.currentItem),l=p?"left":"top",a=p?"width":"height",f=p?"pageX":"pageY",i=this.items.length-1;i>=0;i--)r.contains(this.containers[_].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(d=this.items[i].item.offset()[l],u=!1,e[f]-d>this.items[i][a]/2&&(u=!0),Math.abs(e[f]-d)<o&&(o=Math.abs(e[f]-d),s=this.items[i],this.direction=u?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[_]){this.currentContainer.containerCache.over||(this.containers[_]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1);return}s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[_].element,!0),this._trigger("change",e,this._uiHash()),this.containers[_]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[_],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[_]._trigger("over",e,this._uiHash(this)),this.containers[_].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=typeof t.helper=="function"?r(t.helper.apply(this.element[0],[e,this.currentItem])):t.helper==="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||this.appendTo[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||t.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||t.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){typeof e=="string"&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&r.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this.offsetParent[0]===this.document[0].body&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,o=this.options;o.containment==="parent"&&(o.containment=this.helper[0].parentNode),(o.containment==="document"||o.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=r(o.containment)[0],t=r(o.containment).offset(),i=r(e).css("overflow")!=="hidden",this.containment=[t.left+(parseInt(r(e).css("borderLeftWidth"),10)||0)+(parseInt(r(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(r(e).css("borderTopWidth"),10)||0)+(parseInt(r(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(r(e).css("borderLeftWidth"),10)||0)-(parseInt(r(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(r(e).css("borderTopWidth"),10)||0)-(parseInt(r(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var i=e==="absolute"?1:-1,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&r.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(o[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*i}},_generatePosition:function(e){var t,i,o=this.options,s=e.pageX,l=e.pageY,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&r.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,d=/(html|body)/i.test(a[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top)),o.grid&&(t=this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1],l=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-o.grid[1]:t+o.grid[1]:t,i=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():d?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():d?0:a.scrollLeft())}},_rearrange:function(e,t,i,o){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!o)})},_clear:function(e,t){this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&o.push(function(l){this._trigger("receive",l,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&o.push(function(l){this._trigger("update",l,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(l){this._trigger("remove",l,this._uiHash())}),o.push((function(l){return function(a){l._trigger("receive",a,this._uiHash(this))}}).call(this,this.currentContainer)),o.push((function(l){return function(a){l._trigger("update",a,this._uiHash(this))}}).call(this,this.currentContainer))));function s(l,a,d){return function(u){d._trigger(l,u,a._uiHash(a))}}for(i=this.containers.length-1;i>=0;i--)t||o.push(s("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(s("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedStylesheet&&(this._storedStylesheet.remove(),this._storedStylesheet=null),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<o.length;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){r.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||r([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}})});(function(r){r.fn.drag=function(s,l,a){var d=typeof s=="string"?s:"",u=r.isFunction(s)?s:r.isFunction(l)?l:null;return d.indexOf("drag")!==0&&(d="drag"+d),a=(s==u?l:a)||{},u?this.on(d,a,u):this.trigger(d)};var e=r.event,t=e.special,i=t.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(s){var l=r.data(this,i.datakey),a=s.data||{};l.related+=1,r.each(i.defaults,function(d,u){a[d]!==void 0&&(l[d]=a[d])})},remove:function(){var s=r.data(this,i.datakey);s&&(s.related-=1)},setup:function(){if(!r.data(this,i.datakey)){var s=r.extend({related:0},i.defaults);r.data(this,i.datakey,s),e.add(this,"touchstart mousedown",i.init,s),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){var s=r.data(this,i.datakey)||{};s.related||(r.removeData(this,i.datakey),e.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(s){if(!i.touched){var l=s.data,a;if(!(s.which!=0&&l.which>0&&s.which!=l.which)){var d=r(s.target).attr("class")||"";if(!(r(s.target).is(l.not)||!d||d.toString().indexOf("slick")===-1)&&!(l.handle&&!r(s.target).closest(l.handle,s.currentTarget).length)&&(i.touched=s.type=="touchstart"?this:null,l.propagates=1,l.mousedown=this,l.interactions=[i.interaction(this,l)],l.target=s.target,l.pageX=s.pageX,l.pageY=s.pageY,l.dragging=null,a=i.hijack(s,"draginit",l),!!l.propagates&&(a=i.flatten(a),a&&a.length&&(l.interactions=[],r.each(a,function(){l.interactions.push(i.interaction(this,l))})),l.propagates=l.interactions.length,l.drop!==!1&&t.drop&&t.drop.handler(s,l),i.textselect(!1),i.touched?e.add(i.touched,"touchmove touchend",i.handler,l):e.add(document,"mousemove mouseup",i.handler,l),!i.touched||l.live)))return!1}}},interaction:function(s,l){var a=s&&s.ownerDocument?r(s)[l.relative?"position":"offset"]()||{top:0,left:0}:{top:0,left:0};return{drag:s,callback:new i.callback,droppable:[],offset:a}},handler:function(s){var l=s.data;switch(s.type){case(!l.dragging&&"touchmove"):s.preventDefault();case(!l.dragging&&"mousemove"):if(Math.pow(s.pageX-l.pageX,2)+Math.pow(s.pageY-l.pageY,2)<Math.pow(l.distance,2))break;s.target=l.target,i.hijack(s,"dragstart",l),l.propagates&&(l.dragging=!0);case"touchmove":s.preventDefault();case"mousemove":if(l.dragging){if(i.hijack(s,"drag",l),l.propagates){l.drop!==!1&&t.drop&&t.drop.handler(s,l);break}s.type="mouseup"}case"touchend":case"mouseup":default:i.touched?e.remove(i.touched,"touchmove touchend",i.handler):e.remove(document,"mousemove mouseup",i.handler),l.dragging&&(l.drop!==!1&&t.drop&&t.drop.handler(s,l),i.hijack(s,"dragend",l)),i.textselect(!0),l.click===!1&&l.dragging&&r.data(l.mousedown,"suppress.click",new Date().getTime()+5),l.dragging=i.touched=!1;break}},hijack:function(s,l,a,d,u){if(a){var p={event:s.originalEvent,type:s.type},f=l.indexOf("drop")?"drag":"drop",m,_=d||0,C,b,E,x=isNaN(d)?a.interactions.length:d;s.type=l;var R=function(){};s.originalEvent=new jQuery.Event(p.event,{preventDefault:R,stopPropagation:R,stopImmediatePropagation:R}),a.results=[];do if(C=a.interactions[_]){if(l!=="dragend"&&C.cancelled)continue;E=i.properties(s,a,C),C.results=[],r(u||C[f]||a.droppable).each(function(L,z){if(E.target=z,s.isPropagationStopped=function(){return!1},m=z?e.dispatch.call(z,s,E):null,m===!1?(f=="drag"&&(C.cancelled=!0,a.propagates-=1),l=="drop"&&(C[f][L]=null)):l=="dropinit"&&C.droppable.push(i.element(m)||z),l=="dragstart"&&(C.proxy=r(i.element(m)||C.drag)[0]),C.results.push(m),delete s.result,l!=="dropinit")return m}),a.results[_]=i.flatten(C.results),l=="dropinit"&&(C.droppable=i.flatten(C.droppable)),l=="dragstart"&&!C.cancelled&&E.update()}while(++_<x);return s.type=p.type,s.originalEvent=p.event,i.flatten(a.results)}},properties:function(s,l,a){var d=a.callback;return d.drag=a.drag,d.proxy=a.proxy||a.drag,d.startX=l.pageX,d.startY=l.pageY,d.deltaX=s.pageX-l.pageX,d.deltaY=s.pageY-l.pageY,d.originalX=a.offset.left,d.originalY=a.offset.top,d.offsetX=d.originalX+d.deltaX,d.offsetY=d.originalY+d.deltaY,d.drop=i.flatten((a.drop||[]).slice()),d.available=i.flatten((a.droppable||[]).slice()),d},element:function(s){if(s&&(s.jquery||s.nodeType==1))return s},flatten:function(s){return r.map(s,function(l){return l&&l.jquery?r.makeArray(l):l&&l.length?i.flatten(l):l})},textselect:function(s){r(document)[s?"off":"on"]("selectstart",i.dontstart).css("MozUserSelect",s?"":"none"),document.unselectable=s?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){t.drop&&this.available.length&&r.each(this.available,function(s){t.drop.locate(this,s)})}};var o=e.dispatch;e.dispatch=function(s){if(r.data(this,"suppress."+s.type)-new Date().getTime()>0){r.removeData(this,"suppress."+s.type);return}return o.apply(this,arguments)},t.draginit=t.dragstart=t.dragend=i})(jQuery);(function(r){var e=["DOMMouseScroll","mousewheel"];if(r.event.fixHooks)for(var t=e.length;t;)r.event.fixHooks[e[--t]]=r.event.mouseHooks;r.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var o=e.length;o;)this.addEventListener(e[--o],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var o=e.length;o;)this.removeEventListener(e[--o],i,!1);else this.onmousewheel=null}},r.fn.extend({mousewheel:function(o){return o?this.bind("mousewheel",o):this.trigger("mousewheel")},unmousewheel:function(o){return this.unbind("mousewheel",o)}});function i(o){var s=o||window.event,l=[].slice.call(arguments,1),a=0,d=!0,u=0,p=0;return o=r.event.fix(s),o.type="mousewheel",s.wheelDelta&&(a=s.wheelDelta/120),s.detail&&(a=-s.detail/3),p=a,s.axis!==void 0&&s.axis===s.HORIZONTAL_AXIS&&(p=0,u=-1*a),s.wheelDeltaY!==void 0&&(p=s.wheelDeltaY/120),s.wheelDeltaX!==void 0&&(u=-1*s.wheelDeltaX/120),l.unshift(o,a,u,p),(r.event.dispatch||r.event.handle).apply(this,l)}})(jQuery);(function(r){function e(){var m=!1,_=!1;this.stopPropagation=function(){m=!0},this.isPropagationStopped=function(){return m},this.stopImmediatePropagation=function(){_=!0},this.isImmediatePropagationStopped=function(){return _}}function t(){var m=[];this.subscribe=function(_){m.push(_)},this.unsubscribe=function(_){for(var C=m.length-1;C>=0;C--)m[C]===_&&m.splice(C,1)},this.notify=function(_,C,b){C=C||new e,b=b||this;for(var E,x=0;x<m.length&&!(C.isPropagationStopped()||C.isImmediatePropagationStopped());x++)E=m[x].call(b,C,_);return E}}function i(){var m=[];this.subscribe=function(_,C){return m.push({event:_,handler:C}),_.subscribe(C),this},this.unsubscribe=function(_,C){for(var b=m.length;b--;)if(m[b].event===_&&m[b].handler===C){m.splice(b,1),_.unsubscribe(C);return}return this},this.unsubscribeAll=function(){for(var _=m.length;_--;)m[_].event.unsubscribe(m[_].handler);return m=[],this}}function o(m,_,C,b){C===void 0&&b===void 0&&(C=m,b=_),this.fromRow=Math.min(m,C),this.fromCell=Math.min(_,b),this.toRow=Math.max(m,C),this.toCell=Math.max(_,b),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(E,x){return E>=this.fromRow&&E<=this.toRow&&x>=this.fromCell&&x<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function s(){this.__nonDataRow=!0}function l(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}l.prototype=new s,l.prototype.equals=function(m){return this.value===m.value&&this.count===m.count&&this.collapsed===m.collapsed&&this.title===m.title};function a(){this.__groupTotals=!0,this.group=null,this.initialized=!1}a.prototype=new s;function d(){var m=null;this.isActive=function(_){return _?m===_:m!==null},this.activate=function(_){if(_!==m){if(m!==null)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!_.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!_.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");m=_}},this.deactivate=function(_){if(m){if(m!==_)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");m=null}},this.commitCurrentEdit=function(){return m?m.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return m?m.cancelCurrentEdit():!0}}function u(m){var _={};function C(){b(m)}function b(V){V.forEach(function(H){_[H.id]=H,H.columns&&b(H.columns)})}function E(V,H){return V.filter(function(K){var oe=H.call(K);return oe&&K.columns&&(K.columns=E(K.columns,H)),oe&&(!K.columns||K.columns.length)})}function x(V,H){V.sort(function(K,oe){var ne=R(H.getColumnIndex(K.id)),Pe=R(H.getColumnIndex(oe.id));return ne-Pe}).forEach(function(K){K.columns&&x(K.columns,H)})}function R(V){return typeof V>"u"?-1:V}function L(V){if(V.length)for(var H in V)return L(V[H]);else return V.columns?1+L(V.columns):1}function z(V,H,K){var oe=[];if(K=K||0,H==K)return V.length&&V.forEach(function(Pe){Pe.columns&&(Pe.extractColumns=function(){return B(Pe)})}),V;for(var ne in V)V[ne].columns&&(oe=oe.concat(z(V[ne].columns,H,K+1)));return oe}function B(V){var H=[];if(V.hasOwnProperty("length"))for(var K=0;K<V.length;K++)H=H.concat(B(V[K]));else if(V.hasOwnProperty("columns"))H=H.concat(B(V.columns));else return V;return H}function G(){return r.extend(!0,[],m)}C(),this.hasDepth=function(){for(var V in m)if(m[V].hasOwnProperty("columns"))return!0;return!1},this.getTreeColumns=function(){return m},this.extractColumns=function(){return this.hasDepth()?B(m):m},this.getDepth=function(){return L(m)},this.getColumnsInDepth=function(V){return z(m,V)},this.getColumnsInGroup=function(V){return B(V)},this.visibleColumns=function(){return E(G(),function(){return this.visible})},this.filter=function(V){return E(G(),V)},this.reOrder=function(V){return x(m,V)},this.getById=function(V){return _[V]},this.getInIds=function(V){return V.map(function(H){return _[H]})}}var p="Map"in window?window.Map:function(){var _={};this.get=function(C){return _[C]},this.set=function(C,b){_[C]=b},this.has=function(C){return C in _},this.delete=function(C){delete _[C]}};function f(m){return m.replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,"")}r.extend(!0,window,{Slick:{Event:t,EventData:e,EventHandler:i,Range:o,Map:p,NonDataRow:s,Group:l,GroupTotals:a,RegexSanitizer:f,EditorLock:d,GlobalEditorLock:new d,TreeColumns:u,keyCode:{SPACE:8,BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick",GridAutosizeColsMode:{None:"NOA",LegacyOff:"LOF",LegacyForceFit:"LFF",IgnoreViewport:"IGV",FitColsToViewport:"FCV",FitViewportToCols:"FVC"},ColAutosizeMode:{Locked:"LCK",Guide:"GUI",Content:"CON",ContentIntelligent:"CTI"},RowSelectionMode:{FirstRow:"FS1",FirstNRows:"FSN",AllRows:"ALL",LastRow:"LS1"},ValueFilterMode:{None:"NONE",DeDuplicate:"DEDP",GetGreatestAndSub:"GR8T",GetLongestTextAndSub:"LNSB",GetLongestText:"LNSC"},WidthEvalMode:{CanvasTextSize:"CANV",HTML:"HTML"}}})})(jQuery);var TP=Oi(Ud(),1);(function(r){function e(a){var d=this,u={groupItemMetadataProvider:null,inlineFilters:!1},p="id",f=[],m=[],_=new Slick.Map,C=null,b=null,E=null,x=!1,R=!1,L=new Slick.Map,z=!0,B,G,V={},H={},K,oe=[],ne,Pe,He=[],xe=null,Xe={getter:null,formatter:null,comparer:function(I,D){return I.value===D.value?0:I.value>D.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},ge=[],lt=[],Y=[],De=":|:",$e=null,ze=0,Ee=0,Te=0,yt=new Slick.Event,_t=new Slick.Event,Je=new Slick.Event,Ge=new Slick.Event,Be=new Slick.Event,ve=new Slick.Event,Pt=new Slick.Event,Ct=new Slick.Event;a=r.extend(!0,{},u,a);function Bt(I){x=!0,R=I===!0}function j(){var I=R;R=!1,x=!1,I&&(Vt(),Qt()),ut()}function Ii(){f=[],_=null,C=null,b=null,E=null,G=null,He=[],oe=[],ne=null,Pe=null,xe&&xe.onSelectedRowsChanged&&xe.onCellCssStylesChanged&&(xe.onSelectedRowsChanged.unsubscribe(),xe.onCellCssStylesChanged.unsubscribe()),d.onRowsOrCountChanged&&d.onRowsOrCountChanged.unsubscribe()}function Ue(I){V=I}function Gt(I){K=I}function Vt(){for(var I,D,F=0,X=0,ee=f.length;X<ee;X++){if(D=f[X],I=D[p],I===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");L.has(I)?_.delete(I):(f[F]=D,_.set(I,F),++F)}f.length=F,L=new Slick.Map}function Dt(I){if(!R){I=I||0;for(var D,F=I,X=f.length;F<X;F++){if(D=f[F][p],D===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");_.set(D,F)}}}function Qt(){if(!R){for(var I,D=0,F=f.length;D<F;D++)if(I=f[D][p],I===void 0||_.get(I)!==D)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}}function zi(){return f}function Po(){return p}function Pi(I,D){D!==void 0&&(p=D),f=oe=I,yt.notify({idProperty:D,itemCount:f.length},null,d),_=new Slick.Map,Dt(),Qt(),ut()}function Ut(I){Be.notify(re(),null,d)!==!1&&(I.pageSize!=null&&(ze=I.pageSize,Ee=ze?Math.min(Ee,Math.max(0,Math.ceil(Te/ze)-1)):0),I.pageNum!=null&&(Ee=Math.min(I.pageNum,Math.max(0,Math.ceil(Te/ze)-1))),ve.notify(re(),null,d),ut())}function re(){var I=ze?Math.max(1,Math.ceil(Te/ze)):1;return{pageSize:ze,pageNum:Ee,totalRows:Te,totalPages:I,dataView:d}}function Di(I,D){z=D,G=I,B=null,D===!1&&f.reverse(),f.sort(I),D===!1&&f.reverse(),_=new Slick.Map,Dt(),ut()}function J(I,D){z=D,B=I,G=null;var F=Object.prototype.toString;Object.prototype.toString=typeof I=="function"?I:function(){return this[I]},D===!1&&f.reverse(),f.sort(),Object.prototype.toString=F,D===!1&&f.reverse(),_=new Slick.Map,Dt(),ut()}function ae(){G?Di(G,z):B&&J(B,z)}function Se(){return oe}function he(){return oe.length}function ot(){return b}function Ye(I){b=I,a.inlineFilters&&(ne=fi(),Pe=yi()),ut()}function qe(){return ge}function dt(I){a.groupItemMetadataProvider||(a.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),lt=[],Y=[],I=I||[],ge=I instanceof Array?I:[I];for(var D=0;D<ge.length;D++){var F=ge[D]=r.extend(!0,{},Xe,ge[D]);F.getterIsAFn=typeof F.getter=="function",F.compiledAccumulators=[];for(var X=F.aggregators.length;X--;)F.compiledAccumulators[X]=io(F.aggregators[X]);Y[D]={}}ut()}function xt(I,D,F){if(I==null){dt([]);return}dt({getter:I,formatter:D,comparer:F})}function Oe(I,D){if(!ge.length)throw new Error("[SlickGrid DataView] At least one grouping must be specified before calling setAggregators().");ge[0].aggregators=I,ge[0].aggregateCollapsed=D,dt(ge)}function Ht(I){return f[I]}function Yt(I){return _.get(I)}function jt(){if(!C){C={};for(var I=0,D=m.length;I<D;I++)C[m[I][p]]=I}}function ci(I){return jt(),C[I[p]]}function wi(I){return jt(),C[I]}function $t(I){return f[_.get(I)]}function Ai(I){var D=[];jt();for(var F=0,X=I.length;F<X;F++){var ee=C[I[F][p]];ee!=null&&(D[D.length]=ee)}return D}function co(I){var D=[];jt();for(var F=0,X=I.length;F<X;F++){var ee=C[I[F]];ee!=null&&(D[D.length]=ee)}return D}function S(I){for(var D=[],F=0,X=I.length;F<X;F++)I[F]<m.length&&(D[D.length]=m[I[F]][p]);return D}function T(I,D){if(!_.has(I))throw new Error("[SlickGrid DataView] Invalid id");if(I!==D[p]){var F=D[p];if(F==null)throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(_.has(F))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");_.set(F,_.get(I)),_.delete(I),E&&E[I]&&delete E[I],I=F}f[_.get(I)]=D,E||(E={}),E[I]=!0}function k(I,D){T(I,D),ut()}function W(I,D){if(I.length!==D.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(var F=0,X=D.length;F<X;F++)T(I[F],D[F]);ut()}function Q(I,D){f.splice(I,0,D),Dt(I),ut()}function se(I,D){Array.prototype.splice.apply(f,[I,0].concat(D)),Dt(I),ut()}function Re(I){f.push(I),Dt(f.length-1),ut()}function pe(I){f=f.concat(I),Dt(f.length-I.length),ut()}function Ae(I){if(R)L.set(I,!0);else{var D=_.get(I);if(D===void 0)throw new Error("[SlickGrid DataView] Invalid id");_.delete(I),f.splice(D,1),Dt(D),ut()}}function ce(I){if(I.length!==0)if(R)for(var D=0,F=I.length;D<F;D++){var X=I[D],ee=_.get(X);if(ee===void 0)throw new Error("[SlickGrid DataView] Invalid id");L.set(X,!0)}else{for(var _e=[],D=0,F=I.length;D<F;D++){var X=I[D],ee=_.get(X);if(ee===void 0)throw new Error("[SlickGrid DataView] Invalid id");_.delete(X),_e.push(ee)}_e.sort();for(var D=_e.length-1;D>=0;--D)f.splice(_e[D],1);Dt(_e[0]),ut()}}function Ce(I){if(!G)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");Q(ct(I),I)}function Ne(I,D){if(!_.has(I)||I!==D[p])throw new Error("[SlickGrid DataView] Invalid or non-matching id "+_.get(I));if(!G)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");var F=$t(I);G(F,D)!==0?(Ae(I),Ce(D)):k(I,D)}function ct(I){for(var D=0,F=f.length;D<F;){var X=D+F>>>1;G(f[X],I)===-1?D=X+1:F=X}return D}function bt(){return f.length}function Xt(){return m.length}function hi(I){var D=m[I];if(D&&D.__group&&D.totals&&!D.totals.initialized){var F=ge[D.level];F.displayTotalsRow||(it(D.totals),D.title=F.formatter?F.formatter(D):D.value)}else D&&D.__groupTotals&&!D.initialized&&it(D);return D}function Bi(I){var D=m[I];return D===void 0?null:D.__group?a.groupItemMetadataProvider.getGroupRowMetadata(D):D.__groupTotals?a.groupItemMetadataProvider.getTotalsRowMetadata(D):null}function Wi(I,D){if(I==null)for(var F=0;F<ge.length;F++)Y[F]={},ge[F].collapsed=D,D===!0?Ct.notify({level:F,groupingKey:null}):Pt.notify({level:F,groupingKey:null});else Y[I]={},ge[I].collapsed=D,D===!0?Ct.notify({level:I,groupingKey:null}):Pt.notify({level:I,groupingKey:null});ut()}function ho(I){Wi(I,!0)}function Do(I){Wi(I,!1)}function Si(I,D,F){Y[I][D]=ge[I].collapsed^F,ut()}function ht(I){var D=Array.prototype.slice.call(arguments),F=D[0],X,ee;D.length===1&&F.indexOf(De)!==-1?(X=F,ee=F.split(De).length-1):(X=D.join(De),ee=D.length-1),Si(ee,X,!0),Ct.notify({level:ee,groupingKey:X})}function eo(I){var D=Array.prototype.slice.call(arguments),F=D[0],X,ee;D.length===1&&F.indexOf(De)!==-1?(ee=F.split(De).length-1,X=F):(ee=D.length-1,X=D.join(De)),Si(ee,X,!1),Pt.notify({level:ee,groupingKey:X})}function ft(){return lt}function pi(I,D){for(var F,X,ee=[],_e={},fe,be=D?D.level+1:0,Ke=ge[be],nt=0,wt=Ke.predefinedValues.length;nt<wt;nt++)X=Ke.predefinedValues[nt],F=_e[X],F||(F=new Slick.Group,F.value=X,F.level=be,F.groupingKey=(D?D.groupingKey+De:"")+X,ee[ee.length]=F,_e[X]=F);for(var nt=0,wt=I.length;nt<wt;nt++)fe=I[nt],X=Ke.getterIsAFn?Ke.getter(fe):fe[Ke.getter],F=_e[X],F||(F=new Slick.Group,F.value=X,F.level=be,F.groupingKey=(D?D.groupingKey+De:"")+X,ee[ee.length]=F,_e[X]=F),F.rows[F.count++]=fe;if(be<ge.length-1)for(var nt=0;nt<ee.length;nt++)F=ee[nt],F.groups=pi(F.rows,F);return ee.length&&Ei(ee,be),ee.sort(ge[be].comparer),ee}function it(I){var D=I.group,F=ge[D.level],X=D.level==ge.length,ee,_e=F.aggregators.length;if(!X&&F.aggregateChildGroups)for(var fe=D.groups.length;fe--;)D.groups[fe].totals.initialized||it(D.groups[fe].totals);for(;_e--;)ee=F.aggregators[_e],ee.init(),!X&&F.aggregateChildGroups?F.compiledAccumulators[_e].call(ee,D.groups):F.compiledAccumulators[_e].call(ee,D.rows),ee.storeResult(I);I.initialized=!0}function et(I){var D=ge[I.level],F=new Slick.GroupTotals;F.group=I,I.totals=F,D.lazyTotalsCalculation||it(F)}function Ei(I,D){D=D||0;for(var F=ge[D],X=F.collapsed,ee=Y[D],_e=I.length,fe;_e--;)fe=I[_e],!(fe.collapsed&&!F.aggregateCollapsed)&&(fe.groups&&Ei(fe.groups,D+1),F.aggregators.length&&(F.aggregateEmpty||fe.rows.length||fe.groups&&fe.groups.length)&&et(fe),fe.collapsed=X^ee[fe.groupingKey],fe.title=F.formatter?F.formatter(fe):fe.value)}function po(I,D){D=D||0;for(var F=ge[D],X=[],ee,_e=0,fe,be=0,Ke=I.length;be<Ke;be++){if(fe=I[be],X[_e++]=fe,!fe.collapsed){ee=fe.groups?po(fe.groups,D+1):fe.rows;for(var nt=0,wt=ee.length;nt<wt;nt++)X[_e++]=ee[nt]}fe.totals&&F.displayTotalsRow&&(!fe.collapsed||F.aggregateCollapsed)&&(X[_e++]=fe.totals)}return X}function to(I){var D=I.toString(),F=D.indexOf("function")>=0,X=F?/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/:/^[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,ee=I.toString().match(X);return{params:ee[1].split(","),body:ee[2]}}function io(I){if(I.accumulate){var D=to(I.accumulate),F=new Function("_items","for (var "+D.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+D.params[0]+" = _items[_i]; "+D.body+"}"),X="compiledAccumulatorLoop";return F.displayName=X,F.name=qt(F,X),F}else return function(){}}function fi(){var I=to(b),D="{ continue _coreloop; }$1",F="{ _retval[_idx++] = $item$; continue _coreloop; }$1",X=I.body.replace(/return false\s*([;}]|\}|$)/gi,D).replace(/return!1([;}]|\}|$)/gi,D).replace(/return true\s*([;}]|\}|$)/gi,F).replace(/return!0([;}]|\}|$)/gi,F).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),ee=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");ee=ee.replace(/\$filter\$/gi,X),ee=ee.replace(/\$item\$/gi,I.params[0]),ee=ee.replace(/\$args\$/gi,I.params[1]);var _e=new Function("_items,_args",ee),fe="compiledFilter";return _e.displayName=fe,_e.name=qt(_e,fe),_e}function yi(){var I=to(b),D="{ continue _coreloop; }$1",F="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",X=I.body.replace(/return false\s*([;}]|\}|$)/gi,D).replace(/return!1([;}]|\}|$)/gi,D).replace(/return true\s*([;}]|\}|$)/gi,F).replace(/return!0([;}]|\}|$)/gi,F).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),ee=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");ee=ee.replace(/\$filter\$/gi,X),ee=ee.replace(/\$item\$/gi,I.params[0]),ee=ee.replace(/\$args\$/gi,I.params[1]);var _e=new Function("_items,_args,_cache",ee),fe="compiledFilterWithCaching";return _e.displayName=fe,_e.name=qt(_e,fe),_e}function qt(I,D){try{Object.defineProperty(I,"name",{writable:!0,value:D})}catch{I.name=D}}function mi(I,D){for(var F=[],X=0,ee=0,_e=I.length;ee<_e;ee++)b(I[ee],D)&&(F[X++]=I[ee]);return F}function Ao(I,D,F){for(var X=[],ee=0,_e,fe=0,be=I.length;fe<be;fe++)_e=I[fe],F[fe]?X[ee++]=_e:b(_e,D)&&(X[ee++]=_e,F[fe]=!0);return X}function ko(I){if(b){var D=a.inlineFilters?ne:mi,F=a.inlineFilters?Pe:Ao;V.isFilterNarrowing?oe=D(oe,K):V.isFilterExpanding?oe=F(I,K,He):V.isFilterUnchanged||(oe=D(I,K))}else oe=ze?I:I.concat();var X;return ze?(oe.length<=Ee*ze&&(oe.length===0?Ee=0:Ee=Math.floor((oe.length-1)/ze)),X=oe.slice(ze*Ee,ze*Ee+ze)):X=oe,{totalRows:oe.length,rows:X}}function Gi(I,D){var F,X,ee,_e=[],fe=0,be=Math.max(D.length,I.length);V&&V.ignoreDiffsBefore&&(fe=Math.max(0,Math.min(D.length,V.ignoreDiffsBefore))),V&&V.ignoreDiffsAfter&&(be=Math.min(D.length,Math.max(0,V.ignoreDiffsAfter)));for(var Ke=fe,nt=I.length;Ke<be;Ke++)Ke>=nt?_e[_e.length]=Ke:(F=D[Ke],X=I[Ke],(!F||ge.length&&(ee=F.__nonDataRow||X.__nonDataRow)&&F.__group!==X.__group||F.__group&&!F.equals(X)||ee&&(F.__groupTotals||X.__groupTotals)||F[p]!=X[p]||E&&E[F[p]])&&(_e[_e.length]=Ke));return _e}function xi(I){C=null,(V.isFilterNarrowing!=H.isFilterNarrowing||V.isFilterExpanding!=H.isFilterExpanding)&&(He=[]);var D=ko(I);Te=D.totalRows;var F=D.rows;lt=[],ge.length&&(lt=pi(F),lt.length&&(F=po(lt)));var X=Gi(m,F);return m=F,X}function ut(){if(!x){var I=r.extend(!0,{},re()),D=m.length,F=Te,X=xi(f,b);ze&&Te<Ee*ze&&(Ee=Math.max(0,Math.ceil(Te/ze)-1),X=xi(f,b)),E=null,H=V,V={},F!==Te&&Be.notify(I,null,d)!==!1&&ve.notify(re(),null,d),D!==m.length&&_t.notify({previous:D,current:m.length,itemCount:f.length,dataView:d,callingOnRowsChanged:X.length>0},null,d),X.length>0&&Je.notify({rows:X,itemCount:f.length,dataView:d,calledOnRowCountChanged:D!==m.length},null,d),(D!==m.length||X.length>0)&&Ge.notify({rowsDiff:X,previousRowCount:D,currentRowCount:m.length,itemCount:f.length,rowCountChanged:D!==m.length,rowsChanged:X.length>0,dataView:d},null,d)}}function qo(I,D,F){var X=this;xe=I;var ee;$e=X.mapRowsToIds(I.getSelectedRows());var _e=new Slick.Event;function fe(Ke){$e.join(",")!=Ke.join(",")&&($e=Ke,_e.notify({grid:I,ids:$e,dataView:X},new Slick.EventData,X))}function be(){if($e.length>0){ee=!0;var Ke=X.mapIdsToRows($e);D||fe(X.mapRowsToIds(Ke)),I.setSelectedRows(Ke),ee=!1}}return I.onSelectedRowsChanged.subscribe(function(Ke,nt){if(!ee){var wt=X.mapRowsToIds(I.getSelectedRows());if(!F||!I.getOptions().multiSelect)fe(wt);else{var gi=r.grep($e,function(oo){return X.getRowById(oo)===void 0});fe(gi.concat(wt))}}}),this.onRowsOrCountChanged.subscribe(be),_e}function Fo(){return $e}function Pn(){var I=[],D=Fo();return D.forEach(function(F){I.push(d.getItemById(F))}),I}function fo(I,D){var F,X;ee(I.getCellCssStyles(D));function ee(fe){F={};for(var be in fe){var Ke=m[be][p];F[Ke]=fe[be]}}function _e(){if(F){X=!0,jt();var fe={};for(var be in F){var Ke=C[be];Ke!=null&&(fe[Ke]=F[be])}I.setCellCssStyles(D,fe),X=!1}}I.onCellCssStylesChanged.subscribe(function(fe,be){X||D==be.key&&(be.hash?ee(be.hash):(I.onCellCssStylesChanged.unsubscribe(),d.onRowsOrCountChanged.unsubscribe(_e)))}),this.onRowsOrCountChanged.subscribe(_e)}r.extend(this,{beginUpdate:Bt,endUpdate:j,destroy:Ii,setPagingOptions:Ut,getPagingInfo:re,getIdPropertyName:Po,getItems:zi,setItems:Pi,setFilter:Ye,getFilter:ot,getFilteredItems:Se,getFilteredItemCount:he,sort:Di,fastSort:J,reSort:ae,setGrouping:dt,getGrouping:qe,groupBy:xt,setAggregators:Oe,collapseAllGroups:ho,expandAllGroups:Do,collapseGroup:ht,expandGroup:eo,getGroups:ft,getAllSelectedIds:Fo,getAllSelectedItems:Pn,getIdxById:Yt,getRowByItem:ci,getRowById:wi,getItemById:$t,getItemByIdx:Ht,mapItemsToRows:Ai,mapRowsToIds:S,mapIdsToRows:co,setRefreshHints:Ue,setFilterArgs:Gt,refresh:ut,updateItem:k,updateItems:W,insertItem:Q,insertItems:se,addItem:Re,addItems:pe,deleteItem:Ae,deleteItems:ce,sortedAddItem:Ce,sortedUpdateItem:Ne,syncGridSelection:qo,syncGridCellCssStyles:fo,getItemCount:bt,getLength:Xt,getItem:hi,getItemMetadata:Bi,onSetItemsCalled:yt,onRowCountChanged:_t,onRowsChanged:Je,onRowsOrCountChanged:Ge,onBeforePagingInfoChanged:Be,onPagingInfoChanged:ve,onGroupExpanded:Pt,onGroupCollapsed:Ct})}function t(a){this.field_=a,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(d){var u=d[this.field_];this.count_++,u!=null&&u!==""&&!isNaN(u)&&(this.nonNullCount_++,this.sum_+=parseFloat(u))},this.storeResult=function(d){d.avg||(d.avg={}),this.nonNullCount_!==0&&(d.avg[this.field_]=this.sum_/this.nonNullCount_)}}function i(a){this.field_=a,this.init=function(){this.min_=null},this.accumulate=function(d){var u=d[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.min_==null||u<this.min_)&&(this.min_=u)},this.storeResult=function(d){d.min||(d.min={}),d.min[this.field_]=this.min_}}function o(a){this.field_=a,this.init=function(){this.max_=null},this.accumulate=function(d){var u=d[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.max_==null||u>this.max_)&&(this.max_=u)},this.storeResult=function(d){d.max||(d.max={}),d.max[this.field_]=this.max_}}function s(a){this.field_=a,this.init=function(){this.sum_=null},this.accumulate=function(d){var u=d[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.sum_+=parseFloat(u))},this.storeResult=function(d){d.sum||(d.sum={}),d.sum[this.field_]=this.sum_}}function l(a){this.field_=a,this.init=function(){},this.storeResult=function(d){d.count||(d.count={}),d.count[this.field_]=d.group.rows.length}}r.extend(!0,window,{Slick:{Data:{DataView:e,Aggregators:{Avg:t,Min:i,Max:o,Sum:s,Count:l}}}})})(jQuery);var Xs=class{constructor(){this._warningLeftElement=null,this._warningRightElement=null,this.isPreviouslyShown=!1}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}init(e,t){this.grid=e,this.translaterService=t.get("TranslaterService")}dispose(){var e,t;(e=this._warningLeftElement)===null||e===void 0||e.remove(),(t=this._warningRightElement)===null||t===void 0||t.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(e=!0,t){var i,o,s,l,a,d,u,p,f,m,_,C,b,E;if(!this.grid||!this.gridOptions||this.isPreviouslyShown===e)return!1;this.isPreviouslyShown=e;let x=this.grid.getUID(),L=P(P({message:"No data to display."},this.gridOptions.emptyDataWarning),t),z=(i=L?.className)!==null&&i!==void 0?i:"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${x} .${z}`);let B=document.querySelector(`.${x} .grid-canvas.grid-canvas-left`),G=document.querySelector(`.${x} .grid-canvas.grid-canvas-right`),V=(o=L.leftViewportMarginLeft)!==null&&o!==void 0?o:0,H=(s=L.rightViewportMarginLeft)!==null&&s!==void 0?s:0,K=(l=L.frozenLeftViewportMarginLeft)!==null&&l!==void 0?l:0,oe=(a=L.frozenRightViewportMarginLeft)!==null&&a!==void 0?a:0,ne=((d=this.gridOptions)===null||d===void 0?void 0:d.frozenColumn)!==void 0&&this.gridOptions.frozenColumn>=0,Pe=typeof V=="string"?V:`${V}px`,He=typeof H=="string"?H:`${H}px`;if(this.gridOptions.autoHeight){let Xe=document.querySelector(".slick-pane.slick-pane-top.slick-pane-left");if(Xe&&Xe.style&&B&&B.style){let ge=parseInt(Xe.style.height,10)||0,lt=(p=(u=this.gridOptions)===null||u===void 0?void 0:u.rowHeight)!==null&&p!==void 0?p:0,Y=this.gridOptions.enableFiltering&&(m=(f=this.gridOptions)===null||f===void 0?void 0:f.headerRowHeight)!==null&&m!==void 0?m:0,De=this.gridOptions.createPreHeaderPanel&&(C=(_=this.gridOptions)===null||_===void 0?void 0:_.preHeaderPanelHeight)!==null&&C!==void 0?C:0;if(e){let $e=ge!==null&&ge<100?ge:100;$e+=Y+De,Xe.style.minHeight=`${$e}px`,B.style.minHeight=`${lt}px`}}}let xe=L.message;if(this.gridOptions.enableTranslate&&this.translaterService&&L?.messageKey&&(xe=this.translaterService.translate(L.messageKey)),!this._warningLeftElement&&B&&G){let Xe=(E=(b=this.gridOptions)===null||b===void 0?void 0:b.sanitizeHtmlOptions)!==null&&E!==void 0?E:{};this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(z),this._warningLeftElement.classList.add("left"),this._warningLeftElement.innerHTML=kt(this.gridOptions,xe,Xe),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),G.appendChild(this._warningRightElement),B.appendChild(this._warningLeftElement)}if(this._warningLeftElement){let Xe=e?"block":"none";ne&&e&&(Xe=L.hideFrozenLeftWarning?"none":"block"),this._warningLeftElement.style.display=Xe;let ge=typeof K=="string"?K:`${K}px`;this._warningLeftElement.style.marginLeft=ne?ge:Pe}if(this._warningRightElement){let Xe=e?"block":"none";ne&&e&&(Xe=L.hideFrozenRightWarning?"none":"block"),this._warningRightElement.style.display=Xe;let ge=typeof oe=="string"?oe:`${oe}px`;this._warningRightElement.style.marginLeft=ne?ge:He}return e}};var Kl=Oi(bo());var dr=Oi(Rr()),qs=class{constructor(e){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=e,this._property=e.property||"",this._elementBindings=[],e.property&&e.variable&&(e.variable.hasOwnProperty(e.property)||e.property in e.variable)?this._value=typeof e.variable[e.property]=="string"?this.sanitizeText(e.variable[e.property]):e.variable[e.property]:this._value=typeof e.variable=="string"?this.sanitizeText(e.variable):e.variable,typeof e.variable=="object"&&Object.defineProperty(e.variable,e.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(e){if(this._value=typeof e=="string"?this.sanitizeText(e):e,Array.isArray(this._elementBindings))for(let t of this._elementBindings)t?.element&&t?.attribute&&(t.element[t.attribute]=typeof e=="string"?this.sanitizeText(e):e)}bind(e,t,i,o){return e&&e.forEach?e.forEach(s=>this.bindSingleElement(s,t,i,o)):e&&this.bindSingleElement(e,t,i,o),this}unbind(e,t,i,o,s){if(e){e.removeEventListener(t,i,o);let l=this._boundedEventWithListeners.findIndex(a=>a.uid===s);l>=0&&this._boundedEventWithListeners.splice(l,1)}}unbindAll(){let e=this._boundedEventWithListeners.pop();for(;e;){let{element:t,eventName:i,listener:o,uid:s}=e;this.unbind(t,i,o,void 0,s),e=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(e,t,i,o){let s={element:e,attribute:t};if(e){if(i){let l=()=>{let a=e[t];if(this.hasData(a)&&e?.type==="number"&&(a=+a),this.valueSetter(a),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),typeof o=="function")return o(this.valueGetter())};s.event=i,s.listener=l,e.addEventListener(i,l),this._boundedEventWithListeners.push({element:e,eventName:i,listener:l,uid:this.generateUuidV4()})}this._elementBindings.push(s),e[t]=typeof this._value=="string"?this.sanitizeText(this._value):this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}hasData(e){return e!=null&&e!==""}sanitizeText(e){return dr!=null&&dr.sanitize?dr.sanitize(e,{}):e}};var Rn=class{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(e){this._querySelectorPrefix=e}get observers(){return this._observers}dispose(){let e=this._observers.pop();for(;e;)e.dispose(),e=this._observers.pop();this._observers=[]}addElementBinding(e,t,i,o,s,l){let a=document.querySelectorAll(`${this.querySelectorPrefix}${i}`),d=this._observers.find(u=>u.property===e);d||(d=new qs({variable:e,property:t})),Array.isArray(s)?s.forEach(u=>d?.bind(a,o,u,l)):d?.bind(a,o,s,l),this._observers.push(d)}bindEventHandler(e,t,i,o){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(l=>{l?.addEventListener&&l.addEventListener(t,i,o)})}setElementAttributeValue(e,t,i){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(s=>{s.textContent="",s&&t in s&&(s[t]=i)})}};var Yd=Kl.default||Kl,Ks=class{constructor(e,t,i,o){var s,l,a,d,u,p,f;if(this.grid=e,this.customFooterOptions=t,this.pubSubService=i,this.translaterService=o,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new Rn,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new Slick.EventHandler,this._enableTranslate=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.enableTranslate)!==null&&l!==void 0?l:!1,this._isLeftFooterOriginallyEmpty=!(!((a=this.gridOptions.customFooterOptions)===null||a===void 0)&&a.leftFooterText),this._isRightFooterOriginallyEmpty=!(!((d=this.gridOptions.customFooterOptions)===null||d===void 0)&&d.rightFooterText),this.registerOnSelectedRowsChangedWhenEnabled(t),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&(!((u=this.pubSubService)===null||u===void 0)&&u.subscribe)){let m=(f=(p=this.translaterService)===null||p===void 0?void 0:p.eventName)!==null&&f!==void 0?f:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(m,()=>this.translateCustomFooterTexts()))}}get eventHandler(){return this._eventHandler}get gridUid(){var e,t;return(t=(e=this.grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get locales(){var e,t;return(t=(e=this.gridOptions)===null||e===void 0?void 0:e.locales)!==null&&t!==void 0?t:ie.locales}set metrics(e){this.renderMetrics(e)}get leftFooterText(){var e,t;return(t=(e=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`))===null||e===void 0?void 0:e.textContent)!==null&&t!==void 0?t:""}set leftFooterText(e){this.renderLeftFooterText(e)}get rightFooterText(){var e,t;return(t=(e=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`))===null||e===void 0?void 0:e.textContent)!==null&&t!==void 0?t:""}set rightFooterText(e){this.renderRightFooterText(e)}dispose(){var e;this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),(e=this._footerElement)===null||e===void 0||e.remove()}renderFooter(e){this.translateCustomFooterTexts(),this.createFooterContainer(e)}renderMetrics(e){var t;let i=Yd(e.endTime).format(this.customFooterOptions.dateFormat);this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",i),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",e.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",e.totalItemCount),!((t=this.customFooterOptions.metricTexts)===null||t===void 0)&&t.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(e){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",e)}renderRightFooterText(e){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",e)}translateCustomFooterTexts(){var e,t,i,o,s;if(this.gridOptions.enableTranslate&&(!((e=this.translaterService)===null||e===void 0)&&e.translate)){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(let l of Object.keys(this.customFooterOptions.metricTexts))if(l.lastIndexOf("Key")>0){let a=l.substring(0,l.lastIndexOf("Key"));this.customFooterOptions.metricTexts[a]=this.translaterService.translate(this.customFooterOptions.metricTexts[l]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||((t=this.locales)===null||t===void 0?void 0:t.TEXT_LAST_UPDATE)||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||((i=this.locales)===null||i===void 0?void 0:i.TEXT_ITEMS)||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||((o=this.locales)===null||o===void 0?void 0:o.TEXT_ITEMS_SELECTED)||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||((s=this.locales)===null||s===void 0?void 0:s.TEXT_OF)||"TEXT_OF")}createFooterContainer(e){let t=N("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}});t.appendChild(N("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`,innerHTML:kt(this.gridOptions,this.customFooterOptions.leftFooterText||"")})),t.appendChild(this.createFooterRightContainer()),this._footerElement=t,e?.appendChild&&this._footerElement&&e.appendChild(this._footerElement)}createFooterRightContainer(){var e,t,i,o,s,l,a,d;let u=N("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(!this._isRightFooterOriginallyEmpty)u.innerHTML=kt(this.gridOptions,this.customFooterOptions.rightFooterText||"");else if(!this.customFooterOptions.hideMetrics){u.classList.add("metrics");let p=N("span",{className:"timestamp"});if(!this.customFooterOptions.hideLastUpdateTimestamp){let f=this.createFooterLastUpdate();f&&p.appendChild(f)}u.appendChild(p),u.appendChild(N("span",{className:"item-count",textContent:`${(t=(e=this.metrics)===null||e===void 0?void 0:e.itemCount)!==null&&t!==void 0?t:"0"}`})),this.customFooterOptions.hideTotalItemCount||(u.appendChild(document.createTextNode(`\r
`)),u.appendChild(N("span",{className:"text-of",textContent:` ${(o=(i=this.customFooterOptions.metricTexts)===null||i===void 0?void 0:i.of)!==null&&o!==void 0?o:"of"} `})),u.appendChild(document.createTextNode(`\r
`)),u.appendChild(N("span",{className:"total-count",textContent:`${(l=(s=this.metrics)===null||s===void 0?void 0:s.totalItemCount)!==null&&l!==void 0?l:"0"}`}))),u.appendChild(document.createTextNode(`\r
`)),u.appendChild(N("span",{className:"text-items",textContent:` ${(d=(a=this.customFooterOptions.metricTexts)===null||a===void 0?void 0:a.items)!==null&&d!==void 0?d:"items"} `}))}return u}createFooterLastUpdate(){var e,t,i,o;let s=(i=(t=(e=this.customFooterOptions)===null||e===void 0?void 0:e.metricTexts)===null||t===void 0?void 0:t.lastUpdate)!==null&&i!==void 0?i:"Last Update",l=Yd((o=this.metrics)===null||o===void 0?void 0:o.endTime).format(this.customFooterOptions.dateFormat),a=N("span");return a.appendChild(N("span",{className:"text-last-update",textContent:s})),a.appendChild(document.createTextNode(`\r
`)),a.appendChild(N("span",{className:"last-update-timestamp",textContent:l})),a.appendChild(N("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),a}registerOnSelectedRowsChangedWhenEnabled(e){var t,i,o,s;if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&e&&!e.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;let a=(s=(i=(t=e.metricTexts)===null||t===void 0?void 0:t.itemsSelected)!==null&&i!==void 0?i:(o=this.locales)===null||o===void 0?void 0:o.TEXT_ITEMS_SELECTED)!==null&&s!==void 0?s:"TEXT_ITEMS_SELECTED";e.leftFooterText=`0 ${a}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(d,u)=>{var p,f,m,_;this._selectedRowCount=u.rows.length;let C=(_=(f=(p=e.metricTexts)===null||p===void 0?void 0:p.itemsSelected)!==null&&f!==void 0?f:(m=this.locales)===null||m===void 0?void 0:m.TEXT_ITEMS_SELECTED)!==null&&_!==void 0?_:"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${C}`})}}};var Qs=class{constructor(e,t,i,o){var s,l,a,d,u;if(this.paginationService=e,this.pubSubService=t,this.sharedService=i,this.translaterService=o,this._enableTranslate=!1,this._subscriptions=[],this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new Rn,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this.currentPagination=this.paginationService.getFullPagination(),this._enableTranslate=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.enableTranslate)!==null&&l!==void 0?l:!1,this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&(!((a=this.pubSubService)===null||a===void 0)&&a.subscribe)){let p=(u=(d=this.translaterService)===null||d===void 0?void 0:d.eventName)!==null&&u!==void 0?u:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(p,()=>this.translatePaginationTexts()))}this._subscriptions.push(this.pubSubService.subscribe("onPaginationRefreshed",p=>{for(let m of Object.keys(p))this.currentPagination[m]=p[m];this.updatePageButtonsUsability();let f=document.querySelector(`.${this.gridUid} span.page-info-from-to`);f?.style&&(f.style.display=this.currentPagination.totalItems===0?"none":"")}))}get availablePageSizes(){return this.paginationService.availablePageSizes||[]}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(e){this.paginationService.changeItemPerPage(e)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}set pageNumber(e){}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions}get gridUid(){var e,t;return(t=(e=this.grid)===null||e===void 0?void 0:e.getUID())!==null&&t!==void 0?t:""}get locales(){var e,t;return(t=(e=this.gridOptions)===null||e===void 0?void 0:e.locales)!==null&&t!==void 0?t:ie.locales}get totalItems(){return this.paginationService.totalItems}get isLeftPaginationDisabled(){return this.pageNumber===1||this.totalItems===0}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||this.totalItems===0}dispose(){this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(e){let t=this.createPaginationContainer(),i=N("div",{className:"slick-pagination-nav"}),o=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-first",aClass:"page-link icon-seek-first",ariaLabel:"First Page"},{liClass:"page-item seek-prev",aClass:"page-link icon-seek-prev",ariaLabel:"Previous Page"}]),s=this.createPageNumberSection(),l=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-next",aClass:"page-link icon-seek-next",ariaLabel:"Next Page"},{liClass:"page-item seek-end",aClass:"page-link icon-seek-end",ariaLabel:"Last Page"}]);t.appendChild(i),i.appendChild(o),i.appendChild(s),i.appendChild(l);let a=this.createPaginationSettingsSection();t.appendChild(i),t.appendChild(a),this._paginationElement.appendChild(t),e?.appendChild&&this._paginationElement&&e.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){let e=document.querySelector(`.${this.gridUid} .items-per-page`);if(e&&Array.isArray(this.availablePageSizes))for(let t of this.availablePageSizes)e.appendChild(N("option",{value:`${t}`,text:`${t}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingHelper.bindEventHandler(".icon-seek-first","click",this.changeToFirstPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-end","click",this.changeToLastPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-next","click",this.changeToNextPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-prev","click",this.changeToPreviousPage.bind(this)),this._bindingHelper.bindEventHandler("select.items-per-page","change",e=>{var t,i;return this.itemsPerPage=+((i=(t=e?.target)===null||t===void 0?void 0:t.value)!==null&&i!==void 0?i:0)})}changeToFirstPage(e){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(e)}changeToLastPage(e){this.isRightPaginationDisabled||this.paginationService.goToLastPage(e)}changeToNextPage(e){this.isRightPaginationDisabled||this.paginationService.goToNextPage(e)}changeToPreviousPage(e){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(e)}changeToCurrentPage(e){this.paginationService.goToPageNumber(+e)}translatePaginationTexts(){var e;if(this._enableTranslate&&(!((e=this.translaterService)===null||e===void 0)&&e.translate)){let t=Et(this.gridOptions);this.textItemsPerPage=this.translaterService.translate(`${t}ITEMS_PER_PAGE`),this.textItems=this.translaterService.translate(`${t}ITEMS`),this.textOf=this.translaterService.translate(`${t}OF`),this.textPage=this.translaterService.translate(`${t}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){let e=N("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),t=N("div",{className:"slick-pagination"});return e.appendChild(t),this._paginationElement=e,t}createPageNavigation(e,t){let i=N("nav",{ariaLabel:e}),o=N("ul",{className:"pagination"});for(let s of t){let l=N("li",{className:s.liClass}),a=N("a",{className:s.aClass});a.setAttribute("aria-label",s.ariaLabel),l.appendChild(a),o.appendChild(l)}return i.appendChild(o),i}createPageNumberSection(){let e=N("div",{className:"slick-page-number"}),t=N("span",{className:"text-page",textContent:"Page"}),i=N("input",{type:"text",className:"form-control page-number",value:"1",size:1,dataset:{test:"page-number-input"}});i.setAttribute("aria-label","Page Number");let o=N("span",{className:"text-of",textContent:"of"}),s=N("span",{className:"page-count",dataset:{test:"page-count"}});return e.appendChild(t),e.appendChild(document.createTextNode(" ")),e.appendChild(i),e.appendChild(document.createTextNode(" ")),e.appendChild(o),e.appendChild(document.createTextNode(" ")),e.appendChild(s),e}createPaginationSettingsSection(){let e=N("span",{className:"slick-pagination-settings"}),t=N("select",{id:"items-per-page-label",className:"items-per-page"});t.setAttribute("aria-label","Items per Page Select");let i=N("span",{className:"text-item-per-page",textContent:"items per page"}),o=N("span",{className:"slick-pagination-count"}),s=N("span",{className:"page-info-from-to"}),l=N("span",{className:"item-from",dataset:{test:"item-from"}});l.setAttribute("aria-label","Page Item From");let a=N("span",{className:"item-to",dataset:{test:"item-to"}});a.setAttribute("aria-label","Page Item To");let d=N("span",{className:"text-of",textContent:"of"}),u=N("span",{className:"page-info-total-items"}),p=N("span",{className:"total-items",dataset:{test:"total-items"}}),f=N("span",{className:"text-items",textContent:"items"});return e.appendChild(t),e.appendChild(document.createTextNode(" ")),e.appendChild(i),e.appendChild(document.createTextNode(", ")),s.appendChild(l),s.appendChild(document.createTextNode("-")),s.appendChild(a),s.appendChild(document.createTextNode(" ")),s.appendChild(d),s.appendChild(document.createTextNode(" ")),o.appendChild(s),e.appendChild(o),u.appendChild(p),u.appendChild(document.createTextNode(" ")),u.appendChild(f),u.appendChild(document.createTextNode(" ")),o.appendChild(u),e}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}};var Zs=class{constructor(){this.className="RxJsResource"}get EMPTY(){return ia}createObservable(){return new Hn}createSubject(){return new mr}firstValueFrom(e){return oa(e)}iif(e,t,i){return ra(e,t,i)}isObservable(e){return lo(e)}of(...e){return Li(...e)}switchMap(e){return zn(e)}takeUntil(e){return la(e)}};var In=(()=>{class r{constructor(t,i,o){this.compFactoryResolver=t,this.appRef=i,this.injector=o}createAngularComponent(t){let i=this.compFactoryResolver.resolveComponentFactory(t).create(this.injector);this.appRef.attachView(i.hostView);let o,s=i.hostView;return s&&Array.isArray(s.rootNodes)&&s.rootNodes[0]&&(o=s.rootNodes[0]),{componentRef:i,domElement:o}}createAngularComponentAppendToDom(t,i,o=!1){let s=this.createAngularComponent(t);return i&&i.appendChild?(o&&i.innerHTML&&(i.innerHTML=""),i.appendChild(s.domElement)):document.body.appendChild(s.domElement),s}}return r.\u0275fac=function(t){return new(t||r)(Rt(ua),Rt(Wn),Rt(aa))},r.\u0275prov=oi({token:r,factory:r.\u0275fac}),r})(),Wu=(()=>{class r{constructor(t){this.angularUtilService=t}get domElement(){return this._domElement}get domContainerElement(){return this._domContainerElement}get gridViewport(){return $(".slick-viewport")}dispose(){this._domElement&&this._domElement.remove&&this._domElement.remove()}dropContainerShow(){this._domContainerElement&&this._domContainerElement.show&&this._domContainerElement.show()}render(t){return new Promise(i=>{let{component:o,args:s,parent:l,offsetTop:a,offsetLeft:d,offsetDropupBottom:u}=t,p=s.cell,f=s.row;if(this._domContainerElement=$(`#myDrop-r${f}-c${p}`),this._domContainerElement){let m=this._domContainerElement.offset(),_=this.angularUtilService.createAngularComponent(o),C=_&&_.componentRef&&_.componentRef.instance;if(C){let b=C.dropdownId||"myDrop",E=C.dropDownToggleId||"dropdownMenu1";this._domElement=$(`#${b}`),this._domElement&&(this.dispose(),Object.assign(C,{parent:l,row:s.row,dataContext:s.grid.getDataItem(s.row)}),setTimeout(()=>{this._domElement=$(_.domElement);let x=(m&&m.top||0)+30+(a||0),R=(m&&m.left||0)+(d||0);this._domElement.appendTo("body"),this._domElement.css("position","absolute"),this._domElement.css("top",x),this._domElement.css("left",R),$(`#${b}`).addClass("open"),$(`#${E}`).hide();let L=35,z=$(".dropdown-menu"),B=z.parent(),G=B.offset()||{},V=G.top||B&&B.length>0&&B[0].offsetTop,H=z.height(),oe=window.innerHeight-H-L<V,ne="0px";if(oe){let xe=u||0;ne="-".concat(`${H+L+xe+5}`,"px")}this._domElement.css({"margin-top":ne});let He=G.left-$(document).width();this._domElement.css({"margin-left":this._domElement.width()+He+60+"px"});try{this._domElement.dropdown("show")}catch{}this._domElement.on("hidden.bs.dropdown",()=>this.dropContainerShow()),this.gridViewport.on("scroll",()=>this.dispose()),this._domElement.on("click",()=>this.dispose()),i(!0)}))}}})}}return r.\u0275fac=function(t){return new(t||r)(Rt(In))},r.\u0275prov=oi({token:r,factory:r.\u0275fac}),r})(),Kd=(()=>{class r{constructor(){this.dependencies=[]}get(t){let i=this.dependencies.find(o=>o.key===t);return i?.instance?i.instance:null}dispose(){this.dependencies=[]}registerInstance(t,i){this.dependencies.some(s=>s.key===t)||this.dependencies.push({key:t,instance:i})}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=oi({token:r,factory:r.\u0275fac}),r})(),jd=(()=>{class r{constructor(t){this.translateService=t}getCurrentLanguage(){return this.translateService?.currentLang??""}use(t){return Ot(this,null,function*(){return this.translateService?.use?.(t)})}translate(t){return this.translateService?.instant?.(t||" ")}}return r.\u0275fac=function(t){return new(t||r)(Rt(ar,8))},r.\u0275prov=oi({token:r,factory:r.\u0275fac}),r})();var Ql="container_",Xd="container_loading",ea=class extends js{constructor(e,t,i,o,s){super(),this.angularUtilService=e,this.appRef=t,this.eventPubSubService=i,this.gridContainerElement=o,this.rxjs=s,this._views=[],this._subscriptions=[]}get addonOptions(){return this.getOptions()}get datasetIdPropName(){return this.gridOptions.datasetIdPropertyName||"id"}get eventHandler(){return this._eventHandler}set eventHandler(e){this._eventHandler=e}get gridOptions(){return this._grid?.getOptions()||{}}get rowDetailViewOptions(){return this.gridOptions.rowDetailView}addRxJsResource(e){this.rxjs=e}dispose(){this.disposeAllViewComponents(),this._subscriptions=Eo(this._subscriptions),super.dispose()}disposeAllViewComponents(){this._views.forEach(e=>this.disposeViewComponent(e)),this._views=[]}getAddonInstance(){return this}init(e){this._grid=e,super.init(this._grid),this.register(e?.getSelectionModel())}register(e){if(typeof this.gridOptions.rowDetailView?.process=="function")this._userProcessFn=this.gridOptions.rowDetailView.process,this.gridOptions.rowDetailView.process=t=>this.onProcessing(t);else throw new Error('[Angular-Slickgrid] You need to provide a "process" function for the Row Detail Extension to work properly');return this._grid&&this.gridOptions?.rowDetailView&&(this.gridOptions.rowDetailView.preTemplate||(this._preloadComponent=this.gridOptions?.rowDetailView?.preloadComponent,this.gridOptions.rowDetailView.preTemplate=()=>Jl.sanitize(`<div class="${Xd}"></div>`)),this.gridOptions.rowDetailView.postTemplate||(this._viewComponent=this.gridOptions?.rowDetailView?.viewComponent,this.gridOptions.rowDetailView.postTemplate=t=>Jl.sanitize(`<div class="${Ql}${t[this.datasetIdPropName]}"></div>`)),(!e||!this._grid.getSelectionModel())&&(e=new Zi(this.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this._grid.setSelectionModel(e)),this._grid&&this.rowDetailViewOptions&&(this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this),this.onAsyncResponse&&this._eventHandler.subscribe(this.onAsyncResponse,(t,i)=>{this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAsyncResponse=="function"&&this.rowDetailViewOptions.onAsyncResponse(t,i)}),this.onAsyncEndUpdate&&this._eventHandler.subscribe(this.onAsyncEndUpdate,(t,i)=>{this.renderViewModel(i?.item),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAsyncEndUpdate=="function"&&this.rowDetailViewOptions.onAsyncEndUpdate(t,i)}),this.onAfterRowDetailToggle&&this._eventHandler.subscribe(this.onAfterRowDetailToggle,(t,i)=>{this.renderPreloadView(),this.renderAllViewComponents(),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onAfterRowDetailToggle=="function"&&this.rowDetailViewOptions.onAfterRowDetailToggle(t,i)}),this.onBeforeRowDetailToggle&&this._eventHandler.subscribe(this.onBeforeRowDetailToggle,(t,i)=>{this.handleOnBeforeRowDetailToggle(t,i),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onBeforeRowDetailToggle=="function"&&this.rowDetailViewOptions.onBeforeRowDetailToggle(t,i)}),this.onRowBackToViewportRange&&this._eventHandler.subscribe(this.onRowBackToViewportRange,(t,i)=>{this.handleOnRowBackToViewportRange(t,i),this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onRowBackToViewportRange=="function"&&this.rowDetailViewOptions.onRowBackToViewportRange(t,i)}),this.onRowOutOfViewportRange&&this._eventHandler.subscribe(this.onRowOutOfViewportRange,(t,i)=>{this.rowDetailViewOptions&&typeof this.rowDetailViewOptions.onRowOutOfViewportRange=="function"&&this.rowDetailViewOptions.onRowOutOfViewportRange(t,i)}),this._eventHandler.subscribe(this._grid.onColumnsReordered,this.redrawAllViewComponents.bind(this)),(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,this.redrawAllViewComponents.bind(this)),this._eventHandler.subscribe(this._grid.onSort,this.disposeAllViewComponents.bind(this)),this._subscriptions.push(this.eventPubSubService?.subscribe("onFilterChanged",this.redrawAllViewComponents.bind(this)),this.eventPubSubService?.subscribe("onGridMenuClearAllFilters",()=>setTimeout(()=>this.redrawAllViewComponents())),this.eventPubSubService?.subscribe("onGridMenuClearAllSorting",()=>setTimeout(()=>this.redrawAllViewComponents()))))),this}redrawAllViewComponents(){this._views.forEach(e=>{this.redrawViewComponent(e)})}renderAllViewComponents(){this._views.forEach(e=>{e&&e.dataContext&&this.renderViewModel(e.dataContext)})}redrawViewComponent(e){let t=this.gridContainerElement.getElementsByClassName(`${Ql}${e.id}`);t&&t.length>=0&&this.renderViewModel(e.dataContext)}renderPreloadView(){let e=this.gridContainerElement.getElementsByClassName(`${Xd}`);e&&e.length>=0&&this.angularUtilService.createAngularComponentAppendToDom(this._preloadComponent,e[e.length-1],!0)}renderViewModel(e){let t=this.gridContainerElement.getElementsByClassName(`${Ql}${e[this.datasetIdPropName]}`);if(t&&t.length>0){let i=this.angularUtilService.createAngularComponentAppendToDom(this._viewComponent,t[t.length-1],!0);if(i&&i.componentRef&&i.componentRef.instance){Object.assign(i.componentRef.instance,{model:e,addon:this,grid:this._grid,dataView:this.dataView,parent:this.rowDetailViewOptions&&this.rowDetailViewOptions.parent});let o=this._views.find(s=>s.id===e[this.datasetIdPropName]);return o&&(o.componentRef=i.componentRef),o}}}disposeViewComponent(e){let t=e?.componentRef;if(t)return this.appRef.detachView(t.hostView),t?.destroy&&t.destroy(),e}notifyTemplate(e){this.onAsyncResponse&&this.onAsyncResponse.notify({item:e},void 0,this)}onProcessing(e){return Ot(this,null,function*(){if(e&&typeof this._userProcessFn=="function"){let t,o=yield this._userProcessFn(e);if(o.hasOwnProperty(this.datasetIdPropName)?t=o:(o&&o instanceof Hn||o instanceof Promise)&&(t=yield jn(this.rxjs,o)),!t||!t.hasOwnProperty(this.datasetIdPropName))throw new Error(`[Angular-Slickgrid] could not process the Row Detail, you must make sure that your "process" callback
          (a Promise or an HttpClient call returning an Observable) returns an item object that has an "${this.datasetIdPropName}" property`);this.notifyTemplate(t||{})}})}handleOnBeforeRowDetailToggle(e,t){if(t&&t.item&&t.item.__collapsed){let i={id:t.item[this.datasetIdPropName],dataContext:t.item},o=this.gridOptions.datasetIdPropertyName||"id";Cl(this._views,i,o)}else{let i=this._views.findIndex(o=>o.id===t.item[this.datasetIdPropName]);if(i>=0&&this._views.hasOwnProperty(i)){let o=this._views[i].componentRef;o&&(this.appRef.detachView(o.hostView),o.destroy()),this._views.splice(i,1)}}}handleOnRowBackToViewportRange(e,t){t?.item&&this.redrawAllViewComponents()}},Zl={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel"},columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:qd},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCopyCellValueCommand:"fa fa-clone",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED",of:"of",ofKey:"OF"}},dataView:{syncGridSelection:!0,syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Sn.input,defaultBackendServiceFilterTypingDebounce:500,defaultColumnSortFieldId:"id",defaultFilterPlaceholder:"\u{1F50E}\uFE0E",defaultFilterRangeOperator:ue.rangeInclusive,editable:!1,enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!0,enableExport:!1,enableFilterTrimWhiteSpace:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:si.camelCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:_i.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2B9E",groupExpandedSymbol:"\u2B9F",groupingAggregatorRowText:"",sanitizeDataExport:!1},exportOptions:{delimiter:Vi.comma,exportWithFormatter:!1,filename:"export",format:_i.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},filterTypingDebounce:0,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:0,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars",iconClearAllFiltersCommand:"fa fa-filter text-danger",iconClearAllSortingCommand:"fa fa-unsorted text-danger",iconClearFrozenColumnsCommand:"fa fa-times",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download",iconRefreshDatasetCommand:"fa fa-refresh",iconToggleFilterCommand:"fa fa-random",iconTogglePreHeaderCommand:"fa fa-random",menuWidth:16,resizeOnShowHeaderRow:!0,headerColumnValueExtractor:qd},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"fa fa-filter text-danger",iconClearSortCommand:"fa fa-unsorted",iconFreezeColumns:"fa fa-thumb-tack",iconSortAscCommand:"fa fa-sort-amount-asc",iconSortDescCommand:"fa fa-sort-amount-desc",iconColumnHideCommand:"fa fa-times",iconColumnResizeByContentCommand:"fa fa-arrows-h",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},headerRowHeight:35,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!0,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1},rowHeight:35,topPanelHeight:35,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\u034F\xB7"}};function qd(r){let e=r&&r.columnGroup||"";return e?e+" - "+r.name:r&&r.name||""}var Gu=(()=>{class r{}return r.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},r.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},r.VALIDATION_REQUIRED_FIELD="Field is required",r.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",r.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",r.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",r.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",r.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",r.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",r.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",r.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",r.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",r.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",r.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",r.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)",r})(),Qd=(()=>{class r{constructor(t,i,o,s,l,a,d,u,p){this.angularUtilService=t,this.appRef=i,this.cd=o,this.containerService=s,this.elm=l,this.translate=a,this.translaterService=d,this.forRootConfig=u,this._currentDatasetLength=0,this._eventHandler=new Slick.EventHandler,this._hideHeaderRowAfterPageLoad=!1,this._isGridInitialized=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isPaginationInitialized=!1,this._isLocalGrid=!0,this._registeredResources=[],this.groupingDefinition={},this.showPagination=!1,this.serviceList=[],this.totalItems=0,this.subscriptions=[],this.gridId="";let f=new sr;this._eventPubSubService=p?.eventPubSubService??new Or(this.elm.nativeElement),this._eventPubSubService.eventNamingStyle=si.camelCase,this.backendUtilityService=p?.backendUtilityService??new Gn,this.gridEventService=p?.gridEventService??new fs,this.sharedService=p?.sharedService??new Cs,this.collectionService=p?.collectionService??new fn(this.translaterService),this.extensionUtility=p?.extensionUtility??new Gr(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new Ds(f,this.translaterService,this.collectionService),this.filterService=p?.filterService??new cs(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=p?.resizerService??new _s(this._eventPubSubService),this.sortService=p?.sortService??new bs(this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=p?.treeDataService??new ws(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=p?.paginationService??new vs(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=p?.extensionService??new rs(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService),this.gridStateService=p?.gridStateService??new ms(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=p?.gridService??new ps(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=p?.groupingAndColspanService??new gs(this.extensionUtility,this._eventPubSubService),this.serviceList=[this.containerService,this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.groupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.containerService.registerInstance("FilterService",this.filterService),this.containerService.registerInstance("CollectionService",this.collectionService),this.containerService.registerInstance("ExtensionService",this.extensionService),this.containerService.registerInstance("GridEventService",this.gridEventService),this.containerService.registerInstance("GridService",this.gridService),this.containerService.registerInstance("GridStateService",this.gridStateService),this.containerService.registerInstance("GroupingAndColspanService",this.groupingService),this.containerService.registerInstance("PaginationService",this.paginationService),this.containerService.registerInstance("ResizerService",this.resizerService),this.containerService.registerInstance("SharedService",this.sharedService),this.containerService.registerInstance("SortService",this.sortService),this.containerService.registerInstance("EventPubSubService",this._eventPubSubService),this.containerService.registerInstance("PubSubService",this._eventPubSubService),this.containerService.registerInstance("TranslaterService",this.translaterService),this.containerService.registerInstance("TreeDataService",this.treeDataService)}get paginationOptions(){return this._paginationOptions}set paginationOptions(t){t&&this._paginationOptions?this._paginationOptions=P(P(P({},this.gridOptions.pagination),this._paginationOptions),t):this._paginationOptions=t,this.gridOptions.pagination=this._paginationOptions??this.gridOptions.pagination,this.paginationService.updateTotalItems(this.gridOptions.pagination?.totalItems??0,!0)}set columnDefinitions(t){this._columnDefinitions=t,this._isGridInitialized&&this.updateColumnDefinitionsList(t),t.length>0&&this.copyColumnWidthsReference(t)}get columnDefinitions(){return this._columnDefinitions}get dataset(){return(this.customDataView?this.slickGrid?.getData?.():this.dataView?.getItems?.())||[]}set dataset(t){let i=this._currentDatasetLength,o=ti(t,this._dataset||[]),s=t;this.slickGrid&&this.gridOptions?.enableTreeData&&Array.isArray(t)&&(t.length>0||t.length!==i||!o)&&(this._isDatasetHierarchicalInitialized=!1,s=this.sortTreeDataset(t,!o)),this._dataset=s,this.refreshGridData(s||[]),this._currentDatasetLength=(t||[]).length,this.gridOptions?.autoFitColumnsOnFirstLoad&&i===0&&this.slickGrid.autosizeColumns()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(t){let i=ti(t,this.sharedService?.hierarchicalDataset??[]),o=this._currentDatasetLength;this.sharedService.hierarchicalDataset=t,t&&this.columnDefinitions&&this.filterService?.clearFilters&&this.filterService.clearFilters(),t&&this.slickGrid&&this.sortService?.processTreeDataInitialSort&&(this.dataView.setItems([],this.gridOptions.datasetIdPropertyName??"id"),this.sortService.processTreeDataInitialSort(),setTimeout(()=>{let s=this.dataView.getItemCount();s>0&&(s!==o||!i)&&this.filterService.refreshTreeDataFilters()}),this._isDatasetHierarchicalInitialized=!0)}get elementRef(){return this.elm}get eventHandler(){return this._eventHandler}get gridContainerElement(){return document.querySelector(`#${this.gridOptions.gridContainerId||""}`)}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(t){this._isDatasetInitialized=t}set isDatasetHierarchicalInitialized(t){this._isDatasetHierarchicalInitialized=t}get registeredResources(){return this._registeredResources}ngAfterViewInit(){if(!this.gridOptions||!this.columnDefinitions)throw new Error("Using `<angular-slickgrid>` requires [gridOptions] and [columnDefinitions], it seems that you might have forgot to provide them since at least of them is undefined.");if(this.initialization(this._eventHandler),this._isGridInitialized=!0,this.gridOptions&&this.gridOptions.enableEmptyDataWarningMessage&&Array.isArray(this.dataset)){let t=this.dataset.length;this.displayEmptyDataWarning(t<1)}}ngOnDestroy(){this._eventPubSubService.publish("onBeforeGridDestroy",this.slickGrid),this.destroy(),this._eventPubSubService.publish("onAfterGridDestroyed",!0)}destroy(t=!1){if(this.serviceList.forEach(i=>{i&&i.dispose&&i.dispose()}),this.serviceList=[],Array.isArray(this._registeredResources)){for(;this._registeredResources.length>0;){let i=this._registeredResources.pop();i?.dispose&&i.dispose()}this._registeredResources=[]}if(this.slickEmptyWarning?.dispose(),this.slickFooter?.dispose(),this.slickPagination?.dispose(),this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this._eventPubSubService?.unsubscribeAll(),this.dataView&&(this.dataView?.setItems&&this.dataView.setItems([]),this.dataView.destroy&&this.dataView.destroy()),this.slickGrid?.destroy&&this.slickGrid.destroy(t),this.backendServiceApi){for(let i of Object.keys(this.backendServiceApi))delete this.backendServiceApi[i];this.backendServiceApi=void 0}for(let i of Object.keys(this.columnDefinitions))this.columnDefinitions[i]=null;for(let i of Object.keys(this.sharedService))this.sharedService[i]=null;t&&this.emptyGridContainerElm(),this.subscriptions=Eo(this.subscriptions),this._dataset=null,this.datasetHierarchical=void 0,this._columnDefinitions=[],this._angularGridInstances=void 0,this.slickGrid=void 0}emptyGridContainerElm(){let t=this.gridOptions?.gridContainerId??"grid1",i=document.querySelector(`#${t}`);Ve(i)}createBackendApiInternalPostProcessCallback(t){let i=t&&t.backendServiceApi;if(i&&i.service){let o=i.service;typeof o.getDatasetName=="function"&&(i.internalPostProcess=s=>{let l=i&&o&&typeof o.getDatasetName=="function"?o.getDatasetName():"";if(s?.data[l]){let a=s.data[l].hasOwnProperty("nodes")?s.data[l].nodes:s.data[l],d=s.data[l].hasOwnProperty("totalCount")?s.data[l].totalCount:s.data[l].length;this.refreshGridData(a,d||0)}})}}initialization(t){if(this.gridOptions.translater=this.translaterService,this._eventHandler=t,this.gridOptions&&(this.gridOptions.frozenRow!==void 0&&this.gridOptions.frozenRow>=0||this.gridOptions.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0)&&this.gridOptions.enableMouseWheelScrollHandler===void 0&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._eventPubSubService.eventNamingStyle=this.gridOptions?.eventNamingStyle??si.camelCase,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._dataset=this._dataset||[],this.gridOptions=this.mergeGridOptions(this.gridOptions),this._paginationOptions=this.gridOptions?.pagination,this.locales=this.gridOptions?.locales??Gu.locales,this.backendServiceApi=this.gridOptions?.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.createBackendApiInternalPostProcessCallback(this.gridOptions),!this.customDataView){let s={inlineFilters:this.gridOptions.dataView&&this.gridOptions.dataView.inlineFilters||!1};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new bn,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,s=Me(P({},s),{groupItemMetadataProvider:this.groupItemMetadataProvider})),this.dataView=new Slick.Data.DataView(s),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions),this.gridOptions.autoAddCustomEditorFormatter&&$a(this._columnDefinitions,this.gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),this.gridOptions.presets?.pinning&&(this.gridOptions=P(P({},this.gridOptions),this.gridOptions.presets.pinning)),this.slickGrid=new Slick.Grid(`#${this.gridId}`,this.customDataView||this.dataView,this._columnDefinitions,this.gridOptions),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.slickGrid,this.sharedService.gridContainerElement=this.elm.nativeElement,this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.slickGrid,this.gridOptions,this.dataView);let i=this.gridOptions.frozenColumn!==void 0?this.gridOptions.frozenColumn:-1;if(i>=0&&i<=this._columnDefinitions.length&&(this.sharedService.frozenVisibleColumnId=this._columnDefinitions[i].id||""),this.registerResources(),this.slickGrid.init(),this.gridContainerElement&&this.resizerService.init(this.slickGrid,this.gridContainerElement),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&this.gridContainerElement&&(this.slickFooter=new Ks(this.slickGrid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(this.gridContainerElement)),!this.customDataView&&this.dataView){let o=this.gridOptions?.enableTreeData?this.sortTreeDataset(this._dataset):this._dataset;if(this.dataView.beginUpdate(),this.dataView.setItems(o||[],this.gridOptions.datasetIdPropertyName??"id"),this.dataView.endUpdate(),this.slickGrid?.getSelectionModel()&&this.gridOptions&&this.gridOptions.dataView&&this.gridOptions.dataView.hasOwnProperty("syncGridSelection")){let l=!1;this.gridOptions.backendServiceApi&&this.gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(l=this.gridOptions.dataView.syncGridSelectionWithBackendService);let a=this.gridOptions.dataView.syncGridSelection;if(typeof a=="boolean"){let d=a;this._isLocalGrid||(d=a&&l),this.dataView.syncGridSelection(this.slickGrid,d)}else typeof a=="object"&&this.dataView.syncGridSelection(this.slickGrid,a.preserveHidden,a.preserveHiddenOnSelectionChange)}(this.dataView.getLength()||this._dataset&&this._dataset.length||0)>0&&(!this._isDatasetInitialized&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this._eventPubSubService.publish("onGridCreated",this.slickGrid),this.customDataView||this.executeAfterDataviewCreated(this.slickGrid,this.gridOptions),this.bindResizeHook(this.slickGrid,this.gridOptions),this.gridOptions?.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this.gridOptions?.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(this.dataset)),this._angularGridInstances={dataView:this.dataView,slickGrid:this.slickGrid,extensions:this.extensionService?.extensionList,destroy:this.destroy.bind(this),backendService:this.gridOptions?.backendServiceApi?.service,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService},this._eventPubSubService.publish("onAngularGridCreated",this._angularGridInstances)}paginationChanged(t){!(this.gridStateService?.needToPreserveRowSelection()??!1)&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.slickGrid.setSelectedRows([]);let{pageNumber:o,pageSize:s}=t;this.sharedService&&s!==void 0&&o!==void 0&&(this.sharedService.currentPagination={pageNumber:o,pageSize:s}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:o,pageSize:s},type:Kt.pagination},gridState:this.gridStateService.getCurrentGridState()}),this.cd.markForCheck()}refreshGridData(t,i){if(this.gridOptions&&this.gridOptions.enableEmptyDataWarningMessage&&Array.isArray(t)){let o=i||t.length;this.displayEmptyDataWarning(o<1)}if(Array.isArray(t)&&this.slickGrid&&this.dataView?.setItems){if(this.dataView.setItems(t,this.gridOptions.datasetIdPropertyName??"id"),!this.gridOptions.backendServiceApi&&!this.gridOptions.enableTreeData&&this.dataView.reSort(),t.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),t&&this.slickGrid.invalidate(),this.showPagination=!!(this.gridOptions&&(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&this.gridOptions.enablePagination===void 0)),this._paginationOptions&&this.gridOptions?.pagination&&this.gridOptions?.backendServiceApi){let o=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions),s=i!==void 0?i:this.gridOptions?.pagination?.totalItems;s!==void 0&&s!==this.totalItems&&(this.totalItems=+s),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(o)}if(this.slickGrid&&this.gridOptions.enableAutoResize){let o=this.gridOptions.autoResize&&this.gridOptions.autoResize.delay;this.resizerService.resizeGrid(o||10)}}}setPaginationOptionsWhenPresetDefined(t,i){return t.presets?.pagination&&i&&!this._isPaginationInitialized&&(i.pageSize=t.presets.pagination.pageSize,i.pageNumber=t.presets.pagination.pageNumber),i}updateColumnDefinitionsList(t){t=this.swapInternalEditorToSlickGridFactoryEditor(t),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,t):this.extensionService.renderColumnHeaders(t,!0),this.gridOptions?.enableAutoSizeColumns?this.slickGrid.autosizeColumns():this.gridOptions?.enableAutoResizeColumnsByCellContent&&this.resizerService?.resizeColumnsByCellContent&&this.resizerService.resizeColumnsByCellContent()}showHeaderRow(t=!0){return this.slickGrid.setHeaderRowVisibility(t,!1),t===!0&&this._isGridInitialized&&this.slickGrid.setColumns(this.columnDefinitions),t}copyColumnWidthsReference(t){t.forEach(i=>i.originalWidth=i.width)}displayEmptyDataWarning(t=!0){this.slickEmptyWarning?.showEmptyDataMessage(t)}bindDifferentHooks(t,i,o){if(this.translate?.onLangChange&&(i.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys()),this.subscriptions.push(this.translate.onLangChange.subscribe(()=>{this._eventPubSubService.publish("onLanguageChange"),i.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),i.createPreHeaderPanel&&!i.enableDraggableGrouping&&this.groupingService.translateGroupingAndColSpan())}))),i.backendServiceApi){let s=i.backendServiceApi;s?.service?.init&&s.service.init(s.options,i.pagination,this.slickGrid,this.sharedService)}if(o&&t){let s=this.gridOptions?.defaultSlickgridEventPrefix??"";for(let l in t)if(t.hasOwnProperty(l)&&l.startsWith("on")){let a=this._eventPubSubService.getEventNameByNamingConvention(l,s);this._eventHandler.subscribe(t[l],(d,u)=>this._eventPubSubService.dispatchCustomEvent(a,{eventData:d,args:u}))}for(let l in o)o.hasOwnProperty(l)&&l.startsWith("on")&&this._eventHandler.subscribe(o[l],(a,d)=>{let u=this._eventPubSubService.getEventNameByNamingConvention(l,s);return this._eventPubSubService.dispatchCustomEvent(u,{eventData:a,args:d})});this.gridEventService.bindOnCellChange(t),this.gridEventService.bindOnClick(t),o&&t&&(i.enableSorting&&(i.backendServiceApi&&!i.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(t):this.sortService.bindLocalOnSort(t)),i.enableFiltering&&(this.filterService.init(t),i.backendServiceApi&&!i.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(t):this.filterService.bindLocalOnFilter(t)),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized(),this._eventHandler.subscribe(o.onRowCountChanged,()=>{t.invalidate(),this.handleOnItemCountChanged(o.getFilteredItemCount()||0,o.getItemCount()||0)}),this._eventHandler.subscribe(o.onSetItemsCalled,(l,a)=>{this.handleOnItemCountChanged(o.getFilteredItemCount()||0,a.itemCount),a.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!this.gridOptions?.resizeByContentOnlyOnFirstLoad)}),i?.enableFiltering&&!i.enableRowDetailView&&this._eventHandler.subscribe(o.onRowsChanged,(l,a)=>{a?.rows&&Array.isArray(a.rows)&&(a.rows.forEach(d=>t.updateRow(d)),t.render())}))}i&&i.colspanCallback&&o&&o.getItem&&o.getItemMetadata&&(o.getItemMetadata=s=>{let l=null;return i.colspanCallback&&i.colspanCallback&&(l=i.colspanCallback(o.getItem(s))),l})}bindBackendCallbackFunctions(t){let i=t.backendServiceApi,o=i&&i.service,s=o?.options??{},l=s?s&&s.hasOwnProperty("executeProcessCommandOnInit")?s.executeProcessCommandOnInit:!0:!1;if(o){if(t&&t.presets){if(o.updateFilters&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&o.updateFilters(t.presets.filters,!0),o.updateSorters&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0){let a=this.gridOptions.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);o.updateSorters(void 0,a)}if(o.updatePagination&&t.presets.pagination){let{pageNumber:a,pageSize:d}=t.presets.pagination;o.updatePagination(a,d)}}else{let a=this.filterService.getColumnFilters();a&&o.updateFilters&&o.updateFilters(a,!1)}if(i&&o&&(i.onInit||l)){let a=typeof o.buildQuery=="function"?o.buildQuery():"",d=l?i.process&&i.process(a)||null:i.onInit&&i.onInit(a)||null;setTimeout(()=>{let u=this.backendUtilityService,p=new Date;i.preProcess&&i.preProcess();let f=this.gridOptions?.pagination?.totalItems??0;d instanceof Promise?d.then(m=>u.executeBackendProcessesCallback(p,m,i,f)).catch(m=>u.onBackendError(m,i)):d&&this.rxjs?.isObservable(d)&&this.subscriptions.push(d.subscribe({next:m=>u.executeBackendProcessesCallback(p,m,i,f),error:m=>u.onBackendError(m,i)}))})}}}bindResizeHook(t,i){if(i.autoFitColumnsOnFirstLoad&&i.autosizeColumnsByCellContentOnFirstLoad||i.enableAutoSizeColumns&&i.enableAutoResizeColumnsByCellContent)throw new Error('[Angular-Slickgrid] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');t&&i.autoFitColumnsOnFirstLoad&&i.enableAutoSizeColumns&&t.autosizeColumns(),i.gridHeight||i.gridWidth?this.resizerService.resizeGrid(0,{height:i.gridHeight,width:i.gridWidth}):this.resizerService.resizeGrid(),i.enableAutoResize&&t&&i.autoFitColumnsOnFirstLoad&&i.enableAutoSizeColumns&&t.autosizeColumns()}executeAfterDataviewCreated(t,i){if(i.enableSorting&&i.presets&&Array.isArray(i.presets.sorters)){let o=this.gridOptions.multiColumnSort?i.presets.sorters:i.presets.sorters.slice(0,1);this.sortService.loadGridSorters(o)}}handleOnItemCountChanged(t,i){this._currentDatasetLength=i,this.metrics={startTime:new Date,endTime:new Date,itemCount:t,totalItemCount:i},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&this.gridOptions?.enableEmptyDataWarningMessage&&this.displayEmptyDataWarning(t===0)}initializePaginationService(t){this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.slickGrid,t,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",i=>{this.paginationChanged(i)}),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",i=>{this.showPagination=i?.visible??!1,this.gridOptions?.backendServiceApi&&this.backendUtilityService?.refreshBackendDataset(this.gridOptions),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0),this.cd.detectChanges()}loadEditorCollectionAsync(t){let i=t&&t.editor&&t.editor.collectionAsync;i instanceof Hn?this.subscriptions.push(i.subscribe(o=>this.updateEditorCollection(t,o))):i instanceof Promise&&i.then(o=>{Array.isArray(o)&&this.updateEditorCollection(t,o)})}loadColumnPresetsWhenDatasetInitialized(){if(this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){let t=this.gridStateService.getAssociatedGridColumns(this.slickGrid,this.gridOptions.presets.columns);if(t&&Array.isArray(t)&&t.length>0){if(this.gridOptions.enableCheckboxSelector){let i=Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0?this._columnDefinitions[0]:null;i&&i.id==="_checkbox_selector"&&t[0].id!=="_checkbox_selector"&&t.unshift(i)}t.forEach(i=>i.originalWidth=i.width),this.slickGrid.setColumns(t),this.sharedService.visibleColumns=t}}}loadFilterPresetsWhenDatasetInitialized(){this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&(Array.isArray(this.gridOptions.presets.filters)||Array.isArray(this.gridOptions.presets?.treeData?.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(this.gridOptions.presets?.filters||[])}loadLocalGridPagination(t){if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(t)?t.length:0,this._paginationOptions&&this.dataView?.getPagingInfo){let o=this.dataView.getPagingInfo();o?.hasOwnProperty("totalRows")&&this._paginationOptions.totalItems!==o.totalRows&&(this.totalItems=o.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;let i=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(i)}}loadRowSelectionPresetWhenExists(){let t=this.gridOptions?.presets;if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.slickGrid?.getSelectionModel()&&t?.rowSelection&&(Array.isArray(t.rowSelection.gridRowIndexes)||Array.isArray(t.rowSelection.dataContextIds))){let o=t.rowSelection.dataContextIds,s=t.rowSelection.gridRowIndexes;Array.isArray(o)&&o.length>0?s=this.dataView.mapIdsToRows(o)||[]:Array.isArray(s)&&s.length>0&&(o=this.dataView.mapRowsToIds(s)||[]),this.gridStateService.selectedRowDataContextIds=o,(this._isLocalGrid&&!this.gridOptions.enablePagination||!this._isLocalGrid)&&setTimeout(()=>{this.slickGrid&&Array.isArray(s)&&this.slickGrid.setSelectedRows(s)})}}mergeGridOptions(t){t.gridId=this.gridId,t.gridContainerId=`slickGridContainer-${this.gridId}`,t.enablePagination=(t.backendServiceApi&&t.enablePagination===void 0?!0:t.enablePagination)||!1;let i=$.extend(!0,{},Zl,this.forRootConfig,t);return i?.pagination&&(t.enablePagination||t.backendServiceApi)&&(this.forRootConfig.pagination||t.pagination)&&(i.pagination.pageSize=t.pagination?.pageSize??this.forRootConfig.pagination?.pageSize??Zl.pagination.pageSize,i.pagination.pageSizes=t.pagination?.pageSizes??this.forRootConfig.pagination?.pageSizes??Zl.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=i.showHeaderRow===!1,i.enableFiltering&&!i.showHeaderRow&&(i.showHeaderRow=i.enableFiltering),i&&!i.enableFiltering&&i.enablePagination&&this._isLocalGrid&&(i.enableFiltering=!0,i.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),i}preRegisterResources(){this._registeredResources=this.gridOptions.registerExternalResources||[],this.registerRxJsResource(new Zs),this.gridOptions.enableRowDetailView&&(this.slickRowDetailView=new ea(this.angularUtilService,this.appRef,this._eventPubSubService,this.elm.nativeElement,this.rxjs),this.slickRowDetailView.create(this.columnDefinitions,this.gridOptions),this._registeredResources.push(this.slickRowDetailView),this.extensionService.addExtensionToList(Le.rowDetailView,{name:Le.rowDetailView,instance:this.slickRowDetailView}))}registerResources(){if(Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new Xs,this._registeredResources.push(this.slickEmptyWarning),Array.isArray(this._registeredResources))for(let t of this._registeredResources)this.slickGrid&&typeof t.init=="function"&&t.init(this.slickGrid,this.containerService)}registerRxJsResource(t){this.rxjs=t,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.containerService.registerInstance("RxJsResource",this.rxjs)}renderPagination(t=!0){this.gridOptions?.enablePagination&&!this._isPaginationInitialized&&t?(this.slickPagination=new Qs(this.paginationService,this._eventPubSubService,this.sharedService,this.translaterService),this.slickPagination.renderPagination(this.gridContainerElement),this._isPaginationInitialized=!0):t||(this.slickPagination&&this.slickPagination.dispose(),this._isPaginationInitialized=!1)}sortTreeDataset(t,i=!1){let o=this._currentDatasetLength,s,l=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(s=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),l=s.flat):Array.isArray(t)&&t.length>0&&(this.gridOptions?.treeDataOptions?.initialSort?(s=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t,this._columnDefinitions,this.gridOptions),this.sharedService.hierarchicalDataset=s.hierarchical,l=s.flat):(this.sharedService.hierarchicalDataset=this.treeDataService.convertFlatParentChildToTreeDataset(t,this.gridOptions),l=t||[])),t.length>0&&(i||t.length!==o)&&this.filterService.refreshTreeDataFilters(l),l}swapInternalEditorToSlickGridFactoryEditor(t){return t.some(i=>`${i.id}`.includes("."))&&console.error('[Angular-Slickgrid] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),t.map(i=>(i&&i.editor&&i.editor.collectionAsync&&this.loadEditorCollectionAsync(i),Me(P({},i),{editor:i.editor&&i.editor.model,internalColumnEditor:P({},i.editor)})))}translateColumnHeaderTitleKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")}translateColumnGroupKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")}updateEditorCollection(t,i){if(t.editor.collection=i,t.editor.disabled=!1,Array.isArray(this.columnDefinitions)){let s=this.columnDefinitions.find(l=>l.id===t.id);s&&(s.internalColumnEditor=t.editor)}let o=this.slickGrid.getCellEditor();o?.disable&&o?.renderDomElement&&(o.destroy(),o.disable(!1),o.renderDomElement(i))}}return r.\u0275fac=function(t){return new(t||r)(ri(In),ri(Wn),ri(dl),ri(Kd),ri(al),ri(ar,8),ri(jd,8),ri("config"),ri("externalService"))},r.\u0275cmp=nn({type:r,selectors:[["angular-slickgrid"]],inputs:{customDataView:"customDataView",gridId:"gridId",gridOptions:"gridOptions",paginationOptions:"paginationOptions",columnDefinitions:"columnDefinitions",dataset:"dataset",datasetHierarchical:"datasetHierarchical"},features:[ma([In,Wn,jd])],decls:2,vars:3,consts:[[1,"gridPane",3,"id"],[1,"slickgrid-container",2,"width","100%"]],template:function(t,i){t&1&&(sn(0,"div",0),vr(1,"div",1),ln()),t&2&&(fa("id","slickGridContainer-",i.gridId,""),da(),ca("id",i.gridId))},encapsulation:2}),r})(),Zd=(()=>{class r{static forRoot(t={}){return{ngModule:r,providers:[{provide:"config",useValue:t},{provide:"externalService",useValue:null},In,Wu,Kd]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=rn({type:r}),r.\u0275inj=on({imports:[[_r,Gd]]}),r})();var ur=Oi(lu());var eu=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=nn({type:e,selectors:[["app-layout-loading-animation"]],decls:3,vars:0,consts:[[1,"loading-bar-container"],[1,"loading-bar"],[1,"loading-bar-shimmer"]],template:function(o,s){o&1&&(sn(0,"div",0)(1,"div",1),vr(2,"div",2),ln()())},styles:[".loading-bar-container[_ngcontent-%COMP%]{width:100%;height:12px;background-color:#e0e0e0;border-radius:6px;overflow:hidden;position:relative}.loading-bar[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,#3498db,#4caf50,#3498db);background-size:200% 100%;animation:_ngcontent-%COMP%_loadingBarGradient 2s infinite linear;border-radius:6px}.loading-bar-shimmer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:20%;height:100%;background:linear-gradient(90deg,#fff0,#fff9,#fff0);animation:_ngcontent-%COMP%_shimmerEffect 2s infinite ease-in-out}@keyframes _ngcontent-%COMP%_loadingBarGradient{0%{background-position:200% 0}to{background-position:-200% 0}}@keyframes _ngcontent-%COMP%_shimmerEffect{0%{left:-20%}to{left:100%}}"],changeDetection:0});let r=e;return r})();var tu=(()=>{let e=class e{constructor(){this.listeners={}}createOrStoreData(i,o){this.listeners[i]?console.log(`Listener already exists: ${i}`):(this.listeners[i]=new mr,console.log(`Listener created: ${i}`)),this.listeners[i].next(o),console.log(`Data stored in listener: ${i}`,o)}notifyListeners(i,o){console.log(`Notifying listeners for: ${i}`,o),this.listeners[i]?(this.listeners[i].next(o),console.log(`Listeners notified for: ${i}`)):console.warn(`No listeners found for: ${i}`)}subscribeToListener(i,o){return this.createOrStoreData(i,[]),this.listeners[i]?.subscribe(o)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=oi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Js=(()=>{let e=class e{constructor(i,o,s,l,a){this.angularUtilService=i,this.firebaseProvider=o,this.observableListenerUtils=s,this.layoutConfig=l,this.dataProvider=a,this.isLoading=!0,this.columnDefinitions=[],this.isFilterRowToggled=!1,this.isPaginationReady=!1,this.paginationInfo={currentPage:1,totalPages:0,availablePages:[],currentItemsPerPageNumber:[],totalItems:[],dataFrom:null,dataTo:null,pageNumber:0,currentPageNumber:null},this.columFieldInfo=[],this.gridOptions={enableCellNavigation:!0,enableColumnReorder:!1,autoEdit:!1,autoCommitEdit:!0,editable:!0,enableAutoSizeColumns:!0,enableAutoTooltip:!0,enableFiltering:!0,formatterOptions:{dateSeparator:"/"},asyncEditorLoading:!1,asyncPostRenderDelay:0,enableAutoResize:!0,autoResize:{container:"#demo-container",rightPadding:10},enableSorting:!0,headerRowHeight:43,showHeaderRow:!1,rowHeight:50,enablePagination:!0,pagination:{pageSizes:[5,10,20,25,50,1e3,2e3],pageSize:5},enableExcelExport:!0,excelExportOptions:{sanitizeDataExport:!0},enableTextExport:!0,exportOptions:{sanitizeDataExport:!0}}}ngOnInit(){}prepareGrid(i){this.columnDefinitions=i.columnFieldInfo.map(o=>({id:(0,ur.get)(o,"fieldName"),name:o.fieldDisplayName,field:(0,ur.get)(o,"fieldName"),sortable:o.sortable||!1,type:o.fieldType,formatter:i.isLazzyLoading?this.loadingAnimationFormatter.bind(this):o.fieldType==="action"?this.actionButtonFormatter.bind(this):this.setNestedOject.bind(this),filterable:o.fieldType!=="action",minWidth:200,filter:{model:Sn.compoundInput},editor:o.fieldType==="action"?{}:{model:rd.text},params:{buttonInfoSet:o.fieldType==="action"?o.buttonInfoSet:[]}})),console.log(this.columnDefinitions)}loadingAnimationFormatter(i,o,s,l,a){let d=`lazzy-loading-${i}-${o}`,u=!(s&&s.id),p=u?`<div id="${d}" style="height: 100%; width: 100%;"></div>`:"";return u&&setTimeout(()=>{let f=document.getElementById(d);f&&this.angularUtilService.createAngularComponentAppendToDom(eu,f,!0)},50),p}setNestedOject(i,o,s,l,a){let u=l.field.split("."),p=a?.[u?.[0]]?.[u?.[1]];return p||""}actionButtonFormatter(i,o,s,l,a){let u=l.field.split("."),p=a?.[u?.[0]],f=`action-buttons-${i}-${o}`;return setTimeout(()=>{let _=document.getElementById(f);if(_){let b=this.angularUtilService.createAngularComponentAppendToDom(_a,_,!0).componentRef.instance;b.buttonData=l.params.buttonInfoSet,b.parentContext=this,b.dataContext=p}},0),s&&s.id?"":`<div id="${f}"></div>`}onAngularGridCreated(i,o){o.sectionObjectInfo.gridInstance=i.detail,this.angularGrid=i.detail,this.paginationService.totalItems=1,this.dataView=this.angularGrid.dataView,this.dataView&&(this.startObserveData(o),this.startLazyLoading(o.sectionObjectInfo.listenerName),this.loadData(o))}gridStateChanged(i){let o=this.paginationService.getFullPagination();this.paginationInfo.totalItems=o.totalItems,this.paginationInfo.dataFrom=this.paginationService.dataFrom,this.paginationInfo.dataTo=this.paginationService.dataTo,this.paginationInfo.totalPages=this.paginationService.pageCount,this.paginationInfo.pageNumber=this.paginationService.pageNumber,this.paginationInfo.currentPageNumber=this.paginationService.getCurrentPageNumber()}get paginationService(){return this.angularGrid.paginationService}updateSlickGrid(i,o){this.dataView.beginUpdate();let s=[];i.forEach(l=>{s.push(l)}),s.forEach(l=>{this.dataView&&(this.dataView.getItemById(l.id)?this.dataView.updateItem(l.id,l):(l.id=(0,ur.uniqueId)(),this.dataView.addItem(l)))}),this.dataView.endUpdate(),this.updatePaginationInfo(),console.log("After update:",this.dataView.getItems()),console.log(o.sectionObjectInfo.isLazzyLoading)}startObserveData(i){this.observableListenerUtils.subscribeToListener(i.sectionObjectInfo.listenerName,o=>{this.updateSlickGrid(o,i)})}loadData(i){this.dataProvider.listFetch(i.sectionObjectInfo.searchQuery,i.sectionObjectInfo.objectHierarchy,[]).then(o=>{o&&(i.sectionObjectInfo.isLazzyLoading&&this.stopLazyLoading(i),this.observableListenerUtils.notifyListeners(i.sectionObjectInfo.listenerName,o))}).catch(o=>{console.error("Error loading data:",o)})}stopLazyLoading(i){try{i.sectionObjectInfo.isLazzyLoading=!1;let o=this.dataView.getItems();this.dataView.beginUpdate(),o.map(l=>l.id).forEach(l=>{this.dataView.deleteItem(l)}),this.dataView.endUpdate(),this.observableListenerUtils.notifyListeners(i.sectionObjectInfo.listenerName,[]),this.prepareGrid(i.sectionObjectInfo)}catch(o){console.error("Error during lazy loading stop:",o)}}updatePaginationInfo(){this.paginationInfo.availablePages=this.paginationService.availablePageSizes,this.paginationInfo.totalItems=this.paginationService.totalItems;let i=this.paginationService.getFullPagination();this.paginationInfo.totalItems=i.totalItems,this.paginationInfo.dataFrom=this.paginationService.dataFrom,this.paginationInfo.dataTo=this.paginationService.dataTo,this.paginationInfo.totalPages=this.paginationService.pageCount,this.paginationInfo.pageNumber=this.paginationService.pageNumber,this.paginationInfo.currentPageNumber=this.paginationService.getCurrentPageNumber(),this.isPaginationReady=!0}startLazyLoading(i){let o=[];for(let s=0;s<10;s++)o.push({id:s});this.observableListenerUtils.notifyListeners(i,o)}getTextWidth(i){let s=document.createElement("canvas").getContext("2d");return s?(s.font="14px Arial",s.measureText(i||"").width):0}nextPage(){this.paginationService.goToNextPage()}previousPage(){this.paginationService.goToPreviousPage()}changeItemPerPage(i){this.paginationService.changeItemPerPage(i.value)}isFirstPage(){return this.paginationService.pageNumber===1}isLastPage(){return this.paginationService.pageNumber===this.paginationService.pageCount}toggleFilterRow(){this.isFilterRowToggled=!this.isFilterRowToggled,this.angularGrid.filterService.toggleHeaderFilterRow()}};e.\u0275fac=function(o){return new(o||e)(Rt(In),Rt(Cr),Rt(tu),Rt(Ca),Rt(ba))},e.\u0275prov=oi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var GP=(()=>{let e=class e{constructor(i,o){this.ticSlickGridUtils=i,this.firebaseProvider=o}ngOnInit(){this.ticSlickGridUtils.prepareGrid(this.sectionObjectInfo)}};e.\u0275fac=function(o){return new(o||e)(ri(Js),ri(Cr))},e.\u0275cmp=nn({type:e,selectors:[["tic-slickgridList"]],inputs:{sectionObjectInfo:"sectionObjectInfo",parentContext:"parentContext"},decls:1,vars:2,consts:[["gridId","grid1",3,"onAngularGridCreated","onGridStateChanged","columnDefinitions","gridOptions"]],template:function(o,s){o&1&&(sn(0,"angular-slickgrid",0),pa("onAngularGridCreated",function(a){return s.ticSlickGridUtils.onAngularGridCreated(a,s.parentContext)})("onGridStateChanged",function(a){return s.ticSlickGridUtils.gridStateChanged(a)}),ln()),o&2&&ha("columnDefinitions",s.ticSlickGridUtils.columnDefinitions)("gridOptions",s.ticSlickGridUtils.gridOptions)},dependencies:[Qd]});let r=e;return r})();var iD=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=rn({type:e}),e.\u0275inj=on({providers:[Js],imports:[_r,ga.initializeApp(va),Zd.forRoot()]});let r=e;return r})();export{Zd as a,Js as b,GP as c,iD as d};
