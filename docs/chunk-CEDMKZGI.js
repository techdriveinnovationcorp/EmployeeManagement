import{a as q,b as J,c as V,d as z,e as Q,f as W,g as X,h as Z,i as K,j as ie,k as oe,l as ae,m as ne,n as re,o as le,p as me,q as de,r as pe}from"./chunk-G3RRGCM3.js";import{a as ee,b as te}from"./chunk-RBHPZCP3.js";import{a as F,b as Y,d as $,e as E,h as k,k as w,l as G,m as fe,n as H,o as S}from"./chunk-TE4P23CZ.js";import{O as U,P as B,a as P,u as L}from"./chunk-KBH2GQER.js";import{f as R,i as A}from"./chunk-3D6W6ZOO.js";import"./chunk-IX6G3U3V.js";import{Db as b,Dc as x,Ec as C,Ic as D,Nb as d,Ob as j,Pb as _,Xa as p,Ya as v,da as I,na as O,nb as h,oa as T,pb as s,vb as t,wb as e,xb as l}from"./chunk-WSRERBCD.js";import"./chunk-VEDS6FP2.js";import{a as g,h as ce,j as M}from"./chunk-ZC6IZ3YH.js";var N=ce(fe());function ye(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e(),t(4,"div",13),l(5,"span",14)(6,"div",15),e(),t(7,"div",13),l(8,"span",14)(9,"div",15),e()())}function ve(i,a){if(i&1&&(t(0,"mat-option",22),d(1),e()),i&2){let c=a.$implicit;s("value",c.value)("matTooltip",c.displayName),p(),_(" ",c.displayName," ")}}function he(i,a){if(i&1&&(t(0,"div",12)(1,"div",16)(2,"span"),d(3,"Employee Id "),e(),l(4,"input",17),e(),t(5,"div",16)(6,"span"),d(7,"Employee Name "),e(),l(8,"input",18),e(),t(9,"div",16)(10,"span"),d(11,"Qualification "),e(),t(12,"mat-form-field",19)(13,"mat-select",20),h(14,ve,2,3,"mat-option",21),e()()()()),i&2){let c=b();p(14),s("ngForOf",c.mappingDetails["employee_DUMMY.qualification"])}}function Ee(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e(),t(4,"div",13),l(5,"span",14)(6,"div",15),e()())}function Se(i,a){i&1&&(t(0,"div",12)(1,"div",16)(2,"span"),d(3,"Age "),e(),l(4,"input",23),e(),t(5,"div",16)(6,"span"),d(7,"Phone Number "),e(),l(8,"input",24),e()())}function ge(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e()())}function be(i,a){i&1&&(t(0,"div",12)(1,"div",16)(2,"span"),d(3,"Date of birth "),e(),l(4,"input",25),e()())}function _e(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e(),t(4,"div",13),l(5,"span",14)(6,"div",15),e(),t(7,"div",13),l(8,"span",14)(9,"div",15),e()())}function Ne(i,a){if(i&1&&(t(0,"mat-radio-button",31),d(1),e()),i&2){let c=a.$implicit;s("value",c.value)("matTooltip",c.displayName),p(),_(" ",c.displayName," ")}}function Me(i,a){if(i&1&&(t(0,"div",12)(1,"div",26)(2,"span"),d(3,"Employee Add Info Id "),e(),l(4,"input",27),e(),t(5,"div",26)(6,"span"),d(7,"Aadhar Number "),e(),l(8,"input",28),e(),t(9,"div",26)(10,"span"),d(11,"Gender "),e(),t(12,"mat-radio-group",29),h(13,Ne,2,3,"mat-radio-button",30),e()()()),i&2){let c=b();p(13),s("ngForOf",c.mappingDetails["employee_DUMMY$$employeeAddInfo.gender"])}}function Ie(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e(),t(4,"div",13),l(5,"span",14)(6,"div",15),e(),t(7,"div",13),l(8,"span",14)(9,"div",15),e()())}function Oe(i,a){i&1&&(t(0,"div",12)(1,"div",32)(2,"span"),d(3,"Employee Main Record Id "),e(),l(4,"input",33),e(),t(5,"div",32)(6,"span"),d(7,"Address "),e(),t(8,"textarea",34),d(9,`                        Enter address here...
                    `),e()(),t(10,"div",32)(11,"span"),d(12,"Family Members "),e(),l(13,"input",35),e()())}function Te(i,a){i&1&&(t(0,"div",12)(1,"div",13),l(2,"span",14)(3,"div",15),e(),t(4,"div",13),l(5,"span",14)(6,"div",15),e()())}function je(i,a){i&1&&(t(0,"div",12)(1,"div",36)(2,"span"),d(3,"Employee Status Info Id "),e(),l(4,"input",37),e(),t(5,"div",36)(6,"span"),d(7,"Status "),e(),l(8,"mat-slide-toggle",38),e()()),i&2&&(p(8),s("color","primary"))}var se=(()=>{let a=class a{constructor(n,r,o,m,f,y,u){this.dataProvider=n,this.appUtils=r,this.route=o,this.layoutConfig=m,this.fb=f,this.firebaseProvider=y,this.snackBar=u,this.recordId="",this.isSkeletonLoading=!1,this.layoutName="Employee_ENTRY",this.layoutDisplayName=this.layoutConfig.layoutConfiguration[this.layoutName].layoutDisplayName,this.headerActionInfo=(0,N.cloneDeep)(this.layoutConfig.layoutConfiguration[this.layoutName].headerActionInfo),this.mappingDetails=(0,N.cloneDeep)(this.layoutConfig.layoutConfiguration[this.layoutName].mappingDetails),this.objectHierarchy=[{objectName:"employee",objectType:"primary",rootPath:"employee_DUMMY",primaryFieldName:"employeeid",primaryFieldNamePrefix:"emp_",childObject:[{objectName:"employeeAddInfo",objectType:"ONETOONE",rootPath:"employee_DUMMY$$employeeAddInfo",parentObject:"employee",primaryFieldName:"employeeaddinfoid",primaryFieldNamePrefix:"empAddInfo",childObject:[{objectName:"employeeMainRecord",objectType:"ONETOONE",rootPath:"employee_DUMMY$$employeeAddInfo$$employeeMainRecord",parentObject:"employeeAddInfo",primaryFieldName:"employeeMainRecordId",primaryFieldNamePrefix:"empMain_",childObject:[]}]},{objectName:"employeeStatusInfo",objectType:"ONETOONE",rootPath:"employee_DUMMY$$employeeStatusInfo",parentObject:"employee",primaryFieldName:"employeeStatusInfoId",primaryFieldNamePrefix:"empStatus_",childObject:[]}]}],this.dataObject={},this.employeedetails=this.fb.group({employee_DUMMY:this.fb.group({employeeid:[""],employeename:[""],age:[null],phonenumber:[null],dateofbirth:[""],qualification:[""],createdBy:[this.appUtils.appConfig.userMail],modifiedBy:[this.appUtils.appConfig.userMail],createdAt:[new Date().toLocaleString()],modifiedAt:[new Date().toLocaleString()],type:"employee"}),employee_DUMMY$$employeeAddInfo:this.fb.group({employeeaddinfoid:[""],aadharnumber:[null],employee:"",gender:"",type:"employeeAddInfo"}),employee_DUMMY$$employeeAddInfo$$employeeMainRecord:this.fb.group({employeeMainRecordId:[""],familyMembers:[],address:"",employeeAddInfo:"",type:"employeeMainRecord"}),employee_DUMMY$$employeeStatusInfo:this.fb.group({employeeStatusInfoId:[""],status:[!0],employee:"",type:"employeeStatusInfo"})})}showSnackBar(n,r){this.snackBar.open(n,"Close",{duration:r||3e3,horizontalPosition:"center",verticalPosition:"bottom"})}ngOnInit(){this.route.queryParams.subscribe(n=>{n.data!==void 0&&JSON.parse(n.data).id&&(this.recordId=JSON.parse(n.data).id,this.recordId&&this.fetchForEditRecord().then(r=>{r&&(this.showSnackBar("data fetch successfully",3e3),this.isSkeletonLoading=!1)}))})}fetchForEditRecord(){return M(this,null,function*(){this.isSkeletonLoading=!!this.recordId;try{let n=yield this.dataProvider.fetch(this.objectHierarchy,this.recordId,this);return this.updateFormDataAfterSave(this.dataObject,this.employeedetails),n}catch(n){console.error("Error fetching data:",n)}finally{this.isSkeletonLoading=!1}})}updateFormDataAfterSave(n,r){Object.keys(n).forEach(o=>{let m=n[o],f=r.controls[o];f&&Object.keys(m).forEach(y=>{let u=f.get(y);u&&u.setValue(m[y])})})}save(){this.appUtils.isMainloading=!0;let n=[this.employeedetails.value];this.dirtyStatus=this.checkFormDirtyStatus(),this.setDataObject(n),console.log("Data Object to Save:",this.dataObject),this.isSkeletonLoading=!0,this.dataProvider.handleSave(n,this.objectHierarchy[0],"",this).then(r=>{console.log("Primary object saved with ID and Rev:",r),this.recordId=r.id,this.recordRev=r.rev,this.fetchForEditRecord(),this.appUtils.isMainloading=!1,this.isSkeletonLoading=!1;let o=this.recordId!==""?"Record Updated successfully":"Record saved successfully";this.showSnackBar(o)}).catch(r=>{console.error("Error during save:",r),this.showSnackBar(r,6e3),this.appUtils.isMainloading=!1,this.isSkeletonLoading=!1})}setDataObject(n){n.forEach(r=>{let o=g({},r);Object.keys(o).forEach(m=>{this.dataObject[m]?(this.dataObject[m].id=this.dataObject[m].id?this.dataObject[m].id:"",this.dataObject[m].rev=this.dataObject[m].rev?this.dataObject[m].rev:""):(this.dataObject[m]=g({},o[m]),this.dataObject[m].id=this.dataObject[m].id?this.dataObject[m].id:"",this.dataObject[m].rev=this.dataObject[m].rev?this.dataObject[m].rev:"")})})}checkFormDirtyStatus(){let n={},r=this.employeedetails;return Object.keys(r.controls).forEach(o=>{let m=r.get(o);if(m)if(this.dataObject[o]){let f=JSON.parse(JSON.stringify(this.dataObject[o]));delete f.id,delete f.rev;let y=JSON.parse(JSON.stringify(m.value));Object.keys(y).forEach(u=>{y[u]===null&&delete y[u]}),Object.keys(f).forEach(u=>{f[u]===null&&delete f[u]}),n[o]=!this.objectsAreEqual(y,f)}else n[o]=!1}),console.log(n),n}objectsAreEqual(n,r){let o=Object.keys(n);for(let m of o)if(n[m]!==r[m])return!1;return!0}};a.\u0275fac=function(r){return new(r||a)(v(S),v(P),v(R),v(H),v(Z),v(E),v(ee))},a.\u0275cmp=O({type:a,selectors:[["Employee_ENTRY"]],decls:35,vars:16,consts:[[1,"dummyHeader"],[1,"pageHeader"],[1,"pageTitle"],[1,"pageButtonGroup"],[3,"buttonData","parentContext"],[1,"applicationContainer"],[1,"section",3,"formGroup"],[1,"sectionHeader"],[1,"sectionContent"],["class","row",4,"ngIf"],["class","row ",4,"ngIf"],[1,"row","sectionHeader","heading-element"],[1,"row"],[1,"inputContainer"],[1,"fieldNameSkeleton"],[1,"inputFieldSkeleton"],["formGroupName","employee_DUMMY",1,"inputContainer"],["type","text","readonly","","formControlName","employeeid",1,"readOnlyTextBox"],["type","text","formControlName","employeename"],["appearance","fill",1,"no-underline"],["single","","formControlName","qualification",1,"custom-select"],["matTooltipPosition","before","class","custom-option",3,"value","matTooltip",4,"ngFor","ngForOf"],["matTooltipPosition","before",1,"custom-option",3,"value","matTooltip"],["type","number","formControlName","age"],["type","number","formControlName","phonenumber"],["type","date","formControlName","dateofbirth"],["formGroupName","employee_DUMMY$$employeeAddInfo",1,"inputContainer"],["type","text","readonly","","formControlName","employeeaddinfoid",1,"readOnlyTextBox"],["type","number","formControlName","aadharnumber"],["formControlName","gender"],["class","example-radio-button","matTooltipPosition","above",3,"value","matTooltip",4,"ngFor","ngForOf"],["matTooltipPosition","above",1,"example-radio-button",3,"value","matTooltip"],["formGroupName","employee_DUMMY$$employeeAddInfo$$employeeMainRecord",1,"inputContainer"],["type","text","readonly","","formControlName","employeeMainRecordId",1,"readOnlyTextBox"],["id","myTextarea","name","myTextarea","rows","4","cols","50","formControlName","address"],["type","number","formControlName","familyMembers"],["formGroupName","employee_DUMMY$$employeeStatusInfo",1,"inputContainer"],["type","text","readonly","","formControlName","employeeStatusInfoId",1,"readOnlyTextBox"],["formControlName","status",3,"color"]],template:function(r,o){r&1&&(l(0,"div",0)(1,"div",0),t(2,"div",1)(3,"div",2)(4,"h2"),d(5),e()(),t(6,"div",3),l(7,"app-layout-action-buttons",4),e()(),t(8,"div",5)(9,"div",6)(10,"div",7)(11,"span"),d(12,"Employee Details"),e()(),t(13,"div",8),h(14,ye,10,0,"div",9)(15,he,15,1,"div",10)(16,Ee,7,0,"div",9)(17,Se,9,0,"div",10)(18,ge,4,0,"div",9)(19,be,5,0,"div",10),t(20,"div",11)(21,"span"),d(22,"Employee Additional Info"),e()(),h(23,_e,10,0,"div",9)(24,Me,14,1,"div",10),t(25,"div",11)(26,"span"),d(27,"Employee Main Record"),e()(),h(28,Ie,10,0,"div",9)(29,Oe,14,0,"div",10),t(30,"div",11)(31,"span"),d(32,"Employee Status Info"),e()(),h(33,Te,7,0,"div",9)(34,je,9,1,"div",10),e()()()),r&2&&(p(5),j(o.layoutDisplayName),p(2),s("buttonData",o.headerActionInfo)("parentContext",o),p(2),s("formGroup",o.employeedetails),p(5),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading),p(),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading),p(),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading),p(4),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading),p(4),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading),p(4),s("ngIf",o.isSkeletonLoading),p(),s("ngIf",!o.isSkeletonLoading))},dependencies:[x,C,w,q,z,J,V,Q,X,W,U,oe,ae,re,me,de,L],encapsulation:2});let i=a;return i})();var xe=[{path:"",component:se}],dt=(()=>{let a=class a{};a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=T({type:a}),a.\u0275inj=I({providers:[E,S,{provide:ie,useValue:{color:"primary"}}],imports:[D,k,G,K,F.initializeApp(Y),$,te,B,ne,le,pe,A.forChild(xe)]});let i=a;return i})();export{dt as Employee_ENTRYModule};
