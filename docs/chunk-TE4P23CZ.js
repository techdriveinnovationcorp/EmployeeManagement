import{O as tp,P as ep,a as Qm,b as Ps,l as Xm,n as Ui,r as Zm,y as Jm}from"./chunk-KBH2GQER.js";import{a as Dm,e as Om}from"./chunk-3D6W6ZOO.js";import{Aa as Im,B as Pr,Bb as Ss,C as gm,Ca as ws,Da as ki,Db as ze,Dc as Rm,E as _m,Eb as Li,Ec as Nm,Fb as He,I as Dr,Ic as km,Ja as Pi,K as vm,Ka as xs,L as ym,Lc as Pm,M as wm,Nb as Or,Ob as dl,P as sl,Pb as fl,Q as _s,R as al,T as xm,Tb as Mi,V as an,Va as Di,W as cl,Xa as cn,Ya as gt,Z as Ri,Za as Cm,Zb as Sm,_ as Em,_b as Am,a as fm,c as Si,ca as Zt,da as Ne,eb as ye,f as hm,fa as It,h as bs,ha as V,i as mm,ia as Ni,ib as Es,ja as ll,jb as Ts,k as Zn,kc as hl,l as Ai,m as ol,ma as Jn,n as ae,na as Sn,nb as ul,o as pm,oa as ke,ob as Oi,oc as ei,pa as Tm,pb as An,qb as Is,r as gs,rb as Rn,s as Tt,sb as Fi,vb as Pe,vc as ml,wa as vs,wb as Ue,xa as ys,xb as ti,y as bm,yb as Cs}from"./chunk-WSRERBCD.js";import{A as bl,B as Ym,C as Lr,D as jt,E as ln,F as ks,G as gl,H as $m,I as Wi,J as Mr,K as _l,L as Km,M as vl,N as qm,O as kn,P as Wt,a as N,b as Bi,c as As,d as Fm,e as Lm,f as Mm,g as Nt,h as Bm,i as pl,j as Wm,k as Ve,l as Um,m as zm,n as Rs,o as wt,p as Hm,q as Vm,r as we,s as Nn,t as Ns,u as Fr,v as jm,w as Gm,x as B,y as Jt,z as Ct}from"./chunk-VEDS6FP2.js";import{a as In,b as Cn,f as XT,h as ZT,j as Ft}from"./chunk-ZC6IZ3YH.js";var t_=XT((cr,xo)=>{"use strict";(function(){var t,e="4.17.21",i=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",b=1,v=2,x=4,E=1,R=2,k=1,W=2,it=4,dt=8,yt=16,X=32,St=64,Dt=128,lr=256,Ma=512,n_=30,i_="...",r_=800,o_=16,Dd=1,s_=2,a_=3,Hn=1/0,mn=9007199254740991,c_=17976931348623157e292,Eo=NaN,Le=4294967295,l_=Le-1,u_=Le>>>1,d_=[["ary",Dt],["bind",k],["bindKey",W],["curry",dt],["curryRight",yt],["flip",Ma],["partial",X],["partialRight",St],["rearg",lr]],fi="[object Arguments]",To="[object Array]",f_="[object AsyncFunction]",ur="[object Boolean]",dr="[object Date]",h_="[object DOMException]",Io="[object Error]",Co="[object Function]",Od="[object GeneratorFunction]",Te="[object Map]",fr="[object Number]",m_="[object Null]",Qe="[object Object]",Fd="[object Promise]",p_="[object Proxy]",hr="[object RegExp]",Ie="[object Set]",mr="[object String]",So="[object Symbol]",b_="[object Undefined]",pr="[object WeakMap]",g_="[object WeakSet]",br="[object ArrayBuffer]",hi="[object DataView]",Ba="[object Float32Array]",Wa="[object Float64Array]",Ua="[object Int8Array]",za="[object Int16Array]",Ha="[object Int32Array]",Va="[object Uint8Array]",ja="[object Uint8ClampedArray]",Ga="[object Uint16Array]",Ya="[object Uint32Array]",__=/\b__p \+= '';/g,v_=/\b(__p \+=) '' \+/g,y_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ld=/&(?:amp|lt|gt|quot|#39);/g,Md=/[&<>"']/g,w_=RegExp(Ld.source),x_=RegExp(Md.source),E_=/<%-([\s\S]+?)%>/g,T_=/<%([\s\S]+?)%>/g,Bd=/<%=([\s\S]+?)%>/g,I_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C_=/^\w*$/,S_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$a=/[\\^$.*+?()[\]{}|]/g,A_=RegExp($a.source),Ka=/^\s+/,R_=/\s/,N_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,k_=/\{\n\/\* \[wrapped with (.+)\] \*/,P_=/,? & /,D_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,O_=/[()=,{}\[\]\/\s]/,F_=/\\(\\)?/g,L_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wd=/\w*$/,M_=/^[-+]0x[0-9a-f]+$/i,B_=/^0b[01]+$/i,W_=/^\[object .+?Constructor\]$/,U_=/^0o[0-7]+$/i,z_=/^(?:0|[1-9]\d*)$/,H_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ao=/($^)/,V_=/['\n\r\u2028\u2029\\]/g,Ro="\\ud800-\\udfff",j_="\\u0300-\\u036f",G_="\\ufe20-\\ufe2f",Y_="\\u20d0-\\u20ff",Ud=j_+G_+Y_,zd="\\u2700-\\u27bf",Hd="a-z\\xdf-\\xf6\\xf8-\\xff",$_="\\xac\\xb1\\xd7\\xf7",K_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",q_="\\u2000-\\u206f",Q_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vd="A-Z\\xc0-\\xd6\\xd8-\\xde",jd="\\ufe0e\\ufe0f",Gd=$_+K_+q_+Q_,qa="['\u2019]",X_="["+Ro+"]",Yd="["+Gd+"]",No="["+Ud+"]",$d="\\d+",Z_="["+zd+"]",Kd="["+Hd+"]",qd="[^"+Ro+Gd+$d+zd+Hd+Vd+"]",Qa="\\ud83c[\\udffb-\\udfff]",J_="(?:"+No+"|"+Qa+")",Qd="[^"+Ro+"]",Xa="(?:\\ud83c[\\udde6-\\uddff]){2}",Za="[\\ud800-\\udbff][\\udc00-\\udfff]",mi="["+Vd+"]",Xd="\\u200d",Zd="(?:"+Kd+"|"+qd+")",tv="(?:"+mi+"|"+qd+")",Jd="(?:"+qa+"(?:d|ll|m|re|s|t|ve))?",tf="(?:"+qa+"(?:D|LL|M|RE|S|T|VE))?",ef=J_+"?",nf="["+jd+"]?",ev="(?:"+Xd+"(?:"+[Qd,Xa,Za].join("|")+")"+nf+ef+")*",nv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",iv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rf=nf+ef+ev,rv="(?:"+[Z_,Xa,Za].join("|")+")"+rf,ov="(?:"+[Qd+No+"?",No,Xa,Za,X_].join("|")+")",sv=RegExp(qa,"g"),av=RegExp(No,"g"),Ja=RegExp(Qa+"(?="+Qa+")|"+ov+rf,"g"),cv=RegExp([mi+"?"+Kd+"+"+Jd+"(?="+[Yd,mi,"$"].join("|")+")",tv+"+"+tf+"(?="+[Yd,mi+Zd,"$"].join("|")+")",mi+"?"+Zd+"+"+Jd,mi+"+"+tf,iv,nv,$d,rv].join("|"),"g"),lv=RegExp("["+Xd+Ro+Ud+jd+"]"),uv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fv=-1,ut={};ut[Ba]=ut[Wa]=ut[Ua]=ut[za]=ut[Ha]=ut[Va]=ut[ja]=ut[Ga]=ut[Ya]=!0,ut[fi]=ut[To]=ut[br]=ut[ur]=ut[hi]=ut[dr]=ut[Io]=ut[Co]=ut[Te]=ut[fr]=ut[Qe]=ut[hr]=ut[Ie]=ut[mr]=ut[pr]=!1;var ct={};ct[fi]=ct[To]=ct[br]=ct[hi]=ct[ur]=ct[dr]=ct[Ba]=ct[Wa]=ct[Ua]=ct[za]=ct[Ha]=ct[Te]=ct[fr]=ct[Qe]=ct[hr]=ct[Ie]=ct[mr]=ct[So]=ct[Va]=ct[ja]=ct[Ga]=ct[Ya]=!0,ct[Io]=ct[Co]=ct[pr]=!1;var hv={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},mv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},bv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gv=parseFloat,_v=parseInt,of=typeof global=="object"&&global&&global.Object===Object&&global,vv=typeof self=="object"&&self&&self.Object===Object&&self,At=of||vv||Function("return this")(),tc=typeof cr=="object"&&cr&&!cr.nodeType&&cr,Vn=tc&&typeof xo=="object"&&xo&&!xo.nodeType&&xo,sf=Vn&&Vn.exports===tc,ec=sf&&of.process,fe=function(){try{var y=Vn&&Vn.require&&Vn.require("util").types;return y||ec&&ec.binding&&ec.binding("util")}catch{}}(),af=fe&&fe.isArrayBuffer,cf=fe&&fe.isDate,lf=fe&&fe.isMap,uf=fe&&fe.isRegExp,df=fe&&fe.isSet,ff=fe&&fe.isTypedArray;function ee(y,I,T){switch(T.length){case 0:return y.call(I);case 1:return y.call(I,T[0]);case 2:return y.call(I,T[0],T[1]);case 3:return y.call(I,T[0],T[1],T[2])}return y.apply(I,T)}function yv(y,I,T,D){for(var U=-1,nt=y==null?0:y.length;++U<nt;){var xt=y[U];I(D,xt,T(xt),y)}return D}function he(y,I){for(var T=-1,D=y==null?0:y.length;++T<D&&I(y[T],T,y)!==!1;);return y}function wv(y,I){for(var T=y==null?0:y.length;T--&&I(y[T],T,y)!==!1;);return y}function hf(y,I){for(var T=-1,D=y==null?0:y.length;++T<D;)if(!I(y[T],T,y))return!1;return!0}function pn(y,I){for(var T=-1,D=y==null?0:y.length,U=0,nt=[];++T<D;){var xt=y[T];I(xt,T,y)&&(nt[U++]=xt)}return nt}function ko(y,I){var T=y==null?0:y.length;return!!T&&pi(y,I,0)>-1}function nc(y,I,T){for(var D=-1,U=y==null?0:y.length;++D<U;)if(T(I,y[D]))return!0;return!1}function ft(y,I){for(var T=-1,D=y==null?0:y.length,U=Array(D);++T<D;)U[T]=I(y[T],T,y);return U}function bn(y,I){for(var T=-1,D=I.length,U=y.length;++T<D;)y[U+T]=I[T];return y}function ic(y,I,T,D){var U=-1,nt=y==null?0:y.length;for(D&&nt&&(T=y[++U]);++U<nt;)T=I(T,y[U],U,y);return T}function xv(y,I,T,D){var U=y==null?0:y.length;for(D&&U&&(T=y[--U]);U--;)T=I(T,y[U],U,y);return T}function rc(y,I){for(var T=-1,D=y==null?0:y.length;++T<D;)if(I(y[T],T,y))return!0;return!1}var Ev=oc("length");function Tv(y){return y.split("")}function Iv(y){return y.match(D_)||[]}function mf(y,I,T){var D;return T(y,function(U,nt,xt){if(I(U,nt,xt))return D=nt,!1}),D}function Po(y,I,T,D){for(var U=y.length,nt=T+(D?1:-1);D?nt--:++nt<U;)if(I(y[nt],nt,y))return nt;return-1}function pi(y,I,T){return I===I?Mv(y,I,T):Po(y,pf,T)}function Cv(y,I,T,D){for(var U=T-1,nt=y.length;++U<nt;)if(D(y[U],I))return U;return-1}function pf(y){return y!==y}function bf(y,I){var T=y==null?0:y.length;return T?ac(y,I)/T:Eo}function oc(y){return function(I){return I==null?t:I[y]}}function sc(y){return function(I){return y==null?t:y[I]}}function gf(y,I,T,D,U){return U(y,function(nt,xt,st){T=D?(D=!1,nt):I(T,nt,xt,st)}),T}function Sv(y,I){var T=y.length;for(y.sort(I);T--;)y[T]=y[T].value;return y}function ac(y,I){for(var T,D=-1,U=y.length;++D<U;){var nt=I(y[D]);nt!==t&&(T=T===t?nt:T+nt)}return T}function cc(y,I){for(var T=-1,D=Array(y);++T<y;)D[T]=I(T);return D}function Av(y,I){return ft(I,function(T){return[T,y[T]]})}function _f(y){return y&&y.slice(0,xf(y)+1).replace(Ka,"")}function ne(y){return function(I){return y(I)}}function lc(y,I){return ft(I,function(T){return y[T]})}function gr(y,I){return y.has(I)}function vf(y,I){for(var T=-1,D=y.length;++T<D&&pi(I,y[T],0)>-1;);return T}function yf(y,I){for(var T=y.length;T--&&pi(I,y[T],0)>-1;);return T}function Rv(y,I){for(var T=y.length,D=0;T--;)y[T]===I&&++D;return D}var Nv=sc(hv),kv=sc(mv);function Pv(y){return"\\"+bv[y]}function Dv(y,I){return y==null?t:y[I]}function bi(y){return lv.test(y)}function Ov(y){return uv.test(y)}function Fv(y){for(var I,T=[];!(I=y.next()).done;)T.push(I.value);return T}function uc(y){var I=-1,T=Array(y.size);return y.forEach(function(D,U){T[++I]=[U,D]}),T}function wf(y,I){return function(T){return y(I(T))}}function gn(y,I){for(var T=-1,D=y.length,U=0,nt=[];++T<D;){var xt=y[T];(xt===I||xt===h)&&(y[T]=h,nt[U++]=T)}return nt}function Do(y){var I=-1,T=Array(y.size);return y.forEach(function(D){T[++I]=D}),T}function Lv(y){var I=-1,T=Array(y.size);return y.forEach(function(D){T[++I]=[D,D]}),T}function Mv(y,I,T){for(var D=T-1,U=y.length;++D<U;)if(y[D]===I)return D;return-1}function Bv(y,I,T){for(var D=T+1;D--;)if(y[D]===I)return D;return D}function gi(y){return bi(y)?Uv(y):Ev(y)}function Ce(y){return bi(y)?zv(y):Tv(y)}function xf(y){for(var I=y.length;I--&&R_.test(y.charAt(I)););return I}var Wv=sc(pv);function Uv(y){for(var I=Ja.lastIndex=0;Ja.test(y);)++I;return I}function zv(y){return y.match(Ja)||[]}function Hv(y){return y.match(cv)||[]}var Vv=function y(I){I=I==null?At:_n.defaults(At.Object(),I,_n.pick(At,dv));var T=I.Array,D=I.Date,U=I.Error,nt=I.Function,xt=I.Math,st=I.Object,dc=I.RegExp,jv=I.String,me=I.TypeError,Oo=T.prototype,Gv=nt.prototype,_i=st.prototype,Fo=I["__core-js_shared__"],Lo=Gv.toString,ot=_i.hasOwnProperty,Yv=0,Ef=function(){var n=/[^.]+$/.exec(Fo&&Fo.keys&&Fo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Mo=_i.toString,$v=Lo.call(st),Kv=At._,qv=dc("^"+Lo.call(ot).replace($a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bo=sf?I.Buffer:t,vn=I.Symbol,Wo=I.Uint8Array,Tf=Bo?Bo.allocUnsafe:t,Uo=wf(st.getPrototypeOf,st),If=st.create,Cf=_i.propertyIsEnumerable,zo=Oo.splice,Sf=vn?vn.isConcatSpreadable:t,_r=vn?vn.iterator:t,jn=vn?vn.toStringTag:t,Ho=function(){try{var n=qn(st,"defineProperty");return n({},"",{}),n}catch{}}(),Qv=I.clearTimeout!==At.clearTimeout&&I.clearTimeout,Xv=D&&D.now!==At.Date.now&&D.now,Zv=I.setTimeout!==At.setTimeout&&I.setTimeout,Vo=xt.ceil,jo=xt.floor,fc=st.getOwnPropertySymbols,Jv=Bo?Bo.isBuffer:t,Af=I.isFinite,t0=Oo.join,e0=wf(st.keys,st),Et=xt.max,Mt=xt.min,n0=D.now,i0=I.parseInt,Rf=xt.random,r0=Oo.reverse,hc=qn(I,"DataView"),vr=qn(I,"Map"),mc=qn(I,"Promise"),vi=qn(I,"Set"),yr=qn(I,"WeakMap"),wr=qn(st,"create"),Go=yr&&new yr,yi={},o0=Qn(hc),s0=Qn(vr),a0=Qn(mc),c0=Qn(vi),l0=Qn(yr),Yo=vn?vn.prototype:t,xr=Yo?Yo.valueOf:t,Nf=Yo?Yo.toString:t;function m(n){if(bt(n)&&!z(n)&&!(n instanceof Z)){if(n instanceof pe)return n;if(ot.call(n,"__wrapped__"))return kh(n)}return new pe(n)}var wi=function(){function n(){}return function(o){if(!mt(o))return{};if(If)return If(o);n.prototype=o;var a=new n;return n.prototype=t,a}}();function $o(){}function pe(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}m.templateSettings={escape:E_,evaluate:T_,interpolate:Bd,variable:"",imports:{_:m}},m.prototype=$o.prototype,m.prototype.constructor=m,pe.prototype=wi($o.prototype),pe.prototype.constructor=pe;function Z(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function u0(){var n=new Z(this.__wrapped__);return n.__actions__=Kt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Kt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Kt(this.__views__),n}function d0(){if(this.__filtered__){var n=new Z(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function f0(){var n=this.__wrapped__.value(),o=this.__dir__,a=z(n),u=o<0,f=a?n.length:0,p=Ty(0,f,this.__views__),g=p.start,_=p.end,w=_-g,C=u?_:g-1,S=this.__iteratees__,A=S.length,P=0,O=Mt(w,this.__takeCount__);if(!a||!u&&f==w&&O==w)return th(n,this.__actions__);var L=[];t:for(;w--&&P<O;){C+=o;for(var G=-1,M=n[C];++G<A;){var Q=S[G],J=Q.iteratee,oe=Q.type,Vt=J(M);if(oe==s_)M=Vt;else if(!Vt){if(oe==Dd)continue t;break t}}L[P++]=M}return L}Z.prototype=wi($o.prototype),Z.prototype.constructor=Z;function Gn(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}function h0(){this.__data__=wr?wr(null):{},this.size=0}function m0(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function p0(n){var o=this.__data__;if(wr){var a=o[n];return a===l?t:a}return ot.call(o,n)?o[n]:t}function b0(n){var o=this.__data__;return wr?o[n]!==t:ot.call(o,n)}function g0(n,o){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=wr&&o===t?l:o,this}Gn.prototype.clear=h0,Gn.prototype.delete=m0,Gn.prototype.get=p0,Gn.prototype.has=b0,Gn.prototype.set=g0;function Xe(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}function _0(){this.__data__=[],this.size=0}function v0(n){var o=this.__data__,a=Ko(o,n);if(a<0)return!1;var u=o.length-1;return a==u?o.pop():zo.call(o,a,1),--this.size,!0}function y0(n){var o=this.__data__,a=Ko(o,n);return a<0?t:o[a][1]}function w0(n){return Ko(this.__data__,n)>-1}function x0(n,o){var a=this.__data__,u=Ko(a,n);return u<0?(++this.size,a.push([n,o])):a[u][1]=o,this}Xe.prototype.clear=_0,Xe.prototype.delete=v0,Xe.prototype.get=y0,Xe.prototype.has=w0,Xe.prototype.set=x0;function Ze(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}function E0(){this.size=0,this.__data__={hash:new Gn,map:new(vr||Xe),string:new Gn}}function T0(n){var o=ss(this,n).delete(n);return this.size-=o?1:0,o}function I0(n){return ss(this,n).get(n)}function C0(n){return ss(this,n).has(n)}function S0(n,o){var a=ss(this,n),u=a.size;return a.set(n,o),this.size+=a.size==u?0:1,this}Ze.prototype.clear=E0,Ze.prototype.delete=T0,Ze.prototype.get=I0,Ze.prototype.has=C0,Ze.prototype.set=S0;function Yn(n){var o=-1,a=n==null?0:n.length;for(this.__data__=new Ze;++o<a;)this.add(n[o])}function A0(n){return this.__data__.set(n,l),this}function R0(n){return this.__data__.has(n)}Yn.prototype.add=Yn.prototype.push=A0,Yn.prototype.has=R0;function Se(n){var o=this.__data__=new Xe(n);this.size=o.size}function N0(){this.__data__=new Xe,this.size=0}function k0(n){var o=this.__data__,a=o.delete(n);return this.size=o.size,a}function P0(n){return this.__data__.get(n)}function D0(n){return this.__data__.has(n)}function O0(n,o){var a=this.__data__;if(a instanceof Xe){var u=a.__data__;if(!vr||u.length<i-1)return u.push([n,o]),this.size=++a.size,this;a=this.__data__=new Ze(u)}return a.set(n,o),this.size=a.size,this}Se.prototype.clear=N0,Se.prototype.delete=k0,Se.prototype.get=P0,Se.prototype.has=D0,Se.prototype.set=O0;function kf(n,o){var a=z(n),u=!a&&Xn(n),f=!a&&!u&&Tn(n),p=!a&&!u&&!f&&Ii(n),g=a||u||f||p,_=g?cc(n.length,jv):[],w=_.length;for(var C in n)(o||ot.call(n,C))&&!(g&&(C=="length"||f&&(C=="offset"||C=="parent")||p&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||nn(C,w)))&&_.push(C);return _}function Pf(n){var o=n.length;return o?n[Ic(0,o-1)]:t}function F0(n,o){return as(Kt(n),$n(o,0,n.length))}function L0(n){return as(Kt(n))}function pc(n,o,a){(a!==t&&!Ae(n[o],a)||a===t&&!(o in n))&&Je(n,o,a)}function Er(n,o,a){var u=n[o];(!(ot.call(n,o)&&Ae(u,a))||a===t&&!(o in n))&&Je(n,o,a)}function Ko(n,o){for(var a=n.length;a--;)if(Ae(n[a][0],o))return a;return-1}function M0(n,o,a,u){return yn(n,function(f,p,g){o(u,f,a(f),g)}),u}function Df(n,o){return n&&Be(o,Rt(o),n)}function B0(n,o){return n&&Be(o,Qt(o),n)}function Je(n,o,a){o=="__proto__"&&Ho?Ho(n,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[o]=a}function bc(n,o){for(var a=-1,u=o.length,f=T(u),p=n==null;++a<u;)f[a]=p?t:Qc(n,o[a]);return f}function $n(n,o,a){return n===n&&(a!==t&&(n=n<=a?n:a),o!==t&&(n=n>=o?n:o)),n}function be(n,o,a,u,f,p){var g,_=o&b,w=o&v,C=o&x;if(a&&(g=f?a(n,u,f,p):a(n)),g!==t)return g;if(!mt(n))return n;var S=z(n);if(S){if(g=Cy(n),!_)return Kt(n,g)}else{var A=Bt(n),P=A==Co||A==Od;if(Tn(n))return ih(n,_);if(A==Qe||A==fi||P&&!f){if(g=w||P?{}:xh(n),!_)return w?py(n,B0(g,n)):my(n,Df(g,n))}else{if(!ct[A])return f?n:{};g=Sy(n,A,_)}}p||(p=new Se);var O=p.get(n);if(O)return O;p.set(n,g),Xh(n)?n.forEach(function(M){g.add(be(M,o,a,M,n,p))}):qh(n)&&n.forEach(function(M,Q){g.set(Q,be(M,o,a,Q,n,p))});var L=C?w?Lc:Fc:w?Qt:Rt,G=S?t:L(n);return he(G||n,function(M,Q){G&&(Q=M,M=n[Q]),Er(g,Q,be(M,o,a,Q,n,p))}),g}function W0(n){var o=Rt(n);return function(a){return Of(a,n,o)}}function Of(n,o,a){var u=a.length;if(n==null)return!u;for(n=st(n);u--;){var f=a[u],p=o[f],g=n[f];if(g===t&&!(f in n)||!p(g))return!1}return!0}function Ff(n,o,a){if(typeof n!="function")throw new me(s);return Nr(function(){n.apply(t,a)},o)}function Tr(n,o,a,u){var f=-1,p=ko,g=!0,_=n.length,w=[],C=o.length;if(!_)return w;a&&(o=ft(o,ne(a))),u?(p=nc,g=!1):o.length>=i&&(p=gr,g=!1,o=new Yn(o));t:for(;++f<_;){var S=n[f],A=a==null?S:a(S);if(S=u||S!==0?S:0,g&&A===A){for(var P=C;P--;)if(o[P]===A)continue t;w.push(S)}else p(o,A,u)||w.push(S)}return w}var yn=ch(Me),Lf=ch(_c,!0);function U0(n,o){var a=!0;return yn(n,function(u,f,p){return a=!!o(u,f,p),a}),a}function qo(n,o,a){for(var u=-1,f=n.length;++u<f;){var p=n[u],g=o(p);if(g!=null&&(_===t?g===g&&!re(g):a(g,_)))var _=g,w=p}return w}function z0(n,o,a,u){var f=n.length;for(a=j(a),a<0&&(a=-a>f?0:f+a),u=u===t||u>f?f:j(u),u<0&&(u+=f),u=a>u?0:Jh(u);a<u;)n[a++]=o;return n}function Mf(n,o){var a=[];return yn(n,function(u,f,p){o(u,f,p)&&a.push(u)}),a}function Ot(n,o,a,u,f){var p=-1,g=n.length;for(a||(a=Ry),f||(f=[]);++p<g;){var _=n[p];o>0&&a(_)?o>1?Ot(_,o-1,a,u,f):bn(f,_):u||(f[f.length]=_)}return f}var gc=lh(),Bf=lh(!0);function Me(n,o){return n&&gc(n,o,Rt)}function _c(n,o){return n&&Bf(n,o,Rt)}function Qo(n,o){return pn(o,function(a){return rn(n[a])})}function Kn(n,o){o=xn(o,n);for(var a=0,u=o.length;n!=null&&a<u;)n=n[We(o[a++])];return a&&a==u?n:t}function Wf(n,o,a){var u=o(n);return z(n)?u:bn(u,a(n))}function zt(n){return n==null?n===t?b_:m_:jn&&jn in st(n)?Ey(n):Ly(n)}function vc(n,o){return n>o}function H0(n,o){return n!=null&&ot.call(n,o)}function V0(n,o){return n!=null&&o in st(n)}function j0(n,o,a){return n>=Mt(o,a)&&n<Et(o,a)}function yc(n,o,a){for(var u=a?nc:ko,f=n[0].length,p=n.length,g=p,_=T(p),w=1/0,C=[];g--;){var S=n[g];g&&o&&(S=ft(S,ne(o))),w=Mt(S.length,w),_[g]=!a&&(o||f>=120&&S.length>=120)?new Yn(g&&S):t}S=n[0];var A=-1,P=_[0];t:for(;++A<f&&C.length<w;){var O=S[A],L=o?o(O):O;if(O=a||O!==0?O:0,!(P?gr(P,L):u(C,L,a))){for(g=p;--g;){var G=_[g];if(!(G?gr(G,L):u(n[g],L,a)))continue t}P&&P.push(L),C.push(O)}}return C}function G0(n,o,a,u){return Me(n,function(f,p,g){o(u,a(f),p,g)}),u}function Ir(n,o,a){o=xn(o,n),n=Ch(n,o);var u=n==null?n:n[We(_e(o))];return u==null?t:ee(u,n,a)}function Uf(n){return bt(n)&&zt(n)==fi}function Y0(n){return bt(n)&&zt(n)==br}function $0(n){return bt(n)&&zt(n)==dr}function Cr(n,o,a,u,f){return n===o?!0:n==null||o==null||!bt(n)&&!bt(o)?n!==n&&o!==o:K0(n,o,a,u,Cr,f)}function K0(n,o,a,u,f,p){var g=z(n),_=z(o),w=g?To:Bt(n),C=_?To:Bt(o);w=w==fi?Qe:w,C=C==fi?Qe:C;var S=w==Qe,A=C==Qe,P=w==C;if(P&&Tn(n)){if(!Tn(o))return!1;g=!0,S=!1}if(P&&!S)return p||(p=new Se),g||Ii(n)?vh(n,o,a,u,f,p):wy(n,o,w,a,u,f,p);if(!(a&E)){var O=S&&ot.call(n,"__wrapped__"),L=A&&ot.call(o,"__wrapped__");if(O||L){var G=O?n.value():n,M=L?o.value():o;return p||(p=new Se),f(G,M,a,u,p)}}return P?(p||(p=new Se),xy(n,o,a,u,f,p)):!1}function q0(n){return bt(n)&&Bt(n)==Te}function wc(n,o,a,u){var f=a.length,p=f,g=!u;if(n==null)return!p;for(n=st(n);f--;){var _=a[f];if(g&&_[2]?_[1]!==n[_[0]]:!(_[0]in n))return!1}for(;++f<p;){_=a[f];var w=_[0],C=n[w],S=_[1];if(g&&_[2]){if(C===t&&!(w in n))return!1}else{var A=new Se;if(u)var P=u(C,S,w,n,o,A);if(!(P===t?Cr(S,C,E|R,u,A):P))return!1}}return!0}function zf(n){if(!mt(n)||ky(n))return!1;var o=rn(n)?qv:W_;return o.test(Qn(n))}function Q0(n){return bt(n)&&zt(n)==hr}function X0(n){return bt(n)&&Bt(n)==Ie}function Z0(n){return bt(n)&&hs(n.length)&&!!ut[zt(n)]}function Hf(n){return typeof n=="function"?n:n==null?Xt:typeof n=="object"?z(n)?Gf(n[0],n[1]):jf(n):um(n)}function xc(n){if(!Rr(n))return e0(n);var o=[];for(var a in st(n))ot.call(n,a)&&a!="constructor"&&o.push(a);return o}function J0(n){if(!mt(n))return Fy(n);var o=Rr(n),a=[];for(var u in n)u=="constructor"&&(o||!ot.call(n,u))||a.push(u);return a}function Ec(n,o){return n<o}function Vf(n,o){var a=-1,u=qt(n)?T(n.length):[];return yn(n,function(f,p,g){u[++a]=o(f,p,g)}),u}function jf(n){var o=Bc(n);return o.length==1&&o[0][2]?Th(o[0][0],o[0][1]):function(a){return a===n||wc(a,n,o)}}function Gf(n,o){return Uc(n)&&Eh(o)?Th(We(n),o):function(a){var u=Qc(a,n);return u===t&&u===o?Xc(a,n):Cr(o,u,E|R)}}function Xo(n,o,a,u,f){n!==o&&gc(o,function(p,g){if(f||(f=new Se),mt(p))ty(n,o,g,a,Xo,u,f);else{var _=u?u(Hc(n,g),p,g+"",n,o,f):t;_===t&&(_=p),pc(n,g,_)}},Qt)}function ty(n,o,a,u,f,p,g){var _=Hc(n,a),w=Hc(o,a),C=g.get(w);if(C){pc(n,a,C);return}var S=p?p(_,w,a+"",n,o,g):t,A=S===t;if(A){var P=z(w),O=!P&&Tn(w),L=!P&&!O&&Ii(w);S=w,P||O||L?z(_)?S=_:_t(_)?S=Kt(_):O?(A=!1,S=ih(w,!0)):L?(A=!1,S=rh(w,!0)):S=[]:kr(w)||Xn(w)?(S=_,Xn(_)?S=tm(_):(!mt(_)||rn(_))&&(S=xh(w))):A=!1}A&&(g.set(w,S),f(S,w,u,p,g),g.delete(w)),pc(n,a,S)}function Yf(n,o){var a=n.length;if(a)return o+=o<0?a:0,nn(o,a)?n[o]:t}function $f(n,o,a){o.length?o=ft(o,function(p){return z(p)?function(g){return Kn(g,p.length===1?p[0]:p)}:p}):o=[Xt];var u=-1;o=ft(o,ne(F()));var f=Vf(n,function(p,g,_){var w=ft(o,function(C){return C(p)});return{criteria:w,index:++u,value:p}});return Sv(f,function(p,g){return hy(p,g,a)})}function ey(n,o){return Kf(n,o,function(a,u){return Xc(n,u)})}function Kf(n,o,a){for(var u=-1,f=o.length,p={};++u<f;){var g=o[u],_=Kn(n,g);a(_,g)&&Sr(p,xn(g,n),_)}return p}function ny(n){return function(o){return Kn(o,n)}}function Tc(n,o,a,u){var f=u?Cv:pi,p=-1,g=o.length,_=n;for(n===o&&(o=Kt(o)),a&&(_=ft(n,ne(a)));++p<g;)for(var w=0,C=o[p],S=a?a(C):C;(w=f(_,S,w,u))>-1;)_!==n&&zo.call(_,w,1),zo.call(n,w,1);return n}function qf(n,o){for(var a=n?o.length:0,u=a-1;a--;){var f=o[a];if(a==u||f!==p){var p=f;nn(f)?zo.call(n,f,1):Ac(n,f)}}return n}function Ic(n,o){return n+jo(Rf()*(o-n+1))}function iy(n,o,a,u){for(var f=-1,p=Et(Vo((o-n)/(a||1)),0),g=T(p);p--;)g[u?p:++f]=n,n+=a;return g}function Cc(n,o){var a="";if(!n||o<1||o>mn)return a;do o%2&&(a+=n),o=jo(o/2),o&&(n+=n);while(o);return a}function Y(n,o){return Vc(Ih(n,o,Xt),n+"")}function ry(n){return Pf(Ci(n))}function oy(n,o){var a=Ci(n);return as(a,$n(o,0,a.length))}function Sr(n,o,a,u){if(!mt(n))return n;o=xn(o,n);for(var f=-1,p=o.length,g=p-1,_=n;_!=null&&++f<p;){var w=We(o[f]),C=a;if(w==="__proto__"||w==="constructor"||w==="prototype")return n;if(f!=g){var S=_[w];C=u?u(S,w,_):t,C===t&&(C=mt(S)?S:nn(o[f+1])?[]:{})}Er(_,w,C),_=_[w]}return n}var Qf=Go?function(n,o){return Go.set(n,o),n}:Xt,sy=Ho?function(n,o){return Ho(n,"toString",{configurable:!0,enumerable:!1,value:Jc(o),writable:!0})}:Xt;function ay(n){return as(Ci(n))}function ge(n,o,a){var u=-1,f=n.length;o<0&&(o=-o>f?0:f+o),a=a>f?f:a,a<0&&(a+=f),f=o>a?0:a-o>>>0,o>>>=0;for(var p=T(f);++u<f;)p[u]=n[u+o];return p}function cy(n,o){var a;return yn(n,function(u,f,p){return a=o(u,f,p),!a}),!!a}function Zo(n,o,a){var u=0,f=n==null?u:n.length;if(typeof o=="number"&&o===o&&f<=u_){for(;u<f;){var p=u+f>>>1,g=n[p];g!==null&&!re(g)&&(a?g<=o:g<o)?u=p+1:f=p}return f}return Sc(n,o,Xt,a)}function Sc(n,o,a,u){var f=0,p=n==null?0:n.length;if(p===0)return 0;o=a(o);for(var g=o!==o,_=o===null,w=re(o),C=o===t;f<p;){var S=jo((f+p)/2),A=a(n[S]),P=A!==t,O=A===null,L=A===A,G=re(A);if(g)var M=u||L;else C?M=L&&(u||P):_?M=L&&P&&(u||!O):w?M=L&&P&&!O&&(u||!G):O||G?M=!1:M=u?A<=o:A<o;M?f=S+1:p=S}return Mt(p,l_)}function Xf(n,o){for(var a=-1,u=n.length,f=0,p=[];++a<u;){var g=n[a],_=o?o(g):g;if(!a||!Ae(_,w)){var w=_;p[f++]=g===0?0:g}}return p}function Zf(n){return typeof n=="number"?n:re(n)?Eo:+n}function ie(n){if(typeof n=="string")return n;if(z(n))return ft(n,ie)+"";if(re(n))return Nf?Nf.call(n):"";var o=n+"";return o=="0"&&1/n==-Hn?"-0":o}function wn(n,o,a){var u=-1,f=ko,p=n.length,g=!0,_=[],w=_;if(a)g=!1,f=nc;else if(p>=i){var C=o?null:vy(n);if(C)return Do(C);g=!1,f=gr,w=new Yn}else w=o?[]:_;t:for(;++u<p;){var S=n[u],A=o?o(S):S;if(S=a||S!==0?S:0,g&&A===A){for(var P=w.length;P--;)if(w[P]===A)continue t;o&&w.push(A),_.push(S)}else f(w,A,a)||(w!==_&&w.push(A),_.push(S))}return _}function Ac(n,o){return o=xn(o,n),n=Ch(n,o),n==null||delete n[We(_e(o))]}function Jf(n,o,a,u){return Sr(n,o,a(Kn(n,o)),u)}function Jo(n,o,a,u){for(var f=n.length,p=u?f:-1;(u?p--:++p<f)&&o(n[p],p,n););return a?ge(n,u?0:p,u?p+1:f):ge(n,u?p+1:0,u?f:p)}function th(n,o){var a=n;return a instanceof Z&&(a=a.value()),ic(o,function(u,f){return f.func.apply(f.thisArg,bn([u],f.args))},a)}function Rc(n,o,a){var u=n.length;if(u<2)return u?wn(n[0]):[];for(var f=-1,p=T(u);++f<u;)for(var g=n[f],_=-1;++_<u;)_!=f&&(p[f]=Tr(p[f]||g,n[_],o,a));return wn(Ot(p,1),o,a)}function eh(n,o,a){for(var u=-1,f=n.length,p=o.length,g={};++u<f;){var _=u<p?o[u]:t;a(g,n[u],_)}return g}function Nc(n){return _t(n)?n:[]}function kc(n){return typeof n=="function"?n:Xt}function xn(n,o){return z(n)?n:Uc(n,o)?[n]:Nh(rt(n))}var ly=Y;function En(n,o,a){var u=n.length;return a=a===t?u:a,!o&&a>=u?n:ge(n,o,a)}var nh=Qv||function(n){return At.clearTimeout(n)};function ih(n,o){if(o)return n.slice();var a=n.length,u=Tf?Tf(a):new n.constructor(a);return n.copy(u),u}function Pc(n){var o=new n.constructor(n.byteLength);return new Wo(o).set(new Wo(n)),o}function uy(n,o){var a=o?Pc(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}function dy(n){var o=new n.constructor(n.source,Wd.exec(n));return o.lastIndex=n.lastIndex,o}function fy(n){return xr?st(xr.call(n)):{}}function rh(n,o){var a=o?Pc(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function oh(n,o){if(n!==o){var a=n!==t,u=n===null,f=n===n,p=re(n),g=o!==t,_=o===null,w=o===o,C=re(o);if(!_&&!C&&!p&&n>o||p&&g&&w&&!_&&!C||u&&g&&w||!a&&w||!f)return 1;if(!u&&!p&&!C&&n<o||C&&a&&f&&!u&&!p||_&&a&&f||!g&&f||!w)return-1}return 0}function hy(n,o,a){for(var u=-1,f=n.criteria,p=o.criteria,g=f.length,_=a.length;++u<g;){var w=oh(f[u],p[u]);if(w){if(u>=_)return w;var C=a[u];return w*(C=="desc"?-1:1)}}return n.index-o.index}function sh(n,o,a,u){for(var f=-1,p=n.length,g=a.length,_=-1,w=o.length,C=Et(p-g,0),S=T(w+C),A=!u;++_<w;)S[_]=o[_];for(;++f<g;)(A||f<p)&&(S[a[f]]=n[f]);for(;C--;)S[_++]=n[f++];return S}function ah(n,o,a,u){for(var f=-1,p=n.length,g=-1,_=a.length,w=-1,C=o.length,S=Et(p-_,0),A=T(S+C),P=!u;++f<S;)A[f]=n[f];for(var O=f;++w<C;)A[O+w]=o[w];for(;++g<_;)(P||f<p)&&(A[O+a[g]]=n[f++]);return A}function Kt(n,o){var a=-1,u=n.length;for(o||(o=T(u));++a<u;)o[a]=n[a];return o}function Be(n,o,a,u){var f=!a;a||(a={});for(var p=-1,g=o.length;++p<g;){var _=o[p],w=u?u(a[_],n[_],_,a,n):t;w===t&&(w=n[_]),f?Je(a,_,w):Er(a,_,w)}return a}function my(n,o){return Be(n,Wc(n),o)}function py(n,o){return Be(n,yh(n),o)}function ts(n,o){return function(a,u){var f=z(a)?yv:M0,p=o?o():{};return f(a,n,F(u,2),p)}}function xi(n){return Y(function(o,a){var u=-1,f=a.length,p=f>1?a[f-1]:t,g=f>2?a[2]:t;for(p=n.length>3&&typeof p=="function"?(f--,p):t,g&&Ht(a[0],a[1],g)&&(p=f<3?t:p,f=1),o=st(o);++u<f;){var _=a[u];_&&n(o,_,u,p)}return o})}function ch(n,o){return function(a,u){if(a==null)return a;if(!qt(a))return n(a,u);for(var f=a.length,p=o?f:-1,g=st(a);(o?p--:++p<f)&&u(g[p],p,g)!==!1;);return a}}function lh(n){return function(o,a,u){for(var f=-1,p=st(o),g=u(o),_=g.length;_--;){var w=g[n?_:++f];if(a(p[w],w,p)===!1)break}return o}}function by(n,o,a){var u=o&k,f=Ar(n);function p(){var g=this&&this!==At&&this instanceof p?f:n;return g.apply(u?a:this,arguments)}return p}function uh(n){return function(o){o=rt(o);var a=bi(o)?Ce(o):t,u=a?a[0]:o.charAt(0),f=a?En(a,1).join(""):o.slice(1);return u[n]()+f}}function Ei(n){return function(o){return ic(cm(am(o).replace(sv,"")),n,"")}}function Ar(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var a=wi(n.prototype),u=n.apply(a,o);return mt(u)?u:a}}function gy(n,o,a){var u=Ar(n);function f(){for(var p=arguments.length,g=T(p),_=p,w=Ti(f);_--;)g[_]=arguments[_];var C=p<3&&g[0]!==w&&g[p-1]!==w?[]:gn(g,w);if(p-=C.length,p<a)return ph(n,o,es,f.placeholder,t,g,C,t,t,a-p);var S=this&&this!==At&&this instanceof f?u:n;return ee(S,this,g)}return f}function dh(n){return function(o,a,u){var f=st(o);if(!qt(o)){var p=F(a,3);o=Rt(o),a=function(_){return p(f[_],_,f)}}var g=n(o,a,u);return g>-1?f[p?o[g]:g]:t}}function fh(n){return en(function(o){var a=o.length,u=a,f=pe.prototype.thru;for(n&&o.reverse();u--;){var p=o[u];if(typeof p!="function")throw new me(s);if(f&&!g&&os(p)=="wrapper")var g=new pe([],!0)}for(u=g?u:a;++u<a;){p=o[u];var _=os(p),w=_=="wrapper"?Mc(p):t;w&&zc(w[0])&&w[1]==(Dt|dt|X|lr)&&!w[4].length&&w[9]==1?g=g[os(w[0])].apply(g,w[3]):g=p.length==1&&zc(p)?g[_]():g.thru(p)}return function(){var C=arguments,S=C[0];if(g&&C.length==1&&z(S))return g.plant(S).value();for(var A=0,P=a?o[A].apply(this,C):S;++A<a;)P=o[A].call(this,P);return P}})}function es(n,o,a,u,f,p,g,_,w,C){var S=o&Dt,A=o&k,P=o&W,O=o&(dt|yt),L=o&Ma,G=P?t:Ar(n);function M(){for(var Q=arguments.length,J=T(Q),oe=Q;oe--;)J[oe]=arguments[oe];if(O)var Vt=Ti(M),se=Rv(J,Vt);if(u&&(J=sh(J,u,f,O)),p&&(J=ah(J,p,g,O)),Q-=se,O&&Q<C){var vt=gn(J,Vt);return ph(n,o,es,M.placeholder,a,J,vt,_,w,C-Q)}var Re=A?a:this,sn=P?Re[n]:n;return Q=J.length,_?J=My(J,_):L&&Q>1&&J.reverse(),S&&w<Q&&(J.length=w),this&&this!==At&&this instanceof M&&(sn=G||Ar(sn)),sn.apply(Re,J)}return M}function hh(n,o){return function(a,u){return G0(a,n,o(u),{})}}function ns(n,o){return function(a,u){var f;if(a===t&&u===t)return o;if(a!==t&&(f=a),u!==t){if(f===t)return u;typeof a=="string"||typeof u=="string"?(a=ie(a),u=ie(u)):(a=Zf(a),u=Zf(u)),f=n(a,u)}return f}}function Dc(n){return en(function(o){return o=ft(o,ne(F())),Y(function(a){var u=this;return n(o,function(f){return ee(f,u,a)})})})}function is(n,o){o=o===t?" ":ie(o);var a=o.length;if(a<2)return a?Cc(o,n):o;var u=Cc(o,Vo(n/gi(o)));return bi(o)?En(Ce(u),0,n).join(""):u.slice(0,n)}function _y(n,o,a,u){var f=o&k,p=Ar(n);function g(){for(var _=-1,w=arguments.length,C=-1,S=u.length,A=T(S+w),P=this&&this!==At&&this instanceof g?p:n;++C<S;)A[C]=u[C];for(;w--;)A[C++]=arguments[++_];return ee(P,f?a:this,A)}return g}function mh(n){return function(o,a,u){return u&&typeof u!="number"&&Ht(o,a,u)&&(a=u=t),o=on(o),a===t?(a=o,o=0):a=on(a),u=u===t?o<a?1:-1:on(u),iy(o,a,u,n)}}function rs(n){return function(o,a){return typeof o=="string"&&typeof a=="string"||(o=ve(o),a=ve(a)),n(o,a)}}function ph(n,o,a,u,f,p,g,_,w,C){var S=o&dt,A=S?g:t,P=S?t:g,O=S?p:t,L=S?t:p;o|=S?X:St,o&=~(S?St:X),o&it||(o&=~(k|W));var G=[n,o,f,O,A,L,P,_,w,C],M=a.apply(t,G);return zc(n)&&Sh(M,G),M.placeholder=u,Ah(M,n,o)}function Oc(n){var o=xt[n];return function(a,u){if(a=ve(a),u=u==null?0:Mt(j(u),292),u&&Af(a)){var f=(rt(a)+"e").split("e"),p=o(f[0]+"e"+(+f[1]+u));return f=(rt(p)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return o(a)}}var vy=vi&&1/Do(new vi([,-0]))[1]==Hn?function(n){return new vi(n)}:nl;function bh(n){return function(o){var a=Bt(o);return a==Te?uc(o):a==Ie?Lv(o):Av(o,n(o))}}function tn(n,o,a,u,f,p,g,_){var w=o&W;if(!w&&typeof n!="function")throw new me(s);var C=u?u.length:0;if(C||(o&=~(X|St),u=f=t),g=g===t?g:Et(j(g),0),_=_===t?_:j(_),C-=f?f.length:0,o&St){var S=u,A=f;u=f=t}var P=w?t:Mc(n),O=[n,o,a,u,f,S,A,p,g,_];if(P&&Oy(O,P),n=O[0],o=O[1],a=O[2],u=O[3],f=O[4],_=O[9]=O[9]===t?w?0:n.length:Et(O[9]-C,0),!_&&o&(dt|yt)&&(o&=~(dt|yt)),!o||o==k)var L=by(n,o,a);else o==dt||o==yt?L=gy(n,o,_):(o==X||o==(k|X))&&!f.length?L=_y(n,o,a,u):L=es.apply(t,O);var G=P?Qf:Sh;return Ah(G(L,O),n,o)}function gh(n,o,a,u){return n===t||Ae(n,_i[a])&&!ot.call(u,a)?o:n}function _h(n,o,a,u,f,p){return mt(n)&&mt(o)&&(p.set(o,n),Xo(n,o,t,_h,p),p.delete(o)),n}function yy(n){return kr(n)?t:n}function vh(n,o,a,u,f,p){var g=a&E,_=n.length,w=o.length;if(_!=w&&!(g&&w>_))return!1;var C=p.get(n),S=p.get(o);if(C&&S)return C==o&&S==n;var A=-1,P=!0,O=a&R?new Yn:t;for(p.set(n,o),p.set(o,n);++A<_;){var L=n[A],G=o[A];if(u)var M=g?u(G,L,A,o,n,p):u(L,G,A,n,o,p);if(M!==t){if(M)continue;P=!1;break}if(O){if(!rc(o,function(Q,J){if(!gr(O,J)&&(L===Q||f(L,Q,a,u,p)))return O.push(J)})){P=!1;break}}else if(!(L===G||f(L,G,a,u,p))){P=!1;break}}return p.delete(n),p.delete(o),P}function wy(n,o,a,u,f,p,g){switch(a){case hi:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case br:return!(n.byteLength!=o.byteLength||!p(new Wo(n),new Wo(o)));case ur:case dr:case fr:return Ae(+n,+o);case Io:return n.name==o.name&&n.message==o.message;case hr:case mr:return n==o+"";case Te:var _=uc;case Ie:var w=u&E;if(_||(_=Do),n.size!=o.size&&!w)return!1;var C=g.get(n);if(C)return C==o;u|=R,g.set(n,o);var S=vh(_(n),_(o),u,f,p,g);return g.delete(n),S;case So:if(xr)return xr.call(n)==xr.call(o)}return!1}function xy(n,o,a,u,f,p){var g=a&E,_=Fc(n),w=_.length,C=Fc(o),S=C.length;if(w!=S&&!g)return!1;for(var A=w;A--;){var P=_[A];if(!(g?P in o:ot.call(o,P)))return!1}var O=p.get(n),L=p.get(o);if(O&&L)return O==o&&L==n;var G=!0;p.set(n,o),p.set(o,n);for(var M=g;++A<w;){P=_[A];var Q=n[P],J=o[P];if(u)var oe=g?u(J,Q,P,o,n,p):u(Q,J,P,n,o,p);if(!(oe===t?Q===J||f(Q,J,a,u,p):oe)){G=!1;break}M||(M=P=="constructor")}if(G&&!M){var Vt=n.constructor,se=o.constructor;Vt!=se&&"constructor"in n&&"constructor"in o&&!(typeof Vt=="function"&&Vt instanceof Vt&&typeof se=="function"&&se instanceof se)&&(G=!1)}return p.delete(n),p.delete(o),G}function en(n){return Vc(Ih(n,t,Oh),n+"")}function Fc(n){return Wf(n,Rt,Wc)}function Lc(n){return Wf(n,Qt,yh)}var Mc=Go?function(n){return Go.get(n)}:nl;function os(n){for(var o=n.name+"",a=yi[o],u=ot.call(yi,o)?a.length:0;u--;){var f=a[u],p=f.func;if(p==null||p==n)return f.name}return o}function Ti(n){var o=ot.call(m,"placeholder")?m:n;return o.placeholder}function F(){var n=m.iteratee||tl;return n=n===tl?Hf:n,arguments.length?n(arguments[0],arguments[1]):n}function ss(n,o){var a=n.__data__;return Ny(o)?a[typeof o=="string"?"string":"hash"]:a.map}function Bc(n){for(var o=Rt(n),a=o.length;a--;){var u=o[a],f=n[u];o[a]=[u,f,Eh(f)]}return o}function qn(n,o){var a=Dv(n,o);return zf(a)?a:t}function Ey(n){var o=ot.call(n,jn),a=n[jn];try{n[jn]=t;var u=!0}catch{}var f=Mo.call(n);return u&&(o?n[jn]=a:delete n[jn]),f}var Wc=fc?function(n){return n==null?[]:(n=st(n),pn(fc(n),function(o){return Cf.call(n,o)}))}:il,yh=fc?function(n){for(var o=[];n;)bn(o,Wc(n)),n=Uo(n);return o}:il,Bt=zt;(hc&&Bt(new hc(new ArrayBuffer(1)))!=hi||vr&&Bt(new vr)!=Te||mc&&Bt(mc.resolve())!=Fd||vi&&Bt(new vi)!=Ie||yr&&Bt(new yr)!=pr)&&(Bt=function(n){var o=zt(n),a=o==Qe?n.constructor:t,u=a?Qn(a):"";if(u)switch(u){case o0:return hi;case s0:return Te;case a0:return Fd;case c0:return Ie;case l0:return pr}return o});function Ty(n,o,a){for(var u=-1,f=a.length;++u<f;){var p=a[u],g=p.size;switch(p.type){case"drop":n+=g;break;case"dropRight":o-=g;break;case"take":o=Mt(o,n+g);break;case"takeRight":n=Et(n,o-g);break}}return{start:n,end:o}}function Iy(n){var o=n.match(k_);return o?o[1].split(P_):[]}function wh(n,o,a){o=xn(o,n);for(var u=-1,f=o.length,p=!1;++u<f;){var g=We(o[u]);if(!(p=n!=null&&a(n,g)))break;n=n[g]}return p||++u!=f?p:(f=n==null?0:n.length,!!f&&hs(f)&&nn(g,f)&&(z(n)||Xn(n)))}function Cy(n){var o=n.length,a=new n.constructor(o);return o&&typeof n[0]=="string"&&ot.call(n,"index")&&(a.index=n.index,a.input=n.input),a}function xh(n){return typeof n.constructor=="function"&&!Rr(n)?wi(Uo(n)):{}}function Sy(n,o,a){var u=n.constructor;switch(o){case br:return Pc(n);case ur:case dr:return new u(+n);case hi:return uy(n,a);case Ba:case Wa:case Ua:case za:case Ha:case Va:case ja:case Ga:case Ya:return rh(n,a);case Te:return new u;case fr:case mr:return new u(n);case hr:return dy(n);case Ie:return new u;case So:return fy(n)}}function Ay(n,o){var a=o.length;if(!a)return n;var u=a-1;return o[u]=(a>1?"& ":"")+o[u],o=o.join(a>2?", ":" "),n.replace(N_,`{
/* [wrapped with `+o+`] */
`)}function Ry(n){return z(n)||Xn(n)||!!(Sf&&n&&n[Sf])}function nn(n,o){var a=typeof n;return o=o??mn,!!o&&(a=="number"||a!="symbol"&&z_.test(n))&&n>-1&&n%1==0&&n<o}function Ht(n,o,a){if(!mt(a))return!1;var u=typeof o;return(u=="number"?qt(a)&&nn(o,a.length):u=="string"&&o in a)?Ae(a[o],n):!1}function Uc(n,o){if(z(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||re(n)?!0:C_.test(n)||!I_.test(n)||o!=null&&n in st(o)}function Ny(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function zc(n){var o=os(n),a=m[o];if(typeof a!="function"||!(o in Z.prototype))return!1;if(n===a)return!0;var u=Mc(a);return!!u&&n===u[0]}function ky(n){return!!Ef&&Ef in n}var Py=Fo?rn:rl;function Rr(n){var o=n&&n.constructor,a=typeof o=="function"&&o.prototype||_i;return n===a}function Eh(n){return n===n&&!mt(n)}function Th(n,o){return function(a){return a==null?!1:a[n]===o&&(o!==t||n in st(a))}}function Dy(n){var o=ds(n,function(u){return a.size===d&&a.clear(),u}),a=o.cache;return o}function Oy(n,o){var a=n[1],u=o[1],f=a|u,p=f<(k|W|Dt),g=u==Dt&&a==dt||u==Dt&&a==lr&&n[7].length<=o[8]||u==(Dt|lr)&&o[7].length<=o[8]&&a==dt;if(!(p||g))return n;u&k&&(n[2]=o[2],f|=a&k?0:it);var _=o[3];if(_){var w=n[3];n[3]=w?sh(w,_,o[4]):_,n[4]=w?gn(n[3],h):o[4]}return _=o[5],_&&(w=n[5],n[5]=w?ah(w,_,o[6]):_,n[6]=w?gn(n[5],h):o[6]),_=o[7],_&&(n[7]=_),u&Dt&&(n[8]=n[8]==null?o[8]:Mt(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=f,n}function Fy(n){var o=[];if(n!=null)for(var a in st(n))o.push(a);return o}function Ly(n){return Mo.call(n)}function Ih(n,o,a){return o=Et(o===t?n.length-1:o,0),function(){for(var u=arguments,f=-1,p=Et(u.length-o,0),g=T(p);++f<p;)g[f]=u[o+f];f=-1;for(var _=T(o+1);++f<o;)_[f]=u[f];return _[o]=a(g),ee(n,this,_)}}function Ch(n,o){return o.length<2?n:Kn(n,ge(o,0,-1))}function My(n,o){for(var a=n.length,u=Mt(o.length,a),f=Kt(n);u--;){var p=o[u];n[u]=nn(p,a)?f[p]:t}return n}function Hc(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var Sh=Rh(Qf),Nr=Zv||function(n,o){return At.setTimeout(n,o)},Vc=Rh(sy);function Ah(n,o,a){var u=o+"";return Vc(n,Ay(u,By(Iy(u),a)))}function Rh(n){var o=0,a=0;return function(){var u=n0(),f=o_-(u-a);if(a=u,f>0){if(++o>=r_)return arguments[0]}else o=0;return n.apply(t,arguments)}}function as(n,o){var a=-1,u=n.length,f=u-1;for(o=o===t?u:o;++a<o;){var p=Ic(a,f),g=n[p];n[p]=n[a],n[a]=g}return n.length=o,n}var Nh=Dy(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(S_,function(a,u,f,p){o.push(f?p.replace(F_,"$1"):u||a)}),o});function We(n){if(typeof n=="string"||re(n))return n;var o=n+"";return o=="0"&&1/n==-Hn?"-0":o}function Qn(n){if(n!=null){try{return Lo.call(n)}catch{}try{return n+""}catch{}}return""}function By(n,o){return he(d_,function(a){var u="_."+a[0];o&a[1]&&!ko(n,u)&&n.push(u)}),n.sort()}function kh(n){if(n instanceof Z)return n.clone();var o=new pe(n.__wrapped__,n.__chain__);return o.__actions__=Kt(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function Wy(n,o,a){(a?Ht(n,o,a):o===t)?o=1:o=Et(j(o),0);var u=n==null?0:n.length;if(!u||o<1)return[];for(var f=0,p=0,g=T(Vo(u/o));f<u;)g[p++]=ge(n,f,f+=o);return g}function Uy(n){for(var o=-1,a=n==null?0:n.length,u=0,f=[];++o<a;){var p=n[o];p&&(f[u++]=p)}return f}function zy(){var n=arguments.length;if(!n)return[];for(var o=T(n-1),a=arguments[0],u=n;u--;)o[u-1]=arguments[u];return bn(z(a)?Kt(a):[a],Ot(o,1))}var Hy=Y(function(n,o){return _t(n)?Tr(n,Ot(o,1,_t,!0)):[]}),Vy=Y(function(n,o){var a=_e(o);return _t(a)&&(a=t),_t(n)?Tr(n,Ot(o,1,_t,!0),F(a,2)):[]}),jy=Y(function(n,o){var a=_e(o);return _t(a)&&(a=t),_t(n)?Tr(n,Ot(o,1,_t,!0),t,a):[]});function Gy(n,o,a){var u=n==null?0:n.length;return u?(o=a||o===t?1:j(o),ge(n,o<0?0:o,u)):[]}function Yy(n,o,a){var u=n==null?0:n.length;return u?(o=a||o===t?1:j(o),o=u-o,ge(n,0,o<0?0:o)):[]}function $y(n,o){return n&&n.length?Jo(n,F(o,3),!0,!0):[]}function Ky(n,o){return n&&n.length?Jo(n,F(o,3),!0):[]}function qy(n,o,a,u){var f=n==null?0:n.length;return f?(a&&typeof a!="number"&&Ht(n,o,a)&&(a=0,u=f),z0(n,o,a,u)):[]}function Ph(n,o,a){var u=n==null?0:n.length;if(!u)return-1;var f=a==null?0:j(a);return f<0&&(f=Et(u+f,0)),Po(n,F(o,3),f)}function Dh(n,o,a){var u=n==null?0:n.length;if(!u)return-1;var f=u-1;return a!==t&&(f=j(a),f=a<0?Et(u+f,0):Mt(f,u-1)),Po(n,F(o,3),f,!0)}function Oh(n){var o=n==null?0:n.length;return o?Ot(n,1):[]}function Qy(n){var o=n==null?0:n.length;return o?Ot(n,Hn):[]}function Xy(n,o){var a=n==null?0:n.length;return a?(o=o===t?1:j(o),Ot(n,o)):[]}function Zy(n){for(var o=-1,a=n==null?0:n.length,u={};++o<a;){var f=n[o];u[f[0]]=f[1]}return u}function Fh(n){return n&&n.length?n[0]:t}function Jy(n,o,a){var u=n==null?0:n.length;if(!u)return-1;var f=a==null?0:j(a);return f<0&&(f=Et(u+f,0)),pi(n,o,f)}function tw(n){var o=n==null?0:n.length;return o?ge(n,0,-1):[]}var ew=Y(function(n){var o=ft(n,Nc);return o.length&&o[0]===n[0]?yc(o):[]}),nw=Y(function(n){var o=_e(n),a=ft(n,Nc);return o===_e(a)?o=t:a.pop(),a.length&&a[0]===n[0]?yc(a,F(o,2)):[]}),iw=Y(function(n){var o=_e(n),a=ft(n,Nc);return o=typeof o=="function"?o:t,o&&a.pop(),a.length&&a[0]===n[0]?yc(a,t,o):[]});function rw(n,o){return n==null?"":t0.call(n,o)}function _e(n){var o=n==null?0:n.length;return o?n[o-1]:t}function ow(n,o,a){var u=n==null?0:n.length;if(!u)return-1;var f=u;return a!==t&&(f=j(a),f=f<0?Et(u+f,0):Mt(f,u-1)),o===o?Bv(n,o,f):Po(n,pf,f,!0)}function sw(n,o){return n&&n.length?Yf(n,j(o)):t}var aw=Y(Lh);function Lh(n,o){return n&&n.length&&o&&o.length?Tc(n,o):n}function cw(n,o,a){return n&&n.length&&o&&o.length?Tc(n,o,F(a,2)):n}function lw(n,o,a){return n&&n.length&&o&&o.length?Tc(n,o,t,a):n}var uw=en(function(n,o){var a=n==null?0:n.length,u=bc(n,o);return qf(n,ft(o,function(f){return nn(f,a)?+f:f}).sort(oh)),u});function dw(n,o){var a=[];if(!(n&&n.length))return a;var u=-1,f=[],p=n.length;for(o=F(o,3);++u<p;){var g=n[u];o(g,u,n)&&(a.push(g),f.push(u))}return qf(n,f),a}function jc(n){return n==null?n:r0.call(n)}function fw(n,o,a){var u=n==null?0:n.length;return u?(a&&typeof a!="number"&&Ht(n,o,a)?(o=0,a=u):(o=o==null?0:j(o),a=a===t?u:j(a)),ge(n,o,a)):[]}function hw(n,o){return Zo(n,o)}function mw(n,o,a){return Sc(n,o,F(a,2))}function pw(n,o){var a=n==null?0:n.length;if(a){var u=Zo(n,o);if(u<a&&Ae(n[u],o))return u}return-1}function bw(n,o){return Zo(n,o,!0)}function gw(n,o,a){return Sc(n,o,F(a,2),!0)}function _w(n,o){var a=n==null?0:n.length;if(a){var u=Zo(n,o,!0)-1;if(Ae(n[u],o))return u}return-1}function vw(n){return n&&n.length?Xf(n):[]}function yw(n,o){return n&&n.length?Xf(n,F(o,2)):[]}function ww(n){var o=n==null?0:n.length;return o?ge(n,1,o):[]}function xw(n,o,a){return n&&n.length?(o=a||o===t?1:j(o),ge(n,0,o<0?0:o)):[]}function Ew(n,o,a){var u=n==null?0:n.length;return u?(o=a||o===t?1:j(o),o=u-o,ge(n,o<0?0:o,u)):[]}function Tw(n,o){return n&&n.length?Jo(n,F(o,3),!1,!0):[]}function Iw(n,o){return n&&n.length?Jo(n,F(o,3)):[]}var Cw=Y(function(n){return wn(Ot(n,1,_t,!0))}),Sw=Y(function(n){var o=_e(n);return _t(o)&&(o=t),wn(Ot(n,1,_t,!0),F(o,2))}),Aw=Y(function(n){var o=_e(n);return o=typeof o=="function"?o:t,wn(Ot(n,1,_t,!0),t,o)});function Rw(n){return n&&n.length?wn(n):[]}function Nw(n,o){return n&&n.length?wn(n,F(o,2)):[]}function kw(n,o){return o=typeof o=="function"?o:t,n&&n.length?wn(n,t,o):[]}function Gc(n){if(!(n&&n.length))return[];var o=0;return n=pn(n,function(a){if(_t(a))return o=Et(a.length,o),!0}),cc(o,function(a){return ft(n,oc(a))})}function Mh(n,o){if(!(n&&n.length))return[];var a=Gc(n);return o==null?a:ft(a,function(u){return ee(o,t,u)})}var Pw=Y(function(n,o){return _t(n)?Tr(n,o):[]}),Dw=Y(function(n){return Rc(pn(n,_t))}),Ow=Y(function(n){var o=_e(n);return _t(o)&&(o=t),Rc(pn(n,_t),F(o,2))}),Fw=Y(function(n){var o=_e(n);return o=typeof o=="function"?o:t,Rc(pn(n,_t),t,o)}),Lw=Y(Gc);function Mw(n,o){return eh(n||[],o||[],Er)}function Bw(n,o){return eh(n||[],o||[],Sr)}var Ww=Y(function(n){var o=n.length,a=o>1?n[o-1]:t;return a=typeof a=="function"?(n.pop(),a):t,Mh(n,a)});function Bh(n){var o=m(n);return o.__chain__=!0,o}function Uw(n,o){return o(n),n}function cs(n,o){return o(n)}var zw=en(function(n){var o=n.length,a=o?n[0]:0,u=this.__wrapped__,f=function(p){return bc(p,n)};return o>1||this.__actions__.length||!(u instanceof Z)||!nn(a)?this.thru(f):(u=u.slice(a,+a+(o?1:0)),u.__actions__.push({func:cs,args:[f],thisArg:t}),new pe(u,this.__chain__).thru(function(p){return o&&!p.length&&p.push(t),p}))});function Hw(){return Bh(this)}function Vw(){return new pe(this.value(),this.__chain__)}function jw(){this.__values__===t&&(this.__values__=Zh(this.value()));var n=this.__index__>=this.__values__.length,o=n?t:this.__values__[this.__index__++];return{done:n,value:o}}function Gw(){return this}function Yw(n){for(var o,a=this;a instanceof $o;){var u=kh(a);u.__index__=0,u.__values__=t,o?f.__wrapped__=u:o=u;var f=u;a=a.__wrapped__}return f.__wrapped__=n,o}function $w(){var n=this.__wrapped__;if(n instanceof Z){var o=n;return this.__actions__.length&&(o=new Z(this)),o=o.reverse(),o.__actions__.push({func:cs,args:[jc],thisArg:t}),new pe(o,this.__chain__)}return this.thru(jc)}function Kw(){return th(this.__wrapped__,this.__actions__)}var qw=ts(function(n,o,a){ot.call(n,a)?++n[a]:Je(n,a,1)});function Qw(n,o,a){var u=z(n)?hf:U0;return a&&Ht(n,o,a)&&(o=t),u(n,F(o,3))}function Xw(n,o){var a=z(n)?pn:Mf;return a(n,F(o,3))}var Zw=dh(Ph),Jw=dh(Dh);function tx(n,o){return Ot(ls(n,o),1)}function ex(n,o){return Ot(ls(n,o),Hn)}function nx(n,o,a){return a=a===t?1:j(a),Ot(ls(n,o),a)}function Wh(n,o){var a=z(n)?he:yn;return a(n,F(o,3))}function Uh(n,o){var a=z(n)?wv:Lf;return a(n,F(o,3))}var ix=ts(function(n,o,a){ot.call(n,a)?n[a].push(o):Je(n,a,[o])});function rx(n,o,a,u){n=qt(n)?n:Ci(n),a=a&&!u?j(a):0;var f=n.length;return a<0&&(a=Et(f+a,0)),ms(n)?a<=f&&n.indexOf(o,a)>-1:!!f&&pi(n,o,a)>-1}var ox=Y(function(n,o,a){var u=-1,f=typeof o=="function",p=qt(n)?T(n.length):[];return yn(n,function(g){p[++u]=f?ee(o,g,a):Ir(g,o,a)}),p}),sx=ts(function(n,o,a){Je(n,a,o)});function ls(n,o){var a=z(n)?ft:Vf;return a(n,F(o,3))}function ax(n,o,a,u){return n==null?[]:(z(o)||(o=o==null?[]:[o]),a=u?t:a,z(a)||(a=a==null?[]:[a]),$f(n,o,a))}var cx=ts(function(n,o,a){n[a?0:1].push(o)},function(){return[[],[]]});function lx(n,o,a){var u=z(n)?ic:gf,f=arguments.length<3;return u(n,F(o,4),a,f,yn)}function ux(n,o,a){var u=z(n)?xv:gf,f=arguments.length<3;return u(n,F(o,4),a,f,Lf)}function dx(n,o){var a=z(n)?pn:Mf;return a(n,fs(F(o,3)))}function fx(n){var o=z(n)?Pf:ry;return o(n)}function hx(n,o,a){(a?Ht(n,o,a):o===t)?o=1:o=j(o);var u=z(n)?F0:oy;return u(n,o)}function mx(n){var o=z(n)?L0:ay;return o(n)}function px(n){if(n==null)return 0;if(qt(n))return ms(n)?gi(n):n.length;var o=Bt(n);return o==Te||o==Ie?n.size:xc(n).length}function bx(n,o,a){var u=z(n)?rc:cy;return a&&Ht(n,o,a)&&(o=t),u(n,F(o,3))}var gx=Y(function(n,o){if(n==null)return[];var a=o.length;return a>1&&Ht(n,o[0],o[1])?o=[]:a>2&&Ht(o[0],o[1],o[2])&&(o=[o[0]]),$f(n,Ot(o,1),[])}),us=Xv||function(){return At.Date.now()};function _x(n,o){if(typeof o!="function")throw new me(s);return n=j(n),function(){if(--n<1)return o.apply(this,arguments)}}function zh(n,o,a){return o=a?t:o,o=n&&o==null?n.length:o,tn(n,Dt,t,t,t,t,o)}function Hh(n,o){var a;if(typeof o!="function")throw new me(s);return n=j(n),function(){return--n>0&&(a=o.apply(this,arguments)),n<=1&&(o=t),a}}var Yc=Y(function(n,o,a){var u=k;if(a.length){var f=gn(a,Ti(Yc));u|=X}return tn(n,u,o,a,f)}),Vh=Y(function(n,o,a){var u=k|W;if(a.length){var f=gn(a,Ti(Vh));u|=X}return tn(o,u,n,a,f)});function jh(n,o,a){o=a?t:o;var u=tn(n,dt,t,t,t,t,t,o);return u.placeholder=jh.placeholder,u}function Gh(n,o,a){o=a?t:o;var u=tn(n,yt,t,t,t,t,t,o);return u.placeholder=Gh.placeholder,u}function Yh(n,o,a){var u,f,p,g,_,w,C=0,S=!1,A=!1,P=!0;if(typeof n!="function")throw new me(s);o=ve(o)||0,mt(a)&&(S=!!a.leading,A="maxWait"in a,p=A?Et(ve(a.maxWait)||0,o):p,P="trailing"in a?!!a.trailing:P);function O(vt){var Re=u,sn=f;return u=f=t,C=vt,g=n.apply(sn,Re),g}function L(vt){return C=vt,_=Nr(Q,o),S?O(vt):g}function G(vt){var Re=vt-w,sn=vt-C,dm=o-Re;return A?Mt(dm,p-sn):dm}function M(vt){var Re=vt-w,sn=vt-C;return w===t||Re>=o||Re<0||A&&sn>=p}function Q(){var vt=us();if(M(vt))return J(vt);_=Nr(Q,G(vt))}function J(vt){return _=t,P&&u?O(vt):(u=f=t,g)}function oe(){_!==t&&nh(_),C=0,u=w=f=_=t}function Vt(){return _===t?g:J(us())}function se(){var vt=us(),Re=M(vt);if(u=arguments,f=this,w=vt,Re){if(_===t)return L(w);if(A)return nh(_),_=Nr(Q,o),O(w)}return _===t&&(_=Nr(Q,o)),g}return se.cancel=oe,se.flush=Vt,se}var vx=Y(function(n,o){return Ff(n,1,o)}),yx=Y(function(n,o,a){return Ff(n,ve(o)||0,a)});function wx(n){return tn(n,Ma)}function ds(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new me(s);var a=function(){var u=arguments,f=o?o.apply(this,u):u[0],p=a.cache;if(p.has(f))return p.get(f);var g=n.apply(this,u);return a.cache=p.set(f,g)||p,g};return a.cache=new(ds.Cache||Ze),a}ds.Cache=Ze;function fs(n){if(typeof n!="function")throw new me(s);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function xx(n){return Hh(2,n)}var Ex=ly(function(n,o){o=o.length==1&&z(o[0])?ft(o[0],ne(F())):ft(Ot(o,1),ne(F()));var a=o.length;return Y(function(u){for(var f=-1,p=Mt(u.length,a);++f<p;)u[f]=o[f].call(this,u[f]);return ee(n,this,u)})}),$c=Y(function(n,o){var a=gn(o,Ti($c));return tn(n,X,t,o,a)}),$h=Y(function(n,o){var a=gn(o,Ti($h));return tn(n,St,t,o,a)}),Tx=en(function(n,o){return tn(n,lr,t,t,t,o)});function Ix(n,o){if(typeof n!="function")throw new me(s);return o=o===t?o:j(o),Y(n,o)}function Cx(n,o){if(typeof n!="function")throw new me(s);return o=o==null?0:Et(j(o),0),Y(function(a){var u=a[o],f=En(a,0,o);return u&&bn(f,u),ee(n,this,f)})}function Sx(n,o,a){var u=!0,f=!0;if(typeof n!="function")throw new me(s);return mt(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),Yh(n,o,{leading:u,maxWait:o,trailing:f})}function Ax(n){return zh(n,1)}function Rx(n,o){return $c(kc(o),n)}function Nx(){if(!arguments.length)return[];var n=arguments[0];return z(n)?n:[n]}function kx(n){return be(n,x)}function Px(n,o){return o=typeof o=="function"?o:t,be(n,x,o)}function Dx(n){return be(n,b|x)}function Ox(n,o){return o=typeof o=="function"?o:t,be(n,b|x,o)}function Fx(n,o){return o==null||Of(n,o,Rt(o))}function Ae(n,o){return n===o||n!==n&&o!==o}var Lx=rs(vc),Mx=rs(function(n,o){return n>=o}),Xn=Uf(function(){return arguments}())?Uf:function(n){return bt(n)&&ot.call(n,"callee")&&!Cf.call(n,"callee")},z=T.isArray,Bx=af?ne(af):Y0;function qt(n){return n!=null&&hs(n.length)&&!rn(n)}function _t(n){return bt(n)&&qt(n)}function Wx(n){return n===!0||n===!1||bt(n)&&zt(n)==ur}var Tn=Jv||rl,Ux=cf?ne(cf):$0;function zx(n){return bt(n)&&n.nodeType===1&&!kr(n)}function Hx(n){if(n==null)return!0;if(qt(n)&&(z(n)||typeof n=="string"||typeof n.splice=="function"||Tn(n)||Ii(n)||Xn(n)))return!n.length;var o=Bt(n);if(o==Te||o==Ie)return!n.size;if(Rr(n))return!xc(n).length;for(var a in n)if(ot.call(n,a))return!1;return!0}function Vx(n,o){return Cr(n,o)}function jx(n,o,a){a=typeof a=="function"?a:t;var u=a?a(n,o):t;return u===t?Cr(n,o,t,a):!!u}function Kc(n){if(!bt(n))return!1;var o=zt(n);return o==Io||o==h_||typeof n.message=="string"&&typeof n.name=="string"&&!kr(n)}function Gx(n){return typeof n=="number"&&Af(n)}function rn(n){if(!mt(n))return!1;var o=zt(n);return o==Co||o==Od||o==f_||o==p_}function Kh(n){return typeof n=="number"&&n==j(n)}function hs(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=mn}function mt(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function bt(n){return n!=null&&typeof n=="object"}var qh=lf?ne(lf):q0;function Yx(n,o){return n===o||wc(n,o,Bc(o))}function $x(n,o,a){return a=typeof a=="function"?a:t,wc(n,o,Bc(o),a)}function Kx(n){return Qh(n)&&n!=+n}function qx(n){if(Py(n))throw new U(r);return zf(n)}function Qx(n){return n===null}function Xx(n){return n==null}function Qh(n){return typeof n=="number"||bt(n)&&zt(n)==fr}function kr(n){if(!bt(n)||zt(n)!=Qe)return!1;var o=Uo(n);if(o===null)return!0;var a=ot.call(o,"constructor")&&o.constructor;return typeof a=="function"&&a instanceof a&&Lo.call(a)==$v}var qc=uf?ne(uf):Q0;function Zx(n){return Kh(n)&&n>=-mn&&n<=mn}var Xh=df?ne(df):X0;function ms(n){return typeof n=="string"||!z(n)&&bt(n)&&zt(n)==mr}function re(n){return typeof n=="symbol"||bt(n)&&zt(n)==So}var Ii=ff?ne(ff):Z0;function Jx(n){return n===t}function tE(n){return bt(n)&&Bt(n)==pr}function eE(n){return bt(n)&&zt(n)==g_}var nE=rs(Ec),iE=rs(function(n,o){return n<=o});function Zh(n){if(!n)return[];if(qt(n))return ms(n)?Ce(n):Kt(n);if(_r&&n[_r])return Fv(n[_r]());var o=Bt(n),a=o==Te?uc:o==Ie?Do:Ci;return a(n)}function on(n){if(!n)return n===0?n:0;if(n=ve(n),n===Hn||n===-Hn){var o=n<0?-1:1;return o*c_}return n===n?n:0}function j(n){var o=on(n),a=o%1;return o===o?a?o-a:o:0}function Jh(n){return n?$n(j(n),0,Le):0}function ve(n){if(typeof n=="number")return n;if(re(n))return Eo;if(mt(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=mt(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=_f(n);var a=B_.test(n);return a||U_.test(n)?_v(n.slice(2),a?2:8):M_.test(n)?Eo:+n}function tm(n){return Be(n,Qt(n))}function rE(n){return n?$n(j(n),-mn,mn):n===0?n:0}function rt(n){return n==null?"":ie(n)}var oE=xi(function(n,o){if(Rr(o)||qt(o)){Be(o,Rt(o),n);return}for(var a in o)ot.call(o,a)&&Er(n,a,o[a])}),em=xi(function(n,o){Be(o,Qt(o),n)}),ps=xi(function(n,o,a,u){Be(o,Qt(o),n,u)}),sE=xi(function(n,o,a,u){Be(o,Rt(o),n,u)}),aE=en(bc);function cE(n,o){var a=wi(n);return o==null?a:Df(a,o)}var lE=Y(function(n,o){n=st(n);var a=-1,u=o.length,f=u>2?o[2]:t;for(f&&Ht(o[0],o[1],f)&&(u=1);++a<u;)for(var p=o[a],g=Qt(p),_=-1,w=g.length;++_<w;){var C=g[_],S=n[C];(S===t||Ae(S,_i[C])&&!ot.call(n,C))&&(n[C]=p[C])}return n}),uE=Y(function(n){return n.push(t,_h),ee(nm,t,n)});function dE(n,o){return mf(n,F(o,3),Me)}function fE(n,o){return mf(n,F(o,3),_c)}function hE(n,o){return n==null?n:gc(n,F(o,3),Qt)}function mE(n,o){return n==null?n:Bf(n,F(o,3),Qt)}function pE(n,o){return n&&Me(n,F(o,3))}function bE(n,o){return n&&_c(n,F(o,3))}function gE(n){return n==null?[]:Qo(n,Rt(n))}function _E(n){return n==null?[]:Qo(n,Qt(n))}function Qc(n,o,a){var u=n==null?t:Kn(n,o);return u===t?a:u}function vE(n,o){return n!=null&&wh(n,o,H0)}function Xc(n,o){return n!=null&&wh(n,o,V0)}var yE=hh(function(n,o,a){o!=null&&typeof o.toString!="function"&&(o=Mo.call(o)),n[o]=a},Jc(Xt)),wE=hh(function(n,o,a){o!=null&&typeof o.toString!="function"&&(o=Mo.call(o)),ot.call(n,o)?n[o].push(a):n[o]=[a]},F),xE=Y(Ir);function Rt(n){return qt(n)?kf(n):xc(n)}function Qt(n){return qt(n)?kf(n,!0):J0(n)}function EE(n,o){var a={};return o=F(o,3),Me(n,function(u,f,p){Je(a,o(u,f,p),u)}),a}function TE(n,o){var a={};return o=F(o,3),Me(n,function(u,f,p){Je(a,f,o(u,f,p))}),a}var IE=xi(function(n,o,a){Xo(n,o,a)}),nm=xi(function(n,o,a,u){Xo(n,o,a,u)}),CE=en(function(n,o){var a={};if(n==null)return a;var u=!1;o=ft(o,function(p){return p=xn(p,n),u||(u=p.length>1),p}),Be(n,Lc(n),a),u&&(a=be(a,b|v|x,yy));for(var f=o.length;f--;)Ac(a,o[f]);return a});function SE(n,o){return im(n,fs(F(o)))}var AE=en(function(n,o){return n==null?{}:ey(n,o)});function im(n,o){if(n==null)return{};var a=ft(Lc(n),function(u){return[u]});return o=F(o),Kf(n,a,function(u,f){return o(u,f[0])})}function RE(n,o,a){o=xn(o,n);var u=-1,f=o.length;for(f||(f=1,n=t);++u<f;){var p=n==null?t:n[We(o[u])];p===t&&(u=f,p=a),n=rn(p)?p.call(n):p}return n}function NE(n,o,a){return n==null?n:Sr(n,o,a)}function kE(n,o,a,u){return u=typeof u=="function"?u:t,n==null?n:Sr(n,o,a,u)}var rm=bh(Rt),om=bh(Qt);function PE(n,o,a){var u=z(n),f=u||Tn(n)||Ii(n);if(o=F(o,4),a==null){var p=n&&n.constructor;f?a=u?new p:[]:mt(n)?a=rn(p)?wi(Uo(n)):{}:a={}}return(f?he:Me)(n,function(g,_,w){return o(a,g,_,w)}),a}function DE(n,o){return n==null?!0:Ac(n,o)}function OE(n,o,a){return n==null?n:Jf(n,o,kc(a))}function FE(n,o,a,u){return u=typeof u=="function"?u:t,n==null?n:Jf(n,o,kc(a),u)}function Ci(n){return n==null?[]:lc(n,Rt(n))}function LE(n){return n==null?[]:lc(n,Qt(n))}function ME(n,o,a){return a===t&&(a=o,o=t),a!==t&&(a=ve(a),a=a===a?a:0),o!==t&&(o=ve(o),o=o===o?o:0),$n(ve(n),o,a)}function BE(n,o,a){return o=on(o),a===t?(a=o,o=0):a=on(a),n=ve(n),j0(n,o,a)}function WE(n,o,a){if(a&&typeof a!="boolean"&&Ht(n,o,a)&&(o=a=t),a===t&&(typeof o=="boolean"?(a=o,o=t):typeof n=="boolean"&&(a=n,n=t)),n===t&&o===t?(n=0,o=1):(n=on(n),o===t?(o=n,n=0):o=on(o)),n>o){var u=n;n=o,o=u}if(a||n%1||o%1){var f=Rf();return Mt(n+f*(o-n+gv("1e-"+((f+"").length-1))),o)}return Ic(n,o)}var UE=Ei(function(n,o,a){return o=o.toLowerCase(),n+(a?sm(o):o)});function sm(n){return Zc(rt(n).toLowerCase())}function am(n){return n=rt(n),n&&n.replace(H_,Nv).replace(av,"")}function zE(n,o,a){n=rt(n),o=ie(o);var u=n.length;a=a===t?u:$n(j(a),0,u);var f=a;return a-=o.length,a>=0&&n.slice(a,f)==o}function HE(n){return n=rt(n),n&&x_.test(n)?n.replace(Md,kv):n}function VE(n){return n=rt(n),n&&A_.test(n)?n.replace($a,"\\$&"):n}var jE=Ei(function(n,o,a){return n+(a?"-":"")+o.toLowerCase()}),GE=Ei(function(n,o,a){return n+(a?" ":"")+o.toLowerCase()}),YE=uh("toLowerCase");function $E(n,o,a){n=rt(n),o=j(o);var u=o?gi(n):0;if(!o||u>=o)return n;var f=(o-u)/2;return is(jo(f),a)+n+is(Vo(f),a)}function KE(n,o,a){n=rt(n),o=j(o);var u=o?gi(n):0;return o&&u<o?n+is(o-u,a):n}function qE(n,o,a){n=rt(n),o=j(o);var u=o?gi(n):0;return o&&u<o?is(o-u,a)+n:n}function QE(n,o,a){return a||o==null?o=0:o&&(o=+o),i0(rt(n).replace(Ka,""),o||0)}function XE(n,o,a){return(a?Ht(n,o,a):o===t)?o=1:o=j(o),Cc(rt(n),o)}function ZE(){var n=arguments,o=rt(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var JE=Ei(function(n,o,a){return n+(a?"_":"")+o.toLowerCase()});function tT(n,o,a){return a&&typeof a!="number"&&Ht(n,o,a)&&(o=a=t),a=a===t?Le:a>>>0,a?(n=rt(n),n&&(typeof o=="string"||o!=null&&!qc(o))&&(o=ie(o),!o&&bi(n))?En(Ce(n),0,a):n.split(o,a)):[]}var eT=Ei(function(n,o,a){return n+(a?" ":"")+Zc(o)});function nT(n,o,a){return n=rt(n),a=a==null?0:$n(j(a),0,n.length),o=ie(o),n.slice(a,a+o.length)==o}function iT(n,o,a){var u=m.templateSettings;a&&Ht(n,o,a)&&(o=t),n=rt(n),o=ps({},o,u,gh);var f=ps({},o.imports,u.imports,gh),p=Rt(f),g=lc(f,p),_,w,C=0,S=o.interpolate||Ao,A="__p += '",P=dc((o.escape||Ao).source+"|"+S.source+"|"+(S===Bd?L_:Ao).source+"|"+(o.evaluate||Ao).source+"|$","g"),O="//# sourceURL="+(ot.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fv+"]")+`
`;n.replace(P,function(M,Q,J,oe,Vt,se){return J||(J=oe),A+=n.slice(C,se).replace(V_,Pv),Q&&(_=!0,A+=`' +
__e(`+Q+`) +
'`),Vt&&(w=!0,A+=`';
`+Vt+`;
__p += '`),J&&(A+=`' +
((__t = (`+J+`)) == null ? '' : __t) +
'`),C=se+M.length,M}),A+=`';
`;var L=ot.call(o,"variable")&&o.variable;if(!L)A=`with (obj) {
`+A+`
}
`;else if(O_.test(L))throw new U(c);A=(w?A.replace(__,""):A).replace(v_,"$1").replace(y_,"$1;"),A="function("+(L||"obj")+`) {
`+(L?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var G=lm(function(){return nt(p,O+"return "+A).apply(t,g)});if(G.source=A,Kc(G))throw G;return G}function rT(n){return rt(n).toLowerCase()}function oT(n){return rt(n).toUpperCase()}function sT(n,o,a){if(n=rt(n),n&&(a||o===t))return _f(n);if(!n||!(o=ie(o)))return n;var u=Ce(n),f=Ce(o),p=vf(u,f),g=yf(u,f)+1;return En(u,p,g).join("")}function aT(n,o,a){if(n=rt(n),n&&(a||o===t))return n.slice(0,xf(n)+1);if(!n||!(o=ie(o)))return n;var u=Ce(n),f=yf(u,Ce(o))+1;return En(u,0,f).join("")}function cT(n,o,a){if(n=rt(n),n&&(a||o===t))return n.replace(Ka,"");if(!n||!(o=ie(o)))return n;var u=Ce(n),f=vf(u,Ce(o));return En(u,f).join("")}function lT(n,o){var a=n_,u=i_;if(mt(o)){var f="separator"in o?o.separator:f;a="length"in o?j(o.length):a,u="omission"in o?ie(o.omission):u}n=rt(n);var p=n.length;if(bi(n)){var g=Ce(n);p=g.length}if(a>=p)return n;var _=a-gi(u);if(_<1)return u;var w=g?En(g,0,_).join(""):n.slice(0,_);if(f===t)return w+u;if(g&&(_+=w.length-_),qc(f)){if(n.slice(_).search(f)){var C,S=w;for(f.global||(f=dc(f.source,rt(Wd.exec(f))+"g")),f.lastIndex=0;C=f.exec(S);)var A=C.index;w=w.slice(0,A===t?_:A)}}else if(n.indexOf(ie(f),_)!=_){var P=w.lastIndexOf(f);P>-1&&(w=w.slice(0,P))}return w+u}function uT(n){return n=rt(n),n&&w_.test(n)?n.replace(Ld,Wv):n}var dT=Ei(function(n,o,a){return n+(a?" ":"")+o.toUpperCase()}),Zc=uh("toUpperCase");function cm(n,o,a){return n=rt(n),o=a?t:o,o===t?Ov(n)?Hv(n):Iv(n):n.match(o)||[]}var lm=Y(function(n,o){try{return ee(n,t,o)}catch(a){return Kc(a)?a:new U(a)}}),fT=en(function(n,o){return he(o,function(a){a=We(a),Je(n,a,Yc(n[a],n))}),n});function hT(n){var o=n==null?0:n.length,a=F();return n=o?ft(n,function(u){if(typeof u[1]!="function")throw new me(s);return[a(u[0]),u[1]]}):[],Y(function(u){for(var f=-1;++f<o;){var p=n[f];if(ee(p[0],this,u))return ee(p[1],this,u)}})}function mT(n){return W0(be(n,b))}function Jc(n){return function(){return n}}function pT(n,o){return n==null||n!==n?o:n}var bT=fh(),gT=fh(!0);function Xt(n){return n}function tl(n){return Hf(typeof n=="function"?n:be(n,b))}function _T(n){return jf(be(n,b))}function vT(n,o){return Gf(n,be(o,b))}var yT=Y(function(n,o){return function(a){return Ir(a,n,o)}}),wT=Y(function(n,o){return function(a){return Ir(n,a,o)}});function el(n,o,a){var u=Rt(o),f=Qo(o,u);a==null&&!(mt(o)&&(f.length||!u.length))&&(a=o,o=n,n=this,f=Qo(o,Rt(o)));var p=!(mt(a)&&"chain"in a)||!!a.chain,g=rn(n);return he(f,function(_){var w=o[_];n[_]=w,g&&(n.prototype[_]=function(){var C=this.__chain__;if(p||C){var S=n(this.__wrapped__),A=S.__actions__=Kt(this.__actions__);return A.push({func:w,args:arguments,thisArg:n}),S.__chain__=C,S}return w.apply(n,bn([this.value()],arguments))})}),n}function xT(){return At._===this&&(At._=Kv),this}function nl(){}function ET(n){return n=j(n),Y(function(o){return Yf(o,n)})}var TT=Dc(ft),IT=Dc(hf),CT=Dc(rc);function um(n){return Uc(n)?oc(We(n)):ny(n)}function ST(n){return function(o){return n==null?t:Kn(n,o)}}var AT=mh(),RT=mh(!0);function il(){return[]}function rl(){return!1}function NT(){return{}}function kT(){return""}function PT(){return!0}function DT(n,o){if(n=j(n),n<1||n>mn)return[];var a=Le,u=Mt(n,Le);o=F(o),n-=Le;for(var f=cc(u,o);++a<n;)o(a);return f}function OT(n){return z(n)?ft(n,We):re(n)?[n]:Kt(Nh(rt(n)))}function FT(n){var o=++Yv;return rt(n)+o}var LT=ns(function(n,o){return n+o},0),MT=Oc("ceil"),BT=ns(function(n,o){return n/o},1),WT=Oc("floor");function UT(n){return n&&n.length?qo(n,Xt,vc):t}function zT(n,o){return n&&n.length?qo(n,F(o,2),vc):t}function HT(n){return bf(n,Xt)}function VT(n,o){return bf(n,F(o,2))}function jT(n){return n&&n.length?qo(n,Xt,Ec):t}function GT(n,o){return n&&n.length?qo(n,F(o,2),Ec):t}var YT=ns(function(n,o){return n*o},1),$T=Oc("round"),KT=ns(function(n,o){return n-o},0);function qT(n){return n&&n.length?ac(n,Xt):0}function QT(n,o){return n&&n.length?ac(n,F(o,2)):0}return m.after=_x,m.ary=zh,m.assign=oE,m.assignIn=em,m.assignInWith=ps,m.assignWith=sE,m.at=aE,m.before=Hh,m.bind=Yc,m.bindAll=fT,m.bindKey=Vh,m.castArray=Nx,m.chain=Bh,m.chunk=Wy,m.compact=Uy,m.concat=zy,m.cond=hT,m.conforms=mT,m.constant=Jc,m.countBy=qw,m.create=cE,m.curry=jh,m.curryRight=Gh,m.debounce=Yh,m.defaults=lE,m.defaultsDeep=uE,m.defer=vx,m.delay=yx,m.difference=Hy,m.differenceBy=Vy,m.differenceWith=jy,m.drop=Gy,m.dropRight=Yy,m.dropRightWhile=$y,m.dropWhile=Ky,m.fill=qy,m.filter=Xw,m.flatMap=tx,m.flatMapDeep=ex,m.flatMapDepth=nx,m.flatten=Oh,m.flattenDeep=Qy,m.flattenDepth=Xy,m.flip=wx,m.flow=bT,m.flowRight=gT,m.fromPairs=Zy,m.functions=gE,m.functionsIn=_E,m.groupBy=ix,m.initial=tw,m.intersection=ew,m.intersectionBy=nw,m.intersectionWith=iw,m.invert=yE,m.invertBy=wE,m.invokeMap=ox,m.iteratee=tl,m.keyBy=sx,m.keys=Rt,m.keysIn=Qt,m.map=ls,m.mapKeys=EE,m.mapValues=TE,m.matches=_T,m.matchesProperty=vT,m.memoize=ds,m.merge=IE,m.mergeWith=nm,m.method=yT,m.methodOf=wT,m.mixin=el,m.negate=fs,m.nthArg=ET,m.omit=CE,m.omitBy=SE,m.once=xx,m.orderBy=ax,m.over=TT,m.overArgs=Ex,m.overEvery=IT,m.overSome=CT,m.partial=$c,m.partialRight=$h,m.partition=cx,m.pick=AE,m.pickBy=im,m.property=um,m.propertyOf=ST,m.pull=aw,m.pullAll=Lh,m.pullAllBy=cw,m.pullAllWith=lw,m.pullAt=uw,m.range=AT,m.rangeRight=RT,m.rearg=Tx,m.reject=dx,m.remove=dw,m.rest=Ix,m.reverse=jc,m.sampleSize=hx,m.set=NE,m.setWith=kE,m.shuffle=mx,m.slice=fw,m.sortBy=gx,m.sortedUniq=vw,m.sortedUniqBy=yw,m.split=tT,m.spread=Cx,m.tail=ww,m.take=xw,m.takeRight=Ew,m.takeRightWhile=Tw,m.takeWhile=Iw,m.tap=Uw,m.throttle=Sx,m.thru=cs,m.toArray=Zh,m.toPairs=rm,m.toPairsIn=om,m.toPath=OT,m.toPlainObject=tm,m.transform=PE,m.unary=Ax,m.union=Cw,m.unionBy=Sw,m.unionWith=Aw,m.uniq=Rw,m.uniqBy=Nw,m.uniqWith=kw,m.unset=DE,m.unzip=Gc,m.unzipWith=Mh,m.update=OE,m.updateWith=FE,m.values=Ci,m.valuesIn=LE,m.without=Pw,m.words=cm,m.wrap=Rx,m.xor=Dw,m.xorBy=Ow,m.xorWith=Fw,m.zip=Lw,m.zipObject=Mw,m.zipObjectDeep=Bw,m.zipWith=Ww,m.entries=rm,m.entriesIn=om,m.extend=em,m.extendWith=ps,el(m,m),m.add=LT,m.attempt=lm,m.camelCase=UE,m.capitalize=sm,m.ceil=MT,m.clamp=ME,m.clone=kx,m.cloneDeep=Dx,m.cloneDeepWith=Ox,m.cloneWith=Px,m.conformsTo=Fx,m.deburr=am,m.defaultTo=pT,m.divide=BT,m.endsWith=zE,m.eq=Ae,m.escape=HE,m.escapeRegExp=VE,m.every=Qw,m.find=Zw,m.findIndex=Ph,m.findKey=dE,m.findLast=Jw,m.findLastIndex=Dh,m.findLastKey=fE,m.floor=WT,m.forEach=Wh,m.forEachRight=Uh,m.forIn=hE,m.forInRight=mE,m.forOwn=pE,m.forOwnRight=bE,m.get=Qc,m.gt=Lx,m.gte=Mx,m.has=vE,m.hasIn=Xc,m.head=Fh,m.identity=Xt,m.includes=rx,m.indexOf=Jy,m.inRange=BE,m.invoke=xE,m.isArguments=Xn,m.isArray=z,m.isArrayBuffer=Bx,m.isArrayLike=qt,m.isArrayLikeObject=_t,m.isBoolean=Wx,m.isBuffer=Tn,m.isDate=Ux,m.isElement=zx,m.isEmpty=Hx,m.isEqual=Vx,m.isEqualWith=jx,m.isError=Kc,m.isFinite=Gx,m.isFunction=rn,m.isInteger=Kh,m.isLength=hs,m.isMap=qh,m.isMatch=Yx,m.isMatchWith=$x,m.isNaN=Kx,m.isNative=qx,m.isNil=Xx,m.isNull=Qx,m.isNumber=Qh,m.isObject=mt,m.isObjectLike=bt,m.isPlainObject=kr,m.isRegExp=qc,m.isSafeInteger=Zx,m.isSet=Xh,m.isString=ms,m.isSymbol=re,m.isTypedArray=Ii,m.isUndefined=Jx,m.isWeakMap=tE,m.isWeakSet=eE,m.join=rw,m.kebabCase=jE,m.last=_e,m.lastIndexOf=ow,m.lowerCase=GE,m.lowerFirst=YE,m.lt=nE,m.lte=iE,m.max=UT,m.maxBy=zT,m.mean=HT,m.meanBy=VT,m.min=jT,m.minBy=GT,m.stubArray=il,m.stubFalse=rl,m.stubObject=NT,m.stubString=kT,m.stubTrue=PT,m.multiply=YT,m.nth=sw,m.noConflict=xT,m.noop=nl,m.now=us,m.pad=$E,m.padEnd=KE,m.padStart=qE,m.parseInt=QE,m.random=WE,m.reduce=lx,m.reduceRight=ux,m.repeat=XE,m.replace=ZE,m.result=RE,m.round=$T,m.runInContext=y,m.sample=fx,m.size=px,m.snakeCase=JE,m.some=bx,m.sortedIndex=hw,m.sortedIndexBy=mw,m.sortedIndexOf=pw,m.sortedLastIndex=bw,m.sortedLastIndexBy=gw,m.sortedLastIndexOf=_w,m.startCase=eT,m.startsWith=nT,m.subtract=KT,m.sum=qT,m.sumBy=QT,m.template=iT,m.times=DT,m.toFinite=on,m.toInteger=j,m.toLength=Jh,m.toLower=rT,m.toNumber=ve,m.toSafeInteger=rE,m.toString=rt,m.toUpper=oT,m.trim=sT,m.trimEnd=aT,m.trimStart=cT,m.truncate=lT,m.unescape=uT,m.uniqueId=FT,m.upperCase=dT,m.upperFirst=Zc,m.each=Wh,m.eachRight=Uh,m.first=Fh,el(m,function(){var n={};return Me(m,function(o,a){ot.call(m.prototype,a)||(n[a]=o)}),n}(),{chain:!1}),m.VERSION=e,he(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){m[n].placeholder=m}),he(["drop","take"],function(n,o){Z.prototype[n]=function(a){a=a===t?1:Et(j(a),0);var u=this.__filtered__&&!o?new Z(this):this.clone();return u.__filtered__?u.__takeCount__=Mt(a,u.__takeCount__):u.__views__.push({size:Mt(a,Le),type:n+(u.__dir__<0?"Right":"")}),u},Z.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),he(["filter","map","takeWhile"],function(n,o){var a=o+1,u=a==Dd||a==a_;Z.prototype[n]=function(f){var p=this.clone();return p.__iteratees__.push({iteratee:F(f,3),type:a}),p.__filtered__=p.__filtered__||u,p}}),he(["head","last"],function(n,o){var a="take"+(o?"Right":"");Z.prototype[n]=function(){return this[a](1).value()[0]}}),he(["initial","tail"],function(n,o){var a="drop"+(o?"":"Right");Z.prototype[n]=function(){return this.__filtered__?new Z(this):this[a](1)}}),Z.prototype.compact=function(){return this.filter(Xt)},Z.prototype.find=function(n){return this.filter(n).head()},Z.prototype.findLast=function(n){return this.reverse().find(n)},Z.prototype.invokeMap=Y(function(n,o){return typeof n=="function"?new Z(this):this.map(function(a){return Ir(a,n,o)})}),Z.prototype.reject=function(n){return this.filter(fs(F(n)))},Z.prototype.slice=function(n,o){n=j(n);var a=this;return a.__filtered__&&(n>0||o<0)?new Z(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),o!==t&&(o=j(o),a=o<0?a.dropRight(-o):a.take(o-n)),a)},Z.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Z.prototype.toArray=function(){return this.take(Le)},Me(Z.prototype,function(n,o){var a=/^(?:filter|find|map|reject)|While$/.test(o),u=/^(?:head|last)$/.test(o),f=m[u?"take"+(o=="last"?"Right":""):o],p=u||/^find/.test(o);f&&(m.prototype[o]=function(){var g=this.__wrapped__,_=u?[1]:arguments,w=g instanceof Z,C=_[0],S=w||z(g),A=function(Q){var J=f.apply(m,bn([Q],_));return u&&P?J[0]:J};S&&a&&typeof C=="function"&&C.length!=1&&(w=S=!1);var P=this.__chain__,O=!!this.__actions__.length,L=p&&!P,G=w&&!O;if(!p&&S){g=G?g:new Z(this);var M=n.apply(g,_);return M.__actions__.push({func:cs,args:[A],thisArg:t}),new pe(M,P)}return L&&G?n.apply(this,_):(M=this.thru(A),L?u?M.value()[0]:M.value():M)})}),he(["pop","push","shift","sort","splice","unshift"],function(n){var o=Oo[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:pop|shift)$/.test(n);m.prototype[n]=function(){var f=arguments;if(u&&!this.__chain__){var p=this.value();return o.apply(z(p)?p:[],f)}return this[a](function(g){return o.apply(z(g)?g:[],f)})}}),Me(Z.prototype,function(n,o){var a=m[o];if(a){var u=a.name+"";ot.call(yi,u)||(yi[u]=[]),yi[u].push({name:o,func:a})}}),yi[es(t,W).name]=[{name:"wrapper",func:t}],Z.prototype.clone=u0,Z.prototype.reverse=d0,Z.prototype.value=f0,m.prototype.at=zw,m.prototype.chain=Hw,m.prototype.commit=Vw,m.prototype.next=jw,m.prototype.plant=Yw,m.prototype.reverse=$w,m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=Kw,m.prototype.first=m.prototype.head,_r&&(m.prototype[_r]=Gw),m},_n=Vv();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(At._=_n,define(function(){return _n})):Vn?((Vn.exports=_n)._=_n,tc._=_n):At._=_n}).call(cr)});var JT="firebase",tI="10.14.0";kn(JT,tI,"app");var zi=new Sm("ANGULARFIRE2_VERSION");var eI=(t,e)=>{let i=e?[e]:qm(),r=[];return i.forEach(s=>{s.container.getProvider(t).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r},ni=class{constructor(){return eI(nI)}},nI="app-check";function yl(){}var Ds=class{zone;delegate;constructor(e,i=mm){this.zone=e,this.delegate=i}now(){return this.delegate.now()}schedule(e,i,r){let s=this.zone,c=function(l){s.runGuarded(()=>{e.apply(this,[l])})};return this.delegate.schedule(c,i,r)}},wl=class{zone;task=null;constructor(e){this.zone=e}call(e,i){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yl,{},yl,yl)),i.pipe(Ri({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Os=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(i){this.ngZone=i,this.outsideAngular=i.runOutsideAngular(()=>new Ds(Zone.current)),this.insideAngular=i.run(()=>new Ds(Zone.current,bs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(V(ye))};static \u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iI(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function un(t){return rI(iI())(t)}function rI(t){return function(i){return i=i.lift(new wl(t.ngZone)),i.pipe(Ai(t.outsideAngular),Zn(t.insideAngular))}}var oI="firebase",sI="10.14.0";Wt.registerVersion(oI,sI,"app-compat");var aI=["ngOnDestroy"],rp=(t,e,i,r={})=>new Proxy(t,{get:(s,c)=>i.runOutsideAngular(()=>{if(t[c])return r?.spy?.get&&r.spy.get(c,t[c]),t[c];if(aI.indexOf(c)>-1)return()=>{};let l=e.toPromise().then(d=>{let h=d?.[c];return typeof h=="function"?h.bind(d):h?.then?h.then(b=>i.run(()=>b)):i.run(()=>h)});return new Proxy(()=>{},{get:(d,h)=>l[h],apply:(d,h,b)=>l.then(v=>{let x=v?.(...b);return r?.spy?.apply&&r.spy.apply(c,b,x),x})})})});var Fs=class{constructor(e){return e}},Hi=new It("angularfire2.app.options"),Vi=new It("angularfire2.app.name");function Br(t,e,i){let r=typeof i=="string"&&i||"[DEFAULT]",s=typeof i=="object"&&i||{};s.name=s.name||r;let l=Wt.apps.filter(d=>d&&d.name===s.name)[0]||e.runOutsideAngular(()=>Wt.initializeApp(t,s));try{if(JSON.stringify(t)!==JSON.stringify(l.options)){let d=!!module.hot;cI("error",`${l.name} Firebase App already initialized with different options${d?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Fs(l)}var cI=(t,...e)=>{hl()&&typeof console<"u"&&console[t](...e)},lI={provide:Fs,useFactory:Br,deps:[Hi,ye,[new ll,Vi]]},P1=(()=>{class t{static initializeApp(i,r){return{ngModule:t,providers:[{provide:Hi,useValue:i},{provide:Vi,useValue:r}]}}constructor(i){Wt.registerVersion("angularfire",zi.full,"core"),Wt.registerVersion("angularfire",zi.full,"app-compat"),Wt.registerVersion("angular",Am.full,i.toString())}static \u0275fac=function(r){return new(r||t)(V(Pi))};static \u0275mod=ke({type:t});static \u0275inj=Ne({providers:[lI]})}return t})();function Ls(t,e,i,r,s){let[,c,l]=globalThis.\u0275AngularfireInstanceCache.find(d=>d[0]===t)||[];if(c)return uI(s,l)||(ip("error",`${e} was already initialized on the ${i} Firebase App with different settings.${dI?" You may need to reload as Firebase is not HMR aware.":""}`),ip("warn",{is:s,was:l})),c;{let d=r();return globalThis.\u0275AngularfireInstanceCache.push([t,d,s]),d}}function uI(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var dI=typeof module<"u"&&!!module.hot,ip=(t,...e)=>{hl()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var O1={apiKey:"AIzaSyDO-OAtdUr1YyKTSl_-Ysgy0IiRNMgINvI",authDomain:"tic-desinger.firebaseapp.com",databaseURL:"https://tic-desinger-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"tic-desinger",storageBucket:"tic-desinger.appspot.com",messagingSenderId:"152821549306",appId:"1:152821549306:web:e6a42873b97b8722b0a143",measurementId:"G-9JDG2FP46N"};var fI=new Map,hI={activated:!1,tokenObservers:[]},mI={initialized:!1,enabled:!1};function De(t){return fI.get(t)||Object.assign({},hI)}function lp(){return mI}var pI="https://content-firebaseappcheck.googleapis.com/v1";var bI="exchangeDebugToken",op={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},j1=24*60*60*1e3;var El=class{constructor(e,i,r,s,c){if(this.operation=e,this.retryPolicy=i,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=s,s>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return Ft(this,null,function*(){this.stop();try{this.pending=new Nt,this.pending.promise.catch(i=>{}),yield gI(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Nt,this.pending.promise.catch(i=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}};function gI(t){return new Promise(e=>{setTimeout(e,t)})}var _I={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pn=new zm("appCheck","AppCheck",_I);function up(t){if(!De(t).activated)throw Pn.create("use-before-activation",{appName:t.name})}function dp(r,s){return Ft(this,arguments,function*({url:t,body:e},i){let c={"Content-Type":"application/json"},l=i.getImmediate({optional:!0});if(l){let R=yield l.getHeartbeatsHeader();R&&(c["X-Firebase-Client"]=R)}let d={method:"POST",body:JSON.stringify(e),headers:c},h;try{h=yield fetch(t,d)}catch(R){throw Pn.create("fetch-network-error",{originalErrorMessage:R?.message})}if(h.status!==200)throw Pn.create("fetch-status-error",{httpStatus:h.status});let b;try{b=yield h.json()}catch(R){throw Pn.create("fetch-parse-error",{originalErrorMessage:R?.message})}let v=b.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Pn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});let x=Number(v[1])*1e3,E=Date.now();return{token:b.token,expireTimeMillis:E+x,issuedAtTimeMillis:E}})}function fp(t,e){let{projectId:i,appId:r,apiKey:s}=t.options;return{url:`${pI}/projects/${i}/apps/${r}:${bI}?key=${s}`,body:{debug_token:e}}}var vI="firebase-app-check-database",yI=1,Tl="firebase-app-check-store";var Ms=null;function wI(){return Ms||(Ms=new Promise((t,e)=>{try{let i=indexedDB.open(vI,yI);i.onsuccess=r=>{t(r.target.result)},i.onerror=r=>{var s;e(Pn.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},i.onupgradeneeded=r=>{let s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Tl,{keyPath:"compositeKey"})}}}catch(i){e(Pn.create("storage-open",{originalErrorMessage:i?.message}))}}),Ms)}function xI(t,e){return EI(TI(t),e)}function EI(t,e){return Ft(this,null,function*(){let r=(yield wI()).transaction(Tl,"readwrite"),c=r.objectStore(Tl).put({compositeKey:t,value:e});return new Promise((l,d)=>{c.onsuccess=h=>{l()},r.onerror=h=>{var b;d(Pn.create("storage-set",{originalErrorMessage:(b=h.target.error)===null||b===void 0?void 0:b.message}))}})})}function TI(t){return`${t.options.appId}-${t.name}`}var Il=new Wi("@firebase/app-check");function xl(t,e){return Um()?xI(t,e).catch(i=>{Il.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}function hp(){return lp().enabled}function mp(){return Ft(this,null,function*(){let t=lp();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var II={error:"UNKNOWN_ERROR"};function CI(t){return As.encodeString(JSON.stringify(t),!1)}function Cl(t,e=!1){return Ft(this,null,function*(){let i=t.app;up(i);let r=De(i),s=r.token,c;if(s&&!Wr(s)&&(r.token=void 0,s=void 0),!s){let h=yield r.cachedTokenPromise;h&&(Wr(h)?s=h:yield xl(i,void 0))}if(!e&&s&&Wr(s))return{token:s.token};let l=!1;if(hp()){r.exchangeTokenPromise||(r.exchangeTokenPromise=dp(fp(i,yield mp()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let h=yield r.exchangeTokenPromise;return yield xl(i,h),r.token=h,{token:h.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield De(i).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"?Il.warn(h.message):Il.error(h),c=h}let d;return s?c?Wr(s)?d={token:s.token,internalError:c}:d=ap(c):(d={token:s.token},r.token=s,yield xl(i,s)):d=ap(c),l&&NI(i,d),d})}function SI(t){return Ft(this,null,function*(){let e=t.app;up(e);let{provider:i}=De(e);if(hp()){let r=yield mp(),{token:s}=yield dp(fp(e,r),t.heartbeatServiceProvider);return{token:s}}else{let{token:r}=yield i.getToken();return{token:r}}})}function AI(t,e,i,r){let{app:s}=t,c=De(s),l={next:i,error:r,type:e};if(c.tokenObservers=[...c.tokenObservers,l],c.token&&Wr(c.token)){let d=c.token;Promise.resolve().then(()=>{i({token:d.token}),sp(t)}).catch(()=>{})}c.cachedTokenPromise.then(()=>sp(t))}function pp(t,e){let i=De(t),r=i.tokenObservers.filter(s=>s.next!==e);r.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),i.tokenObservers=r}function sp(t){let{app:e}=t,i=De(e),r=i.tokenRefresher;r||(r=RI(t),i.tokenRefresher=r),!r.isRunning()&&i.isTokenAutoRefreshEnabled&&r.start()}function RI(t){let{app:e}=t;return new El(()=>Ft(this,null,function*(){let i=De(e),r;if(i.token?r=yield Cl(t,!0):r=yield Cl(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let i=De(e);if(i.token){let r=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5,s=i.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},op.RETRIAL_MIN_WAIT,op.RETRIAL_MAX_WAIT)}function NI(t,e){let i=De(t).tokenObservers;for(let r of i)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Wr(t){return t.expireTimeMillis-Date.now()>0}function ap(t){return{token:CI(II),error:t}}var Sl=class{constructor(e,i){this.app=e,this.heartbeatServiceProvider=i}_delete(){let{tokenObservers:e}=De(this.app);for(let i of e)pp(this.app,i.next);return Promise.resolve()}};function kI(t,e){return new Sl(t,e)}function PI(t){return{getToken:e=>Cl(t,e),getLimitedUseToken:()=>SI(t),addTokenListener:e=>AI(t,"INTERNAL",e),removeTokenListener:e=>pp(t.app,e)}}var DI="@firebase/app-check",OI="0.8.8";var FI="app-check",cp="app-check-internal";function LI(){Mr(new ln(FI,t=>{let e=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat");return kI(e,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider(cp).initialize()})),Mr(new ln(cp,t=>{let e=t.getProvider("app-check").getImmediate();return PI(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),kn(DI,OI)}LI();var MI=["localhost","0.0.0.0","127.0.0.1"],nR=typeof window<"u"&&MI.includes(window.location.hostname);var Al=new It("angularfire2.auth.use-emulator"),Rl=new It("angularfire2.auth.settings"),Nl=new It("angularfire2.auth.tenant-id"),kl=new It("angularfire2.auth.langugage-code"),Pl=new It("angularfire2.auth.use-device-language"),Dl=new It("angularfire.auth.persistence"),Ol=(t,e,i,r,s,c,l,d)=>Ls(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let h=e.runOutsideAngular(()=>t.auth());if(i&&h.useEmulator(...i),r&&(h.tenantId=r),h.languageCode=s,c&&h.useDeviceLanguage(),l)for(let[b,v]of Object.entries(l))h.settings[b]=v;return d&&h.setPersistence(d),h},[i,r,s,c,l,d]),gp=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(i,r,s,c,l,d,h,b,v,x,E,R){let k=new hm,W=ae(void 0).pipe(Zn(l.outsideAngular),an(()=>c.runOutsideAngular(()=>import("./chunk-JAZ7ODO6.js"))),Tt(()=>Br(i,c,r)),Tt(it=>Ol(it,c,d,b,v,x,h,E)),al({bufferSize:1,refCount:!1}));if(Pm(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ae(null);else{W.pipe(wm()).subscribe();let it=W.pipe(an(X=>X.getRedirectResult().then(St=>St,()=>null)),un,al({bufferSize:1,refCount:!1})),dt=W.pipe(an(X=>new Si(St=>({unsubscribe:c.runOutsideAngular(()=>X.onAuthStateChanged(Dt=>St.next(Dt),Dt=>St.error(Dt),()=>St.complete()))})))),yt=W.pipe(an(X=>new Si(St=>({unsubscribe:c.runOutsideAngular(()=>X.onIdTokenChanged(Dt=>St.next(Dt),Dt=>St.error(Dt),()=>St.complete()))}))));this.authState=it.pipe(cl(dt),Ai(l.outsideAngular),Zn(l.insideAngular)),this.user=it.pipe(cl(yt),Ai(l.outsideAngular),Zn(l.insideAngular)),this.idToken=this.user.pipe(an(X=>X?ol(X.getIdToken()):ae(null))),this.idTokenResult=this.user.pipe(an(X=>X?ol(X.getIdTokenResult()):ae(null))),this.credential=Pr(it,k,this.authState.pipe(gm(X=>!X))).pipe(Tt(X=>X?.user?X:null),Ai(l.outsideAngular),Zn(l.insideAngular))}return rp(this,W,c,{spy:{apply:(it,dt,yt)=>{(it.startsWith("signIn")||it.startsWith("createUser"))&&yt.then(X=>k.next(X))}}})}static \u0275fac=function(r){return new(r||t)(V(Hi),V(Vi,8),V(Pi),V(ye),V(Os),V(Al,8),V(Rl,8),V(Nl,8),V(kl,8),V(Pl,8),V(Dl,8),V(ni,8))};static \u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var _p="@firebase/database",vp="1.0.8";var Yu="";function $u(t){Yu=t}var Hl=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wt(i))}get(e){let i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:Rs(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Vl=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return we(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Qp=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Hl(e)}}catch{}return new Vl},ri=Qp("localStorage"),jl=Qp("sessionStorage");var $i=new Wi("@firebase/database"),Xp=function(){let t=1;return function(){return t++}}(),Zp=function(t){let e=Ym(t),i=new Gm;i.update(e);let r=i.digest();return As.encodeByteArray(r)},lo=function(...t){let e="";for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lo.apply(null,r):typeof r=="object"?e+=wt(r):e+=r,e+=" "}return e},oi=null,yp=!0,Jp=function(t,e){N(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?($i.logLevel=$m.VERBOSE,oi=$i.log.bind($i),e&&jl.set("logging_enabled",!0)):typeof t=="function"?oi=t:(oi=null,jl.remove("logging_enabled"))},kt=function(...t){if(yp===!0&&(yp=!1,oi===null&&jl.get("logging_enabled")===!0&&Jp(!0)),oi){let e=lo.apply(null,t);oi(e)}},uo=function(t){return function(...e){kt(t,...e)}},Gl=function(...t){let e="FIREBASE INTERNAL ERROR: "+lo(...t);$i.error(e)},$e=function(...t){let e=`FIREBASE FATAL ERROR: ${lo(...t)}`;throw $i.error(e),new Error(e)},Ut=function(...t){let e="FIREBASE WARNING: "+lo(...t);$i.warn(e)},WI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},da=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},UI=function(t){if(Ve()||document.readyState==="complete")t();else{let e=!1,i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Ln="[MIN_NAME]",dn="[MAX_NAME]",ai=function(t,e){if(t===e)return 0;if(t===Ln||e===dn)return-1;if(e===Ln||t===dn)return 1;{let i=wp(t),r=wp(e);return i!==null?r!==null?i-r===0?t.length-e.length:i-r:-1:r!==null?1:t<e?-1:1}},zI=function(t,e){return t===e?0:t<e?-1:1},Ur=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wt(e))},Ku=function(t){if(typeof t!="object"||t===null)return wt(t);let e=[];for(let r in t)e.push(r);e.sort();let i="{";for(let r=0;r<e.length;r++)r!==0&&(i+=","),i+=wt(e[r]),i+=":",i+=Ku(t[e[r]]);return i+="}",i},tb=function(t,e){let i=t.length;if(i<=e)return[t];let r=[];for(let s=0;s<i;s+=e)s+e>i?r.push(t.substring(s,i)):r.push(t.substring(s,s+e));return r};function Pt(t,e){for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}var eb=function(t){N(!da(t),"Invalid JSON number");let e=11,i=52,r=(1<<e-1)-1,s,c,l,d,h;t===0?(c=0,l=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(t)/Math.LN2),r),c=d+r,l=Math.round(t*Math.pow(2,i-d)-Math.pow(2,i))):(c=0,l=Math.round(t/Math.pow(2,1-r-i))));let b=[];for(h=i;h;h-=1)b.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)b.push(c%2?1:0),c=Math.floor(c/2);b.push(s?1:0),b.reverse();let v=b.join(""),x="";for(h=0;h<64;h+=8){let E=parseInt(v.substr(h,8),2).toString(16);E.length===1&&(E="0"+E),x=x+E}return x.toLowerCase()},HI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jI(t,e){let i="Unknown Error";t==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?i="Client doesn't have permission to access the desired data.":t==="unavailable"&&(i="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+i);return r.code=t.toUpperCase(),r}var GI=new RegExp("^-?(0*)\\d{1,10}$"),YI=-2147483648,$I=2147483647,wp=function(t){if(GI.test(t)){let e=Number(t);if(e>=YI&&e<=$I)return e}return null},nr=function(t){try{t()}catch(e){setTimeout(()=>{let i=e.stack||"";throw Ut("Exception was thrown by user callback.",i),e},Math.floor(0))}},KI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jr=function(t,e){let i=setTimeout(t,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};var Yl=class{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,r):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ut(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $l=class{constructor(e,i,r){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,r):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ut(e)}},Gr=(()=>{class t{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Ws="5",nb="v",ib="s",rb="r",ob="f",sb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ab="ls",cb="p",Kl="ac",lb="websocket",ub="long_polling";var Us=class{constructor(e,i,r,s,c=!1,l="",d=!1,h=!1){this.secure=i,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=c,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ri.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ri.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}};function qI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function db(t,e,i){N(typeof e=="string","typeof type must == string"),N(typeof i=="object","typeof params must == object");let r;if(e===lb)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ub)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qI(t)&&(i.ns=t.namespace);let s=[];return Pt(i,(c,l)=>{s.push(c+"="+l)}),r+s.join("&")}var ql=class{constructor(){this.counters_={}}incrementCounter(e,i=1){we(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return Lm(this.counters_)}};var Fl={},Ll={};function qu(t){let e=t.toString();return Fl[e]||(Fl[e]=new ql),Fl[e]}function QI(t,e){let i=t.toString();return Ll[i]||(Ll[i]=e()),Ll[i]}var Ql=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&nr(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xp="start",XI="close",ZI="pLPCommand",JI="pRTLPCB",fb="id",hb="pw",mb="ser",tC="cb",eC="seg",nC="ts",iC="d",rC="dframe",pb=1870,bb=30,oC=pb-bb,sC=25e3,aC=3e4,qr=class t{constructor(e,i,r,s,c,l,d){this.connId=e,this.repoInfo=i,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uo(e),this.stats_=qu(i),this.urlFn=h=>(this.appCheckToken&&(h[Kl]=this.appCheckToken),db(i,ub,h))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Ql(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aC)),UI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xl((...c)=>{let[l,d,h,b,v]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===xp)this.id=d,this.password=h;else if(l===XI)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...c)=>{let[l,d]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);let r={};r[xp]="t",r[mb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nb]=Ws,this.transportSessionId&&(r[ib]=this.transportSessionId),this.lastSessionId&&(r[ab]=this.lastSessionId),this.applicationId&&(r[cb]=this.applicationId),this.appCheckToken&&(r[Kl]=this.appCheckToken),typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(r[rb]=ob);let s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ve()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!HI()&&!VI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let i=wt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=Fm(i),s=tb(r,oC);for(let c=0;c<s.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[c]),this.curSegmentNum++}addDisconnectPingFrame(e,i){if(Ve())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[rC]="t",r[fb]=e,r[hb]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let i=wt(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}},Xl=class t{constructor(e,i,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ve())this.commandCB=e,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=Xp(),window[ZI+this.uniqueCallbackIdentifier]=e,window[JI+this.uniqueCallbackIdentifier]=i,this.myIFrame=t.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');let l="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){kt("frame writing exception"),d.stack&&kt(d.stack),kt(d)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[fb]=this.myID,e[hb]=this.myPW,e[mb]=this.currentSerial;let i=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bb+r.length<=pb;){let l=this.pendingSegs.shift();r=r+"&"+eC+s+"="+l.seg+"&"+nC+s+"="+l.ts+"&"+iC+s+"="+l.d,s++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,r){this.pendingSegs.push({seg:e,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);let r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},s=setTimeout(r,Math.floor(sC)),c=()=>{clearTimeout(s),r()};this.addTag(e,c)}addTag(e,i){Ve()?this.doNodeLongPoll(e,i):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var cC=16384,lC=45e3,zs=null;typeof MozWebSocket<"u"?zs=MozWebSocket:typeof WebSocket<"u"&&(zs=WebSocket);var Gi=(()=>{class t{constructor(i,r,s,c,l,d,h){this.connId=i,this.applicationId=s,this.appCheckToken=c,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uo(this.connId),this.stats_=qu(r),this.connURL=t.connectionURL_(r,d,h,c,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(i,r,s,c,l){let d={};return d[nb]=Ws,!Ve()&&typeof location<"u"&&location.hostname&&sb.test(location.hostname)&&(d[rb]=ob),r&&(d[ib]=r),s&&(d[ab]=s),c&&(d[Kl]=c),l&&(d[cb]=l),db(i,lb,d)}open(i,r){this.onDisconnect=r,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ri.set("previous_websocket_failure",!0);try{let s;if(Ve()){let c=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Ws}/${Yu}/${process.platform}/${c}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let l=process.env,d=this.connURL.indexOf("wss://")===0?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(s.proxy={origin:d})}this.mySock=new zs(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let c=s.message||s.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let c=s.message||s.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let i=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(r);s&&s.length>1&&parseFloat(s[1])<4.4&&(i=!0)}return!i&&zs!==null&&!t.forceDisallow_}static previouslyFailed(){return ri.isInMemoryStorage||ri.get("previous_websocket_failure")===!0}markConnectionHealthy(){ri.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let s=Rs(r);this.onMessage(s)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if(N(this.frames===null,"We already have a frame buffer"),i.length<=6){let r=Number(i);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(this.mySock===null)return;let r=i.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let s=this.extractFrameCount_(r);s!==null&&this.appendFrame_(s)}}send(i){this.resetKeepAlive();let r=wt(i);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let s=tb(r,cC);s.length>1&&this.sendString_(String(s.length));for(let c=0;c<s.length;c++)this.sendString_(s[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lC))}sendString_(i){try{this.mySock.send(i)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),gb=(()=>{class t{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[qr,Gi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(i){let r=Gi&&Gi.isAvailable(),s=r&&!Gi.previouslyFailed();if(i.webSocketOnly&&(r||Ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Gi];else{let c=this.transports_=[];for(let l of t.ALL_TRANSPORTS)l&&l.isAvailable()&&c.push(l);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),uC=6e4,dC=5e3,fC=10*1024,hC=100*1024,Ml="t",Ep="d",mC="s",Tp="r",pC="e",Ip="o",Cp="a",Sp="n",Ap="p",bC="h",Zl=class{constructor(e,i,r,s,c,l,d,h,b,v){this.id=e,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=c,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=h,this.onKill_=b,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uo("c:"+this.id+":"),this.transportManager_=new gb(i),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));let s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=jr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){let i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ml in e){let i=e[Ml];i===Cp?this.upgradeIfSecondaryHealthy_():i===Tp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Ip&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let i=Ur("t",e),r=Ur("d",e);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ap,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let i=Ur("t",e),r=Ur("d",e);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let i=Ur(Ml,e);if(Ep in e){let r=e[Ep];if(i===bC){let s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(i===Sp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===mC?this.onConnectionShutdown_(r):i===Tp?this.onReset_(r):i===pC?Gl("Server Error: "+r):i===Ip?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gl("Unknown control packet command: "+i)}}onHandshake_(e){let i=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Ws!==r&&Ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),jr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ap,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ri.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Hs=class{put(e,i,r,s){}merge(e,i,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,r){}onDisconnectMerge(e,i,r){}onDisconnectCancel(e,i){}reportStats(e){}};var Vs=class{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,i)}}on(e,i,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:r});let s=this.getInitialEvent(e);s&&i.apply(r,s)}off(e,i,r){this.validateEventType_(e);let s=this.listeners_[e]||[];for(let c=0;c<s.length;c++)if(s[c].callback===i&&(!r||r===s[c].context)){s.splice(c,1);return}}validateEventType_(e){N(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}};var js=class t extends Vs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return N(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Rp=32,Np=768,et=class{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}};function tt(){return new et("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Mn(t){return t.pieces_.length-t.pieceNum_}function at(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new et(t.pieces_,e)}function Qu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gC(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function Qr(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _b(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new et(e,0)}function ht(t,e){let i=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);if(e instanceof et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)i.push(e.pieces_[r]);else{let r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&i.push(r[s])}return new et(i,0)}function K(t){return t.pieceNum_>=t.pieces_.length}function Gt(t,e){let i=$(t),r=$(e);if(i===null)return e;if(i===r)return Gt(at(t),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _C(t,e){let i=Qr(t,0),r=Qr(e,0);for(let s=0;s<i.length&&s<r.length;s++){let c=ai(i[s],r[s]);if(c!==0)return c}return i.length===r.length?0:i.length<r.length?-1:1}function Xu(t,e){if(Mn(t)!==Mn(e))return!1;for(let i=t.pieceNum_,r=e.pieceNum_;i<=t.pieces_.length;i++,r++)if(t.pieces_[i]!==e.pieces_[r])return!1;return!0}function xe(t,e){let i=t.pieceNum_,r=e.pieceNum_;if(Mn(t)>Mn(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[r])return!1;++i,++r}return!0}var Jl=class{constructor(e,i){this.errorPrefix_=i,this.parts_=Qr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lr(this.parts_[r]);vb(this)}};function vC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lr(e),vb(t)}function yC(t){let e=t.parts_.pop();t.byteLength_-=Lr(e),t.parts_.length>0&&(t.byteLength_-=1)}function vb(t){if(t.byteLength_>Np)throw new Error(t.errorPrefix_+"has a key path longer than "+Np+" bytes ("+t.byteLength_+").");if(t.parts_.length>Rp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rp+") or object contains a cycle "+ii(t))}function ii(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var tu=class t extends Vs{constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return N(e==="visible","Unknown event type: "+e),[this.visible_]}};var zr=1e3,wC=60*5*1e3,kp=30*1e3,xC=1.3,EC=3e4,TC="server_kill",Pp=3,Zu=(()=>{class t extends Hs{constructor(i,r,s,c,l,d,h,b){if(super(),this.repoInfo_=i,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=c,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=b,this.id=t.nextPersistentConnectionId_++,this.log_=uo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zr,this.maxReconnectDelay_=wC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!Ve())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tu.getInstance().on("visible",this.onVisible_,this),i.host.indexOf("fblocal")===-1&&js.getInstance().on("online",this.onOnline_,this)}sendRequest(i,r,s){let c=++this.requestNumber_,l={r:c,a:i,b:r};this.log_(wt(l)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[c]=s)}get(i){this.initConnection_();let r=new Nt,c={action:"g",request:{p:i._path.toString(),q:i._queryObject},onComplete:d=>{let h=d.d;d.s==="ok"?r.resolve(h):r.reject(h)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;let l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),r.promise}listen(i,r,s,c){this.initConnection_();let l=i._queryIdentifier,d=i._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),N(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");let h={onComplete:c,hashFn:r,query:i,tag:s};this.listens.get(d).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(i){let r=this.outstandingGets_[i];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(i){let r=i.query,s=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+s+" for "+c);let l={p:s},d="q";i.tag&&(l.q=r._queryObject,l.t=i.tag),l.h=i.hashFn(),this.sendRequest(d,l,h=>{let b=h.d,v=h.s;t.warnOnListenWarnings_(b,r),(this.listens.get(s)&&this.listens.get(s).get(c))===i&&(this.log_("listen response",h),v!=="ok"&&this.removeListen_(s,c),i.onComplete&&i.onComplete(v,b))})}static warnOnListenWarnings_(i,r){if(i&&typeof i=="object"&&we(i,"w")){let s=Nn(i,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&i.length===40||Vm(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=kp)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let i=this.authToken_,r=Hm(i)?"auth":"gauth",s={cred:i};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(r,s,c=>{let l=c.s,d=c.d||"error";this.authToken_===i&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{let r=i.s,s=i.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(i,r){let s=i._path.toString(),c=i._queryIdentifier;this.log_("Unlisten called for "+s+" "+c),N(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,c)&&this.connected_&&this.sendUnlisten_(s,c,i._queryObject,r)}sendUnlisten_(i,r,s,c){this.log_("Unlisten on "+i+" for "+r);let l={p:i},d="n";c&&(l.q=s,l.t=c),this.sendRequest(d,l)}onDisconnectPut(i,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,r,s):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:r,onComplete:s})}onDisconnectMerge(i,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,r,s):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:r,onComplete:s})}onDisconnectCancel(i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,r):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(i,r,s,c){let l={p:r,d:s};this.log_("onDisconnect "+i,l),this.sendRequest(i,l,d=>{c&&setTimeout(()=>{c(d.s,d.d)},Math.floor(0))})}put(i,r,s,c){this.putInternal("p",i,r,s,c)}merge(i,r,s,c){this.putInternal("m",i,r,s,c)}putInternal(i,r,s,c,l){this.initConnection_();let d={p:r,d:s};l!==void 0&&(d.h=l),this.outstandingPuts_.push({action:i,request:d,onComplete:c}),this.outstandingPutCount_++;let h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+r)}sendPut_(i){let r=this.outstandingPuts_[i].action,s=this.outstandingPuts_[i].request,c=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(r,s,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[i],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(l.s,l.d)})}reportStats(i){if(this.connected_){let r={c:i};this.log_("reportStats",r),this.sendRequest("s",r,s=>{if(s.s!=="ok"){let l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+wt(i));let r=i.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,r){this.log_("handleServerMessage",i,r),i==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):i==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):i==="c"?this.onListenRevoked_(r.p,r.q):i==="ac"?this.onAuthRevoked_(r.s,r.d):i==="apc"?this.onAppCheckRevoked_(r.s,r.d):i==="sd"?this.onSecurityDebugPacket_(r):Gl("Unrecognized action received from server: "+wt(i)+`
Are you using the latest client?`)}onReady_(i,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(i),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EC&&(this.reconnectDelay_=zr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let i=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-i);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xC)}this.onConnectStatus_(!1)}establishConnection_(){return Ft(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let i=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+t.nextConnectionId_++,l=this.lastSessionId,d=!1,h=null,b=function(){h?h.close():(d=!0,s())},v=function(E){N(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(E)};this.realtime_={close:b,sendRequest:v};let x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[E,R]=yield Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);d?kt("getToken() completed but was canceled"):(kt("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=R&&R.token,h=new Zl(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,i,r,s,k=>{Ut(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(TC)},l))}catch(E){this.log_("Failed to get token: "+E),d||(this.repoInfo_.nodeAdmin&&Ut(E),b())}}})}interrupt(i){kt("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){kt("Resuming connection for reason: "+i),delete this.interruptReasons_[i],Ns(this.interruptReasons_)&&(this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){let r=i-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){let r=this.outstandingPuts_[i];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(i,r){let s;r?s=r.map(l=>Ku(l)).join("$"):s="default";let c=this.removeListen_(i,s);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(i,r){let s=new et(i).toString(),c;if(this.listens.has(s)){let l=this.listens.get(s);c=l.get(r),l.delete(r),l.size===0&&this.listens.delete(s)}else c=void 0;return c}onAuthRevoked_(i,r){kt("Auth token revoked: "+i+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(i==="invalid_token"||i==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Pp&&(this.reconnectDelay_=kp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,r){kt("App check token revoked: "+i+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(i==="invalid_token"||i==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Pp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let i of this.listens.values())for(let r of i.values())this.sendListen_(r);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){let i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){let i={},r="js";Ve()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),i["sdk."+r+"."+Yu.replace(/\./g,"-")]=1,pl()?i["framework.cordova"]=1:Wm()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){let i=js.getInstance().currentlyOnline();return Ns(this.interruptReasons_)&&i}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),q=class t{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new t(e,i)}};var Ki=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){let r=new q(Ln,e),s=new q(Ln,i);return this.compare(r,s)!==0}minPost(){return q.MIN}};var Bs,Gs=class extends Ki{static get __EMPTY_NODE(){return Bs}static set __EMPTY_NODE(e){Bs=e}compare(e,i){return ai(e.name,i.name)}isDefinedOn(e){throw Bi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return q.MIN}maxPost(){return new q(dn,Bs)}makePost(e,i){return N(typeof e=="string","KeyIndex indexValue must always be a string."),new q(e,Bs)}toString(){return".key"}},Ye=new Gs;var Yi=class{constructor(e,i,r,s,c=null){this.isReverse_=s,this.resultGenerator_=c,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=i?r(e.key,i):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Oe=(()=>{class t{constructor(i,r,s,c,l){this.key=i,this.value=r,this.color=s??t.RED,this.left=c??Ee.EMPTY_NODE,this.right=l??Ee.EMPTY_NODE}copy(i,r,s,c,l){return new t(i??this.key,r??this.value,s??this.color,c??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,r,s){let c=this,l=s(i,c.key);return l<0?c=c.copy(null,null,null,c.left.insert(i,r,s),null):l===0?c=c.copy(null,r,null,null,null):c=c.copy(null,null,null,null,c.right.insert(i,r,s)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ee.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,r){let s,c;if(s=this,r(i,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(i,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),r(i,s.key)===0){if(s.right.isEmpty())return Ee.EMPTY_NODE;c=s.right.min_(),s=s.copy(c.key,c.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(i,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){let i=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){let i=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){let i=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,r)}checkMaxDepth_(){let i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),eu=class{copy(e,i,r,s,c){return this}insert(e,i,r){return new Oe(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ee=class t{constructor(e,i=t.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new t(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,Oe.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oe.BLACK,null,null))}get(e){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(e,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(e){let i,r=this.root_,s=null;for(;!r.isEmpty();)if(i=this.comparator_(e,r.key),i===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new Yi(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new Yi(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new Yi(this.root_,null,this.comparator_,!0,e)}};Ee.EMPTY_NODE=new eu;function IC(t,e){return ai(t.name,e.name)}function Ju(t,e){return ai(t,e)}var nu;function CC(t){nu=t}var yb=function(t){return typeof t=="number"?"number:"+eb(t):"string:"+t},wb=function(t){if(t.isLeafNode()){let e=t.val();N(typeof e=="string"||typeof e=="number"||typeof e=="object"&&we(e,".sv"),"Priority must be a string or number.")}else N(t===nu||t.isEmpty(),"priority of unexpected type.");N(t===nu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Dp,qi=(()=>{class t{constructor(i,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=r,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wb(this.priorityNode_)}static set __childrenNodeConstructor(i){Dp=i}static get __childrenNodeConstructor(){return Dp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new t(this.value_,i)}getImmediateChild(i){return i===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return K(i)?this:$(i)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,r){return null}updateImmediateChild(i,r){return i===".priority"?this.updatePriority(r):r.isEmpty()&&i!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,r).updatePriority(this.priorityNode_)}updateChild(i,r){let s=$(i);return s===null?r:r.isEmpty()&&s!==".priority"?this:(N(s!==".priority"||Mn(i)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(i),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,r){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+yb(this.priorityNode_.val())+":");let r=typeof this.value_;i+=r+":",r==="number"?i+=eb(this.value_):i+=this.value_,this.lazyHash_=Zp(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===t.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof t.__childrenNodeConstructor?-1:(N(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){let r=typeof i.value_,s=typeof this.value_,c=t.VALUE_TYPE_ORDER.indexOf(r),l=t.VALUE_TYPE_ORDER.indexOf(s);return N(c>=0,"Unknown leaf type: "+r),N(l>=0,"Unknown leaf type: "+s),c===l?s==="object"?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:l-c}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){let r=i;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),xb,Eb;function SC(t){xb=t}function AC(t){Eb=t}var iu=class extends Ki{compare(e,i){let r=e.node.getPriority(),s=i.node.getPriority(),c=r.compareTo(s);return c===0?ai(e.name,i.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return q.MIN}maxPost(){return new q(dn,new qi("[PRIORITY-POST]",Eb))}makePost(e,i){let r=xb(e);return new q(i,new qi("[PRIORITY-POST]",r))}toString(){return".priority"}},lt=new iu;var RC=Math.log(2),ru=class{constructor(e){let i=c=>parseInt(Math.log(c)/RC,10),r=c=>parseInt(Array(c+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;let s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Ys=function(t,e,i,r){t.sort(e);let s=function(h,b){let v=b-h,x,E;if(v===0)return null;if(v===1)return x=t[h],E=i?i(x):x,new Oe(E,x.node,Oe.BLACK,null,null);{let R=parseInt(v/2,10)+h,k=s(h,R),W=s(R+1,b);return x=t[R],E=i?i(x):x,new Oe(E,x.node,Oe.BLACK,k,W)}},c=function(h){let b=null,v=null,x=t.length,E=function(k,W){let it=x-k,dt=x;x-=k;let yt=s(it+1,dt),X=t[it],St=i?i(X):X;R(new Oe(St,X.node,W,null,yt))},R=function(k){b?(b.left=k,b=k):(v=k,b=k)};for(let k=0;k<h.count;++k){let W=h.nextBitIsOne(),it=Math.pow(2,h.count-(k+1));W?E(it,Oe.BLACK):(E(it,Oe.BLACK),E(it,Oe.RED))}return v},l=new ru(t.length),d=c(l);return new Ee(r||e,d)};var Bl,ji={},Qi=class t{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return N(ji&&lt,"ChildrenNode.ts has not been loaded"),Bl=Bl||new t({".priority":ji},{".priority":lt}),Bl}get(e){let i=Nn(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Ee?i:null}hasIndex(e){return we(this.indexSet_,e.toString())}addIndex(e,i){N(e!==Ye,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],s=!1,c=i.getIterator(q.Wrap),l=c.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=c.getNext();let d;s?d=Ys(r,e.getCompare()):d=ji;let h=e.toString(),b=Object.assign({},this.indexSet_);b[h]=e;let v=Object.assign({},this.indexes_);return v[h]=d,new t(v,b)}addToIndexes(e,i){let r=Fr(this.indexes_,(s,c)=>{let l=Nn(this.indexSet_,c);if(N(l,"Missing index implementation for "+c),s===ji)if(l.isDefinedOn(e.node)){let d=[],h=i.getIterator(q.Wrap),b=h.getNext();for(;b;)b.name!==e.name&&d.push(b),b=h.getNext();return d.push(e),Ys(d,l.getCompare())}else return ji;else{let d=i.get(e.name),h=s;return d&&(h=h.remove(new q(e.name,d))),h.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,i){let r=Fr(this.indexes_,s=>{if(s===ji)return s;{let c=i.get(e.name);return c?s.remove(new q(e.name,c)):s}});return new t(r,this.indexSet_)}};var Hr,H=(()=>{class t{constructor(i,r,s){this.children_=i,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&wb(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hr||(Hr=new t(new Ee(Ju),null,Qi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hr}updatePriority(i){return this.children_.isEmpty()?this:new t(this.children_,i,this.indexMap_)}getImmediateChild(i){if(i===".priority")return this.getPriority();{let r=this.children_.get(i);return r===null?Hr:r}}getChild(i){let r=$(i);return r===null?this:this.getImmediateChild(r).getChild(at(i))}hasChild(i){return this.children_.get(i)!==null}updateImmediateChild(i,r){if(N(r,"We should always be passing snapshot nodes"),i===".priority")return this.updatePriority(r);{let s=new q(i,r),c,l;r.isEmpty()?(c=this.children_.remove(i),l=this.indexMap_.removeFromIndexes(s,this.children_)):(c=this.children_.insert(i,r),l=this.indexMap_.addToIndexes(s,this.children_));let d=c.isEmpty()?Hr:this.priorityNode_;return new t(c,d,l)}}updateChild(i,r){let s=$(i);if(s===null)return r;{N($(i)!==".priority"||Mn(i)===1,".priority must be the last token in a path");let c=this.getImmediateChild(s).updateChild(at(i),r);return this.updateImmediateChild(s,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;let r={},s=0,c=0,l=!0;if(this.forEachChild(lt,(d,h)=>{r[d]=h.val(i),s++,l&&t.INTEGER_REGEXP_.test(d)?c=Math.max(c,Number(d)):l=!1}),!i&&l&&c<2*s){let d=[];for(let h in r)d[h]=r[h];return d}else return i&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let i="";this.getPriority().isEmpty()||(i+="priority:"+yb(this.getPriority().val())+":"),this.forEachChild(lt,(r,s)=>{let c=s.hash();c!==""&&(i+=":"+r+":"+c)}),this.lazyHash_=i===""?"":Zp(i)}return this.lazyHash_}getPredecessorChildName(i,r,s){let c=this.resolveIndex_(s);if(c){let l=c.getPredecessorKey(new q(i,r));return l?l.name:null}else return this.children_.getPredecessorKey(i)}getFirstChildName(i){let r=this.resolveIndex_(i);if(r){let s=r.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(i){let r=this.getFirstChildName(i);return r?new q(r,this.children_.get(r)):null}getLastChildName(i){let r=this.resolveIndex_(i);if(r){let s=r.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(i){let r=this.getLastChildName(i);return r?new q(r,this.children_.get(r)):null}forEachChild(i,r){let s=this.resolveIndex_(i);return s?s.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,r){let s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(i,c=>c);{let c=this.children_.getIteratorFrom(i.name,q.Wrap),l=c.peek();for(;l!=null&&r.compare(l,i)<0;)c.getNext(),l=c.peek();return c}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,r){let s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(i,c=>c);{let c=this.children_.getReverseIteratorFrom(i.name,q.Wrap),l=c.peek();for(;l!=null&&r.compare(l,i)>0;)c.getNext(),l=c.peek();return c}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===fo?-1:0}withIndex(i){if(i===Ye||this.indexMap_.hasIndex(i))return this;{let r=this.indexMap_.addIndex(i,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(i){return i===Ye||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{let r=i;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let s=this.getIterator(lt),c=r.getIterator(lt),l=s.getNext(),d=c.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=s.getNext(),d=c.getNext()}return l===null&&d===null}else return!1;else return!1}}resolveIndex_(i){return i===Ye?null:this.indexMap_.get(i.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),ou=class extends H{constructor(){super(new Ee(Ju),H.EMPTY_NODE,Qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return H.EMPTY_NODE}isEmpty(){return!1}},fo=new ou;Object.defineProperties(q,{MIN:{value:new q(Ln,H.EMPTY_NODE)},MAX:{value:new q(dn,fo)}});Gs.__EMPTY_NODE=H.EMPTY_NODE;qi.__childrenNodeConstructor=H;CC(fo);AC(fo);var NC=!0;function pt(t,e=null){if(t===null)return H.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),N(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let i=t;return new qi(i,pt(e))}if(!(t instanceof Array)&&NC){let i=[],r=!1;if(Pt(t,(l,d)=>{if(l.substring(0,1)!=="."){let h=pt(d);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),i.push(new q(l,h)))}}),i.length===0)return H.EMPTY_NODE;let c=Ys(i,IC,l=>l.name,Ju);if(r){let l=Ys(i,lt.getCompare());return new H(c,pt(e),new Qi({".priority":l},{".priority":lt}))}else return new H(c,pt(e),Qi.Default)}else{let i=H.EMPTY_NODE;return Pt(t,(r,s)=>{if(we(t,r)&&r.substring(0,1)!=="."){let c=pt(s);(c.isLeafNode()||!c.isEmpty())&&(i=i.updateImmediateChild(r,c))}}),i.updatePriority(pt(e))}}SC(pt);var Xr=class extends Ki{constructor(e){super(),this.indexPath_=e,N(!K(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){let r=this.extractChild(e.node),s=this.extractChild(i.node),c=r.compareTo(s);return c===0?ai(e.name,i.name):c}makePost(e,i){let r=pt(e),s=H.EMPTY_NODE.updateChild(this.indexPath_,r);return new q(i,s)}maxPost(){let e=H.EMPTY_NODE.updateChild(this.indexPath_,fo);return new q(dn,e)}toString(){return Qr(this.indexPath_,0).join("/")}};var su=class extends Ki{compare(e,i){let r=e.node.compareTo(i.node);return r===0?ai(e.name,i.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return q.MIN}maxPost(){return q.MAX}makePost(e,i){let r=pt(e);return new q(i,r)}toString(){return".value"}},td=new su;function Tb(t){return{type:"value",snapshotNode:t}}function Xi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Zr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Jr(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function kC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var to=class{constructor(e){this.index_=e}updateChild(e,i,r,s,c,l){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let d=e.getImmediateChild(i);return d.getChild(s).equals(r.getChild(s))&&d.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?e.hasChild(i)?l.trackChildChange(Zr(i,d)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Xi(i,r)):l.trackChildChange(Jr(i,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(e,i,r){return r!=null&&(e.isLeafNode()||e.forEachChild(lt,(s,c)=>{i.hasChild(s)||r.trackChildChange(Zr(s,c))}),i.isLeafNode()||i.forEachChild(lt,(s,c)=>{if(e.hasChild(s)){let l=e.getImmediateChild(s);l.equals(c)||r.trackChildChange(Jr(s,c,l))}else r.trackChildChange(Xi(s,c))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?H.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var $s=class t{constructor(e){this.indexedFilter_=new to(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return i&&r}updateChild(e,i,r,s,c,l){return this.matches(new q(i,r))||(r=H.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,r,s,c,l)}updateFullNode(e,i,r){i.isLeafNode()&&(i=H.EMPTY_NODE);let s=i.withIndex(this.index_);s=s.updatePriority(H.EMPTY_NODE);let c=this;return i.forEachChild(lt,(l,d)=>{c.matches(new q(l,d))||(s=s.updateImmediateChild(l,H.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}};var au=class{constructor(e){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{let r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $s(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,i,r,s,c,l){return this.rangedFilter_.matches(new q(i,r))||(r=H.EMPTY_NODE),e.getImmediateChild(i).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,r,s,c,l):this.fullLimitUpdateChild_(e,i,r,c,l)}updateFullNode(e,i,r){let s;if(i.isLeafNode()||i.isEmpty())s=H.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){s=H.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;c.hasNext()&&l<this.limit_;){let d=c.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))s=s.updateImmediateChild(d.name,d.node),l++;else break;else continue}}else{s=i.withIndex(this.index_),s=s.updatePriority(H.EMPTY_NODE);let c;this.reverse_?c=s.getReverseIterator(this.index_):c=s.getIterator(this.index_);let l=0;for(;c.hasNext();){let d=c.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:s=s.updateImmediateChild(d.name,H.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,r,s,c){let l;if(this.reverse_){let x=this.index_.getCompare();l=(E,R)=>x(R,E)}else l=this.index_.getCompare();let d=e;N(d.numChildren()===this.limit_,"");let h=new q(i,r),b=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(d.hasChild(i)){let x=d.getImmediateChild(i),E=s.getChildAfterChild(this.index_,b,this.reverse_);for(;E!=null&&(E.name===i||d.hasChild(E.name));)E=s.getChildAfterChild(this.index_,E,this.reverse_);let R=E==null?1:l(E,h);if(v&&!r.isEmpty()&&R>=0)return c?.trackChildChange(Jr(i,r,x)),d.updateImmediateChild(i,r);{c?.trackChildChange(Zr(i,x));let W=d.updateImmediateChild(i,H.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(c?.trackChildChange(Xi(E.name,E.node)),W.updateImmediateChild(E.name,E.node)):W}}else return r.isEmpty()?e:v&&l(b,h)>=0?(c!=null&&(c.trackChildChange(Zr(b.name,b.node)),c.trackChildChange(Xi(i,r))),d.updateImmediateChild(i,r).updateImmediateChild(b.name,H.EMPTY_NODE)):e}};var eo=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ln}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:dn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function PC(t){return t.loadsAllData()?new to(t.getIndex()):t.hasLimit()?new au(t):new $s(t)}function DC(t,e){let i=t.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="l",i}function OC(t,e){let i=t.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="r",i}function cu(t,e,i){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,i!=null?(r.startNameSet_=!0,r.indexStartName_=i):(r.startNameSet_=!1,r.indexStartName_=""),r}function FC(t,e,i){let r;return t.index_===Ye||i?r=cu(t,e,i):r=cu(t,e,dn),r.startAfterSet_=!0,r}function lu(t,e,i){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,i!==void 0?(r.endNameSet_=!0,r.indexEndName_=i):(r.endNameSet_=!1,r.indexEndName_=""),r}function LC(t,e,i){let r;return t.index_===Ye||i?r=lu(t,e,i):r=lu(t,e,Ln),r.endBeforeSet_=!0,r}function fa(t,e){let i=t.copy();return i.index_=e,i}function Op(t){let e={};if(t.isDefault())return e;let i;if(t.index_===lt?i="$priority":t.index_===td?i="$value":t.index_===Ye?i="$key":(N(t.index_ instanceof Xr,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=wt(i),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=wt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Fp(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==lt&&(e.i=t.index_.toString()),e}var uu=class t extends Hs{constructor(e,i,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=uo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,r,s){let c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);let l=t.getListenId_(e,r),d={};this.listens_[l]=d;let h=Op(e._queryParams);this.restRequest_(c+".json",h,(b,v)=>{let x=v;if(b===404&&(x=null,b=null),b===null&&this.onDataUpdate_(c,x,!1,r),Nn(this.listens_,l)===d){let E;b?b===401?E="permission_denied":E="rest_error:"+b:E="ok",s(E,null)}})}unlisten(e,i){let r=t.getListenId_(e,i);delete this.listens_[r]}get(e){let i=Op(e._queryParams),r=e._path.toString(),s=new Nt;return this.restRequest_(r+".json",i,(c,l)=>{let d=l;c===404&&(d=null,c=null),c===null?(this.onDataUpdate_(r,d,!1,null),s.resolve(d)):s.reject(new Error(d))}),s.promise}refreshAuthToken(e){}restRequest_(e,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,c])=>{s&&s.accessToken&&(i.auth=s.accessToken),c&&c.token&&(i.ac=c.token);let l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+jm(i);this.log_("Sending REST request for "+l);let d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&d.readyState===4){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let h=null;if(d.status>=200&&d.status<300){try{h=Rs(d.responseText)}catch{Ut("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,h)}else d.status!==401&&d.status!==404&&Ut("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}};var du=class{constructor(){this.rootNode_=H.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}};function Ks(){return{value:null,children:new Map}}function ir(t,e,i){if(K(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{let r=$(e);t.children.has(r)||t.children.set(r,Ks());let s=t.children.get(r);e=at(e),ir(s,e,i)}}function fu(t,e){if(K(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let i=t.value;return t.value=null,i.forEachChild(lt,(r,s)=>{ir(t,new et(r),s)}),fu(t,e)}}else if(t.children.size>0){let i=$(e);return e=at(e),t.children.has(i)&&fu(t.children.get(i),e)&&t.children.delete(i),t.children.size===0}else return!0}function hu(t,e,i){t.value!==null?i(e,t.value):MC(t,(r,s)=>{let c=new et(e.toString()+"/"+r);hu(s,c,i)})}function MC(t,e){t.children.forEach((i,r)=>{e(r,i)})}var mu=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),i=Object.assign({},e);return this.last_&&Pt(this.last_,(r,s)=>{i[r]=i[r]-s}),this.last_=e,i}};var Lp=10*1e3,BC=30*1e3,WC=5*60*1e3,pu=class{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new mu(e);let r=Lp+(BC-Lp)*Math.random();jr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),i={},r=!1;Pt(e,(s,c)=>{c>0&&we(this.statsToReport_,s)&&(i[s]=c,r=!0)}),r&&this.server_.reportStats(i),jr(this.reportStats_.bind(this),Math.floor(Math.random()*2*WC))}};var Ge=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ge||{});function ed(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function id(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var bu=class t{constructor(e,i,r){this.path=e,this.affectedTree=i,this.revert=r,this.type=Ge.ACK_USER_WRITE,this.source=ed()}operationForChild(e){if(K(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let i=this.affectedTree.subtree(new et(e));return new t(tt(),i,this.revert)}}else return N($(this.path)===e,"operationForChild called for unrelated child."),new t(at(this.path),this.affectedTree,this.revert)}};var qs=class t{constructor(e,i){this.source=e,this.path=i,this.type=Ge.LISTEN_COMPLETE}operationForChild(e){return K(this.path)?new t(this.source,tt()):new t(this.source,at(this.path))}};var Zi=class t{constructor(e,i,r){this.source=e,this.path=i,this.snap=r,this.type=Ge.OVERWRITE}operationForChild(e){return K(this.path)?new t(this.source,tt(),this.snap.getImmediateChild(e)):new t(this.source,at(this.path),this.snap)}};var no=class t{constructor(e,i,r){this.source=e,this.path=i,this.children=r,this.type=Ge.MERGE}operationForChild(e){if(K(this.path)){let i=this.children.subtree(new et(e));return i.isEmpty()?null:i.value?new Zi(this.source,tt(),i.value):new t(this.source,tt(),i)}else return N($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ke=class{constructor(e,i,r){this.node_=e,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(K(e))return this.isFullyInitialized()&&!this.filtered_;let i=$(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var gu=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function UC(t,e,i,r){let s=[],c=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&c.push(kC(l.childName,l.snapshotNode))}),Vr(t,s,"child_removed",e,r,i),Vr(t,s,"child_added",e,r,i),Vr(t,s,"child_moved",c,r,i),Vr(t,s,"child_changed",e,r,i),Vr(t,s,"value",e,r,i),s}function Vr(t,e,i,r,s,c){let l=r.filter(d=>d.type===i);l.sort((d,h)=>HC(t,d,h)),l.forEach(d=>{let h=zC(t,d,c);s.forEach(b=>{b.respondsTo(d.type)&&e.push(b.createEvent(h,t.query_))})})}function zC(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function HC(t,e,i){if(e.childName==null||i.childName==null)throw Bi("Should only compare child_ events.");let r=new q(e.childName,e.snapshotNode),s=new q(i.childName,i.snapshotNode);return t.index_.compare(r,s)}function ha(t,e){return{eventCache:t,serverCache:e}}function Yr(t,e,i,r){return ha(new Ke(e,i,r),t.serverCache)}function Ib(t,e,i,r){return ha(t.eventCache,new Ke(e,i,r))}function Qs(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function si(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Wl,VC=()=>(Wl||(Wl=new Ee(zI)),Wl),Yt=class t{constructor(e,i=VC()){this.value=e,this.children=i}static fromObject(e){let i=new t(null);return Pt(e,(r,s)=>{i=i.set(new et(r),s)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:tt(),value:this.value};if(K(e))return null;{let r=$(e),s=this.children.get(r);if(s!==null){let c=s.findRootMostMatchingPathAndValue(at(e),i);return c!=null?{path:ht(new et(r),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(K(e))return this;{let i=$(e),r=this.children.get(i);return r!==null?r.subtree(at(e)):new t(null)}}set(e,i){if(K(e))return new t(i,this.children);{let r=$(e),c=(this.children.get(r)||new t(null)).set(at(e),i),l=this.children.insert(r,c);return new t(this.value,l)}}remove(e){if(K(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let i=$(e),r=this.children.get(i);if(r){let s=r.remove(at(e)),c;return s.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,s),this.value===null&&c.isEmpty()?new t(null):new t(this.value,c)}else return this}}get(e){if(K(e))return this.value;{let i=$(e),r=this.children.get(i);return r?r.get(at(e)):null}}setTree(e,i){if(K(e))return i;{let r=$(e),c=(this.children.get(r)||new t(null)).setTree(at(e),i),l;return c.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,c),new t(this.value,l)}}fold(e){return this.fold_(tt(),e)}fold_(e,i){let r={};return this.children.inorderTraversal((s,c)=>{r[s]=c.fold_(ht(e,s),i)}),i(e,this.value,r)}findOnPath(e,i){return this.findOnPath_(e,tt(),i)}findOnPath_(e,i,r){let s=this.value?r(i,this.value):!1;if(s)return s;if(K(e))return null;{let c=$(e),l=this.children.get(c);return l?l.findOnPath_(at(e),ht(i,c),r):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,tt(),i)}foreachOnPath_(e,i,r){if(K(e))return this;{this.value&&r(i,this.value);let s=$(e),c=this.children.get(s);return c?c.foreachOnPath_(at(e),ht(i,s),r):new t(null)}}foreach(e){this.foreach_(tt(),e)}foreach_(e,i){this.children.inorderTraversal((r,s)=>{s.foreach_(ht(e,r),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,r)=>{r.value&&e(i,r.value)})}};var Fe=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Yt(null))}};function $r(t,e,i){if(K(e))return new Fe(new Yt(i));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let s=r.path,c=r.value,l=Gt(s,e);return c=c.updateChild(l,i),new Fe(t.writeTree_.set(s,c))}else{let s=new Yt(i),c=t.writeTree_.setTree(e,s);return new Fe(c)}}}function _u(t,e,i){let r=t;return Pt(i,(s,c)=>{r=$r(r,ht(e,s),c)}),r}function Mp(t,e){if(K(e))return Fe.empty();{let i=t.writeTree_.setTree(e,new Yt(null));return new Fe(i)}}function vu(t,e){return ci(t,e)!=null}function ci(t,e){let i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(Gt(i.path,e)):null}function Bp(t){let e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(lt,(r,s)=>{e.push(new q(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new q(r,s.value))}),e}function On(t,e){if(K(e))return t;{let i=ci(t,e);return i!=null?new Fe(new Yt(i)):new Fe(t.writeTree_.subtree(e))}}function yu(t){return t.writeTree_.isEmpty()}function Ji(t,e){return Cb(tt(),t.writeTree_,e)}function Cb(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,c)=>{s===".priority"?(N(c.value!==null,"Priority writes must always be leaf nodes"),r=c.value):i=Cb(ht(t,s),c,i)}),!i.getChild(t).isEmpty()&&r!==null&&(i=i.updateChild(ht(t,".priority"),r)),i}}function ma(t,e){return Nb(e,t)}function jC(t,e,i,r,s){N(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:i,writeId:r,visible:s}),s&&(t.visibleWrites=$r(t.visibleWrites,e,i)),t.lastWriteId=r}function GC(t,e,i,r){N(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:i,writeId:r,visible:!0}),t.visibleWrites=_u(t.visibleWrites,e,i),t.lastWriteId=r}function YC(t,e){for(let i=0;i<t.allWrites.length;i++){let r=t.allWrites[i];if(r.writeId===e)return r}return null}function $C(t,e){let i=t.allWrites.findIndex(d=>d.writeId===e);N(i>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[i];t.allWrites.splice(i,1);let s=r.visible,c=!1,l=t.allWrites.length-1;for(;s&&l>=0;){let d=t.allWrites[l];d.visible&&(l>=i&&KC(d,r.path)?s=!1:xe(r.path,d.path)&&(c=!0)),l--}if(s){if(c)return qC(t),!0;if(r.snap)t.visibleWrites=Mp(t.visibleWrites,r.path);else{let d=r.children;Pt(d,h=>{t.visibleWrites=Mp(t.visibleWrites,ht(r.path,h))})}return!0}else return!1}function KC(t,e){if(t.snap)return xe(t.path,e);for(let i in t.children)if(t.children.hasOwnProperty(i)&&xe(ht(t.path,i),e))return!0;return!1}function qC(t){t.visibleWrites=Sb(t.allWrites,QC,tt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function QC(t){return t.visible}function Sb(t,e,i){let r=Fe.empty();for(let s=0;s<t.length;++s){let c=t[s];if(e(c)){let l=c.path,d;if(c.snap)xe(i,l)?(d=Gt(i,l),r=$r(r,d,c.snap)):xe(l,i)&&(d=Gt(l,i),r=$r(r,tt(),c.snap.getChild(d)));else if(c.children){if(xe(i,l))d=Gt(i,l),r=_u(r,d,c.children);else if(xe(l,i))if(d=Gt(l,i),K(d))r=_u(r,tt(),c.children);else{let h=Nn(c.children,$(d));if(h){let b=h.getChild(at(d));r=$r(r,tt(),b)}}}else throw Bi("WriteRecord should have .snap or .children")}}return r}function Ab(t,e,i,r,s){if(!r&&!s){let c=ci(t.visibleWrites,e);if(c!=null)return c;{let l=On(t.visibleWrites,e);if(yu(l))return i;if(i==null&&!vu(l,tt()))return null;{let d=i||H.EMPTY_NODE;return Ji(l,d)}}}else{let c=On(t.visibleWrites,e);if(!s&&yu(c))return i;if(!s&&i==null&&!vu(c,tt()))return null;{let l=function(b){return(b.visible||s)&&(!r||!~r.indexOf(b.writeId))&&(xe(b.path,e)||xe(e,b.path))},d=Sb(t.allWrites,l,e),h=i||H.EMPTY_NODE;return Ji(d,h)}}}function XC(t,e,i){let r=H.EMPTY_NODE,s=ci(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(lt,(c,l)=>{r=r.updateImmediateChild(c,l)}),r;if(i){let c=On(t.visibleWrites,e);return i.forEachChild(lt,(l,d)=>{let h=Ji(On(c,new et(l)),d);r=r.updateImmediateChild(l,h)}),Bp(c).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{let c=On(t.visibleWrites,e);return Bp(c).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function ZC(t,e,i,r,s){N(r||s,"Either existingEventSnap or existingServerSnap must exist");let c=ht(e,i);if(vu(t.visibleWrites,c))return null;{let l=On(t.visibleWrites,c);return yu(l)?s.getChild(i):Ji(l,s.getChild(i))}}function JC(t,e,i,r){let s=ht(e,i),c=ci(t.visibleWrites,s);if(c!=null)return c;if(r.isCompleteForChild(i)){let l=On(t.visibleWrites,s);return Ji(l,r.getNode().getImmediateChild(i))}else return null}function tS(t,e){return ci(t.visibleWrites,e)}function eS(t,e,i,r,s,c,l){let d,h=On(t.visibleWrites,e),b=ci(h,tt());if(b!=null)d=b;else if(i!=null)d=Ji(h,i);else return[];if(d=d.withIndex(l),!d.isEmpty()&&!d.isLeafNode()){let v=[],x=l.getCompare(),E=c?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l),R=E.getNext();for(;R&&v.length<s;)x(R,r)!==0&&v.push(R),R=E.getNext();return v}else return[]}function nS(){return{visibleWrites:Fe.empty(),allWrites:[],lastWriteId:-1}}function Xs(t,e,i,r){return Ab(t.writeTree,t.treePath,e,i,r)}function rd(t,e){return XC(t.writeTree,t.treePath,e)}function Wp(t,e,i,r){return ZC(t.writeTree,t.treePath,e,i,r)}function Zs(t,e){return tS(t.writeTree,ht(t.treePath,e))}function iS(t,e,i,r,s,c){return eS(t.writeTree,t.treePath,e,i,r,s,c)}function od(t,e,i){return JC(t.writeTree,t.treePath,e,i)}function Rb(t,e){return Nb(ht(t.treePath,e),t.writeTree)}function Nb(t,e){return{treePath:t,writeTree:e}}var wu=class{constructor(){this.changeMap=new Map}trackChildChange(e){let i=e.type,r=e.childName;N(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),N(r!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(r);if(s){let c=s.type;if(i==="child_added"&&c==="child_removed")this.changeMap.set(r,Jr(r,e.snapshotNode,s.snapshotNode));else if(i==="child_removed"&&c==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&c==="child_changed")this.changeMap.set(r,Zr(r,s.oldSnap));else if(i==="child_changed"&&c==="child_added")this.changeMap.set(r,Xi(r,e.snapshotNode));else if(i==="child_changed"&&c==="child_changed")this.changeMap.set(r,Jr(r,e.snapshotNode,s.oldSnap));else throw Bi("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var xu=class{getCompleteChild(e){return null}getChildAfterChild(e,i,r){return null}},kb=new xu,io=class{constructor(e,i,r=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(e){let i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ke(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return od(this.writes_,e,r)}}getChildAfterChild(e,i,r){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:si(this.viewCache_),c=iS(this.writes_,s,i,1,r,e);return c.length===0?null:c[0]}};function rS(t){return{filter:t}}function oS(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function sS(t,e,i,r,s){let c=new wu,l,d;if(i.type===Ge.OVERWRITE){let b=i;b.source.fromUser?l=Eu(t,e,b.path,b.snap,r,s,c):(N(b.source.fromServer,"Unknown source."),d=b.source.tagged||e.serverCache.isFiltered()&&!K(b.path),l=Js(t,e,b.path,b.snap,r,s,d,c))}else if(i.type===Ge.MERGE){let b=i;b.source.fromUser?l=cS(t,e,b.path,b.children,r,s,c):(N(b.source.fromServer,"Unknown source."),d=b.source.tagged||e.serverCache.isFiltered(),l=Tu(t,e,b.path,b.children,r,s,d,c))}else if(i.type===Ge.ACK_USER_WRITE){let b=i;b.revert?l=dS(t,e,b.path,r,s,c):l=lS(t,e,b.path,b.affectedTree,r,s,c)}else if(i.type===Ge.LISTEN_COMPLETE)l=uS(t,e,i.path,r,c);else throw Bi("Unknown operation type: "+i.type);let h=c.getChanges();return aS(e,l,h),{viewCache:l,changes:h}}function aS(t,e,i){let r=e.eventCache;if(r.isFullyInitialized()){let s=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=Qs(t);(i.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&i.push(Tb(Qs(e)))}}function Pb(t,e,i,r,s,c){let l=e.eventCache;if(Zs(r,i)!=null)return e;{let d,h;if(K(i))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let b=si(e),v=b instanceof H?b:H.EMPTY_NODE,x=rd(r,v);d=t.filter.updateFullNode(e.eventCache.getNode(),x,c)}else{let b=Xs(r,si(e));d=t.filter.updateFullNode(e.eventCache.getNode(),b,c)}else{let b=$(i);if(b===".priority"){N(Mn(i)===1,"Can't have a priority with additional path components");let v=l.getNode();h=e.serverCache.getNode();let x=Wp(r,i,v,h);x!=null?d=t.filter.updatePriority(v,x):d=l.getNode()}else{let v=at(i),x;if(l.isCompleteForChild(b)){h=e.serverCache.getNode();let E=Wp(r,i,l.getNode(),h);E!=null?x=l.getNode().getImmediateChild(b).updateChild(v,E):x=l.getNode().getImmediateChild(b)}else x=od(r,b,e.serverCache);x!=null?d=t.filter.updateChild(l.getNode(),b,x,v,s,c):d=l.getNode()}}return Yr(e,d,l.isFullyInitialized()||K(i),t.filter.filtersNodes())}}function Js(t,e,i,r,s,c,l,d){let h=e.serverCache,b,v=l?t.filter:t.filter.getIndexedFilter();if(K(i))b=v.updateFullNode(h.getNode(),r,null);else if(v.filtersNodes()&&!h.isFiltered()){let R=h.getNode().updateChild(i,r);b=v.updateFullNode(h.getNode(),R,null)}else{let R=$(i);if(!h.isCompleteForPath(i)&&Mn(i)>1)return e;let k=at(i),it=h.getNode().getImmediateChild(R).updateChild(k,r);R===".priority"?b=v.updatePriority(h.getNode(),it):b=v.updateChild(h.getNode(),R,it,k,kb,null)}let x=Ib(e,b,h.isFullyInitialized()||K(i),v.filtersNodes()),E=new io(s,x,c);return Pb(t,x,i,s,E,d)}function Eu(t,e,i,r,s,c,l){let d=e.eventCache,h,b,v=new io(s,e,c);if(K(i))b=t.filter.updateFullNode(e.eventCache.getNode(),r,l),h=Yr(e,b,!0,t.filter.filtersNodes());else{let x=$(i);if(x===".priority")b=t.filter.updatePriority(e.eventCache.getNode(),r),h=Yr(e,b,d.isFullyInitialized(),d.isFiltered());else{let E=at(i),R=d.getNode().getImmediateChild(x),k;if(K(E))k=r;else{let W=v.getCompleteChild(x);W!=null?Qu(E)===".priority"&&W.getChild(_b(E)).isEmpty()?k=W:k=W.updateChild(E,r):k=H.EMPTY_NODE}if(R.equals(k))h=e;else{let W=t.filter.updateChild(d.getNode(),x,k,E,v,l);h=Yr(e,W,d.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Up(t,e){return t.eventCache.isCompleteForChild(e)}function cS(t,e,i,r,s,c,l){let d=e;return r.foreach((h,b)=>{let v=ht(i,h);Up(e,$(v))&&(d=Eu(t,d,v,b,s,c,l))}),r.foreach((h,b)=>{let v=ht(i,h);Up(e,$(v))||(d=Eu(t,d,v,b,s,c,l))}),d}function zp(t,e,i){return i.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Tu(t,e,i,r,s,c,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,b;K(i)?b=r:b=new Yt(null).setTree(i,r);let v=e.serverCache.getNode();return b.children.inorderTraversal((x,E)=>{if(v.hasChild(x)){let R=e.serverCache.getNode().getImmediateChild(x),k=zp(t,R,E);h=Js(t,h,new et(x),k,s,c,l,d)}}),b.children.inorderTraversal((x,E)=>{let R=!e.serverCache.isCompleteForChild(x)&&E.value===null;if(!v.hasChild(x)&&!R){let k=e.serverCache.getNode().getImmediateChild(x),W=zp(t,k,E);h=Js(t,h,new et(x),W,s,c,l,d)}}),h}function lS(t,e,i,r,s,c,l){if(Zs(s,i)!=null)return e;let d=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if(K(i)&&h.isFullyInitialized()||h.isCompleteForPath(i))return Js(t,e,i,h.getNode().getChild(i),s,c,d,l);if(K(i)){let b=new Yt(null);return h.getNode().forEachChild(Ye,(v,x)=>{b=b.set(new et(v),x)}),Tu(t,e,i,b,s,c,d,l)}else return e}else{let b=new Yt(null);return r.foreach((v,x)=>{let E=ht(i,v);h.isCompleteForPath(E)&&(b=b.set(v,h.getNode().getChild(E)))}),Tu(t,e,i,b,s,c,d,l)}}function uS(t,e,i,r,s){let c=e.serverCache,l=Ib(e,c.getNode(),c.isFullyInitialized()||K(i),c.isFiltered());return Pb(t,l,i,r,kb,s)}function dS(t,e,i,r,s,c){let l;if(Zs(r,i)!=null)return e;{let d=new io(r,e,s),h=e.eventCache.getNode(),b;if(K(i)||$(i)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Xs(r,si(e));else{let x=e.serverCache.getNode();N(x instanceof H,"serverChildren would be complete if leaf node"),v=rd(r,x)}v=v,b=t.filter.updateFullNode(h,v,c)}else{let v=$(i),x=od(r,v,e.serverCache);x==null&&e.serverCache.isCompleteForChild(v)&&(x=h.getImmediateChild(v)),x!=null?b=t.filter.updateChild(h,v,x,at(i),d,c):e.eventCache.getNode().hasChild(v)?b=t.filter.updateChild(h,v,H.EMPTY_NODE,at(i),d,c):b=h,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Xs(r,si(e)),l.isLeafNode()&&(b=t.filter.updateFullNode(b,l,c)))}return l=e.serverCache.isFullyInitialized()||Zs(r,tt())!=null,Yr(e,b,l,t.filter.filtersNodes())}}var Iu=class{constructor(e,i){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,s=new to(r.getIndex()),c=PC(r);this.processor_=rS(c);let l=i.serverCache,d=i.eventCache,h=s.updateFullNode(H.EMPTY_NODE,l.getNode(),null),b=c.updateFullNode(H.EMPTY_NODE,d.getNode(),null),v=new Ke(h,l.isFullyInitialized(),s.filtersNodes()),x=new Ke(b,d.isFullyInitialized(),c.filtersNodes());this.viewCache_=ha(x,v),this.eventGenerator_=new gu(this.query_)}get query(){return this.query_}};function fS(t){return t.viewCache_.serverCache.getNode()}function hS(t){return Qs(t.viewCache_)}function mS(t,e){let i=si(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!K(e)&&!i.getImmediateChild($(e)).isEmpty())?i.getChild(e):null}function Hp(t){return t.eventRegistrations_.length===0}function pS(t,e){t.eventRegistrations_.push(e)}function Vp(t,e,i){let r=[];if(i){N(e==null,"A cancel should cancel all event registrations.");let s=t.query._path;t.eventRegistrations_.forEach(c=>{let l=c.createCancelEvent(i,s);l&&r.push(l)})}if(e){let s=[];for(let c=0;c<t.eventRegistrations_.length;++c){let l=t.eventRegistrations_[c];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(c+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function jp(t,e,i,r){e.type===Ge.MERGE&&e.source.queryId!==null&&(N(si(t.viewCache_),"We should always have a full cache before handling merges"),N(Qs(t.viewCache_),"Missing event cache, even though we have a server cache"));let s=t.viewCache_,c=sS(t.processor_,s,e,i,r);return oS(t.processor_,c.viewCache),N(c.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=c.viewCache,Db(t,c.changes,c.viewCache.eventCache.getNode(),null)}function bS(t,e){let i=t.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(lt,(c,l)=>{r.push(Xi(c,l))}),i.isFullyInitialized()&&r.push(Tb(i.getNode())),Db(t,r,i.getNode(),e)}function Db(t,e,i,r){let s=r?[r]:t.eventRegistrations_;return UC(t.eventGenerator_,e,i,s)}var ta,ea=class{constructor(){this.views=new Map}};function gS(t){N(!ta,"__referenceConstructor has already been defined"),ta=t}function _S(){return N(ta,"Reference.ts has not been loaded"),ta}function vS(t){return t.views.size===0}function sd(t,e,i,r){let s=e.source.queryId;if(s!==null){let c=t.views.get(s);return N(c!=null,"SyncTree gave us an op for an invalid query."),jp(c,e,i,r)}else{let c=[];for(let l of t.views.values())c=c.concat(jp(l,e,i,r));return c}}function Ob(t,e,i,r,s){let c=e._queryIdentifier,l=t.views.get(c);if(!l){let d=Xs(i,s?r:null),h=!1;d?h=!0:r instanceof H?(d=rd(i,r),h=!1):(d=H.EMPTY_NODE,h=!1);let b=ha(new Ke(d,h,!1),new Ke(r,s,!1));return new Iu(e,b)}return l}function yS(t,e,i,r,s,c){let l=Ob(t,e,r,s,c);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),pS(l,i),bS(l,i)}function wS(t,e,i,r){let s=e._queryIdentifier,c=[],l=[],d=Bn(t);if(s==="default")for(let[h,b]of t.views.entries())l=l.concat(Vp(b,i,r)),Hp(b)&&(t.views.delete(h),b.query._queryParams.loadsAllData()||c.push(b.query));else{let h=t.views.get(s);h&&(l=l.concat(Vp(h,i,r)),Hp(h)&&(t.views.delete(s),h.query._queryParams.loadsAllData()||c.push(h.query)))}return d&&!Bn(t)&&c.push(new(_S())(e._repo,e._path)),{removed:c,events:l}}function Fb(t){let e=[];for(let i of t.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function Fn(t,e){let i=null;for(let r of t.views.values())i=i||mS(r,e);return i}function Lb(t,e){if(e._queryParams.loadsAllData())return pa(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Mb(t,e){return Lb(t,e)!=null}function Bn(t){return pa(t)!=null}function pa(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var na;function xS(t){N(!na,"__referenceConstructor has already been defined"),na=t}function ES(){return N(na,"Reference.ts has not been loaded"),na}var TS=1,ia=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yt(null),this.pendingWriteTree_=nS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ad(t,e,i,r,s){return jC(t.pendingWriteTree_,e,i,r,s),s?rr(t,new Zi(ed(),e,i)):[]}function IS(t,e,i,r){GC(t.pendingWriteTree_,e,i,r);let s=Yt.fromObject(i);return rr(t,new no(ed(),e,s))}function Dn(t,e,i=!1){let r=YC(t.pendingWriteTree_,e);if($C(t.pendingWriteTree_,e)){let c=new Yt(null);return r.snap!=null?c=c.set(tt(),!0):Pt(r.children,l=>{c=c.set(new et(l),!0)}),rr(t,new bu(r.path,c,i))}else return[]}function ho(t,e,i){return rr(t,new Zi(nd(),e,i))}function CS(t,e,i){let r=Yt.fromObject(i);return rr(t,new no(nd(),e,r))}function SS(t,e){return rr(t,new qs(nd(),e))}function AS(t,e,i){let r=cd(t,i);if(r){let s=ld(r),c=s.path,l=s.queryId,d=Gt(c,e),h=new qs(id(l),d);return ud(t,c,h)}else return[]}function ra(t,e,i,r,s=!1){let c=e._path,l=t.syncPointTree_.get(c),d=[];if(l&&(e._queryIdentifier==="default"||Mb(l,e))){let h=wS(l,e,i,r);vS(l)&&(t.syncPointTree_=t.syncPointTree_.remove(c));let b=h.removed;if(d=h.events,!s){let v=b.findIndex(E=>E._queryParams.loadsAllData())!==-1,x=t.syncPointTree_.findOnPath(c,(E,R)=>Bn(R));if(v&&!x){let E=t.syncPointTree_.subtree(c);if(!E.isEmpty()){let R=kS(E);for(let k=0;k<R.length;++k){let W=R[k],it=W.query,dt=zb(t,W);t.listenProvider_.startListening(Kr(it),ro(t,it),dt.hashFn,dt.onComplete)}}}!x&&b.length>0&&!r&&(v?t.listenProvider_.stopListening(Kr(e),null):b.forEach(E=>{let R=t.queryToTagMap.get(ga(E));t.listenProvider_.stopListening(Kr(E),R)}))}PS(t,b)}return d}function Bb(t,e,i,r){let s=cd(t,r);if(s!=null){let c=ld(s),l=c.path,d=c.queryId,h=Gt(l,e),b=new Zi(id(d),h,i);return ud(t,l,b)}else return[]}function RS(t,e,i,r){let s=cd(t,r);if(s){let c=ld(s),l=c.path,d=c.queryId,h=Gt(l,e),b=Yt.fromObject(i),v=new no(id(d),h,b);return ud(t,l,v)}else return[]}function Cu(t,e,i,r=!1){let s=e._path,c=null,l=!1;t.syncPointTree_.foreachOnPath(s,(E,R)=>{let k=Gt(E,s);c=c||Fn(R,k),l=l||Bn(R)});let d=t.syncPointTree_.get(s);d?(l=l||Bn(d),c=c||Fn(d,tt())):(d=new ea,t.syncPointTree_=t.syncPointTree_.set(s,d));let h;c!=null?h=!0:(h=!1,c=H.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((R,k)=>{let W=Fn(k,tt());W&&(c=c.updateImmediateChild(R,W))}));let b=Mb(d,e);if(!b&&!e._queryParams.loadsAllData()){let E=ga(e);N(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");let R=DS();t.queryToTagMap.set(E,R),t.tagToQueryMap.set(R,E)}let v=ma(t.pendingWriteTree_,s),x=yS(d,e,i,v,c,h);if(!b&&!l&&!r){let E=Lb(d,e);x=x.concat(OS(t,e,E))}return x}function ba(t,e,i){let s=t.pendingWriteTree_,c=t.syncPointTree_.findOnPath(e,(l,d)=>{let h=Gt(l,e),b=Fn(d,h);if(b)return b});return Ab(s,e,c,i,!0)}function NS(t,e){let i=e._path,r=null;t.syncPointTree_.foreachOnPath(i,(b,v)=>{let x=Gt(b,i);r=r||Fn(v,x)});let s=t.syncPointTree_.get(i);s?r=r||Fn(s,tt()):(s=new ea,t.syncPointTree_=t.syncPointTree_.set(i,s));let c=r!=null,l=c?new Ke(r,!0,!1):null,d=ma(t.pendingWriteTree_,e._path),h=Ob(s,e,d,c?l.getNode():H.EMPTY_NODE,c);return hS(h)}function rr(t,e){return Wb(e,t.syncPointTree_,null,ma(t.pendingWriteTree_,tt()))}function Wb(t,e,i,r){if(K(t.path))return Ub(t,e,i,r);{let s=e.get(tt());i==null&&s!=null&&(i=Fn(s,tt()));let c=[],l=$(t.path),d=t.operationForChild(l),h=e.children.get(l);if(h&&d){let b=i?i.getImmediateChild(l):null,v=Rb(r,l);c=c.concat(Wb(d,h,b,v))}return s&&(c=c.concat(sd(s,t,r,i))),c}}function Ub(t,e,i,r){let s=e.get(tt());i==null&&s!=null&&(i=Fn(s,tt()));let c=[];return e.children.inorderTraversal((l,d)=>{let h=i?i.getImmediateChild(l):null,b=Rb(r,l),v=t.operationForChild(l);v&&(c=c.concat(Ub(v,d,h,b)))}),s&&(c=c.concat(sd(s,t,r,i))),c}function zb(t,e){let i=e.query,r=ro(t,i);return{hashFn:()=>(fS(e)||H.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?AS(t,i._path,r):SS(t,i._path);{let c=jI(s,i);return ra(t,i,null,c)}}}}function ro(t,e){let i=ga(e);return t.queryToTagMap.get(i)}function ga(t){return t._path.toString()+"$"+t._queryIdentifier}function cd(t,e){return t.tagToQueryMap.get(e)}function ld(t){let e=t.indexOf("$");return N(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new et(t.substr(0,e))}}function ud(t,e,i){let r=t.syncPointTree_.get(e);N(r,"Missing sync point for query tag that we're tracking");let s=ma(t.pendingWriteTree_,e);return sd(r,i,s,null)}function kS(t){return t.fold((e,i,r)=>{if(i&&Bn(i))return[pa(i)];{let s=[];return i&&(s=Fb(i)),Pt(r,(c,l)=>{s=s.concat(l)}),s}})}function Kr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ES())(t._repo,t._path):t}function PS(t,e){for(let i=0;i<e.length;++i){let r=e[i];if(!r._queryParams.loadsAllData()){let s=ga(r),c=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(c)}}}function DS(){return TS++}function OS(t,e,i){let r=e._path,s=ro(t,e),c=zb(t,i),l=t.listenProvider_.startListening(Kr(e),s,c.hashFn,c.onComplete),d=t.syncPointTree_.subtree(r);if(s)N(!Bn(d.value),"If we're adding a query, it shouldn't be shadowed");else{let h=d.fold((b,v,x)=>{if(!K(b)&&v&&Bn(v))return[pa(v).query];{let E=[];return v&&(E=E.concat(Fb(v).map(R=>R.query))),Pt(x,(R,k)=>{E=E.concat(k)}),E}});for(let b=0;b<h.length;++b){let v=h[b];t.listenProvider_.stopListening(Kr(v),ro(t,v))}}return l}var Su=class t{constructor(e){this.node_=e}getImmediateChild(e){let i=this.node_.getImmediateChild(e);return new t(i)}node(){return this.node_}},Au=class t{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){let i=ht(this.path_,e);return new t(this.syncTree_,i)}node(){return ba(this.syncTree_,this.path_)}},FS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Gp=function(t,e,i){if(!t||typeof t!="object")return t;if(N(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return LS(t[".sv"],e,i);if(typeof t[".sv"]=="object")return MS(t[".sv"],e);N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},LS=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:N(!1,"Unexpected server value: "+t)}},MS=function(t,e,i){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&N(!1,"Unexpected increment value: "+r);let s=e.node();if(N(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;let l=s.getValue();return typeof l!="number"?r:l+r},Hb=function(t,e,i,r){return fd(e,new Au(i,t),r)},dd=function(t,e,i){return fd(t,new Su(e),i)};function fd(t,e,i){let r=t.getPriority().val(),s=Gp(r,e.getImmediateChild(".priority"),i),c;if(t.isLeafNode()){let l=t,d=Gp(l.getValue(),e,i);return d!==l.getValue()||s!==l.getPriority().val()?new qi(d,pt(s)):t}else{let l=t;return c=l,s!==l.getPriority().val()&&(c=c.updatePriority(new qi(s))),l.forEachChild(lt,(d,h)=>{let b=fd(h,e.getImmediateChild(d),i);b!==h&&(c=c.updateImmediateChild(d,b))}),c}}var oo=class{constructor(e="",i=null,r={children:{},childCount:0}){this.name=e,this.parent=i,this.node=r}};function _a(t,e){let i=e instanceof et?e:new et(e),r=t,s=$(i);for(;s!==null;){let c=Nn(r.node.children,s)||{children:{},childCount:0};r=new oo(s,r,c),i=at(i),s=$(i)}return r}function li(t){return t.node.value}function hd(t,e){t.node.value=e,Ru(t)}function Vb(t){return t.node.childCount>0}function BS(t){return li(t)===void 0&&!Vb(t)}function va(t,e){Pt(t.node.children,(i,r)=>{e(new oo(i,t,r))})}function jb(t,e,i,r){i&&!r&&e(t),va(t,s=>{jb(s,e,!0,r)}),i&&r&&e(t)}function WS(t,e,i){let r=i?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function mo(t){return new et(t.parent===null?t.name:mo(t.parent)+"/"+t.name)}function Ru(t){t.parent!==null&&US(t.parent,t.name,t)}function US(t,e,i){let r=BS(i),s=we(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Ru(t)):!r&&!s&&(t.node.children[e]=i.node,t.node.childCount++,Ru(t))}var zS=/[\[\].#$\/\u0000-\u001F\u007F]/,HS=/[\[\].#$\u0000-\u001F\u007F]/,Ul=10*1024*1024,ya=function(t){return typeof t=="string"&&t.length!==0&&!zS.test(t)},Gb=function(t){return typeof t=="string"&&t.length!==0&&!HS.test(t)},VS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gb(t)},so=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!da(t)||t&&typeof t=="object"&&we(t,".sv")},qe=function(t,e,i,r){r&&e===void 0||po(Jt(t,"value"),e,i)},po=function(t,e,i){let r=i instanceof et?new Jl(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+ii(r));if(typeof e=="function")throw new Error(t+"contains a function "+ii(r)+" with contents = "+e.toString());if(da(e))throw new Error(t+"contains "+e.toString()+" "+ii(r));if(typeof e=="string"&&e.length>Ul/3&&Lr(e)>Ul)throw new Error(t+"contains a string greater than "+Ul+" utf8 bytes "+ii(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,c=!1;if(Pt(e,(l,d)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(c=!0,!ya(l)))throw new Error(t+" contains an invalid key ("+l+") "+ii(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vC(r,l),po(t,d,r),yC(r)}),s&&c)throw new Error(t+' contains ".value" child '+ii(r)+" in addition to actual children.")}},jS=function(t,e){let i,r;for(i=0;i<e.length;i++){r=e[i];let c=Qr(r);for(let l=0;l<c.length;l++)if(!(c[l]===".priority"&&l===c.length-1)){if(!ya(c[l]))throw new Error(t+"contains an invalid key ("+c[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(_C);let s=null;for(i=0;i<e.length;i++){if(r=e[i],s!==null&&xe(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Yb=function(t,e,i,r){if(r&&e===void 0)return;let s=Jt(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");let c=[];Pt(e,(l,d)=>{let h=new et(l);if(po(s,d,ht(i,h)),Qu(h)===".priority"&&!so(d))throw new Error(s+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(h)}),jS(s,c)},md=function(t,e,i){if(!(i&&e===void 0)){if(da(e))throw new Error(Jt(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!so(e))throw new Error(Jt(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bo=function(t,e,i,r){if(!(r&&i===void 0)&&!ya(i))throw new Error(Jt(t,e)+'was an invalid key = "'+i+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},or=function(t,e,i,r){if(!(r&&i===void 0)&&!Gb(i))throw new Error(Jt(t,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},GS=function(t,e,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),or(t,e,i,r)},ce=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},$b=function(t,e){let i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ya(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!VS(i))throw new Error(Jt(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Nu=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function wa(t,e){let i=null;for(let r=0;r<e.length;r++){let s=e[r],c=s.getPath();i!==null&&!Xu(c,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:c}),i.events.push(s)}i&&t.eventLists_.push(i)}function Kb(t,e,i){wa(t,i),qb(t,r=>Xu(r,e))}function le(t,e,i){wa(t,i),qb(t,r=>xe(r,e)||xe(e,r))}function qb(t,e){t.recursionDepth_++;let i=!0;for(let r=0;r<t.eventLists_.length;r++){let s=t.eventLists_[r];if(s){let c=s.path;e(c)?(YS(t.eventLists_[r]),t.eventLists_[r]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function YS(t){for(let e=0;e<t.events.length;e++){let i=t.events[e];if(i!==null){t.events[e]=null;let r=i.getEventRunner();oi&&kt("event: "+i.toString()),nr(r)}}}var Qb="repo_interrupt",$S=25,ku=class{constructor(e,i,r,s){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ks(),this.transactionQueueTree_=new oo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function KS(t,e,i){if(t.stats_=qu(t.repoInfo_),t.forceRestClient_||KI())t.server_=new uu(t.repoInfo_,(r,s,c,l)=>{Yp(t,r,s,c,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$p(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wt(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zu(t.repoInfo_,e,(r,s,c,l)=>{Yp(t,r,s,c,l)},r=>{$p(t,r)},r=>{qS(t,r)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=QI(t.repoInfo_,()=>new pu(t.stats_,t.server_)),t.infoData_=new du,t.infoSyncTree_=new ia({startListening:(r,s,c,l)=>{let d=[],h=t.infoData_.getNode(r._path);return h.isEmpty()||(d=ho(t.infoSyncTree_,r._path,h),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),pd(t,"connected",!1),t.serverSyncTree_=new ia({startListening:(r,s,c,l)=>(t.server_.listen(r,c,s,(d,h)=>{let b=l(d,h);le(t.eventQueue_,r._path,b)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Xb(t){let i=t.infoData_.getNode(new et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function go(t){return FS({timestamp:Xb(t)})}function Yp(t,e,i,r,s){t.dataUpdateCount++;let c=new et(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let l=[];if(s)if(r){let h=Fr(i,b=>pt(b));l=RS(t.serverSyncTree_,c,h,s)}else{let h=pt(i);l=Bb(t.serverSyncTree_,c,h,s)}else if(r){let h=Fr(i,b=>pt(b));l=CS(t.serverSyncTree_,c,h)}else{let h=pt(i);l=ho(t.serverSyncTree_,c,h)}let d=c;l.length>0&&(d=tr(t,c)),le(t.eventQueue_,d,l)}function $p(t,e){pd(t,"connected",e),e===!1&&ZS(t)}function qS(t,e){Pt(e,(i,r)=>{pd(t,i,r)})}function pd(t,e,i){let r=new et("/.info/"+e),s=pt(i);t.infoData_.updateSnapshot(r,s);let c=ho(t.infoSyncTree_,r,s);le(t.eventQueue_,r,c)}function xa(t){return t.nextWriteId_++}function QS(t,e,i){let r=NS(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{let c=pt(s).withIndex(e._queryParams.getIndex());Cu(t.serverSyncTree_,e,i,!0);let l;if(e._queryParams.loadsAllData())l=ho(t.serverSyncTree_,e._path,c);else{let d=ro(t.serverSyncTree_,e);l=Bb(t.serverSyncTree_,e._path,c,d)}return le(t.eventQueue_,e._path,l),ra(t.serverSyncTree_,e,i,null,!0),c},s=>(sr(t,"get for query "+wt(e)+" failed: "+s),Promise.reject(new Error(s))))}function bd(t,e,i,r,s){sr(t,"set",{path:e.toString(),value:i,priority:r});let c=go(t),l=pt(i,r),d=ba(t.serverSyncTree_,e),h=dd(l,d,c),b=xa(t),v=ad(t.serverSyncTree_,e,h,b,!0);wa(t.eventQueue_,v),t.server_.put(e.toString(),l.val(!0),(E,R)=>{let k=E==="ok";k||Ut("set at "+e+" failed: "+E);let W=Dn(t.serverSyncTree_,b,!k);le(t.eventQueue_,e,W),Wn(t,s,E,R)});let x=_d(t,e);tr(t,x),le(t.eventQueue_,x,[])}function XS(t,e,i,r){sr(t,"update",{path:e.toString(),value:i});let s=!0,c=go(t),l={};if(Pt(i,(d,h)=>{s=!1,l[d]=Hb(ht(e,d),pt(h),t.serverSyncTree_,c)}),s)kt("update() called with empty data.  Don't do anything."),Wn(t,r,"ok",void 0);else{let d=xa(t),h=IS(t.serverSyncTree_,e,l,d);wa(t.eventQueue_,h),t.server_.merge(e.toString(),i,(b,v)=>{let x=b==="ok";x||Ut("update at "+e+" failed: "+b);let E=Dn(t.serverSyncTree_,d,!x),R=E.length>0?tr(t,e):e;le(t.eventQueue_,R,E),Wn(t,r,b,v)}),Pt(i,b=>{let v=_d(t,ht(e,b));tr(t,v)}),le(t.eventQueue_,e,[])}}function ZS(t){sr(t,"onDisconnectEvents");let e=go(t),i=Ks();hu(t.onDisconnect_,tt(),(s,c)=>{let l=Hb(s,c,t.serverSyncTree_,e);ir(i,s,l)});let r=[];hu(i,tt(),(s,c)=>{r=r.concat(ho(t.serverSyncTree_,s,c));let l=_d(t,s);tr(t,l)}),t.onDisconnect_=Ks(),le(t.eventQueue_,tt(),r)}function JS(t,e,i){t.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&fu(t.onDisconnect_,e),Wn(t,i,r,s)})}function Kp(t,e,i,r){let s=pt(i);t.server_.onDisconnectPut(e.toString(),s.val(!0),(c,l)=>{c==="ok"&&ir(t.onDisconnect_,e,s),Wn(t,r,c,l)})}function tA(t,e,i,r,s){let c=pt(i,r);t.server_.onDisconnectPut(e.toString(),c.val(!0),(l,d)=>{l==="ok"&&ir(t.onDisconnect_,e,c),Wn(t,s,l,d)})}function eA(t,e,i,r){if(Ns(i)){kt("onDisconnect().update() called with empty data.  Don't do anything."),Wn(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),i,(s,c)=>{s==="ok"&&Pt(i,(l,d)=>{let h=pt(d);ir(t.onDisconnect_,ht(e,l),h)}),Wn(t,r,s,c)})}function nA(t,e,i){let r;$(e._path)===".info"?r=Cu(t.infoSyncTree_,e,i):r=Cu(t.serverSyncTree_,e,i),Kb(t.eventQueue_,e._path,r)}function Pu(t,e,i){let r;$(e._path)===".info"?r=ra(t.infoSyncTree_,e,i):r=ra(t.serverSyncTree_,e,i),Kb(t.eventQueue_,e._path,r)}function Zb(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Qb)}function iA(t){t.persistentConnection_&&t.persistentConnection_.resume(Qb)}function sr(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),kt(i,...e)}function Wn(t,e,i,r){e&&nr(()=>{if(i==="ok")e(null);else{let s=(i||"error").toUpperCase(),c=s;r&&(c+=": "+r);let l=new Error(c);l.code=s,e(l)}})}function rA(t,e,i,r,s,c){sr(t,"transaction on "+e);let l={path:e,update:i,onComplete:r,status:null,order:Xp(),applyLocally:c,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=gd(t,e,void 0);l.currentInputSnapshot=d;let h=l.update(d.val());if(h===void 0)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{po("transaction failed: Data returned ",h,l.path),l.status=0;let b=_a(t.transactionQueueTree_,e),v=li(b)||[];v.push(l),hd(b,v);let x;typeof h=="object"&&h!==null&&we(h,".priority")?(x=Nn(h,".priority"),N(so(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(ba(t.serverSyncTree_,e)||H.EMPTY_NODE).getPriority().val();let E=go(t),R=pt(h,x),k=dd(R,d,E);l.currentOutputSnapshotRaw=R,l.currentOutputSnapshotResolved=k,l.currentWriteId=xa(t);let W=ad(t.serverSyncTree_,e,k,l.currentWriteId,l.applyLocally);le(t.eventQueue_,e,W),Ea(t,t.transactionQueueTree_)}}function gd(t,e,i){return ba(t.serverSyncTree_,e,i)||H.EMPTY_NODE}function Ea(t,e=t.transactionQueueTree_){if(e||Ta(t,e),li(e)){let i=tg(t,e);N(i.length>0,"Sending zero length transaction queue"),i.every(s=>s.status===0)&&oA(t,mo(e),i)}else Vb(e)&&va(e,i=>{Ea(t,i)})}function oA(t,e,i){let r=i.map(b=>b.currentWriteId),s=gd(t,e,r),c=s,l=s.hash();for(let b=0;b<i.length;b++){let v=i[b];N(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;let x=Gt(e,v.path);c=c.updateChild(x,v.currentOutputSnapshotRaw)}let d=c.val(!0),h=e;t.server_.put(h.toString(),d,b=>{sr(t,"transaction put response",{path:h.toString(),status:b});let v=[];if(b==="ok"){let x=[];for(let E=0;E<i.length;E++)i[E].status=2,v=v.concat(Dn(t.serverSyncTree_,i[E].currentWriteId)),i[E].onComplete&&x.push(()=>i[E].onComplete(null,!0,i[E].currentOutputSnapshotResolved)),i[E].unwatcher();Ta(t,_a(t.transactionQueueTree_,e)),Ea(t,t.transactionQueueTree_),le(t.eventQueue_,e,v);for(let E=0;E<x.length;E++)nr(x[E])}else{if(b==="datastale")for(let x=0;x<i.length;x++)i[x].status===3?i[x].status=4:i[x].status=0;else{Ut("transaction at "+h.toString()+" failed: "+b);for(let x=0;x<i.length;x++)i[x].status=4,i[x].abortReason=b}tr(t,e)}},l)}function tr(t,e){let i=Jb(t,e),r=mo(i),s=tg(t,i);return sA(t,s,r),r}function sA(t,e,i){if(e.length===0)return;let r=[],s=[],l=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){let h=e[d],b=Gt(i,h.path),v=!1,x;if(N(b!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)v=!0,x=h.abortReason,s=s.concat(Dn(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=$S)v=!0,x="maxretry",s=s.concat(Dn(t.serverSyncTree_,h.currentWriteId,!0));else{let E=gd(t,h.path,l);h.currentInputSnapshot=E;let R=e[d].update(E.val());if(R!==void 0){po("transaction failed: Data returned ",R,h.path);let k=pt(R);typeof R=="object"&&R!=null&&we(R,".priority")||(k=k.updatePriority(E.getPriority()));let it=h.currentWriteId,dt=go(t),yt=dd(k,E,dt);h.currentOutputSnapshotRaw=k,h.currentOutputSnapshotResolved=yt,h.currentWriteId=xa(t),l.splice(l.indexOf(it),1),s=s.concat(ad(t.serverSyncTree_,h.path,yt,h.currentWriteId,h.applyLocally)),s=s.concat(Dn(t.serverSyncTree_,it,!0))}else v=!0,x="nodata",s=s.concat(Dn(t.serverSyncTree_,h.currentWriteId,!0))}le(t.eventQueue_,i,s),s=[],v&&(e[d].status=2,function(E){setTimeout(E,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(x==="nodata"?r.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):r.push(()=>e[d].onComplete(new Error(x),!1,null))))}Ta(t,t.transactionQueueTree_);for(let d=0;d<r.length;d++)nr(r[d]);Ea(t,t.transactionQueueTree_)}function Jb(t,e){let i,r=t.transactionQueueTree_;for(i=$(e);i!==null&&li(r)===void 0;)r=_a(r,i),e=at(e),i=$(e);return r}function tg(t,e){let i=[];return eg(t,e,i),i.sort((r,s)=>r.order-s.order),i}function eg(t,e,i){let r=li(e);if(r)for(let s=0;s<r.length;s++)i.push(r[s]);va(e,s=>{eg(t,s,i)})}function Ta(t,e){let i=li(e);if(i){let r=0;for(let s=0;s<i.length;s++)i[s].status!==2&&(i[r]=i[s],r++);i.length=r,hd(e,i.length>0?i:void 0)}va(e,r=>{Ta(t,r)})}function _d(t,e){let i=mo(Jb(t,e)),r=_a(t.transactionQueueTree_,e);return WS(r,s=>{zl(t,s)}),zl(t,r),jb(r,s=>{zl(t,s)}),i}function zl(t,e){let i=li(e);if(i){let r=[],s=[],c=-1;for(let l=0;l<i.length;l++)i[l].status===3||(i[l].status===1?(N(c===l-1,"All SENT items should be at beginning of queue."),c=l,i[l].status=3,i[l].abortReason="set"):(N(i[l].status===0,"Unexpected transaction status in abort"),i[l].unwatcher(),s=s.concat(Dn(t.serverSyncTree_,i[l].currentWriteId,!0)),i[l].onComplete&&r.push(i[l].onComplete.bind(null,new Error("set"),!1,null))));c===-1?hd(e,void 0):i.length=c+1,le(t.eventQueue_,mo(e),s);for(let l=0;l<r.length;l++)nr(r[l])}}function aA(t){let e="",i=t.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let s=i[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function cA(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let i of t.split("&")){if(i.length===0)continue;let r=i.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ut(`Invalid query segment '${i}' in query '${t}'`)}return e}var Du=function(t,e){let i=lA(t),r=i.namespace;i.domain==="firebase.com"&&$e(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&$e("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||WI();let s=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new Us(i.host,i.secure,r,s,e,"",r!==i.subdomain),path:new et(i.pathString)}},lA=function(t){let e="",i="",r="",s="",c="",l=!0,d="https",h=443;if(typeof t=="string"){let b=t.indexOf("//");b>=0&&(d=t.substring(0,b-1),t=t.substring(b+2));let v=t.indexOf("/");v===-1&&(v=t.length);let x=t.indexOf("?");x===-1&&(x=t.length),e=t.substring(0,Math.min(v,x)),v<x&&(s=aA(t.substring(v,x)));let E=cA(t.substring(Math.min(t.length,x)));b=e.indexOf(":"),b>=0?(l=d==="https"||d==="wss",h=parseInt(e.substring(b+1),10)):b=e.length;let R=e.slice(0,b);if(R.toLowerCase()==="localhost")i="localhost";else if(R.split(".").length<=2)i=R;else{let k=e.indexOf(".");r=e.substring(0,k).toLowerCase(),i=e.substring(k+1),c=r}"ns"in E&&(c=E.ns)}return{host:e,port:h,domain:i,subdomain:r,secure:l,scheme:d,pathString:s,namespace:c}};var qp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uA=function(){let t=0,e=[];return function(i){let r=i===t;t=i;let s,c=new Array(8);for(s=7;s>=0;s--)c[s]=qp.charAt(i%64),i=Math.floor(i/64);N(i===0,"Cannot push at time == 0");let l=c.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)l+=qp.charAt(e[s]);return N(l.length===20,"nextPushId: Length should be 20."),l}}();var oa=class{constructor(e,i,r,s){this.eventType=e,this.eventRegistration=i,this.snapshot=r,this.prevName=s}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wt(this.snapshot.exportVal())}},sa=class{constructor(e,i,r){this.eventRegistration=e,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ao=class{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var aa=class{constructor(e,i){this._repo=e,this._path=i}cancel(){let e=new Nt;return JS(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ce("OnDisconnect.remove",this._path);let e=new Nt;return Kp(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ce("OnDisconnect.set",this._path),qe("OnDisconnect.set",e,this._path,!1);let i=new Nt;return Kp(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}setWithPriority(e,i){ce("OnDisconnect.setWithPriority",this._path),qe("OnDisconnect.setWithPriority",e,this._path,!1),md("OnDisconnect.setWithPriority",i,!1);let r=new Nt;return tA(this._repo,this._path,e,i,r.wrapCallback(()=>{})),r.promise}update(e){ce("OnDisconnect.update",this._path),Yb("OnDisconnect.update",e,this._path,!1);let i=new Nt;return eA(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}};var $t=class t{constructor(e,i,r,s){this._repo=e,this._path=i,this._queryParams=r,this._orderByCalled=s}get key(){return K(this._path)?null:Qu(this._path)}get ref(){return new ue(this._repo,this._path)}get _queryIdentifier(){let e=Fp(this._queryParams),i=Ku(e);return i==="{}"?"default":i}get _queryObject(){return Fp(this._queryParams)}isEqual(e){if(e=jt(e),!(e instanceof t))return!1;let i=this._repo===e._repo,r=Xu(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return i&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+gC(this._path)}};function Ia(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function zn(t){let e=null,i=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(i=t.getIndexEndValue()),t.getIndex()===Ye){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ln)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==dn)throw new Error(r);if(typeof i!="string")throw new Error(s)}}else if(t.getIndex()===lt){if(e!=null&&!so(e)||i!=null&&!so(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(N(t.getIndex()instanceof Xr||t.getIndex()===td,"unknown index type."),e!=null&&typeof e=="object"||i!=null&&typeof i=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ca(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ue=class t extends $t{constructor(e,i){super(e,i,new eo,!1)}get parent(){let e=_b(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},er=class t{constructor(e,i,r){this._node=e,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let i=new et(e),r=Un(this.ref,e);return new t(this._node.getChild(i),r,lt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new t(s,Un(this.ref,r),lt)))}hasChild(e){let i=new et(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function _o(t,e){return t=jt(t),t._checkNotDeleted("ref"),e!==void 0?Un(t._root,e):t._root}function vd(t,e){t=jt(t),t._checkNotDeleted("refFromURL");let i=Du(e,t._repo.repoInfo_.nodeAdmin);$b("refFromURL",i);let r=i.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&$e("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),_o(t,i.path.toString())}function Un(t,e){return t=jt(t),$(t._path)===null?GS("child","path",e,!1):or("child","path",e,!1),new ue(t._repo,ht(t._path,e))}function ng(t,e){t=jt(t),ce("push",t._path),qe("push",e,t._path,!0);let i=Xb(t._repo),r=uA(i),s=Un(t,r),c=Un(t,r),l;return e!=null?l=Sa(c,e).then(()=>c):l=Promise.resolve(c),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}function ig(t){return ce("remove",t._path),Sa(t,null)}function Sa(t,e){t=jt(t),ce("set",t._path),qe("set",e,t._path,!1);let i=new Nt;return bd(t._repo,t._path,e,null,i.wrapCallback(()=>{})),i.promise}function rg(t,e){t=jt(t),ce("setPriority",t._path),md("setPriority",e,!1);let i=new Nt;return bd(t._repo,ht(t._path,".priority"),e,null,i.wrapCallback(()=>{})),i.promise}function og(t,e,i){if(ce("setWithPriority",t._path),qe("setWithPriority",e,t._path,!1),md("setWithPriority",i,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new Nt;return bd(t._repo,t._path,e,i,r.wrapCallback(()=>{})),r.promise}function sg(t,e){Yb("update",e,t._path,!1);let i=new Nt;return XS(t._repo,t._path,e,i.wrapCallback(()=>{})),i.promise}function Aa(t){t=jt(t);let e=new ao(()=>{}),i=new co(e);return QS(t._repo,t,i).then(r=>new er(r,new ue(t._repo,t._path),t._queryParams.getIndex()))}var co=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,i){let r=i._queryParams.getIndex();return new oa("value",this,new er(e.snapshotNode,new ue(i._repo,i._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new sa(this,e,i):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ca=class t{constructor(e,i){this.eventType=e,this.callbackContext=i}respondsTo(e){let i=e==="children_added"?"child_added":e;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new sa(this,e,i):null}createEvent(e,i){N(e.childName!=null,"Child events should have a childName.");let r=Un(new ue(i._repo,i._path),e.childName),s=i._queryParams.getIndex();return new oa(e.type,this,new er(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function vo(t,e,i,r,s){let c;if(typeof r=="object"&&(c=void 0,s=r),typeof r=="function"&&(c=r),s&&s.onlyOnce){let h=i,b=(v,x)=>{Pu(t._repo,t,d),h(v,x)};b.userCallback=i.userCallback,b.context=i.context,i=b}let l=new ao(i,c||void 0),d=e==="value"?new co(l):new ca(e,l);return nA(t._repo,t,d),()=>Pu(t._repo,t,d)}function Ra(t,e,i,r){return vo(t,"value",e,i,r)}function yd(t,e,i,r){return vo(t,"child_added",e,i,r)}function wd(t,e,i,r){return vo(t,"child_changed",e,i,r)}function xd(t,e,i,r){return vo(t,"child_moved",e,i,r)}function Ed(t,e,i,r){return vo(t,"child_removed",e,i,r)}function Td(t,e,i){let r=null,s=i?new ao(i):null;e==="value"?r=new co(s):e&&(r=new ca(e,s)),Pu(t._repo,t,r)}var de=class{},la=class extends de{constructor(e,i){super(),this._value=e,this._key=i,this.type="endAt"}_apply(e){qe("endAt",this._value,e._path,!0);let i=lu(e._queryParams,this._value,this._key);if(Ca(i),zn(i),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $t(e._repo,e._path,i,e._orderByCalled)}};function ag(t,e){return bo("endAt","key",e,!0),new la(t,e)}var Ou=class extends de{constructor(e,i){super(),this._value=e,this._key=i,this.type="endBefore"}_apply(e){qe("endBefore",this._value,e._path,!1);let i=LC(e._queryParams,this._value,this._key);if(Ca(i),zn(i),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $t(e._repo,e._path,i,e._orderByCalled)}};function cg(t,e){return bo("endBefore","key",e,!0),new Ou(t,e)}var ua=class extends de{constructor(e,i){super(),this._value=e,this._key=i,this.type="startAt"}_apply(e){qe("startAt",this._value,e._path,!0);let i=cu(e._queryParams,this._value,this._key);if(Ca(i),zn(i),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $t(e._repo,e._path,i,e._orderByCalled)}};function lg(t=null,e){return bo("startAt","key",e,!0),new ua(t,e)}var Fu=class extends de{constructor(e,i){super(),this._value=e,this._key=i,this.type="startAfter"}_apply(e){qe("startAfter",this._value,e._path,!1);let i=FC(e._queryParams,this._value,this._key);if(Ca(i),zn(i),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $t(e._repo,e._path,i,e._orderByCalled)}};function ug(t,e){return bo("startAfter","key",e,!0),new Fu(t,e)}var Lu=class extends de{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $t(e._repo,e._path,DC(e._queryParams,this._limit),e._orderByCalled)}};function dg(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lu(t)}var Mu=class extends de{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $t(e._repo,e._path,OC(e._queryParams,this._limit),e._orderByCalled)}};function fg(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Mu(t)}var Bu=class extends de{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Ia(e,"orderByChild");let i=new et(this._path);if(K(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Xr(i),s=fa(e._queryParams,r);return zn(s),new $t(e._repo,e._path,s,!0)}};function Na(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return or("orderByChild","path",t,!1),new Bu(t)}var Wu=class extends de{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Ia(e,"orderByKey");let i=fa(e._queryParams,Ye);return zn(i),new $t(e._repo,e._path,i,!0)}};function hg(){return new Wu}var Uu=class extends de{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Ia(e,"orderByPriority");let i=fa(e._queryParams,lt);return zn(i),new $t(e._repo,e._path,i,!0)}};function mg(){return new Uu}var zu=class extends de{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Ia(e,"orderByValue");let i=fa(e._queryParams,td);return zn(i),new $t(e._repo,e._path,i,!0)}};function pg(){return new zu}var Hu=class extends de{constructor(e,i){super(),this._value=e,this._key=i,this.type="equalTo"}_apply(e){if(qe("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new la(this._value,this._key)._apply(new ua(this._value,this._key)._apply(e))}};function ka(t,e){return bo("equalTo","key",e,!0),new Hu(t,e)}function te(t,...e){let i=jt(t);for(let r of e)i=r._apply(i);return i}gS(ue);xS(ue);var dA="FIREBASE_DATABASE_EMULATOR_HOST",Vu={},fA=!1;function hA(t,e,i,r){t.repoInfo_=new Us(`${e}:${i}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Id(t,e,i,r,s){let c=r||t.options.databaseURL;c===void 0&&(t.options.projectId||$e("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kt("Using default host for project ",t.options.projectId),c=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Du(c,s),d=l.repoInfo,h,b;typeof process<"u"&&process.env&&(b=process.env[dA]),b?(h=!0,c=`http://${b}?ns=${d.namespace}`,l=Du(c,s),d=l.repoInfo):h=!l.repoInfo.secure;let v=s&&h?new Gr(Gr.OWNER):new $l(t.name,t.options,e);$b("Invalid Firebase Database URL",l),K(l.path)||$e("Database URL must point to the root of a Firebase Database (not including a child path).");let x=pA(d,t,v,new Yl(t.name,i));return new ju(x,t)}function mA(t,e){let i=Vu[e];(!i||i[t.key]!==t)&&$e(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Zb(t),delete i[t.key]}function pA(t,e,i,r){let s=Vu[e.name];s||(s={},Vu[e.name]=s);let c=s[t.toURLString()];return c&&$e("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new ku(t,fA,i,r),s[t.toURLString()]=c,c}var ju=class{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(KS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ue(this._repo,tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(mA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$e("Cannot call "+e+" on a deleted database.")}};function bg(){gb.IS_TRANSPORT_INITIALIZED&&Ut("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gg(){bg(),qr.forceDisallow()}function _g(){bg(),Gi.forceDisallow(),qr.forceAllow()}function vg(t=vl(),e){let i=_l(t,"database").getImmediate({identifier:e});if(!i._instanceStarted){let r=Mm("database");r&&Cd(i,...r)}return i}function Cd(t,e,i,r={}){t=jt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$e("Cannot call useEmulator() after instance has already been initialized.");let s=t._repoInternal,c;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&$e('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Gr(Gr.OWNER);else if(r.mockUserToken){let l=typeof r.mockUserToken=="string"?r.mockUserToken:Bm(r.mockUserToken,t.app.options.projectId);c=new Gr(l)}hA(s,e,i,c)}function yg(t){t=jt(t),t._checkNotDeleted("goOffline"),Zb(t._repo)}function wg(t){t=jt(t),t._checkNotDeleted("goOnline"),iA(t._repo)}function xg(t,e){Jp(t,e)}function bA(t){$u(Km),Mr(new ln("database",(e,{instanceIdentifier:i})=>{let r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return Id(r,s,c,i)},"PUBLIC").setMultipleInstances(!0)),kn(_p,vp,t),kn(_p,vp,"esm2017")}var gA={".sv":"timestamp"};function Eg(){return gA}function Tg(t){return{".sv":{increment:t}}}var Gu=class{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Ig(t,e,i){var r;if(t=jt(t),ce("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let s=(r=i?.applyLocally)!==null&&r!==void 0?r:!0,c=new Nt,l=(h,b,v)=>{let x=null;h?c.reject(h):(x=new er(v,new ue(t._repo,t._path),lt),c.resolve(new Gu(b,x)))},d=Ra(t,()=>{});return rA(t._repo,t._path,e,l,d,s),c.promise}Zu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};bA();var _A="@firebase/database-compat",vA="1.0.8";var yA=new Wi("@firebase/database-compat"),Cg=function(t){let e="FIREBASE WARNING: "+t;yA.warn(e)};var wA=function(t,e,i,r){if(!(r&&i===void 0)&&typeof i!="boolean")throw new Error(Jt(t,e)+"must be a boolean.")},xA=function(t,e,i){if(!(i&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Jt(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Sd=class{constructor(e){this._delegate=e}cancel(e){B("OnDisconnect.cancel",0,1,arguments.length),Ct("OnDisconnect.cancel","onComplete",e,!0);let i=this._delegate.cancel();return e&&i.then(()=>e(null),r=>e(r)),i}remove(e){B("OnDisconnect.remove",0,1,arguments.length),Ct("OnDisconnect.remove","onComplete",e,!0);let i=this._delegate.remove();return e&&i.then(()=>e(null),r=>e(r)),i}set(e,i){B("OnDisconnect.set",1,2,arguments.length),Ct("OnDisconnect.set","onComplete",i,!0);let r=this._delegate.set(e);return i&&r.then(()=>i(null),s=>i(s)),r}setWithPriority(e,i,r){B("OnDisconnect.setWithPriority",2,3,arguments.length),Ct("OnDisconnect.setWithPriority","onComplete",r,!0);let s=this._delegate.setWithPriority(e,i);return r&&s.then(()=>r(null),c=>r(c)),s}update(e,i){if(B("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,Cg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("OnDisconnect.update","onComplete",i,!0);let r=this._delegate.update(e);return i&&r.then(()=>i(null),s=>i(s)),r}};var Ad=class{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return B("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var ui=class t{constructor(e,i){this._database=e,this._delegate=i}val(){return B("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return B("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return B("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return B("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return B("DataSnapshot.child",0,1,arguments.length),e=String(e),or("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return B("DataSnapshot.hasChild",1,1,arguments.length),or("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return B("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return B("DataSnapshot.forEach",1,1,arguments.length),Ct("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(i=>e(new t(this._database,i)))}hasChildren(){return B("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return B("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return B("DataSnapshot.ref",0,0,arguments.length),new fn(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Pa=class t{constructor(e,i){this.database=e,this._delegate=i}on(e,i,r,s){var c;B("Query.on",2,4,arguments.length),Ct("Query.on","callback",i,!1);let l=t.getCancelAndContextArgs_("Query.on",r,s),d=(b,v)=>{i.call(l.context,new ui(this.database,b),v)};d.userCallback=i,d.context=l.context;let h=(c=l.cancel)===null||c===void 0?void 0:c.bind(l.context);switch(e){case"value":return Ra(this._delegate,d,h),i;case"child_added":return yd(this._delegate,d,h),i;case"child_removed":return Ed(this._delegate,d,h),i;case"child_changed":return wd(this._delegate,d,h),i;case"child_moved":return xd(this._delegate,d,h),i;default:throw new Error(Jt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,i,r){if(B("Query.off",0,3,arguments.length),xA("Query.off",e,!0),Ct("Query.off","callback",i,!0),bl("Query.off","context",r,!0),i){let s=()=>{};s.userCallback=i,s.context=r,Td(this._delegate,e,s)}else Td(this._delegate,e)}get(){return Aa(this._delegate).then(e=>new ui(this.database,e))}once(e,i,r,s){B("Query.once",1,4,arguments.length),Ct("Query.once","callback",i,!0);let c=t.getCancelAndContextArgs_("Query.once",r,s),l=new Nt,d=(b,v)=>{let x=new ui(this.database,b);i&&i.call(c.context,x,v),l.resolve(x)};d.userCallback=i,d.context=c.context;let h=b=>{c.cancel&&c.cancel.call(c.context,b),l.reject(b)};switch(e){case"value":Ra(this._delegate,d,h,{onlyOnce:!0});break;case"child_added":yd(this._delegate,d,h,{onlyOnce:!0});break;case"child_removed":Ed(this._delegate,d,h,{onlyOnce:!0});break;case"child_changed":wd(this._delegate,d,h,{onlyOnce:!0});break;case"child_moved":xd(this._delegate,d,h,{onlyOnce:!0});break;default:throw new Error(Jt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return B("Query.limitToFirst",1,1,arguments.length),new t(this.database,te(this._delegate,dg(e)))}limitToLast(e){return B("Query.limitToLast",1,1,arguments.length),new t(this.database,te(this._delegate,fg(e)))}orderByChild(e){return B("Query.orderByChild",1,1,arguments.length),new t(this.database,te(this._delegate,Na(e)))}orderByKey(){return B("Query.orderByKey",0,0,arguments.length),new t(this.database,te(this._delegate,hg()))}orderByPriority(){return B("Query.orderByPriority",0,0,arguments.length),new t(this.database,te(this._delegate,mg()))}orderByValue(){return B("Query.orderByValue",0,0,arguments.length),new t(this.database,te(this._delegate,pg()))}startAt(e=null,i){return B("Query.startAt",0,2,arguments.length),new t(this.database,te(this._delegate,lg(e,i)))}startAfter(e=null,i){return B("Query.startAfter",0,2,arguments.length),new t(this.database,te(this._delegate,ug(e,i)))}endAt(e=null,i){return B("Query.endAt",0,2,arguments.length),new t(this.database,te(this._delegate,ag(e,i)))}endBefore(e=null,i){return B("Query.endBefore",0,2,arguments.length),new t(this.database,te(this._delegate,cg(e,i)))}equalTo(e,i){return B("Query.equalTo",1,2,arguments.length),new t(this.database,te(this._delegate,ka(e,i)))}toString(){return B("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return B("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(B("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let i="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(i)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,i,r){let s={cancel:void 0,context:void 0};if(i&&r)s.cancel=i,Ct(e,"cancel",s.cancel,!0),s.context=r,bl(e,"context",s.context,!0);else if(i)if(typeof i=="object"&&i!==null)s.context=i;else if(typeof i=="function")s.cancel=i;else throw new Error(Jt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return s}get ref(){return new fn(this.database,new ue(this._delegate._repo,this._delegate._path))}},fn=class t extends Pa{constructor(e,i){super(e,new $t(i._repo,i._path,new eo,!1)),this.database=e,this._delegate=i}getKey(){return B("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return B("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Un(this._delegate,e))}getParent(){B("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return B("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,i){B("Reference.set",1,2,arguments.length),Ct("Reference.set","onComplete",i,!0);let r=Sa(this._delegate,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,i){if(B("Reference.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let c=0;c<e.length;++c)s[""+c]=e[c];e=s,Cg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("Reference.update",this._delegate._path),Ct("Reference.update","onComplete",i,!0);let r=sg(this._delegate,e);return i&&r.then(()=>i(null),s=>i(s)),r}setWithPriority(e,i,r){B("Reference.setWithPriority",2,3,arguments.length),Ct("Reference.setWithPriority","onComplete",r,!0);let s=og(this._delegate,e,i);return r&&s.then(()=>r(null),c=>r(c)),s}remove(e){B("Reference.remove",0,1,arguments.length),Ct("Reference.remove","onComplete",e,!0);let i=ig(this._delegate);return e&&i.then(()=>e(null),r=>e(r)),i}transaction(e,i,r){B("Reference.transaction",1,3,arguments.length),Ct("Reference.transaction","transactionUpdate",e,!1),Ct("Reference.transaction","onComplete",i,!0),wA("Reference.transaction","applyLocally",r,!0);let s=Ig(this._delegate,e,{applyLocally:r}).then(c=>new Ad(c.committed,new ui(this.database,c.snapshot)));return i&&s.then(c=>i(null,c.committed,c.snapshot),c=>i(c,!1,null)),s}setPriority(e,i){B("Reference.setPriority",1,2,arguments.length),Ct("Reference.setPriority","onComplete",i,!0);let r=rg(this._delegate,e);return i&&r.then(()=>i(null),s=>i(s)),r}push(e,i){B("Reference.push",0,2,arguments.length),Ct("Reference.push","onComplete",i,!0);let r=ng(this._delegate,e),s=r.then(l=>new t(this.database,l));i&&s.then(()=>i(null),l=>i(l));let c=new t(this.database,r);return c.then=s.then.bind(s),c.catch=s.catch.bind(s,void 0),c}onDisconnect(){return ce("Reference.onDisconnect",this._delegate._path),new Sd(new aa(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var di=class{constructor(e,i){this._delegate=e,this.app=i,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:gg,forceLongPolling:_g}}useEmulator(e,i,r={}){Cd(this._delegate,e,i,r)}ref(e){if(B("database.ref",0,1,arguments.length),e instanceof fn){let i=vd(this._delegate,e.toString());return new fn(this,i)}else{let i=_o(this._delegate,e);return new fn(this,i)}}refFromURL(e){B("database.refFromURL",1,1,arguments.length);let r=vd(this._delegate,e);return new fn(this,r)}goOffline(){return B("database.goOffline",0,0,arguments.length),yg(this._delegate)}goOnline(){return B("database.goOnline",0,0,arguments.length),wg(this._delegate)}};di.ServerValue={TIMESTAMP:Eg(),increment:t=>Tg(t)};function EA({app:t,url:e,version:i,customAuthImpl:r,customAppCheckImpl:s,namespace:c,nodeAdmin:l=!1}){$u(i);let d=new gl("database-standalone"),h=new ks("auth-internal",d);h.setComponent(new ln("auth-internal",()=>r,"PRIVATE"));let b;return s&&(b=new ks("app-check-internal",d),b.setComponent(new ln("app-check-internal",()=>s,"PRIVATE"))),{instance:new di(Id(t,h,b,e,l),t),namespace:c}}var TA=Object.freeze({__proto__:null,initStandalone:EA});var IA=di.ServerValue;function CA(t){t.INTERNAL.registerComponent(new ln("database-compat",(e,{instanceIdentifier:i})=>{let r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:i});return new di(s,r)},"PUBLIC").setServiceProps({Reference:fn,Query:Pa,Database:di,DataSnapshot:ui,enableLogging:xg,INTERNAL:TA,ServerValue:IA}).setMultipleInstances(!0)),t.registerVersion(_A,vA)}CA(Wt);function yo(t,e,i="on",r=bs){return new Si(s=>{let c=null;return c=t[i](e,(l,d)=>{r.schedule(()=>{s.next({snapshot:l,prevKey:d})}),i==="once"&&r.schedule(()=>s.complete())},l=>{r.schedule(()=>s.error(l))}),i==="on"?{unsubscribe(){c!=null&&t.off(e,c)}}:{unsubscribe(){}}}).pipe(Tt(s=>{let{snapshot:c,prevKey:l}=s,d=null;return c.exists()&&(d=c.key),{type:e,payload:c,prevKey:l,key:d}}),_s())}function SA(t){return typeof t=="string"}function AA(t){return typeof t.exportVal=="function"}function kg(t){return t==null}function Pg(t){return typeof t.set=="function"}function Sg(t,e){return Pg(e)?e:t.ref(e)}function Dg(t,e){if(SA(t))return e.stringCase();if(Pg(t))return e.firebaseCase();if(AA(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function Og(t){return(kg(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Fg(t,e,i){e=Og(e);let r=e.map(s=>yo(t,s,"on",i));return Pr(...r)}function RA(t,e,i){let r=Fg(t,e).pipe(sl((s,c)=>[...s,c],[]));return kA(t,r,i)}function NA(t,e){return yo(t,"value","on",e).pipe(Tt(i=>{let r;return i.payload.forEach(s=>(r=s.key,!1)),{data:i,lastKeyToLoad:r}}))}function kA(t,e,i){return NA(t,i).pipe(Em(e),Tt(([s,c])=>{let l=s.lastKeyToLoad,d=c.map(h=>h.key);return{actions:c,lastKeyToLoad:l,loadedKeys:d}}),xm(s=>s.loadedKeys.indexOf(s.lastKeyToLoad)===-1),Tt(s=>s.actions))}function Ag(t,e){return function(r,s){return Dg(r,{stringCase:()=>t.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function PA(t){return function(i){return i?Dg(i,{stringCase:()=>t.child(i).remove(),firebaseCase:()=>i.remove(),snapshotCase:()=>i.ref.remove()}):t.remove()}}function DA(t,e,i){return yo(t,"value","once",i).pipe(an(r=>{let s=[ae(r)];return e.forEach(c=>s.push(yo(t,c,"on",i))),Pr(...s).pipe(sl(FA,[]))}),vm())}function Lg(t,e){let i=t.length;for(let r=0;r<i;r++)if(t[r].payload.key===e)return r;return-1}function OA(t,e){if(kg(e))return 0;{let i=Lg(t,e);return i===-1?t.length:i+1}}function FA(t,e){let{payload:i,prevKey:r,key:s}=e,c=Lg(t,s),l=OA(t,r);switch(e.type){case"value":if(e.payload?.exists()){let d=null;e.payload.forEach(h=>{let b={payload:h,type:"value",prevKey:d,key:h.key};return d=h.key,t=[...t,b],!1})}return t;case"child_added":if(c>-1)(t[c-1]?.key||null)!==r&&(t=t.filter(h=>h.payload.key!==i.key),t.splice(l,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(l,0,e)}return t;case"child_removed":return t.filter(d=>d.payload.key!==i.key);case"child_changed":return t.map(d=>d.payload.key===s?e:d);case"child_moved":if(c>-1){let d=t.splice(c,1)[0];return t=t.slice(),t.splice(l,0,d),t}return t;default:return t}}function Rg(t,e,i){return e=Og(e),DA(t,e,i)}function LA(t,e){let i=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Ag(r,"update"),set:Ag(r,"set"),push:s=>r.push(s),remove:PA(r),snapshotChanges(s){return Rg(t,s,i).pipe(un)},stateChanges(s){return Fg(t,s,i).pipe(un)},auditTrail(s){return RA(t,s,i).pipe(un)},valueChanges(s,c){return Rg(t,s,i).pipe(Tt(d=>d.map(h=>c&&c.idField?Cn(In({},h.payload.val()),{[c.idField]:h.key}):h.payload.val())),un)}}}function Ng(t,e){return function(){return yo(t,"value","on",e)}}function MA(t,e){return{query:t,snapshotChanges(){return Ng(t,e.schedulers.outsideAngular)().pipe(un)},update(i){return t.ref.update(i)},set(i){return t.ref.set(i)},remove(){return t.ref.remove()},valueChanges(){return Ng(t,e.schedulers.outsideAngular)().pipe(un,Tt(r=>r.payload.exists()?r.payload.val():null))}}}var BA=new It("angularfire2.realtimeDatabaseURL"),WA=new It("angularfire2.database.use-emulator"),Rd=(()=>{class t{schedulers;database;constructor(i,r,s,c,l,d,h,b,v,x,E,R,k,W,it){this.schedulers=d;let dt=h,yt=Br(i,l,r);b&&Ol(yt,l,v,E,R,k,x,W),this.database=Ls(`${yt.name}.database.${s}`,"AngularFireDatabase",yt.name,()=>{let X=l.runOutsideAngular(()=>yt.database(s||void 0));return dt&&X.useEmulator(...dt),X},[dt])}list(i,r){let s=this.schedulers.ngZone.runOutsideAngular(()=>Sg(this.database,i)),c=s;return r&&(c=r(s)),LA(c,this)}object(i){let r=this.schedulers.ngZone.runOutsideAngular(()=>Sg(this.database,i));return MA(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(V(Hi),V(Vi,8),V(BA,8),V(Pi),V(ye),V(Os),V(WA,8),V(gp,8),V(Al,8),V(Rl,8),V(Nl,8),V(kl,8),V(Pl,8),V(Dl,8),V(ni,8))};static \u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),jR=(()=>{class t{constructor(){Wt.registerVersion("angularfire",zi.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ke({type:t});static \u0275inj=Ne({providers:[Rd]})}return t})();var Lt=[];for(Da=0;Da<256;++Da)Lt.push((Da+256).toString(16).slice(1));var Da;function Mg(t,e=0){return(Lt[t[e+0]]+Lt[t[e+1]]+Lt[t[e+2]]+Lt[t[e+3]]+"-"+Lt[t[e+4]]+Lt[t[e+5]]+"-"+Lt[t[e+6]]+Lt[t[e+7]]+"-"+Lt[t[e+8]]+Lt[t[e+9]]+"-"+Lt[t[e+10]]+Lt[t[e+11]]+Lt[t[e+12]]+Lt[t[e+13]]+Lt[t[e+14]]+Lt[t[e+15]]).toLowerCase()}var Oa,zA=new Uint8Array(16);function Nd(){if(!Oa&&(Oa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oa(zA)}var HA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kd={randomUUID:HA};function VA(t,e,i){if(kd.randomUUID&&!e&&!t)return kd.randomUUID();t=t||{};var r=t.random||(t.rng||Nd)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){i=i||0;for(var s=0;s<16;++s)e[i+s]=r[s];return e}return Mg(r)}var ar=VA;var Bg=(()=>{let e=class e{constructor(r){this.db=r,this.dbPath="/ticRecordOBJECT",this.ticRef=r.list(this.dbPath)}getAll(){return this.ticRef}create(r){return Ft(this,null,function*(){return yield this.db.list("/ticRecordOBJECT").push(r),{id:r.id,rev:r.rev}})}update(r,s,c){return new Promise((l,d)=>{this.db.list("/ticRecordOBJECT").valueChanges().pipe(Dr(1)).subscribe(h=>{let b=h.find(v=>v.id===r);if(console.log("Current Record:",b),b){let v=b.rev.split("_")[0];if(console.log("Current Revision:",v,"Local Revision:",s.split("_")[0]),v!==s.split("_")[0])console.error("Conflict detected!"),d(`Conflict detected in the ${c.data.type} Object! The record has been updated by another user.`);else{let x=`${parseInt(v)+1}_${ar()}`;c.rev=x,console.log("Updating Record with New Revision:",x),this.db.list("/ticRecordOBJECT").snapshotChanges().pipe(Dr(1)).subscribe(E=>{let R=E.find(k=>k.payload.val().id===r);console.log("Snapshot Found:",R),R?this.db.object(`/ticRecordOBJECT/${R.key}`).update(c).then(()=>{l({id:c.id,rev:c.rev})}).catch(k=>{console.error("Error saving record:",k),d(k)}):d("Record not found")})}}else d("Record not found")})})}listFetch(r){return this.db.list("/ticRecordOBJECT",s=>s.orderByChild("data/type").equalTo(r)).snapshotChanges().pipe(Tt(s=>s.map(c=>{let l=c.payload.val();return{id:l.id,rev:l.rev,data:l.data}})))}queryDataWithFilter(r,s,c,l){return gs(this.db.list(r,d=>d.orderByChild(s).equalTo(c)).valueChanges()).then(d=>l?d.filter(h=>h.data?.type===l):d)}queryDataByField(r,s,c){return gs(this.db.list(r,l=>l.orderByChild(s).equalTo(c)).valueChanges())}generateIdForPrimaryField(r,s){return gs(this.db.list("ticRecordOBJECT",c=>c.orderByChild("data/type").equalTo(r)).valueChanges()).then(c=>{if(c.length===0)return s.primaryFieldNamePrefix+"01";{let d=c.sort((b,v)=>v.timestamp-b.timestamp)[0].data[s.primaryFieldName],h=(parseInt(d.replace(/^\D+/g,""))+1).toString().padStart(2,"0");return s.primaryFieldNamePrefix+h}})}};e.\u0275fac=function(s){return new(s||e)(V(Rd))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GA=["mat-button",""],Ug=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],zg=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var YA=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var $A=["mat-mini-fab",""],KA='.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-fab{background-color:var(--mdc-fab-container-color)}.mat-mdc-fab .mdc-fab__icon{width:var(--mdc-fab-icon-size);height:var(--mdc-fab-icon-size);font-size:var(--mdc-fab-icon-size)}.mat-mdc-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape)}.mat-mdc-mini-fab{background-color:var(--mdc-fab-small-container-color)}.mat-mdc-mini-fab .mdc-fab__icon{width:var(--mdc-fab-small-icon-size);height:var(--mdc-fab-small-icon-size);font-size:var(--mdc-fab-small-icon-size)}.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mdc-extended-fab-container-height);border-radius:var(--mdc-extended-fab-container-shape);font-family:var(--mdc-extended-fab-label-text-font);font-size:var(--mdc-extended-fab-label-text-size);font-weight:var(--mdc-extended-fab-label-text-weight);letter-spacing:var(--mdc-extended-fab-label-text-tracking)}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:var(--mdc-extended-fab-container-shape)}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab[disabled],.mat-mdc-fab[disabled]:focus,.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-fab.mat-mdc-button-disabled:focus,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab[disabled]:focus,.mat-mdc-mini-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab.mat-mdc-button-disabled-interactive,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{color:var(--mat-fab-foreground-color, inherit);box-shadow:var(--mdc-fab-container-elevation-shadow)}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color)}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color)}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity)}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity)}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity)}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow)}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color);background-color:var(--mat-fab-disabled-state-container-color)}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab{color:var(--mat-fab-small-foreground-color, inherit);box-shadow:var(--mdc-fab-small-container-elevation-shadow)}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color)}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity)}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity)}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity)}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow)}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow)}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow)}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color);background-color:var(--mat-fab-small-disabled-state-container-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab{box-shadow:var(--mdc-extended-fab-container-elevation-shadow)}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow)}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow)}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow)}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}',qA=["mat-icon-button",""],QA=["*"];var XA=new It("MAT_BUTTON_CONFIG");var ZA=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Pd=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(r){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,r)}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=r,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._updateRippleDisabled()}constructor(r,s,c,l){this._elementRef=r,this._platform=s,this._ngZone=c,this._animationMode=l,this._focusMonitor=Ni(Xm),this._rippleLoader=Ni(Jm),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let d=Ni(XA,{optional:!0}),h=r.nativeElement,b=h.classList;this.disabledInteractive=d?.disabledInteractive??!1,this._rippleLoader?.configureRipple(h,{className:"mat-mdc-button-ripple"});for(let{attribute:v,mdcClasses:x}of ZA)h.hasAttribute(v)&&b.add(...x)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(r="program",s){r?this._focusMonitor.focusVia(this._elementRef.nativeElement,r,s):this._elementRef.nativeElement.focus(s)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(s){Cm()},e.\u0275dir=Tm({type:e,inputs:{color:"color",disableRipple:[Jn.HasDecoratorInputTransform,"disableRipple","disableRipple",ei],disabled:[Jn.HasDecoratorInputTransform,"disabled","disabled",ei],ariaDisabled:[Jn.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",ei],disabledInteractive:[Jn.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",ei]},features:[Ts]});let t=e;return t})();var Hg=(()=>{let e=class e extends Pd{constructor(r,s,c,l){super(r,s,c,l)}};e.\u0275fac=function(s){return new(s||e)(gt(ki),gt(Ps),gt(ye),gt(xs,8))},e.\u0275cmp=Sn({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(s,c){s&2&&(Oi("disabled",c._getDisabledAttribute())("aria-disabled",c._getAriaDisabled()),Fi(c.color?"mat-"+c.color:""),Rn("mat-mdc-button-disabled",c.disabled)("mat-mdc-button-disabled-interactive",c.disabledInteractive)("_mat-animation-noopable",c._animationMode==="NoopAnimations")("mat-unthemed",!c.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Es,Mi],attrs:GA,ngContentSelectors:zg,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(s,c){s&1&&(Li(Ug),ti(0,"span",0),He(1),Pe(2,"span",1),He(3,1),Ue(),He(4,2),ti(5,"span",2)(6,"span",3)),s&2&&Rn("mdc-button__ripple",!c._isFab)("mdc-fab__ripple",c._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var JA=new It("mat-mdc-fab-default-options",{providedIn:"root",factory:Vg});function Vg(){return{color:"accent"}}var Wg=Vg();var jg=(()=>{let e=class e extends Pd{constructor(r,s,c,l,d){super(r,s,c,l),this._options=d,this._isFab=!0,this._options=this._options||Wg,this.color=this._options.color||Wg.color}};e.\u0275fac=function(s){return new(s||e)(gt(ki),gt(Ps),gt(ye),gt(xs,8),gt(JA,8))},e.\u0275cmp=Sn({type:e,selectors:[["button","mat-mini-fab",""]],hostVars:14,hostBindings:function(s,c){s&2&&(Oi("disabled",c._getDisabledAttribute())("aria-disabled",c._getAriaDisabled()),Fi(c.color?"mat-"+c.color:""),Rn("mat-mdc-button-disabled",c.disabled)("mat-mdc-button-disabled-interactive",c.disabledInteractive)("_mat-animation-noopable",c._animationMode==="NoopAnimations")("mat-unthemed",!c.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Es,Mi],attrs:$A,ngContentSelectors:zg,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(s,c){s&1&&(Li(Ug),ti(0,"span",0),He(1),Pe(2,"span",1),He(3,1),Ue(),He(4,2),ti(5,"span",2)(6,"span",3)),s&2&&Rn("mdc-button__ripple",!c._isFab)("mdc-fab__ripple",c._isFab)},styles:[KA],encapsulation:2,changeDetection:0});let t=e;return t})();var Gg=(()=>{let e=class e extends Pd{constructor(r,s,c,l){super(r,s,c,l),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(s){return new(s||e)(gt(ki),gt(Ps),gt(ye),gt(xs,8))},e.\u0275cmp=Sn({type:e,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(s,c){s&2&&(Oi("disabled",c._getDisabledAttribute())("aria-disabled",c._getAriaDisabled()),Fi(c.color?"mat-"+c.color:""),Rn("mat-mdc-button-disabled",c.disabled)("mat-mdc-button-disabled-interactive",c.disabledInteractive)("_mat-animation-noopable",c._animationMode==="NoopAnimations")("mat-unthemed",!c.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Es,Mi],attrs:qA,ngContentSelectors:QA,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(s,c){s&1&&(Li(),ti(0,"span",0),He(1),ti(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',YA],encapsulation:2,changeDetection:0});let t=e;return t})();var Yg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ne({imports:[Ui,Zm,Ui]});let t=e;return t})();var e1=["*"],Fa;function n1(){if(Fa===void 0&&(Fa=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Fa=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Fa}function wo(t){return n1()?.createHTML(t)||t}function $g(t){return Error(`Unable to find icon with the name "${t}"`)}function i1(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function Kg(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function qg(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var hn=class{constructor(e,i,r){this.url=e,this.svgText=i,this.options=r}},r1=(()=>{let e=class e{constructor(r,s,c,l){this._httpClient=r,this._sanitizer=s,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=c}addSvgIcon(r,s,c){return this.addSvgIconInNamespace("",r,s,c)}addSvgIconLiteral(r,s,c){return this.addSvgIconLiteralInNamespace("",r,s,c)}addSvgIconInNamespace(r,s,c,l){return this._addSvgIconConfig(r,s,new hn(c,null,l))}addSvgIconResolver(r){return this._resolvers.push(r),this}addSvgIconLiteralInNamespace(r,s,c,l){let d=this._sanitizer.sanitize(Di.HTML,c);if(!d)throw qg(c);let h=wo(d);return this._addSvgIconConfig(r,s,new hn("",h,l))}addSvgIconSet(r,s){return this.addSvgIconSetInNamespace("",r,s)}addSvgIconSetLiteral(r,s){return this.addSvgIconSetLiteralInNamespace("",r,s)}addSvgIconSetInNamespace(r,s,c){return this._addSvgIconSetConfig(r,new hn(s,null,c))}addSvgIconSetLiteralInNamespace(r,s,c){let l=this._sanitizer.sanitize(Di.HTML,s);if(!l)throw qg(s);let d=wo(l);return this._addSvgIconSetConfig(r,new hn("",d,c))}registerFontClassAlias(r,s=r){return this._fontCssClassesByAlias.set(r,s),this}classNameForFontAlias(r){return this._fontCssClassesByAlias.get(r)||r}setDefaultFontSetClass(...r){return this._defaultFontSetClass=r,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(r){let s=this._sanitizer.sanitize(Di.RESOURCE_URL,r);if(!s)throw Kg(r);let c=this._cachedIconsByUrl.get(s);return c?ae(La(c)):this._loadSvgIconFromConfig(new hn(r,null)).pipe(Ri(l=>this._cachedIconsByUrl.set(s,l)),Tt(l=>La(l)))}getNamedSvgIcon(r,s=""){let c=Qg(s,r),l=this._svgIconConfigs.get(c);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(s,r),l)return this._svgIconConfigs.set(c,l),this._getSvgFromConfig(l);let d=this._iconSetConfigs.get(s);return d?this._getSvgFromIconSetConfigs(r,d):pm($g(c))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(r){return r.svgText?ae(La(this._svgElementFromConfig(r))):this._loadSvgIconFromConfig(r).pipe(Tt(s=>La(s)))}_getSvgFromIconSetConfigs(r,s){let c=this._extractIconWithNameFromAnySet(r,s);if(c)return ae(c);let l=s.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(_m(h=>{let v=`Loading icon set URL: ${this._sanitizer.sanitize(Di.RESOURCE_URL,d.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(v)),ae(null)})));return bm(l).pipe(Tt(()=>{let d=this._extractIconWithNameFromAnySet(r,s);if(!d)throw $g(r);return d}))}_extractIconWithNameFromAnySet(r,s){for(let c=s.length-1;c>=0;c--){let l=s[c];if(l.svgText&&l.svgText.toString().indexOf(r)>-1){let d=this._svgElementFromConfig(l),h=this._extractSvgIconFromSet(d,r,l.options);if(h)return h}}return null}_loadSvgIconFromConfig(r){return this._fetchIcon(r).pipe(Ri(s=>r.svgText=s),Tt(()=>this._svgElementFromConfig(r)))}_loadSvgIconSetFromConfig(r){return r.svgText?ae(null):this._fetchIcon(r).pipe(Ri(s=>r.svgText=s))}_extractSvgIconFromSet(r,s,c){let l=r.querySelector(`[id="${s}"]`);if(!l)return null;let d=l.cloneNode(!0);if(d.removeAttribute("id"),d.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(d,c);if(d.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(d),c);let h=this._svgElementFromString(wo("<svg></svg>"));return h.appendChild(d),this._setSvgAttributes(h,c)}_svgElementFromString(r){let s=this._document.createElement("DIV");s.innerHTML=r;let c=s.querySelector("svg");if(!c)throw Error("<svg> tag not found");return c}_toSvgElement(r){let s=this._svgElementFromString(wo("<svg></svg>")),c=r.attributes;for(let l=0;l<c.length;l++){let{name:d,value:h}=c[l];d!=="id"&&s.setAttribute(d,h)}for(let l=0;l<r.childNodes.length;l++)r.childNodes[l].nodeType===this._document.ELEMENT_NODE&&s.appendChild(r.childNodes[l].cloneNode(!0));return s}_setSvgAttributes(r,s){return r.setAttribute("fit",""),r.setAttribute("height","100%"),r.setAttribute("width","100%"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),s&&s.viewBox&&r.setAttribute("viewBox",s.viewBox),r}_fetchIcon(r){let{url:s,options:c}=r,l=c?.withCredentials??!1;if(!this._httpClient)throw i1();if(s==null)throw Error(`Cannot fetch icon from URL "${s}".`);let d=this._sanitizer.sanitize(Di.RESOURCE_URL,s);if(!d)throw Kg(s);let h=this._inProgressUrlFetches.get(d);if(h)return h;let b=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe(Tt(v=>wo(v)),ym(()=>this._inProgressUrlFetches.delete(d)),_s());return this._inProgressUrlFetches.set(d,b),b}_addSvgIconConfig(r,s,c){return this._svgIconConfigs.set(Qg(r,s),c),this}_addSvgIconSetConfig(r,s){let c=this._iconSetConfigs.get(r);return c?c.push(s):this._iconSetConfigs.set(r,[s]),this}_svgElementFromConfig(r){if(!r.svgElement){let s=this._svgElementFromString(r.svgText);this._setSvgAttributes(s,r.options),r.svgElement=s}return r.svgElement}_getIconConfigFromResolvers(r,s){for(let c=0;c<this._resolvers.length;c++){let l=this._resolvers[c](s,r);if(l)return o1(l)?new hn(l.url,null,l.options):new hn(l,null)}}};e.\u0275fac=function(s){return new(s||e)(V(Dm,8),V(Om),V(ml,8),V(ws))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function La(t){return t.cloneNode(!0)}function Qg(t,e){return t+":"+e}function o1(t){return!!(t.url&&t.options)}var s1=new It("MAT_ICON_DEFAULT_OPTIONS"),a1=new It("mat-icon-location",{providedIn:"root",factory:c1});function c1(){let t=Ni(ml),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var Xg=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],l1=Xg.map(t=>`[${t}]`).join(", "),u1=/^url\(['"]?#(.*?)['"]?\)$/,Zg=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(r){this._color=r}get svgIcon(){return this._svgIcon}set svgIcon(r){r!==this._svgIcon&&(r?this._updateSvgIcon(r):this._svgIcon&&this._clearSvgElement(),this._svgIcon=r)}get fontSet(){return this._fontSet}set fontSet(r){let s=this._cleanupFontValue(r);s!==this._fontSet&&(this._fontSet=s,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(r){let s=this._cleanupFontValue(r);s!==this._fontIcon&&(this._fontIcon=s,this._updateFontIconClasses())}constructor(r,s,c,l,d,h){this._elementRef=r,this._iconRegistry=s,this._location=l,this._errorHandler=d,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=fm.EMPTY,h&&(h.color&&(this.color=this._defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),c||r.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(r){if(!r)return["",""];let s=r.split(":");switch(s.length){case 1:return["",s[0]];case 2:return s;default:throw Error(`Invalid icon name: "${r}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let r=this._elementsWithExternalReferences;if(r&&r.size){let s=this._location.getPathname();s!==this._previousPath&&(this._previousPath=s,this._prependPathToReferences(s))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(r){this._clearSvgElement();let s=this._location.getPathname();this._previousPath=s,this._cacheChildrenWithExternalReferences(r),this._prependPathToReferences(s),this._elementRef.nativeElement.appendChild(r)}_clearSvgElement(){let r=this._elementRef.nativeElement,s=r.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();s--;){let c=r.childNodes[s];(c.nodeType!==1||c.nodeName.toLowerCase()==="svg")&&c.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let r=this._elementRef.nativeElement,s=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(c=>c.length>0);this._previousFontSetClass.forEach(c=>r.classList.remove(c)),s.forEach(c=>r.classList.add(c)),this._previousFontSetClass=s,this.fontIcon!==this._previousFontIconClass&&!s.includes("mat-ligature-font")&&(this._previousFontIconClass&&r.classList.remove(this._previousFontIconClass),this.fontIcon&&r.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(r){return typeof r=="string"?r.trim().split(" ")[0]:r}_prependPathToReferences(r){let s=this._elementsWithExternalReferences;s&&s.forEach((c,l)=>{c.forEach(d=>{l.setAttribute(d.name,`url('${r}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(r){let s=r.querySelectorAll(l1),c=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<s.length;l++)Xg.forEach(d=>{let h=s[l],b=h.getAttribute(d),v=b?b.match(u1):null;if(v){let x=c.get(h);x||(x=[],c.set(h,x)),x.push({name:d,value:v[1]})}})}_updateSvgIcon(r){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),r){let[s,c]=this._splitIconName(r);s&&(this._svgNamespace=s),c&&(this._svgName=c),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(c,s).pipe(Dr(1)).subscribe(l=>this._setSvgElement(l),l=>{let d=`Error retrieving icon ${s}:${c}! ${l.message}`;this._errorHandler.handleError(new Error(d))})}}};e.\u0275fac=function(s){return new(s||e)(gt(ki),gt(r1),Im("aria-hidden"),gt(a1),gt(ws),gt(s1,8))},e.\u0275cmp=Sn({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(s,c){s&2&&(Oi("data-mat-icon-type",c._usingFontIcon()?"font":"svg")("data-mat-icon-name",c._svgName||c.fontIcon)("data-mat-icon-namespace",c._svgNamespace||c.fontSet)("fontIcon",c._usingFontIcon()?c.fontIcon:null),Fi(c.color?"mat-"+c.color:""),Rn("mat-icon-inline",c.inline)("mat-icon-no-color",c.color!=="primary"&&c.color!=="accent"&&c.color!=="warn"))},inputs:{color:"color",inline:[Jn.HasDecoratorInputTransform,"inline","inline",ei],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Ts,Mi],ngContentSelectors:e1,decls:1,vars:0,template:function(s,c){s&1&&(Li(),He(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Jg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ne({imports:[Ui,Ui]});let t=e;return t})();function f1(t,e){if(t&1){let i=Cs();Pe(0,"button",5),Ss("click",function(){vs(i);let s=ze().$implicit,c=ze();return ys(c.onButtonClick(s))}),Or(1),Ue()}if(t&2){let i=ze().$implicit;Is("background-color",i.buttonBackgroundColor)("color",i.buttonTextColor),An("matTooltip",i==null?null:i.buttonText),cn(),fl(" ",i.buttonText," ")}}function h1(t,e){if(t&1){let i=Cs();Pe(0,"button",5),Ss("click",function(){vs(i);let s=ze().$implicit,c=ze();return ys(c.onButtonClick(s))}),Pe(1,"mat-icon"),Or(2),Ue(),Or(3),Ue()}if(t&2){let i=ze().$implicit;Is("background-color",i.buttonBackgroundColor)("color",i.buttonTextColor),An("matTooltip",i==null?null:i.buttonText),cn(2),dl(i.buttonIcon),cn(),fl("",i.buttonText," ")}}function m1(t,e){if(t&1){let i=Cs();Pe(0,"button",6),Ss("click",function(){vs(i);let s=ze().$implicit,c=ze();return ys(c.onButtonClick(s))}),Pe(1,"mat-icon"),Or(2),Ue()()}if(t&2){let i=ze().$implicit;Is("background-color",i.buttonBackgroundColor)("color",i.buttonIconColor),An("matTooltip",i==null?null:i.buttonText),cn(2),dl(i.buttonIcon)}}function p1(t,e){if(t&1&&(Pe(0,"div",2),ul(1,f1,2,6,"button",3)(2,h1,4,7,"button",3)(3,m1,3,6,"button",4),Ue()),t&2){let i=e.$implicit;cn(),An("ngIf",i.buttonType==="TEXT-ONLY"),cn(),An("ngIf",i.buttonType==="TEXT+ICON"),cn(),An("ngIf",i.buttonType==="ICON-ONLY")}}var MN=(()=>{let e=class e{constructor(r){this.appUtils=r}onButtonClick(r){r.buttonAction==="SAVE"?this.parentContext.save():r.buttonAction==="ADD"||r.buttonAction==="LIST"?this.appUtils.routerNavigation({},r.redirectTo):r.buttonAction==="VIEW"||r.buttonAction==="EDIT"&&this.dataContext?this.appUtils.routerNavigation({data:JSON.stringify({id:this.dataContext.id,redirectFrom:r.redirectFrom})},r.redirectTo):r.buttonAction==="EDIT"&&this.dataContext===void 0&&this.parentContext&&this.parentContext.recordId&&this.appUtils.routerNavigation({data:JSON.stringify({id:this.parentContext.recordId,redirectFrom:r.redirectFrom})},r.redirectTo)}};e.\u0275fac=function(s){return new(s||e)(gt(Qm))},e.\u0275cmp=Sn({type:e,selectors:[["app-layout-action-buttons"]],inputs:{buttonData:"buttonData",parentContext:"parentContext",dataContext:"dataContext"},decls:2,vars:1,consts:[[1,"action-buttons"],["class","button",4,"ngFor","ngForOf"],[1,"button"],["mat-raised-button","","color","primary","matTooltipPosition","above",3,"background-color","color","matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary","matTooltipPosition","above",3,"background-color","color","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary","matTooltipPosition","above",3,"click","matTooltip"],["mat-mini-fab","","color","primary","matTooltipPosition","above",3,"click","matTooltip"]],template:function(s,c){s&1&&(Pe(0,"div",0),ul(1,p1,4,3,"div",1),Ue()),s&2&&(cn(),An("ngForOf",c.buttonData))},dependencies:[Rm,Nm,Hg,jg,Zg,tp],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;gap:5vh;align-items:center}"]});let t=e;return t})();var YN=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ne({imports:[km,Yg,Jg,Gg,ep]});let t=e;return t})();var e_=ZT(t_());var JN=(()=>{let e=class e{constructor(r){this.firebaseProvider=r}handleSave(r,s,c,l){let d=s.rootPath,h=r.find(b=>b[d]);if(h)if(Array.isArray(h[d])){let b=h[d].map(v=>this.processSave(v,s,r,c,d,l));return Promise.all(b).then(v=>v[0])}else return this.processSave(h[d],s,r,c,d,l);return Promise.resolve({id:"",rev:""})}processSave(r,s,c,l,d,h){return s.objectType!=="primary"&&s?.parentObject&&(r[s?.parentObject]=l),this.saveToDB(r,d,h).then(b=>{if(console.log(`Saved ${s.objectName} with ID: ${b}`),s&&s.childObject&&s.childObject.length>0){let v=s.childObject.map(x=>this.handleSave(c,x,b,h));return Promise.all(v).then(()=>({id:b,rev:r.rev}))}return{id:b,rev:r.rev}})}saveToDB(r,s,c){return Ft(this,null,function*(){let l=c.dataObject[s].id,d=c.dataObject[s].rev,h=l?"update":"add",b=this.findHierarchyByRootPath(c.objectHierarchy,s);try{let v=yield this.firebaseProvider.generateIdForPrimaryField(r.type,b);if(h==="add"){r[b.primaryFieldName]=v;let x={data:r,timestamp:Wt.database.ServerValue.TIMESTAMP,id:r.type+"_2_"+ar(),rev:"0_"+ar()};console.log("Saving new record to DB:",x);let E=yield this.firebaseProvider.create(x);return c.dataObject[s].id=E.id,c.dataObject[s].rev=E.rev,E.id}else{let x={data:r,id:l,rev:d};if(console.log("Updating existing record in DB:",x),c.dirtyStatus[s]){let E=yield this.firebaseProvider.update(l,d,x);return c.dataObject[s].id=E.id,c.dataObject[s].rev=E.rev,E.id}else return l}}catch(v){throw console.error("Error during ID generation or DB operation:",v),v}})}fetch(r,s,c){return Ft(this,null,function*(){for(let l of r){let d;if(l.objectType==="primary"){let h=yield this.firebaseProvider.queryDataWithFilter("ticRecordOBJECT","id",s,l.objectName);h&&h.length>0&&(d=h[0],c.dataObject[l.rootPath]=Cn(In({},d.data),{id:d.id,rev:d.rev}))}if(l.objectType==="ONETOONE"){let h=yield this.firebaseProvider.queryDataWithFilter("ticRecordOBJECT","data/"+l.parentObject,s,l.objectName);h&&h.length>0&&(d=h[0],c.dataObject[l.rootPath]=Cn(In({},d.data),{id:d.id,rev:d.rev}))}if(l.objectType==="ONETOMANY"){let h=yield this.firebaseProvider.queryDataByField("ticRecordOBJECT","data/"+l.parentKey,s);h&&h.length>0&&(c.dataObject[l.rootPath]=[],h.forEach(b=>{c.dataObject[l.rootPath].push(Cn(In({},b.data),{id:b.id,rev:b.rev}))}))}l.childObject&&l.childObject.length>0&&(yield this.fetch(l.childObject,d?.id,c))}})}listFetch(r,s,c){return Ft(this,null,function*(){let l=vg(),d=c;for(let h of s){let b=d;if(h.objectType==="primary"){let v=te(_o(l,"ticRecordOBJECT"),Na("data/type"),ka(r)),x=yield Aa(v);if(x.exists()){let E=x.val();E&&Object.keys(E).length>0&&Object.keys(E).forEach(R=>{let k={[h.objectName]:Cn(In({},E[R].data),{id:E[R].id,rev:E[R].rev})};b.push(k)})}}if(h.objectType==="ONETOONE"){let v=b.map(x=>Ft(this,null,function*(){let E=yield this.firebaseProvider.queryDataWithFilter("ticRecordOBJECT","data/"+h.parentObject,x[h.parentObject]?.id,h.objectName);if(E&&E[0]){let R=E[0].data;x[h.objectName]=Cn(In({},R),{id:E[0].id,rev:E[0].rev})}}));yield Promise.all(v)}if(h.childObject&&h.childObject.length>0){let v=yield this.listFetch("",h.childObject,b);d=d.concat(v)}}return d=(0,e_.uniqBy)(d,h=>{let b=Object.keys(h)[0];return h[b]?.id}),d})}findHierarchyByRootPath(r,s){for(let c of r){if(c.rootPath===s)return c;if(c.childObject&&c.childObject.length>0){let l=this.findHierarchyByRootPath(c.childObject,s);if(l)return l}}return null}};e.\u0275fac=function(s){return new(s||e)(V(Bg))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nk=(()=>{let e=class e{constructor(){this.layoutConfiguration={department_ENTRY:{layoutDisplayName:"Department Entry",headerActionInfo:[{buttonAction:"LIST",buttonType:"TEXT-ONLY",redirectTo:"department_LIST",redirectFrom:"department_ENTRY",buttonText:"Department List",buttonIcon:"",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"SAVE",buttonType:"TEXT+ICON",buttonText:"Save Department",buttonBackgroundColor:"#ff4081",buttonTextColor:"#fff",buttonIcon:"save",redirectNeeded:!0,redirectTo:"department_VIEW",redirectFrom:"department_ENTRY"}]},department_LIST:{layoutDisplayName:"department List",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"department_ENTRY",redirectFrom:"department_LIST",buttonText:"Add Department",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}],columnFieldInfo:[{fieldName:"department.departmentid",fieldDisplayName:"Department Id",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"department.departmentname",fieldDisplayName:"Department Name",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"department.status",fieldDisplayName:"Status",fieldType:"boolean",sortable:!0,editable:!0,editor:{type:"boolean",options:["Active","Inactive"]}},{fieldName:"department.view",fieldDisplayName:"View",fieldType:"action",buttonInfoSet:[{buttonAction:"VIEW",buttonType:"ICON-ONLY",buttonText:"Department View",buttonIcon:"visibility",redirectTo:"department_VIEW",redirectFrom:"department_LIST",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"}]},{fieldName:"department.adddepartment",fieldDisplayName:"Add Department",fieldType:"action",buttonInfoSet:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"department_ENTRY",redirectFrom:"department_LIST",buttonText:"Add Department",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}]},{fieldName:"department.editdepartment",fieldDisplayName:"Edit Department",fieldType:"action",buttonInfoSet:[{buttonAction:"EDIT",buttonType:"TEXT+ICON",redirectTo:"department_ENTRY",redirectFrom:"department_LIST",buttonText:"Edit department",buttonIcon:"edit",buttonBackgroundColor:"#ffce33",buttonTextColor:"#fff"}]}]},department_VIEW:{layoutDisplayName:"Department View",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"department_ENTRY",redirectFrom:"department_VIEW",buttonText:"Add Department",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"LIST",buttonType:"ICON-ONLY",buttonIcon:"lists",redirectTo:"department_LIST",redirectFrom:"department_VIEW",buttonText:"Department List",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"},{buttonAction:"EDIT",buttonType:"ICON-ONLY",buttonIcon:"edit",redirectTo:"department_ENTRY",redirectFrom:"department_VIEW",buttonText:"Edit Department",buttonBackgroundColor:"#1e8347",buttonIconColor:"#fff"}]},location_ENTRY:{layoutDisplayName:"Location Entry",headerActionInfo:[{buttonAction:"LIST",buttonType:"TEXT-ONLY",redirectTo:"location_LIST",redirectFrom:"location_ENTRY",buttonText:"Location List",buttonIcon:"",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"SAVE",buttonType:"TEXT+ICON",buttonText:"Save Location",buttonBackgroundColor:"#ff4081",buttonTextColor:"#fff",buttonIcon:"save",redirectNeeded:!0,redirectTo:"location_VIEW",redirectFrom:"location_ENTRY"}]},location_VIEW:{layoutDisplayName:"Location View",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"location_ENTRY",redirectFrom:"location_VIEW",buttonText:"Add Location",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"LIST",buttonType:"ICON-ONLY",buttonIcon:"lists",redirectTo:"location_LIST",redirectFrom:"location_VIEW",buttonText:"Location List",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"},{buttonAction:"EDIT",buttonType:"ICON-ONLY",buttonIcon:"edit",redirectTo:"location_ENTRY",redirectFrom:"location_VIEW",buttonText:"Edit Location",buttonBackgroundColor:"#1e8347",buttonIconColor:"#fff"}]},location_LIST:{layoutDisplayName:"Location List",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"location_ENTRY",redirectFrom:"location_LIST",buttonText:"Add Location",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}],columnFieldInfo:[{fieldName:"location.locationid",fieldDisplayName:"Location Id",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"location.locationname",fieldDisplayName:"Location Name",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"location.status",fieldDisplayName:"Status",fieldType:"boolean",sortable:!0,editable:!0,editor:{type:"boolean",options:["Active","Inactive"]}},{fieldName:"location.view",fieldDisplayName:"View",fieldType:"action",buttonInfoSet:[{buttonAction:"VIEW",buttonType:"ICON-ONLY",buttonText:"location View",buttonIcon:"visibility",redirectTo:"location_VIEW",redirectFrom:"location_LIST",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"}]},{fieldName:"location.addlocation",fieldDisplayName:"Add location",fieldType:"action",buttonInfoSet:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"location_ENTRY",redirectFrom:"location_LIST",buttonText:"Add location",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}]},{fieldName:"location.editlocation",fieldDisplayName:"Edit location",fieldType:"action",buttonInfoSet:[{buttonAction:"EDIT",buttonType:"TEXT+ICON",redirectTo:"location_ENTRY",redirectFrom:"location_LIST",buttonText:"Edit location",buttonIcon:"edit",buttonBackgroundColor:"#ffce33",buttonTextColor:"#fff"}]}]},Employee_ENTRY:{layoutDisplayName:"Employee Entry",headerActionInfo:[{buttonAction:"LIST",buttonType:"TEXT-ONLY",redirectTo:"Employee_LIST",redirectFrom:"Employee_ENTRY",buttonText:"Employee List",buttonIcon:"",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"SAVE",buttonType:"TEXT+ICON",buttonText:"Save Employee",buttonBackgroundColor:"#ff4081",buttonTextColor:"#fff",buttonIcon:"save",redirectNeeded:!0,redirectTo:"Employee_VIEW",redirectFrom:"Employee_ENTRY"}],mappingDetails:{"employee_DUMMY$$employeeAddInfo.gender":[{displayName:"Male",value:"male"},{displayName:"Female",value:"female"}],"employee_DUMMY.qualification":[{displayName:"Graduate",value:"graduate"},{displayName:"Post Graduate",value:"postgraduate"},{displayName:"PhD",value:"phn"},{displayName:"Other",value:"others"}]}},Employee_VIEW:{layoutDisplayName:"Employee View",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"Employee_ENTRY",redirectFrom:"Employee_VIEW",buttonText:"Add Employee",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"},{buttonAction:"LIST",buttonType:"ICON-ONLY",buttonIcon:"lists",redirectTo:"Employee_LIST",redirectFrom:"Employee_VIEW",buttonText:"Employee List",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"},{buttonAction:"EDIT",buttonType:"ICON-ONLY",buttonIcon:"edit",redirectTo:"Employee_ENTRY",redirectFrom:"Employee_VIEW",buttonText:"Edit Employee",buttonBackgroundColor:"#1e8347",buttonIconColor:"#fff"}]},Employee_LIST:{layoutDisplayName:"Employee List",headerActionInfo:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"Employee_ENTRY",redirectFrom:"Employee_LIST",buttonText:"Add Employee",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}],columnFieldInfo:[{fieldName:"employee.employeeid",fieldDisplayName:"Employee Id",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"employee.employeename",fieldDisplayName:"Employee Name",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"employee.qualification",fieldDisplayName:"Qualification",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"employee.dateofbirth",fieldDisplayName:"Date of Birth",sortable:!0,editable:!0,fieldType:"string",editor:{type:"text"}},{fieldName:"employee.view",fieldDisplayName:"View",fieldType:"action",buttonInfoSet:[{buttonAction:"VIEW",buttonType:"ICON-ONLY",buttonText:"Employee View",buttonIcon:"visibility",redirectTo:"Employee_VIEW",redirectFrom:"Employee_LIST",buttonBackgroundColor:"#ff4081",buttonIconColor:"#fff"}]},{fieldName:"employee.addemployee",fieldDisplayName:"Add Employee",fieldType:"action",buttonInfoSet:[{buttonAction:"ADD",buttonType:"TEXT-ONLY",redirectTo:"Employee_ENTRY",redirectFrom:"Employee_LIST",buttonText:"Add Employee",buttonBackgroundColor:"#3fb5b5",buttonTextColor:"#fff"}]},{fieldName:"employee.phonenumber",fieldDisplayName:"Phone Number",sortable:!0,editable:!0,fieldType:"number",editor:{type:"number"}},{fieldName:"employee.editemployee",fieldDisplayName:"Edit Employee",fieldType:"action",buttonInfoSet:[{buttonAction:"EDIT",buttonType:"TEXT+ICON",redirectTo:"Employee_ENTRY",redirectFrom:"Employee_LIST",buttonText:"Edit Employee",buttonIcon:"edit",buttonBackgroundColor:"#ffce33",buttonTextColor:"#fff"}]},{fieldName:"employee.age",fieldDisplayName:"Age",sortable:!0,editable:!0,fieldType:"number",editor:{type:"number"}},{fieldName:"employeeAddInfo.employeeaddinfoid",fieldDisplayName:"Employee Add Info",fieldType:"string",sortable:!0,editable:!0,editor:{type:"text"}},{fieldName:"employeeAddInfo.aadharnumber",fieldDisplayName:"Aadhar Number",fieldType:"number",sortable:!0,editable:!0,editor:{type:"number"}},{fieldName:"employeeAddInfo.gender",fieldDisplayName:"Gender",fieldType:"string",sortable:!0,editable:!0,editor:{type:"select",options:["Male","Female"]}},{fieldName:"employeeMainRecord.employeeMainRecordId",fieldDisplayName:"Employee Main Record Id",fieldType:"string",sortable:!0,editable:!0,editor:{type:"text"}},{fieldName:"employeeMainRecord.familyMembers",fieldDisplayName:"Family Members",fieldType:"number",sortable:!0,editable:!0,editor:{type:"number"}},{fieldName:"employeeMainRecord.address",fieldDisplayName:"Address",fieldType:"string",sortable:!0,editable:!0,editor:{type:"textarea"}},{fieldName:"employeeStatusInfo.employeeStatusInfoId",fieldDisplayName:"Employee Status Info Id",fieldType:"string",sortable:!0,editable:!0,editor:{type:"text"}},{fieldName:"employeeStatusInfo.status",fieldDisplayName:"Status",fieldType:"boolean",sortable:!0,editable:!0,editor:{type:"boolean",options:["Active","Inactive"]}}]}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{P1 as a,O1 as b,ar as c,jR as d,Bg as e,Hg as f,jg as g,Yg as h,Zg as i,Jg as j,MN as k,YN as l,t_ as m,nk as n,JN as o};
